"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[8995],{31788:(j,I,c)=>{c.d(I,{S:()=>f});var o=c(96814),g=c(64190),e=c(55006),m=c(65879);let f=(()=>{class v{constructor(){this.padding="p-2"}static{this.\u0275fac=function(y){return new(y||v)}}static{this.\u0275cmp=m.Xpm({type:v,selectors:[["section-content"]],inputs:{padding:"padding"},standalone:!0,features:[m.jDz],decls:3,vars:3,template:function(y,x){1&y&&(m._UZ(0,"user-navbar"),m.TgZ(1,"div"),m._UZ(2,"router-outlet"),m.qZA()),2&y&&(m.xp6(1),m.Gre("content ",x.padding,""))},dependencies:[o.ez,g.lC,e.o]})}}return v})()},61158:(j,I,c)=>{c.d(I,{z:()=>O});var o=c(65879),g=c(96814),e=c(824),m=c(64190),f=c(89515);let v=(()=>{class u{constructor(){this.text=""}static{this.\u0275fac=function(r){return new(r||u)}}static{this.\u0275cmp=o.Xpm({type:u,selectors:[["section-title"]],inputs:{text:"text"},standalone:!0,features:[o.jDz],decls:4,vars:3,consts:[[1,"section-title","py-1","border-bottom"],[1,"text-center","fs-20","primary"]],template:function(r,_){1&r&&(o.TgZ(0,"div",0)(1,"h2",1),o._uU(2),o.ALo(3,"translate"),o.qZA()()),2&r&&(o.xp6(2),o.Oqu(o.lcZ(3,1,_.text)))},dependencies:[g.ez,f.aw,f.X$],encapsulation:2})}}return u})();var h=c(17476);function K(u,C){if(1&u&&o._UZ(0,"img",12),2&u){const d=o.oxw(2).$implicit;o.Q6J("ngSrc",d.img)}}function y(u,C){if(1&u&&o._UZ(0,"i"),2&u){const d=o.oxw(2).$implicit;o.Gre("bx ",d.icon,"")}}function x(u,C){if(1&u&&(o.TgZ(0,"a",8),o.YNc(1,K,1,1,"img",9),o.YNc(2,y,1,3,"i",10),o.TgZ(3,"p",11),o._uU(4),o.ALo(5,"translate"),o.qZA()()),2&u){const d=o.oxw().$implicit;o.Q6J("routerLink",d.link),o.xp6(1),o.Q6J("ngIf",d.img),o.xp6(1),o.Q6J("ngIf",d.icon),o.xp6(2),o.Oqu(o.lcZ(5,4,d.title))}}function b(u,C){if(1&u&&(o.ynx(0),o.YNc(1,x,6,6,"a",7),o.BQk()),2&u){const d=C.$implicit,r=o.oxw();o.xp6(1),o.Q6J("ngIf",r.shouldDisplayLink(d))}}let O=(()=>{class u{constructor(){this.list=[],this.sectionTitle="",this.rolesSer=(0,o.f3M)(h.f)}shouldDisplayLink(d){if(!this.rolesSer.rolesLoaded$.value)return!1;const r=this.rolesSer.getUserRoles(),_=!d.roles||0===d.roles.length||d.roles.some(T=>r.includes(T)),Z=d.excludeRoles&&d.excludeRoles.some(T=>r.includes(T));return _&&!Z}static{this.\u0275fac=function(r){return new(r||u)}}static{this.\u0275cmp=o.Xpm({type:u,selectors:[["sub-sidebar"]],inputs:{list:"list",sectionTitle:"sectionTitle"},standalone:!0,features:[o.jDz],decls:11,vars:8,consts:[["magicScroll","",1,"sub-sidebar","h-100v","bg-white","border-right","p-1"],[1,"mt-1","primary","fs-25","bold","text-center"],[2,"color","#65C7C3"],[1,"content"],[3,"text"],[1,"items-list","py-2","ml-50"],[4,"ngFor","ngForOf"],["class","item flex aic gap-x-1 img rounded-tl-5 rounded-bl-5","routerLinkActive","active primary-image-container",3,"routerLink",4,"ngIf"],["routerLinkActive","active primary-image-container",1,"item","flex","aic","gap-x-1","img","rounded-tl-5","rounded-bl-5",3,"routerLink"],["alt","Taskedin logo","width","16","height","16","class","convert-image-color",3,"ngSrc",4,"ngIf"],[3,"class",4,"ngIf"],[1,"fs-14"],["alt","Taskedin logo","width","16","height","16",1,"convert-image-color",3,"ngSrc"]],template:function(r,_){1&r&&(o.TgZ(0,"div",0)(1,"p",1),o._uU(2),o.ALo(3,"translate"),o.TgZ(4,"span",2),o._uU(5),o.ALo(6,"translate"),o.qZA()(),o.TgZ(7,"div",3),o._UZ(8,"section-title",4),o.TgZ(9,"div",5),o.YNc(10,b,2,1,"ng-container",6),o.qZA()()()),2&r&&(o.xp6(2),o.Oqu(o.lcZ(3,4,"_tasked")),o.xp6(3),o.Oqu(o.lcZ(6,6,"_in")),o.xp6(3),o.Q6J("text",_.sectionTitle),o.xp6(2),o.Q6J("ngForOf",_.list))},dependencies:[g.ez,g.sg,g.O5,e.h,g.Zd,m.Od,m.rH,v,f.aw,f.X$],styles:[".sub-sidebar[_ngcontent-%COMP%]{width:195px}.item[_ngcontent-%COMP%]:not(:last-child){margin-bottom:20px}.item.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}"]})}}return u})()},9004:(j,I,c)=>{c.d(I,{D:()=>C});var o=c(65879),g=c(96814),e=c(70468),m=c(54807),f=c(56223),v=c(89515),h=c(24110);function K(d,r){if(1&d&&o._UZ(0,"filter-label",3),2&d){const _=o.oxw();o.Q6J("key",_.label)}}function y(d,r){if(1&d&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"slice"),o.qZA()),2&d){const _=o.oxw().items;o.xp6(1),o.hij("",o.Dn7(2,1,_[0].name,0,10),"...")}}function x(d,r){if(1&d&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&d){const _=o.oxw().items;o.xp6(1),o.Oqu(_[0].name)}}function b(d,r){if(1&d&&(o.TgZ(0,"div",12)(1,"span",13),o._uU(2),o.ALo(3,"translate"),o.qZA()()),2&d){const _=o.oxw().items;o.xp6(2),o.AsE("",_.length-1," ",o.lcZ(3,2,"more"),"...")}}function O(d,r){if(1&d){const _=o.EpF();o.TgZ(0,"div",6)(1,"span",7)(2,"span",8),o.YNc(3,y,3,5,"span",9),o.YNc(4,x,2,1,"span",9),o.qZA()(),o.TgZ(5,"span",10),o.NdJ("click",function(){const T=o.CHM(_);return o.KtG((0,T.clear)(T.items[0]))}),o._uU(6,"\xd7"),o.qZA()(),o.YNc(7,b,4,4,"div",11)}if(2&d){const _=r.items;o.xp6(3),o.Q6J("ngIf",_[0].name.length>=10),o.xp6(1),o.Q6J("ngIf",_[0].name.length<10),o.xp6(3),o.Q6J("ngIf",_.length>1)}}function u(d,r){if(1&d&&(o.TgZ(0,"ng-select",4),o.ALo(1,"async"),o.YNc(2,O,8,3,"ng-template",5),o.qZA()),2&d){const _=o.oxw();o.Gre("",_.width," icon-input"),o.s9C("formControlName",_.formControlName),o.Q6J("items",o.lcZ(1,8,_.service.departments$))("clearSearchOnAdd",!0)("multiple",_.multiable)("closeOnSelect",_.closeOnSelect)}}let C=(()=>{class d{constructor(){this.label="departments",this.labelVisibilty=!0,this.width="w-24r",this.multiable=!0,this.selectedDepartment=this.multiable?[]:null,this.closeOnSelect=!1,this.formControlName=null,this.valueChanged=new o.vpe,this.service=(0,o.f3M)(h.U)}onChange(){this.valueChanged.emit(this.selectedDepartment)}static{this.\u0275fac=function(Z){return new(Z||d)}}static{this.\u0275cmp=o.Xpm({type:d,selectors:[["departments-form"]],inputs:{label:"label",labelVisibilty:"labelVisibilty",width:"width",multiable:"multiable",selectedDepartment:"selectedDepartment",closeOnSelect:"closeOnSelect",formControlName:"formControlName"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[o._Bn([],[{provide:f.gN,useExisting:f.sg}]),o.jDz],decls:3,vars:2,consts:[[1,"departments-filter"],[3,"key",4,"ngIf"],["bindLabel","name","bindValue","id","appendTo","body",3,"class","items","clearSearchOnAdd","multiple","closeOnSelect","formControlName",4,"ngIf"],[3,"key"],["bindLabel","name","bindValue","id","appendTo","body",3,"items","clearSearchOnAdd","multiple","closeOnSelect","formControlName"],["ng-multi-label-tmp",""],[1,"ng-value","flex","aic"],[1,"ng-value-label"],[1,"flex","aic","fs-10"],[4,"ngIf"],["aria-hidden","true",1,"ng-value-icon","right",3,"click"],["class","ng-value rounded-2",4,"ngIf"],[1,"ng-value","rounded-2"],[1,"ng-value-label","fs-10"]],template:function(Z,T){1&Z&&(o.TgZ(0,"div",0),o.YNc(1,K,1,1,"filter-label",1),o.YNc(2,u,3,10,"ng-select",2),o.qZA()),2&Z&&(o.xp6(1),o.Q6J("ngIf",T.labelVisibilty),o.xp6(1),o.Q6J("ngIf",T.formControlName))},dependencies:[g.ez,g.O5,g.Ov,g.OU,e.r,m.A0,m.w9,m.zB,f.u5,f.JJ,v.aw,v.X$,f.UX,f.u],encapsulation:2})}}return d})()},68995:(j,I,c)=>{c.r(I),c.d(I,{KpisModule:()=>Ci});var o=c(96814),g=c(64190),e=c(65879),m=c(61158),f=c(31788);let v=(()=>{class i{constructor(){this.defaultList=[{icon:"bx-line-chart",link:"user-kpis",title:"kpi",excludeRoles:["taskedin-super-admin"]},{icon:"bx-hdd",link:"kpis-bank",title:"kpis_bank",excludeRoles:["taskedin-super-admin"]},{icon:"bx-group",link:"kpis-users",title:"assign_kpis",excludeRoles:["taskedin-super-admin"],roles:["kpi-admin","can-access-admin","kpi-employee"]},{icon:"bx-star",link:"rater-kpis",title:"rate_kpis",excludeRoles:["taskedin-super-admin"],roles:["kpi-rater"]},{icon:"bx-group",link:"team-kpis",title:"teamKpis.teamPerformanceMetrics",excludeRoles:["taskedin-super-admin"],roles:["kpi-admin","can-access-admin","kpi-employee"]}]}ngOnInit(){}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["kpis"]],decls:5,vars:2,consts:[[1,"flex"],["sectionTitle","kpi",3,"list"],[1,"flex-auto"],[3,"padding"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e._UZ(1,"sub-sidebar",1),e.TgZ(2,"div",2)(3,"section-content",3),e._UZ(4,"router-outlet"),e.qZA()()()),2&a&&(e.xp6(1),e.Q6J("list",n.defaultList),e.xp6(2),e.Q6J("padding","p-2"))},dependencies:[g.lC,m.z,f.S]})}}return i})();var h=c(69862),K=c(17023),y=c(85447),x=c(96296),b=c(17700),O=c(17476),u=c(82603),C=c(8078),d=c(65668),r=c(56223),_=c(89515),Z=c(70474);const T=function(i,l){return{"app-dropdown-small":i,"app-dropdown-icon":l}};let L=(()=>{class i{constructor(t){this.datePipe=t,this.valueChanged=new e.vpe,this.classes="",this.small=!0,this.icon=!0,this.title="date",this.startDate=(new Date).setDate(1),this.endDate=new Date,this.clearable=!1,this.width="",this.hideLabel=!1,this.key="",this.rangeDates=[new Date(this.startDate),new Date(this.endDate)]}onChange(t){let a={startDate:this.datePipe.transform(t[0],"yyyy-MM-dd")||null,endDate:this.datePipe.transform(t[1],"yyyy-MM-dd")||null};this.valueChanged.emit(a)}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(o.uU))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["app-date-filter"]],inputs:{selectedValue:"selectedValue",classes:"classes",small:"small",icon:"icon",title:"title",startDate:"startDate",endDate:"endDate",clearable:"clearable",width:"width",hideLabel:"hideLabel",key:"key"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[e.jDz],decls:3,vars:5,consts:[[1,"card","flex","app-dropdown","relative","flex","aic",3,"ngClass"],["selectionMode","range",3,"ngModel","ngModelChange"],[1,"bx","bx-calendar","absolute","dropdown-icon"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-calendar",1),e.NdJ("ngModelChange",function(p){return n.onChange(p)})("ngModelChange",function(p){return n.rangeDates=p}),e.qZA(),e._UZ(2,"i",2),e.qZA()),2&a&&(e.Q6J("ngClass",e.WLB(2,T,n.small,n.icon)),e.xp6(1),e.Q6J("ngModel",n.rangeDates))},dependencies:[o.ez,o.mk,r.u5,r.JJ,r.On,_.aw,Z._8,Z.f],styles:[".p-calendar input{padding-inline-start:25px;padding-block:5px;font-size:13px;border-color:#e7e7e7}\n"],encapsulation:2})}}return i})();var U=c(52081),Q=c(9619);function ae(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"app-users-filter",13),e.NdJ("valueChanged",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.getfilterData(n,"user"))}),e.qZA()}2&i&&e.Q6J("getMyTeam",!0)("multi",!1)}function oe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",10),e.YNc(1,ae,1,2,"app-users-filter",11),e.TgZ(2,"app-date-filter",12),e.NdJ("valueChanged",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.getfilterData(n,"date"))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isManager)}}function le(i,l){if(1&i&&(e.TgZ(0,"div",14)(1,"p",15),e._UZ(2,"i",16),e.TgZ(3,"span"),e._uU(4),e.qZA()(),e.TgZ(5,"div",17),e._UZ(6,"i",18)(7,"p",19),e.qZA(),e.TgZ(8,"div",20)(9,"div")(10,"div",21),e._UZ(11,"i",22),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"p",23),e._uU(16),e.qZA()(),e.TgZ(17,"div")(18,"div",21),e._UZ(19,"i",24),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"p",23),e._uU(24),e.qZA()(),e.TgZ(25,"div")(26,"div",21),e._UZ(27,"i",25),e.TgZ(28,"span"),e._uU(29),e.ALo(30,"translate"),e.qZA()(),e.TgZ(31,"p",23),e._uU(32),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.categoryDetails.categoryName),e.xp6(3),e.Q6J("innerHTML",t.categoryDetails.categoryDescribtion,e.oJD),e.xp6(6),e.Oqu(e.lcZ(14,8,"target")),e.xp6(3),e.Oqu(t.categoryDetails.targetCategory),e.xp6(5),e.Oqu(e.lcZ(22,10,"achieved")),e.xp6(3),e.Oqu(t.categoryDetails.categoryValue),e.xp6(5),e.Oqu(e.lcZ(30,12,"weight")),e.xp6(3),e.Oqu(t.categoryDetails.categoryWeight)}}function se(i,l){if(1&i&&(e.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"span",29),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"arabicNumbers"),e.qZA()(),e.TgZ(9,"div",30)(10,"span",29),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"span",29),e._uU(14),e.ALo(15,"arabicNumbers"),e.qZA()()(),e.TgZ(16,"div",31),e._UZ(17,"chart-radial-bar",32),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.hij("",e.lcZ(5,9,"achieved")," : "),e.xp6(2),e.Gre("simibold ",(null==t.dashboard?null:t.dashboard.percentage)<35?"danger":(null==t.dashboard?null:t.dashboard.percentage)<70?"warning":"success",""),e.xp6(1),e.hij("",e.lcZ(8,11,null==t.dashboard?null:t.dashboard.percentage),"%"),e.xp6(4),e.hij("",e.lcZ(12,13,t.categoryId?"total_kpis":"total_kpi_categories")," : "),e.xp6(3),e.Oqu(e.lcZ(15,15,null==t.dashboard?null:t.dashboard.totalCount)),e.xp6(3),e.Q6J("details",t.dashboard)("hideDetails",!0)}}function re(i,l){if(1&i&&(e.TgZ(0,"div",35)(1,"div",36)(2,"div",37)(3,"h5",38),e._uU(4),e.qZA(),e.TgZ(5,"div",39)(6,"span"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"span",40),e._uU(10),e.ALo(11,"arabicDate"),e.qZA()()(),e._UZ(12,"chart-radial-bar",41),e.qZA()()),2&i){const t=l.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("routerLink",a.getKpiLink(t))("queryParams",a.getQueryParams()),e.xp6(3),e.Oqu(t.title),e.xp6(2),e.Gre("px-1 rounded-5 kpi-status-",t.kpiStatus,""),e.xp6(1),e.Oqu(e.lcZ(8,22,a.kpiStatus[t.kpiStatus])),e.xp6(3),e.Oqu(e.lcZ(11,24,t.endDate)),e.xp6(2),e.Q6J("details",t)("full",!0)("fillType","gradient")("percentSize","18px")("percentWeight",600)("percentOffset",-16)("percentColor","#222")("labelOffset",10)("labelColor","#222")("labelFontSize","10px")("labelWeight",500)("label","achieved")("labelValueColor",!1)("small",!0)}}function ce(i,l){if(1&i&&(e.TgZ(0,"div",33),e.YNc(1,re,13,26,"div",34),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.dashboardItems)}}function pe(i,l){1&i&&e._UZ(0,"loading")}let G=(()=>{class i{constructor(t,a,n,s,p,A){this.service=t,this.dialog=a,this.router=n,this.route=s,this.rolesSer=p,this.datePipe=A,this.selectedUser=null,this.startDate=this.getFormattedDate(new Date((new Date).getFullYear(),(new Date).getMonth(),1)),this.endDate=this.getFormattedDate(new Date),this.userId=this.route.snapshot.queryParams.userId||localStorage.getItem("id"),this.dashboardItems=[],this.kpiStatus=K.q,this.isManager=!1,this.categoryId=this.route.snapshot.params.id||null,this.categoryDetails=null}ngOnInit(){this.rolesSer.isManager.subscribe(t=>{this.isManager=t}),this.categoryId?(this.startDate=this.route.snapshot.queryParams.startDate,this.endDate=this.route.snapshot.queryParams.endDate,this.getKpisDashBoard()):this.getCategoryDashBoard()}getFormattedDate(t){return this.datePipe.transform(t,"yyyy-MM-dd")||""}getfilterData(t,a){"user"==a?(this.selectedUser=t,this.userId=this.selectedUser.id):"date"==a?(this.startDate=t.startDate,this.endDate=t.endDate):"state"==a&&(this.selectedTaskStatus=t),(this.userId||this.selectedTaskStatus||this.startDate&&this.endDate)&&this.getCategoryDashBoard()}getCategoryDashBoard(){this.loading=!0;let t=new h.LE;this.startDate&&(t=t.set("from",this.startDate)),this.endDate&&(t=t.set("To",this.endDate)),this.userId&&(t=t.set("employeeId",this.userId)),this.service.GetUserTotalAchievement(t).subscribe(a=>{a.success&&(this.dashboard={...a.data,achieved:a.data.percentage},this.getUserCategories())})}getKpisDashBoard(){this.loading=!0;let t=new h.LE;this.userId&&(t=t.set("employeeId",this.userId)),this.categoryId&&(t=t.set("CategoryId",this.categoryId)),this.startDate&&(t=t.set("from",this.startDate)),this.endDate&&(t=t.set("To",this.endDate)),this.service.getMyKpisHeader(t).subscribe(a=>{a.success&&(this.dashboard={...a.data,achieved:a.data.percentage},this.getKpisData())})}getUserCategories(){let t=new h.LE;this.userId&&(t=t.set("employeeId",this.userId)),this.categoryId&&(t=t.set("CategoryId",this.categoryId)),this.startDate&&(t=t.set("from",this.startDate)),this.endDate&&(t=t.set("To",this.endDate)),this.service.getKpiCategoryForEmployee(t).subscribe(a=>{a.success&&(this.dashboardItems=a.data.map(n=>({...n,title:n.categoryName,achived:n.achieved,category:!0})),this.loading=!1)})}getKpisData(){let t=new h.LE;this.userId&&(t=t.set("employeeId",this.userId)),this.categoryId&&(t=t.set("CategoryId",this.categoryId)),this.startDate&&(t=t.set("from",this.startDate)),this.endDate&&(t=t.set("To",this.endDate)),this.route.snapshot.queryParams.userId?this.service.getEmployeeSKpis(t).subscribe(a=>{a.success&&(this.categoryDetails=a.data.items[0],this.dashboardItems=a.data.items.map(n=>({...n,title:n.kpiName,achived:n.achieved,category:!1})),this.loading=!1)}):this.service.getMyKpis(t).subscribe(a=>{a.success&&(this.categoryDetails=a.data.items[0],this.dashboardItems=a.data.items.map(n=>({...n,title:n.kpiName,achived:n.achieved,category:!1})),this.loading=!1)})}openDetails(t){this.router.navigate([],{queryParams:{id:t.taskId},queryParamsHandling:"merge"}),this.dialog.open(y.TaskDetailsComponent,{data:{task:t.taskId||t},panelClass:"task-details-dialog"}).afterClosed().subscribe(n=>{})}getKpiLink(t){return this.categoryId?`/kpis/details/${t.id}`:`./${t.kpiCategoryId}`}getQueryParams(){const t={startDate:this.startDate,endDate:this.endDate};return this.selectedUser&&(t.userId=this.selectedUser.id),t}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(x.q),e.Y36(b.uw),e.Y36(g.F0),e.Y36(g.gz),e.Y36(O.f),e.Y36(o.uU))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["user-kpis"]],decls:14,vars:11,consts:[[1,"kpis-user-dashboard","pr-2"],[1,"mb-2","simibold","bg-light-danger","p-1","rounded"],[1,"dir","pt-1"],[1,"flex","jcsb","aic","mb-2"],[1,"fs-17","black","simibold"],["class","filter flex aic jcs mb-2 gap-x-1",4,"ngIf"],["class","bg-white p-2 rounded shadow mb-2 fs-14",4,"ngIf"],["class","bg-white p-3 rounded shadow flex jcsb mb-2 user-dashboard-chart",4,"ngIf"],["class","user-kpis-items flex-grid",4,"ngIf"],[4,"ngIf"],[1,"filter","flex","aic","jcs","mb-2","gap-x-1"],[3,"getMyTeam","multi","valueChanged",4,"ngIf"],[3,"valueChanged"],[3,"getMyTeam","multi","valueChanged"],[1,"bg-white","p-2","rounded","shadow","mb-2","fs-14"],[1,"pb-1","mb-1","border-bottom","flex","aic","fs-18","fw-500"],[1,"bx","bx-category","primary","mr-1"],[1,"mb-1","flex","aic"],[1,"bx","bx-align-justify","fs-18"],[3,"innerHTML"],[1,"flex","aic","jcsb"],[1,"flex","aic","gap-x-1"],[1,"bx","bx-target-lock","fs-18"],[1,"pl-25"],[1,"bx","bx-trophy","fs-18"],[1,"bx","bx-dumbbell","fs-18"],[1,"bg-white","p-3","rounded","shadow","flex","jcsb","mb-2","user-dashboard-chart"],[1,"content","flex-column","jcc"],[1,"fs-15","mb-1"],[1,"simibold","dark"],[1,"fs-15"],[1,"dash-header-chart","flex","aic","jce"],[3,"details","hideDetails"],[1,"user-kpis-items","flex-grid"],["class","col-lg-3 mb-3",4,"ngFor","ngForOf"],[1,"col-lg-3","mb-3"],[1,"bg-white","shadow","rounded","py-2","pointer",3,"routerLink","queryParams"],[1,"title","px-2","mb-2"],[1,"mb-1"],[1,"flex","jcsb","aic"],[1,"px-1","rounded-5","bg-gray"],[3,"details","full","fillType","percentSize","percentWeight","percentOffset","percentColor","labelOffset","labelColor","labelFontSize","labelWeight","label","labelValueColor","small"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"p",4),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.YNc(9,oe,3,1,"div",5),e.YNc(10,le,33,14,"div",6),e.YNc(11,se,18,17,"div",7),e.YNc(12,ce,2,1,"div",8),e.qZA(),e.YNc(13,pe,1,0,"loading",9)),2&a&&(e.xp6(2),e.Oqu(e.lcZ(3,7,"beta")),e.xp6(5),e.Oqu(e.lcZ(8,9,"kpi")),e.xp6(2),e.Q6J("ngIf",!n.categoryId&&n.isManager),e.xp6(1),e.Q6J("ngIf",n.categoryDetails),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading&&n.dashboardItems.length>0),e.xp6(1),e.Q6J("ngIf",n.loading))},dependencies:[o.sg,o.O5,g.rH,u.u,C.y,d.N,L,_.X$,U.m,Q.P],styles:[".kpis-user-dashboard[_ngcontent-%COMP%]{height:calc(100vh - 65px);overflow-y:auto;overflow-x:hidden;margin-inline-end:-2rem}.kpis-user-dashboard[_ngcontent-%COMP%]   .dash-header-chart[_ngcontent-%COMP%]{height:100px;margin-bottom:-35px;margin-inline-end:-60px}.kpi-status-1[_ngcontent-%COMP%]{background-color:#cf474733;color:#cf4747}.kpi-status-2[_ngcontent-%COMP%]{background-color:#ffa95c33;color:#ffa95c}.kpi-status-3[_ngcontent-%COMP%]{background-color:#7b55d333;color:#7b55d3}.kpi-status-4[_ngcontent-%COMP%]{background-color:#29cc9933;color:#29cc99}.kpi-status-5[_ngcontent-%COMP%]{background-color:#60606033;color:#606060}"]})}}return i})();var F=c(32296),H=c(70468),k=c(54807),D=c(92596);function de(i,l){if(1&i&&e._UZ(0,"i"),2&i){const t=e.oxw();e.Gre("fs-11 mr-50 bx ",t.icon,"")}}function _e(i,l){if(1&i&&e._UZ(0,"filter-label",5),2&i){const t=e.oxw();e.Q6J("key",t.label)}}function ue(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"i",10),e.NdJ("mouseover",function(){e.CHM(t);const n=e.oxw().item,s=e.oxw();return e.KtG(s.getEquation(n))}),e.TgZ(1,"span",11),e._uU(2),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.equation)}}function ge(i,l){if(1&i&&(e.TgZ(0,"span",8),e._uU(1),e.qZA()),2&i){const t=e.oxw().item;e.xp6(1),e.Oqu(t.dataSource)}}function me(i,l){if(1&i&&(e.TgZ(0,"div")(1,"span",6),e.YNc(2,ue,3,1,"i",7),e._uU(3),e.qZA(),e.TgZ(4,"span",8),e._uU(5),e.qZA(),e.YNc(6,ge,2,1,"span",9),e.qZA()),2&i){const t=l.item;e.Gre("flex-grid select-option-kpi-",l.index,""),e.xp6(2),e.Q6J("ngIf",t.id),e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.Oqu(t.unit),e.xp6(1),e.Q6J("ngIf",t.showDataSource)}}let he=(()=>{class i{constructor(t){this.service=t,this.icon="bx-category-alt",this.label="value_type",this.labelVisibilty=!0,this.width="w-100",this.multiable=!1,this.closeOnSelect=!0,this.formControlName=null,this.valueChanged=new e.vpe,this.allItems=[],this.language=localStorage.getItem("language"),this.equation="...",this.dataSourceFilter=null,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this.getItems()}ngOnChanges(t){t.dataSourceFilter&&this.getItems()}search(t){this.searchValue=t.term,this.getItems()}getItems(){let t=new h.LE;this.searchValue&&(t=t.set("search",this.searchValue)),this.dataSourceFilter&&(t=t.set("Type",this.dataSourceFilter)),this.service.getKpiValueType(t).subscribe(a=>{if(!a?.data||!Array.isArray(a.data))return;let n={valueTypeEn:"Value Type",valueTypeAr:"\u0646\u0648\u0639 \u0627\u0644\u0642\u064a\u0645\u0629",unitEn:"Unit",unitAr:"\u0627\u0644\u0648\u062d\u062f\u0629",dataSourceEn:"Data Source",dataSourceAr:"\u0645\u0635\u062f\u0631 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a",showDataSource:!1,name:null,unit:null,dataSource:null};n.name="en"===this.language?n.valueTypeEn:n.valueTypeAr,n.unit="en"===this.language?n.unitEn:n.unitAr,n.dataSource="en"===this.language?n.dataSourceEn:n.dataSourceAr;const s=a.data.map(p=>({...p,name:"en"===this.language?p.valueTypeEn:p.valueTypeAr,unit:"en"===this.language?p.unitEn:p.unitAr,dataSource:"en"===this.language?p.dataSourceEn:p.dataSourceAr,equation:p.equationEn&&p.equationAr?"en"===this.language?p.equationEn:p.equationAr:null}));this.allItems=[n,...s]})}getEquation(t){this.equation="...",this.service.kpiValueTypeToolTip(t.id).subscribe(a=>{this.equation=String("en"===this.language?a.equationEn:a.equationAr)})}onValueChange(t){this.onChange(t),this.onTouched(),this.valueChanged.emit(t)}writeValue(t){this.selectedItem=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(x.q))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["kpis-type-form"]],inputs:{icon:"icon",selectedItem:"selectedItem",label:"label",labelVisibilty:"labelVisibilty",width:"width",multiable:"multiable",closeOnSelect:"closeOnSelect",formControlName:"formControlName",dataSourceFilter:"dataSourceFilter"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[e._Bn([{provide:r.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}],[{provide:r.gN,useExisting:r.sg}]),e.TTD,e.jDz],decls:5,vars:10,consts:[[1,"value-type"],[3,"class",4,"ngIf"],[3,"key",4,"ngIf"],["bindLabel","name","bindValue","id","appendTo","body",3,"items","formControlName","multiple","clearable","closeOnSelect","search"],["ng-option-tmp",""],[3,"key"],[1,"py-50","col-sm-6","flex","aic"],["class","bx bx-info-circle mr-50 pointer relative bx-tool-tip fs-18",3,"mouseover",4,"ngIf"],[1,"py-50","col-sm-3"],["class","py-50 col-sm-3",4,"ngIf"],[1,"bx","bx-info-circle","mr-50","pointer","relative","bx-tool-tip","fs-18",3,"mouseover"],[1,"tool-tip","absolute","rounded","p-1","card-shadow","border","bg-white","fs-15"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.YNc(1,de,1,3,"i",1),e.YNc(2,_e,1,1,"filter-label",2),e.TgZ(3,"ng-select",3),e.NdJ("search",function(p){return n.search(p)}),e.YNc(4,me,7,7,"ng-template",4),e.qZA()()),2&a&&(e.xp6(1),e.Q6J("ngIf",n.icon),e.xp6(1),e.Q6J("ngIf",n.labelVisibilty),e.xp6(1),e.Gre("",n.width," icon-input"),e.Q6J("items",n.allItems)("formControlName",n.formControlName)("multiple",n.multiable)("clearable",!0)("closeOnSelect",n.closeOnSelect))},dependencies:[o.ez,o.O5,H.r,k.A0,k.w9,k.ir,r.u5,r.JJ,_.aw,r.UX,r.u,D.AV],styles:[".select-option-kpi-0{cursor:no-drop;font-weight:700}.bx-tool-tip .tool-tip{bottom:5px;inset-inline-start:15px;opacity:0;transition:all .3s;word-wrap:break-word;overflow-wrap:break-word;display:none}.bx-tool-tip:hover .tool-tip{opacity:1;display:inline-block}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{overflow:visible!important}\n"],encapsulation:2})}}return i})();function fe(i,l){if(1&i&&e._UZ(0,"i"),2&i){const t=e.oxw();e.Gre("fs-11 mr-50 bx ",t.icon,"")}}function xe(i,l){if(1&i&&e._UZ(0,"filter-label",4),2&i){const t=e.oxw();e.Q6J("key",t.label)}}let be=(()=>{class i{constructor(t){this.service=t,this.icon="bx-category-alt",this.label="kpi_category_name",this.labelVisibilty=!0,this.width="w-100",this.multiable=!1,this.closeOnSelect=!0,this.formControlName=null,this.valueChanged=new e.vpe,this.allItems=[],this.language=localStorage.getItem("language")}ngOnInit(){this.getItems()}search(t){this.searchValue=t.term,this.getItems()}getItems(){let t=(new h.LE).set("limit",30).set("IsApproved",!0);this.searchValue&&(t=t.set("search",this.searchValue)),this.service.getAllKpisCategory(t).subscribe(a=>{this.allItems=a.data.items.map(n=>n)})}onChange(){this.valueChanged.emit(this.selectedItem)}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(x.q))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["kpi-category-dropdown-form"]],inputs:{icon:"icon",selectedItem:"selectedItem",label:"label",labelVisibilty:"labelVisibilty",width:"width",multiable:"multiable",closeOnSelect:"closeOnSelect",formControlName:"formControlName"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[e._Bn([],[{provide:r.gN,useExisting:r.sg}]),e.jDz],decls:4,vars:9,consts:[[1,""],[3,"class",4,"ngIf"],[3,"key",4,"ngIf"],["bindLabel","name","bindValue","id","appendTo","body",3,"items","formControlName","multiple","closeOnSelect","search"],[3,"key"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.YNc(1,fe,1,3,"i",1),e.YNc(2,xe,1,1,"filter-label",2),e.TgZ(3,"ng-select",3),e.NdJ("search",function(p){return n.search(p)}),e.qZA()()),2&a&&(e.xp6(1),e.Q6J("ngIf",n.icon&&n.labelVisibilty),e.xp6(1),e.Q6J("ngIf",n.labelVisibilty),e.xp6(1),e.Gre("",n.width," icon-input"),e.Q6J("items",n.allItems)("formControlName",n.formControlName)("multiple",n.multiable)("closeOnSelect",n.closeOnSelect))},dependencies:[o.ez,o.O5,H.r,k.A0,k.w9,r.u5,r.JJ,_.aw,r.UX,r.u],encapsulation:2})}}return i})();var Ze=c(9004),J=function(i){return i.SEARCH="search",i.DEPARTMENT="department",i.CATEGORY="category",i.DATE="date",i}(J||{}),z=function(i){return i.Daily="daily",i.Weekly="weekly",i.Monthly="monthly",i.Quarterly="quarterly",i.Yearly="yearly",i}(z||{}),X=function(i){return i[i.TaskBased=1]="TaskBased",i[i.Increased=2]="Increased",i[i.Decreased=3]="Decreased",i}(X||{});const ve=[{label:"no_repeat",value:6},{label:"monthly",value:3}];var Te=c(58964),N=c(99758);function Ae(i,l){if(1&i&&(e.TgZ(0,"div",28)(1,"label",29),e._UZ(2,"i",30),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e._UZ(6,"kpi-category-dropdown-form",31)(7,"input-error",10),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,5,"kpi_category_name")),e.xp6(2),e.Q6J("labelVisibilty",!1)("selectedItem",t.data.item)("formControlName","categoryId"),e.xp6(1),e.Q6J("control",t.f.categoryId)}}function ye(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",32)(1,"label",33),e._UZ(2,"i",34),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",35)(7,"label",36)(8,"input",37),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onKpiTypeChange())}),e.qZA(),e.TgZ(9,"span",38)(10,"div",39)(11,"b",40),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"i",41),e.TgZ(15,"b"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",42),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e._UZ(21,"i",43),e.qZA()(),e.TgZ(22,"div",35)(23,"label",36)(24,"input",44),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onKpiTypeChange())}),e.qZA(),e.TgZ(25,"span",38)(26,"div",39)(27,"b",40),e._uU(28),e.ALo(29,"translate"),e.qZA(),e._UZ(30,"i",45),e.TgZ(31,"b"),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",42),e._uU(35),e.ALo(36,"translate"),e.qZA()(),e._UZ(37,"i",43),e.qZA()(),e.TgZ(38,"div",35)(39,"label",36)(40,"input",44),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onKpiTypeChange())}),e.qZA(),e.TgZ(41,"span",38)(42,"div",39)(43,"b"),e._uU(44),e.ALo(45,"translate"),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,11,"kpi_type")),e.xp6(4),e.Q6J("value",t.KpiType.Increased),e.xp6(4),e.hij(" ",e.lcZ(13,13,"basic_performance_indicator"),""),e.xp6(4),e.Oqu(e.lcZ(17,15,"increase_indicator")),e.xp6(3),e.Oqu(e.lcZ(20,17,"increase_indicator_desc")),e.xp6(5),e.Q6J("value",t.KpiType.Decreased),e.xp6(4),e.hij(" ",e.lcZ(29,19,"basic_performance_indicator"),""),e.xp6(4),e.Oqu(e.lcZ(33,21,"decrease_indicator")),e.xp6(3),e.Oqu(e.lcZ(36,23,"decrease_indicator_desc")),e.xp6(5),e.Q6J("value",t.KpiType.TaskBased),e.xp6(4),e.Oqu(e.lcZ(45,25,"task_performance_indicator"))}}function Ce(i,l){if(1&i&&(e.TgZ(0,"div",11),e._UZ(1,"kpis-type-form",46)(2,"input-error",10),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("dataSourceFilter",t.form.controls.kpiType.value)("formControlName","valueTypeId"),e.xp6(1),e.Q6J("control",t.f.valueTypeId)}}const W=function(i){return{"ng-dirty ng-invalid":i}};function ke(i,l){if(1&i&&(e.TgZ(0,"div",5)(1,"label",7),e._UZ(2,"i",47),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e._UZ(6,"p-calendar",48)(7,"input-error",10),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,4,"date_from")),e.xp6(2),e.Q6J("showIcon",!0)("ngClass",e.VKq(6,W,t.form.controls.dateFrom.invalid&&t.form.controls.dateFrom.touched)),e.xp6(1),e.Q6J("control",t.f.dateFrom)}}function qe(i,l){if(1&i&&(e.TgZ(0,"div",5)(1,"label",7),e._UZ(2,"i",47),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e._UZ(6,"p-calendar",49)(7,"input-error",10),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,4,"date_to")),e.xp6(2),e.Q6J("showIcon",!0)("ngClass",e.VKq(6,W,t.form.controls.dateTo.invalid&&t.form.controls.dateTo.touched)),e.xp6(1),e.Q6J("control",t.f.dateTo)}}function Ie(i,l){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,l.item.label)," ")}function we(i,l){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,l.item.label)," ")}function Ke(i,l){if(1&i&&(e.TgZ(0,"div",5)(1,"label",50),e._UZ(2,"i",51),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"ng-select",52),e.YNc(7,Ie,2,3,"ng-template",53),e.YNc(8,we,2,3,"ng-template",54),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,3,"KPI_Repetition")),e.xp6(2),e.Q6J("clearable",!1)("items",t.kpiRepetitionOptions)}}function Ue(i,l){1&i&&(e.TgZ(0,"div",5)(1,"label",7),e._UZ(2,"i",55),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e._UZ(6,"departments-form",56),e.qZA()),2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,4,"departments")),e.xp6(2),e.Q6J("labelVisibilty",!1)("multiable",!0)("formControlName","departmentId"))}function Oe(i,l){1&i&&(e.TgZ(0,"div",11)(1,"div",57)(2,"div",58)(3,"span",59),e._UZ(4,"i",60),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",61)(8,"label",62),e._UZ(9,"input",63)(10,"span",64),e._uU(11),e.ALo(12,"translate"),e.qZA()()()()),2&i&&(e.xp6(5),e.hij(" ",e.lcZ(6,2,"allow_over_achievement")," "),e.xp6(6),e.hij(" ",e.lcZ(12,4,"yes")," "))}let Le=(()=>{class i{constructor(t,a,n,s,p,A){if(this.service=t,this.data=a,this.dialogRef=n,this.alert=s,this.fb=p,this.datePipe=A,this.editMode=this.data.update,this.kpiMode=this.data.kpi,this.allItems=[],this.KpiType=X,this.kpiRepetitionOptions=ve,this.isSubmitting=!1,this.kpiMode){let q;q=this.editMode?this.data.item.categoryId:null,this.form=this.fb.group({name:["",r.kI.required],describtion:[""],weight:[0,[r.kI.required,r.kI.pattern("^[0-9]*$"),r.kI.min(1)]],target:[0,[r.kI.required,r.kI.pattern("^[0-9]*$")]],evaluationFrequency:[6],departmentId:[null],dateFrom:["",r.kI.required],dateTo:["",r.kI.required],valueTypeId:[null,r.kI.required],categoryId:[q,r.kI.required],kpiType:[2,r.kI.required],isOverAchive:[!1]})}else this.form=this.fb.group({name:["",r.kI.required],weight:[0,[r.kI.required,r.kI.pattern("^[0-9]*$")]],target:[0,[r.kI.required,r.kI.pattern("^[0-9]*$")]],describtion:[""]})}ngOnInit(){this.editMode&&this.form.patchValue({...this.data.item,dateFrom:new Date(this.data.item.dateFrom),dateTo:new Date(this.data.item.dateTo)})}get f(){return this.form.controls}createOrUpdate(){if(this.isSubmitting)return;this.form.value.dateFrom&&(this.form.value.dateFrom=this.datePipe.transform(this.form.value.dateFrom,"yyyy-MM-dd")),this.form.value.dateTo&&(this.form.value.dateTo=this.datePipe.transform(this.form.value.dateTo,"yyyy-MM-dd")),this.form.value.evaluationFrequency||(this.form.value.evaluationFrequency=0);let t=this.form.value;this.form.valid?(this.isSubmitting=!0,this.kpiMode?this.editMode?(t.id=this.data.item.id,this.service.updateKpi(t).subscribe({next:a=>{a?.success&&(this.alert.showAlert("success"),this.dialogRef.close(!0))},complete:()=>{this.isSubmitting=!1}})):this.service.createKpi(t).subscribe({next:a=>{a?.success&&(this.alert.showAlert("success"),this.dialogRef.close(!0))},complete:()=>{this.isSubmitting=!1}}):this.editMode?(t.id=this.data.item.id,this.service.updateKpisCategory(t).subscribe({next:a=>{a?.success&&(this.alert.showAlert("success"),this.dialogRef.close(!0))},complete:()=>{this.isSubmitting=!1}})):this.service.createKpisCategory(t).subscribe({next:a=>{a?.success&&(this.alert.showAlert("success"),this.dialogRef.close(!0))},complete:()=>{this.isSubmitting=!1}})):this.form.markAllAsTouched()}onKpiTypeChange(){this.form.get("valueTypeId")?.reset()}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(x.q),e.Y36(b.WI),e.Y36(b.so),e.Y36(N.c),e.Y36(r.qu),e.Y36(o.uU))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["kpi-form"]],standalone:!0,features:[e.jDz],decls:59,vars:34,consts:[[1,"p-2","dir"],[1,"mb-2","fs-18","simibold"],[1,"kpi-create-form",3,"formGroup"],[1,"row"],["class","col-lg-6 mb-2 flex-column",4,"ngIf"],[1,"col-lg-6","mb-2"],[1,"label","flex","aic","jcsb"],["for","name",1,"fs-11","simibold"],[1,"mr-50","bx","bx-text"],["type","text","formControlName","name",1,"input"],[3,"control"],[1,"col-lg-12","mb-2"],["for","birth-date",1,"fs-11","simibold"],[1,"mr-50","bx","bx-align-justify"],["formControlName","describtion",1,"input"],["class","col-lg-12",4,"ngIf"],["class","col-lg-12 mb-2",4,"ngIf"],[1,"mr-50","bx","bx-target-lock"],["type","number","formControlName","target",1,"input"],[1,"mr-50","bx","bx-dumbbell"],[1,"position-relative"],["type","number","pattern","[0-9]*","formControlName","weight",1,"input"],[1,"input-suffix"],[3,"control","message"],["class","col-lg-6 mb-2",4,"ngIf"],[1,"text-right"],["type","submit","mat-button","",1,"bg-white","primary","py-1","px-2","border-primary","rounded","pointer",3,"click"],["type","submit","mat-button","",1,"bg-primary","white","py-1","px-2","border-primary","rounded","pointer","ml-1",3,"click"],[1,"col-lg-6","mb-2","flex-column"],["for","name",1,"fs-11","simibold","w-100"],[1,"mr-50","bx","bx-category"],[1,"w-100",3,"labelVisibilty","selectedItem","formControlName"],[1,"col-lg-12"],[1,"fs-11","simibold","d-block"],[1,"mr-50","bx","bx-category-alt"],[1,"col-lg-12","mb-2","px-0"],[1,"custom-radio-box"],["type","radio","formControlName","kpiType","name","kpiType","checked","",3,"value","change"],[1,"radio-label"],[1,"flex","aic"],[1,"mr-1"],[1,"mr-50","bx","bx-up-arrow-circle","bold"],[1,"desc"],[1,"bx","bx-info-circle"],["type","radio","formControlName","kpiType","name","kpiType",3,"value","change"],[1,"mr-50","bx","bx-down-arrow-circle","bold"],[3,"dataSourceFilter","formControlName"],[1,"mr-50","bx","bx-calendar"],["formControlName","dateFrom","inputId","icondisplay",3,"showIcon","ngClass"],["formControlName","dateTo","inputId","icondisplay",3,"showIcon","ngClass"],["for","kpiRepetition",1,"fs-11","simibold"],[1,"mr-50","bx","bx-repeat"],["appendTo","body","bindValue","value","bindLabel","label","formControlName","evaluationFrequency",3,"clearable","items"],["ng-option-tmp",""],["ng-label-tmp",""],[1,"mr-50","bx","bx-buildings"],["width","w-100",3,"labelVisibilty","multiable","formControlName"],[1,"over-achievement-row"],[1,"label-row"],[1,"main-label"],[1,"bx","bx-check"],[1,"checkbox-row"],[1,"custom-checkbox-label"],["type","checkbox","formControlName","isOverAchive"],[1,"custom-checkbox"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"form",2)(5,"div",3),e.YNc(6,Ae,8,7,"div",4),e.TgZ(7,"div",5)(8,"div",6)(9,"label",7),e._UZ(10,"i",8),e.TgZ(11,"span"),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e._UZ(14,"input",9)(15,"input-error",10),e.qZA(),e.TgZ(16,"div",11)(17,"div",6)(18,"label",12),e._UZ(19,"i",13),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"translate"),e.qZA()()(),e._UZ(23,"textarea",14),e.qZA(),e.YNc(24,ye,46,27,"div",15),e.YNc(25,Ce,3,3,"div",16),e.TgZ(26,"div",5)(27,"div",6)(28,"label",12),e._UZ(29,"i",17),e.TgZ(30,"span"),e._uU(31),e.ALo(32,"translate"),e.qZA()()(),e._UZ(33,"input",18)(34,"input-error",10),e.qZA(),e.TgZ(35,"div",5)(36,"div",6)(37,"label",12),e._UZ(38,"i",19),e.TgZ(39,"span"),e._uU(40),e.ALo(41,"translate"),e.qZA()()(),e.TgZ(42,"div",20),e._UZ(43,"input",21),e.TgZ(44,"span",22),e._uU(45,"%"),e.qZA(),e._UZ(46,"input-error",23),e.qZA()(),e.YNc(47,ke,8,8,"div",24),e.YNc(48,qe,8,8,"div",24),e.YNc(49,Ke,9,5,"div",24),e.YNc(50,Ue,7,6,"div",24),e.YNc(51,Oe,13,6,"div",16),e.qZA()(),e.TgZ(52,"div",25)(53,"button",26),e.NdJ("click",function(){return n.dialogRef.close()}),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"button",27),e.NdJ("click",function(){return n.createOrUpdate()}),e._uU(57),e.ALo(58,"translate"),e.qZA()()()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,20,n.kpiMode&&n.editMode?"edit_kpi":!n.kpiMode&&n.editMode?"edit_kpi_category":n.kpiMode&&!n.editMode?"create_kpi":n.kpiMode||n.editMode?"":"create_kpi_category")," "),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("ngIf",n.kpiMode),e.xp6(6),e.Oqu(e.lcZ(13,22,n.kpiMode?"kpi_name":"kpi_category_name")),e.xp6(3),e.Q6J("control",n.f.name),e.xp6(6),e.Oqu(e.lcZ(22,24,"description")),e.xp6(3),e.Q6J("ngIf",n.kpiMode),e.xp6(1),e.Q6J("ngIf",n.kpiMode),e.xp6(6),e.Oqu(e.lcZ(32,26,"target")),e.xp6(3),e.Q6J("control",n.f.target),e.xp6(6),e.Oqu(e.lcZ(41,28,"weight")),e.xp6(6),e.Q6J("control",n.f.weight)("message","weight_must_be_greater_than_zero"),e.xp6(1),e.Q6J("ngIf",n.kpiMode),e.xp6(1),e.Q6J("ngIf",n.kpiMode),e.xp6(1),e.Q6J("ngIf",n.kpiMode),e.xp6(1),e.Q6J("ngIf",n.kpiMode),e.xp6(1),e.Q6J("ngIf",n.kpiMode),e.xp6(3),e.Oqu(e.lcZ(55,30,"cancel")),e.xp6(3),e.Oqu(e.lcZ(58,32,n.editMode?"save":"add")))},dependencies:[_.aw,_.X$,F.ot,F.lW,o.ez,o.mk,o.O5,r.UX,r._Y,r.Fj,r.wV,r.Wl,r._,r.JJ,r.JL,r.c5,r.sg,r.u,he,be,Ze.D,Z._8,Z.f,k.A0,k.w9,k.ir,k.mR,Te.w],styles:['.p-calendar[_ngcontent-%COMP%]{width:100%}.custom-radio-box[_ngcontent-%COMP%]{align-items:center;background:#fff;border:1px solid #e7e7e7;border-radius:8px;padding:10px;margin-left:0;cursor:pointer;position:relative;display:flex;flex-direction:row;justify-content:space-between;transition:box-shadow .2s}.custom-radio-box[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.custom-radio-box[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{display:flex;flex-direction:row}.radio-label[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-size:10px}.custom-radio-box[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{color:#8a8a8a;font-size:10px;margin-inline-start:10px}.custom-radio-box[_ngcontent-%COMP%]:has(input[type=radio]:checked){background:#f6f3ff;border-color:#a084e8}.over-achievement-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-bottom:16px}.label-row[_ngcontent-%COMP%]{margin-bottom:4px}.main-label[_ngcontent-%COMP%]{color:#888;font-size:16px;font-weight:500;display:flex;align-items:center;gap:4px}.main-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#888;font-size:18px}.checkbox-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.custom-checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;color:#aaa;font-size:15px;cursor:pointer;gap:8px;position:relative}.custom-checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;width:0;height:0;position:absolute}.custom-checkbox[_ngcontent-%COMP%]{width:22px;height:22px;border:2px solid #a084e8;border-radius:4px;display:inline-block;position:relative;transition:border-color .2s}.custom-checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-checkbox[_ngcontent-%COMP%]{background:#f6f3ff;border-color:#a084e8}.custom-checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;left:6px;top:2px;width:6px;height:12px;border:solid #a084e8;border-width:0 2px 2px 0;transform:rotate(45deg)}.kpi-create-form[_ngcontent-%COMP%]{height:70vh;overflow:hidden;overflow-y:auto;padding-inline-end:15px;margin-inline-end:-15px}']})}}return i})();var De=c(83318),S=c(19300),Y=function(i){return i[i.daily=1]="daily",i[i.weekly=2]="weekly",i[i.monthly=3]="monthly",i[i.quarter=4]="quarter",i[i.yearly=5]="yearly",i}(Y||{}),P=c(1428),M=c(57105),E=c(6311),Je=c(49388),w=c(76472),R=c(41614),ee=c(11383);const Ne=["dialogTemplate"];function Me(i,l){1&i&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"status")))}function Qe(i,l){1&i&&e._UZ(0,"i",40)}function Fe(i,l){1&i&&e._UZ(0,"i",41)}function Se(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",37),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(2);return n.isExpand=!n.isExpand,e.KtG(s.getKpis(n))}),e.YNc(1,Qe,1,0,"i",38),e.YNc(2,Fe,1,0,"i",39),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function Ye(i,l){1&i&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"active")))}function Pe(i,l){1&i&&(e.TgZ(0,"span",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pending")))}function Ee(i,l){if(1&i&&(e.TgZ(0,"td",31),e.YNc(1,Ye,3,3,"span",42),e.YNc(2,Pe,3,3,"span",43),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t?null:t.isApproved),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.isApproved))}}function Be(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"a",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.approve(null==n?null:n.id))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"a",48),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.deleteItem(n))}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"approve")),e.xp6(3),e.Oqu(e.lcZ(6,4,"reject")))}function je(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.createOrUpdate(!0,!1,null==n?null:n.id))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"create_kpi")))}function Re(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.createOrUpdate(!1,!0,n))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"edit")))}function $e(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.getLogs(null==n?null:n.id,1))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"history")))}function Ve(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.deleteItem(n))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"delete")))}function Ge(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",49),e._UZ(2,"i",50),e.qZA(),e.TgZ(3,"mat-menu",null,51)(5,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.showItem(n,!1))}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,je,3,3,"button",53),e.YNc(9,Re,3,3,"button",54),e.YNc(10,$e,3,3,"button",53),e.YNc(11,Ve,3,3,"button",53),e.qZA()()}if(2&i){const t=e.MAs(4),a=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(5),e.Oqu(e.lcZ(7,6,"view")),e.xp6(2),e.Q6J("ngIf",a.isApproved),e.xp6(1),e.Q6J("ngIf",n.isKpiAdmin||n.isAdmin||n.loggedInUserId==(null==a?null:a.creatorId)&&!(null!=a&&a.isApproved)),e.xp6(1),e.Q6J("ngIf",n.isKpiAdmin||n.isAdmin),e.xp6(1),e.Q6J("ngIf",n.isKpiAdmin||n.isAdmin||n.loggedInUserId==(null==a?null:a.creatorId)&&!(null!=a&&a.isApproved))}}function He(i,l){1&i&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"status")))}function ze(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"i",73),e.NdJ("mouseover",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.getEquation(n))}),e.qZA()}if(2&i){const t=e.oxw(6);e.Q6J("matTooltip",t.equation)}}function Xe(i,l){1&i&&(e.TgZ(0,"span",75),e._uU(1,", "),e.qZA())}function We(i,l){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,Xe,2,0,"span",74),e.qZA()),2&i){const t=l.$implicit,a=l.last;e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",!a)}}function et(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function tt(i,l){1&i&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"active")))}function it(i,l){1&i&&(e.TgZ(0,"span",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pending")))}function nt(i,l){if(1&i&&(e.TgZ(0,"td",31),e.YNc(1,tt,3,3,"span",42),e.YNc(2,it,3,3,"span",43),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t?null:t.isApproved),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.isApproved))}}function at(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"a",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.approve(null==n?null:n.id,!0))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"a",48),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.deleteItem(n,!0))}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"approve")),e.xp6(3),e.Oqu(e.lcZ(6,4,"reject")))}function ot(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(5);return e.KtG(s.createOrUpdate(!0,!0,n))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"edit")))}function lt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(5);return e.KtG(s.getLogs(null==n?null:n.id,2))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"history")))}function st(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e._UZ(2,"i",50),e.qZA(),e.TgZ(3,"mat-menu",null,51)(5,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.showItem(n,!0))}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,ot,3,3,"button",76),e.YNc(9,lt,3,3,"button",53),e.TgZ(10,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.deleteItem(n,!0))}),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.MAs(4),a=e.oxw().$implicit,n=e.oxw(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(5),e.Oqu(e.lcZ(7,5,"view")),e.xp6(2),e.Q6J("ngIf",n.isKpiAdmin||n.isAdmin||n.loggedInUserId==(null==a?null:a.creatorId)&&!(null!=a&&a.isApproved)),e.xp6(1),e.Q6J("ngIf",n.isKpiAdmin||n.isAdmin),e.xp6(2),e.Oqu(e.lcZ(12,7,"delete"))}}function rt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"tr",68),e.NdJ("click",function(){const s=e.CHM(t).$implicit,p=e.oxw(5);return e.KtG(p.showItem(s,!0))}),e.TgZ(1,"td",69)(2,"div",8),e.YNc(3,ze,1,1,"i",70),e.TgZ(4,"span"),e._uU(5),e.qZA()()(),e.TgZ(6,"td",27),e._uU(7),e.ALo(8,"slice"),e.qZA(),e.TgZ(9,"td",27),e.ynx(10),e.YNc(11,We,3,2,"span",26),e.BQk(),e.YNc(12,et,2,0,"span",36),e.qZA(),e.TgZ(13,"td",27),e._uU(14),e.qZA(),e.TgZ(15,"td",27),e._uU(16),e.ALo(17,"translate"),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"td",27),e._uU(20),e.qZA(),e.TgZ(21,"td",27),e._uU(22),e.qZA(),e.YNc(23,nt,3,2,"td",32),e.TgZ(24,"td",71),e.NdJ("click",function(n){return n.stopPropagation()}),e.TgZ(25,"div",72),e.YNc(26,at,7,6,"div",35),e.YNc(27,st,13,9,"ng-container",36),e.qZA()()()}if(2&i){const t=l.$implicit,a=e.oxw(5);e.xp6(3),e.Q6J("ngIf",t.valueTypeId),e.xp6(2),e.Oqu(null==t?null:t.name),e.xp6(2),e.Oqu((null!=t&&t.describtion&&(null==t?null:t.describtion.length)>35?e.Dn7(8,12,null==t?null:t.describtion,0,35)+"...":null==t?null:t.describtion)||"-"),e.xp6(4),e.Q6J("ngForOf",null==t?null:t.departmentNames),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.departmentNames.length)),e.xp6(2),e.Oqu(null==a.EvaluationFrequency[(null==t?null:t.evaluationFrequency)-1]?null:a.EvaluationFrequency[(null==t?null:t.evaluationFrequency)-1].name),e.xp6(2),e.Oqu(null!=t&&t.isOverAchive?e.lcZ(17,16,"yes"):e.lcZ(18,18,"no")),e.xp6(4),e.Oqu(null==t?null:t.weight),e.xp6(2),e.Oqu(null==t?null:t.target),e.xp6(1),e.Q6J("ngIf",!a.isKpiAdmin&&!a.isAdmin),e.xp6(3),e.Q6J("ngIf",!(null!=t&&t.isApproved)&&(a.isKpiAdmin||a.isAdmin)),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.isApproved)&&a.loggedInUserId==(null==t?null:t.creatorId)||a.isKpiAdmin||a.isAdmin)}}function ct(i,l){if(1&i&&(e.TgZ(0,"table",59)(1,"thead",60)(2,"tr",61)(3,"th",62),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",63),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",64),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",22),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"th",22),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"th",22),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"th",23),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.YNc(24,He,3,3,"th",24),e.TgZ(25,"th",65),e._uU(26),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"tbody",66),e.YNc(29,rt,28,20,"tr",67),e.qZA()()),2&i){const t=e.oxw(2).$implicit,a=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,10,"kpi_name")," "),e.xp6(3),e.Oqu(e.lcZ(8,12,"description")),e.xp6(3),e.Oqu(e.lcZ(11,14,"department")),e.xp6(3),e.Oqu(e.lcZ(14,16,"KPI_Repetition")),e.xp6(3),e.Oqu(e.lcZ(17,18,"over_achievement")),e.xp6(3),e.Oqu(e.lcZ(20,20,"weight")),e.xp6(3),e.Oqu(e.lcZ(23,22,"target")),e.xp6(2),e.Q6J("ngIf",!a.isKpiAdmin&&!a.isAdmin),e.xp6(2),e.Oqu(e.lcZ(27,24,"procedures")),e.xp6(3),e.Q6J("ngForOf",null==t?null:t.kpis)}}function pt(i,l){1&i&&(e.TgZ(0,"p",78),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"no_data_found")))}function dt(i,l){if(1&i&&(e.TgZ(0,"tr")(1,"td",56),e.YNc(2,ct,30,26,"table",57),e.YNc(3,pt,3,3,"p",58),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",(null==t?null:t.kpis)&&(null==t||null==t.kpis?null:t.kpis.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.kpis.length))}}function _t(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",28),e.NdJ("click",function(){const s=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.showItem(s,!1))}),e.TgZ(2,"td",27)(3,"div",29),e.NdJ("click",function(n){return n.stopPropagation()}),e.YNc(4,Se,3,2,"div",30),e.TgZ(5,"span"),e._uU(6),e.qZA()()(),e.TgZ(7,"td",31),e._uU(8),e.ALo(9,"slice"),e.qZA(),e.TgZ(10,"td",31),e._uU(11),e.qZA(),e.TgZ(12,"td",31),e._uU(13),e.qZA(),e.YNc(14,Ee,3,2,"td",32),e.TgZ(15,"td",33),e.NdJ("click",function(n){return n.stopPropagation()}),e.TgZ(16,"div",34),e.YNc(17,Be,7,6,"div",35),e.YNc(18,Ge,12,8,"div",36),e.qZA()()(),e.YNc(19,dt,4,2,"tr",36),e.BQk()}if(2&i){const t=l.$implicit,a=e.oxw(2);e.xp6(4),e.Q6J("ngIf",null==t?null:t.isApproved),e.xp6(2),e.hij(" ",null==t?null:t.name," "),e.xp6(2),e.Oqu((null!=t&&t.describtion&&(null==t?null:t.describtion.length)>35?e.Dn7(9,9,null==t?null:t.describtion,0,35)+"...":null==t?null:t.describtion)||"-"),e.xp6(3),e.Oqu(null==t?null:t.weight),e.xp6(2),e.Oqu(null==t?null:t.target),e.xp6(1),e.Q6J("ngIf",!a.isKpiAdmin&&!a.isAdmin),e.xp6(3),e.Q6J("ngIf",!(null!=t&&t.isApproved)&&(a.isKpiAdmin||a.isAdmin)),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.isApproved)&&a.loggedInUserId==(null==t?null:t.creatorId)||a.isKpiAdmin||a.isAdmin),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}const ut=function(i,l,t){return{itemsPerPage:i,currentPage:l,totalItems:t}};function gt(i,l){if(1&i&&(e.TgZ(0,"table",18)(1,"thead")(2,"tr",19)(3,"th",20),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",21),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",22),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",23),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.YNc(15,Me,3,3,"th",24),e.TgZ(16,"th",25),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"tbody"),e.YNc(20,_t,20,13,"ng-container",26),e.ALo(21,"paginate"),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,7,"kpi_category_name")),e.xp6(3),e.Oqu(e.lcZ(8,9,"description")),e.xp6(3),e.Oqu(e.lcZ(11,11,"weight")),e.xp6(3),e.Oqu(e.lcZ(14,13,"target")),e.xp6(2),e.Q6J("ngIf",!t.isKpiAdmin&&!t.isAdmin),e.xp6(2),e.Oqu(e.lcZ(18,15,"procedures")),e.xp6(3),e.Q6J("ngForOf",e.xi3(21,17,t.itemsList,e.kEZ(20,ut,t.limit,t.page,t.totalItems)))}}function mt(i,l){1&i&&e._UZ(0,"loading",81),2&i&&e.Q6J("centerd",!0)}function ht(i,l){1&i&&e._UZ(0,"not-found")}function ft(i,l){if(1&i&&(e.TgZ(0,"div",79),e.YNc(1,mt,1,1,"loading",80),e.YNc(2,ht,1,0,"not-found",36),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading&&0==t.itemsList.length)}}function xt(i,l){if(1&i&&(e.TgZ(0,"div",83)(1,"div",94)(2,"span",88),e._UZ(3,"i",95),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"p",0),e._uU(8),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,2,"description")),e.xp6(3),e.hij(" ",null==t.selectedItem?null:t.selectedItem.describtion," ")}}function bt(i,l){if(1&i&&(e.TgZ(0,"div",96)(1,"div",0)(2,"span",88),e._UZ(3,"i",97),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"p",98)(8,"span"),e._uU(9),e.qZA(),e.TgZ(10,"span"),e._uU(11),e.qZA(),e.TgZ(12,"span"),e._uU(13),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,4,"value_type")),e.xp6(4),e.Oqu(t.enLanguage?null==t.selectedItem?null:t.selectedItem.valueType.valueTypeEn:null==t.selectedItem?null:t.selectedItem.valueType.valueTypeAr),e.xp6(2),e.Oqu(t.enLanguage?null==t.selectedItem?null:t.selectedItem.valueType.unitEn:null==t.selectedItem?null:t.selectedItem.valueType.unitAr),e.xp6(2),e.Oqu(t.enLanguage?null==t.selectedItem?null:t.selectedItem.valueType.dataSourceEn:null==t.selectedItem?null:t.selectedItem.valueType.dataSourceAr)}}function Zt(i,l){if(1&i&&(e.TgZ(0,"div",87)(1,"div",0)(2,"span",88),e._UZ(3,"i",99),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"p",0),e._uU(8),e.ALo(9,"arabicDate"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,2,"date_from")),e.xp6(3),e.hij(" ",e.lcZ(9,4,null==t.selectedItem?null:t.selectedItem.dateFrom)," ")}}function vt(i,l){if(1&i&&(e.TgZ(0,"div",87)(1,"div",0)(2,"span",88),e._UZ(3,"i",99),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"p",0),e._uU(8),e.ALo(9,"arabicDate"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,2,"date_to")),e.xp6(3),e.hij(" ",e.lcZ(9,4,null==t.selectedItem?null:t.selectedItem.dateTo)," ")}}function Tt(i,l){if(1&i&&(e.TgZ(0,"span",102),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t)}}function At(i,l){if(1&i&&(e.TgZ(0,"div",87)(1,"div",0)(2,"span",88),e._UZ(3,"i",100),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"p",0),e.YNc(8,Tt,2,1,"span",101),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,2,"departments")),e.xp6(3),e.Q6J("ngForOf",null==t.selectedItem?null:t.selectedItem.departmentNames)}}function yt(i,l){if(1&i&&(e.TgZ(0,"div",87)(1,"div",0)(2,"span",88),e._UZ(3,"i",103),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"p",0),e._uU(8),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,2,"repeat")),e.xp6(3),e.hij(" ",t.EvaluationFrequency[(null==t.selectedItem?null:t.selectedItem.evaluationFrequency)-1].name," ")}}function Ct(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",104)(1,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.createOrUpdate(!0,!1,null==n.selectedItem?null:n.selectedItem.id))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"create_kpi")," "))}function kt(i,l){if(1&i&&(e.TgZ(0,"div",82)(1,"div",83)(2,"p",84),e._uU(3),e.qZA()(),e.YNc(4,xt,9,4,"div",85),e.TgZ(5,"div",86)(6,"div",87)(7,"div",0)(8,"span",88),e._UZ(9,"i",89),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"p",0),e._uU(14),e.qZA()(),e.TgZ(15,"div",87)(16,"div",0)(17,"span",88),e._UZ(18,"i",90),e.TgZ(19,"span"),e._uU(20),e.ALo(21,"translate"),e.qZA()()(),e.TgZ(22,"p",0),e._uU(23),e.qZA()(),e.YNc(24,bt,14,6,"div",91),e.YNc(25,Zt,10,6,"div",92),e.YNc(26,vt,10,6,"div",92),e.YNc(27,At,9,4,"div",92),e.YNc(28,yt,9,4,"div",92),e.qZA(),e.YNc(29,Ct,4,3,"div",93),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" ",null==t.selectedItem?null:t.selectedItem.name," "),e.xp6(1),e.Q6J("ngIf",null==t.selectedItem?null:t.selectedItem.describtion),e.xp6(7),e.Oqu(e.lcZ(12,12,"weight")),e.xp6(3),e.hij(" ",null==t.selectedItem?null:t.selectedItem.weight," "),e.xp6(6),e.Oqu(e.lcZ(21,14,"target")),e.xp6(3),e.hij(" ",null==t.selectedItem?null:t.selectedItem.target," "),e.xp6(1),e.Q6J("ngIf",null==t.selectedItem?null:t.selectedItem.valueType),e.xp6(1),e.Q6J("ngIf",null==t.selectedItem?null:t.selectedItem.dateFrom),e.xp6(1),e.Q6J("ngIf",null==t.selectedItem?null:t.selectedItem.dateTo),e.xp6(1),e.Q6J("ngIf",(null==t.selectedItem?null:t.selectedItem.departmentNames)&&(null==t.selectedItem?null:t.selectedItem.departmentNames.length)>0),e.xp6(1),e.Q6J("ngIf",null==t.selectedItem?null:t.selectedItem.evaluationFrequency),e.xp6(1),e.Q6J("ngIf",!(null!=t.selectedItem&&t.selectedItem.kpi))}}function qt(i,l){1&i&&(e.TgZ(0,"div",110),e._UZ(1,"loading",81),e.qZA()),2&i&&(e.xp6(1),e.Q6J("centerd",!0))}function It(i,l){if(1&i&&(e.ynx(0),e.TgZ(1,"div",113)(2,"div",114),e._uU(3),e.ALo(4,"arabicDate"),e.qZA(),e.TgZ(5,"div",115)(6,"div",83)(7,"p",116),e._uU(8),e.qZA(),e.TgZ(9,"p",117),e._uU(10),e.ALo(11,"arabicTime"),e.qZA()()()(),e.BQk()),2&i){const t=l.$implicit,a=e.oxw(3);e.xp6(3),e.hij(" ",e.lcZ(4,3,t.createdDate)," "),e.xp6(5),e.Oqu(a.enLanguage?t.actionEn:t.actionAr),e.xp6(2),e.Oqu(e.lcZ(11,5,null==t?null:t.createdDate))}}function wt(i,l){1&i&&(e.TgZ(0,"div",118),e._UZ(1,"not-found"),e.qZA())}function Kt(i,l){if(1&i&&(e.TgZ(0,"div",111),e.YNc(1,It,12,7,"ng-container",26),e.YNc(2,wt,2,0,"div",112),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.itemLogs),e.xp6(1),e.Q6J("ngIf",0==(null==t.itemLogs?null:t.itemLogs.length)&&!t.historyloading)}}function Ut(i,l){if(1&i&&(e.TgZ(0,"info-sidebar",105),e.ynx(1,106),e.TgZ(2,"h2"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.BQk(),e.ynx(5,107),e.YNc(6,qt,2,1,"div",108),e.YNc(7,Kt,3,2,"div",109),e.BQk(),e.qZA()),2&i){const t=e.oxw();e.Q6J("open",t.historyIsOpen),e.xp6(3),e.Oqu(e.lcZ(4,4,"history")),e.xp6(3),e.Q6J("ngIf",t.historyloading),e.xp6(1),e.Q6J("ngIf",t.itemLogs.length>0)}}let Ot=(()=>{class i{constructor(t,a,n,s,p){this.service=t,this.role=a,this.dialog=n,this.alert=s,this.translate=p,this.limit=15,this.page=1,this.itemsList=[],this.loading=!1,this.isKpiAdmin=!1,this.isAdmin=!1,this.isCreator=!1,this.loggedInUserId=localStorage.getItem("id"),this.historyIsOpen=!1,this.historyloading=!1,this.enLanguage="en"===localStorage.getItem("language"),this.itemLogs=[],this.EvaluationFrequency=(0,S.q)(Y),this.equation="..."}ngOnInit(){this.getKpiscategories(),this.role.isKPIBankAdmin.subscribe(t=>{this.isKpiAdmin=t}),this.role.canAccessAdmin.subscribe(t=>{this.isAdmin=t})}getKpiscategories(){this.loading=!0,this.itemsList=[];let t=(new h.LE).set("page",this.page).set("limit",this.limit);this.service.getAllKpisCategory(t).subscribe(a=>{this.totalItems=a.data.totalItems,a.data.items.forEach(n=>{}),this.itemsList=a.data.items,this.loading=!1})}getKpis(t){const a=(new h.LE).set("CategoryId",t.id),n=this.itemsList.find(s=>s.id===t.id);n&&0===n.kpis.length&&this.service.getAllKpisByCategoryId(a).subscribe({next:s=>{n.kpis=s.data},error:s=>{}})}createOrUpdate(t=!1,a=!1,n={}){this.dialog.open(Le,{width:"600px",data:{kpi:t,update:a,item:n}}).afterClosed().subscribe(p=>{p&&this.getKpiscategories()})}deleteItem(t,a=!1){const n=t.id;let s;s=a||0!=t.kpis.length?!a&&t.kpis.length>0?"delete_kpi_category_message_with_kpis":"delete_kpi_message":"delete_kpi_category_message",this.dialog.open(De.v,{panelClass:"confirmation-dialog",autoFocus:!1,data:{message:s,btn_name:"delete",classes:"bg-primary white"}}).afterClosed().subscribe(A=>{A&&(a?this.service.deleteKpi(n).subscribe(q=>{q.success&&(this.alert.showAlert("kpi_deleted_successfully"),this.getKpiscategories())}):this.service.deleteKpisCategory(n).subscribe(q=>{q.success&&(this.alert.showAlert("category_deleted_successfully"),this.getKpiscategories())}))})}approve(t,a=!1){a?this.service.approveKpis(t).subscribe(n=>{n.success&&(this.alert.showAlert("kpi_approved_successfully"),this.getKpiscategories())}):this.service.approveKpisCategory(t).subscribe(n=>{n.success&&(this.alert.showAlert("category_approved_successfully"),this.getKpiscategories())})}showItem(t,a=!1){this.selectedItem=t,this.selectedItem.kpi=a,this.dialog.open(this.dialogTemplate,{width:"600px"})}pageChanged(t){this.page=t,this.getKpiscategories()}changeLimit(){this.page=1,this.getKpiscategories()}getLogs(t,a){let n=(new h.LE).set("ObjectId",t).set("kpiHistoryRefrance",a);this.historyloading=!0,this.historyIsOpen=!1,this.service.getKpisHestory(n).subscribe(s=>{this.historyloading=!1,this.historyIsOpen=!0,this.itemLogs=s.data})}getEquation(t){this.equation="...",this.service.kpiValueTypeToolTip(t.valueTypeId).subscribe(a=>{this.equation=String(this.enLanguage?a.equationEn:a.equationAr)})}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(x.q),e.Y36(O.f),e.Y36(b.uw),e.Y36(N.c),e.Y36(_.sK))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["kpi-bank"]],viewQuery:function(a,n){if(1&a&&e.Gf(Ne,5),2&a){let s;e.iGM(s=e.CRH())&&(n.dialogTemplate=s.first)}},decls:39,vars:36,consts:[[1,""],[1,"pt-1","kpis-bank-list"],[1,"px-2","flex","aic","jcsb","mb-1"],[1,"flex","aic","jce","gap-x-1"],["type","submit",1,"btn","rounded","bg-primary","white","py-75","px-2","fs-14",3,"click"],[1,"table-container","kpi-bank"],["class","table table-bordered",4,"ngIf"],[1,"pagination-content","flex","aic","jcsb","py-1","bg-white","border-top","border-bottom","px-2"],[1,"flex","aic"],[1,"fs-12","simibold"],["type","number","min","1",1,"input","ml-75","limit","text-center","py-50","px-0",2,"width","50px",3,"ngModel","ngModelChange"],[1,"ml-50","primary","fs-12"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"],[1,"fs-12","simibold","pr-3"],[1,"primary"],["class","flex aic jcc py-5",4,"ngIf"],["dialogTemplate",""],[3,"open",4,"ngIf"],[1,"table","table-bordered"],[1,"bg-gray","fs-15","fw-500"],[1,"text-left","kpis-1-col-width"],[1,"text-left","kpis-two-2span-col-width","text-left"],[1,"text-left","kpis-4-col-width"],[1,"text-left","kpis-5-col-width"],["class","text-left",4,"ngIf"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"text-left"],[1,"border-bottom","kpi-row",3,"click"],[1,"flex","aic",3,"click"],["class","flex",3,"click",4,"ngIf"],[1,"text-left","pointer"],["class","text-left pointer",4,"ngIf"],[1,"text-right","pl-0",3,"click"],[1,"flex","aic","jce","gap-x-2"],["class","flex aic jce gap-x-50",4,"ngIf"],[4,"ngIf"],[1,"flex",3,"click"],["class","pointer px-25 fs-19 primary bx bx-chevron-right",4,"ngIf"],["class","pointer px-25 fs-19 primary bx bx-chevron-up",4,"ngIf"],[1,"pointer","px-25","fs-19","primary","bx","bx-chevron-right"],[1,"pointer","px-25","fs-19","primary","bx","bx-chevron-up"],["class","bg-light-success rounded-5 py-25 px-1",4,"ngIf"],["class","chip-light-gray rounded-5 py-25 px-1",4,"ngIf"],[1,"bg-light-success","rounded-5","py-25","px-1"],[1,"chip-light-gray","rounded-5","py-25","px-1"],[1,"flex","aic","jce","gap-x-50"],["type","submit","mat-button","",1,"success","fw-500","pointer",3,"click"],["type","submit","mat-button","",1,"danger","fw-500","pointer","ml-1",3,"click"],[1,"clickable-btn",3,"matMenuTriggerFor"],[1,"bx","bx-dots-vertical-rounded","fs-25"],["menu","matMenu"],["mat-menu-item","","dir","auto",3,"click"],["mat-menu-item","","dir","auto",3,"click",4,"ngIf"],["mat-menu-item","","dir","auto","ngClass","",3,"click",4,"ngIf"],["mat-menu-item","","dir","auto","ngClass","",3,"click"],["colspan","6",1,"px-0","py-0","bg-gray"],["class","table table-sm bg-gray",4,"ngIf"],["class","text-center py-1",4,"ngIf"],[1,"table","table-sm","bg-gray"],[1,"bg-gray"],[1,"border-bottom"],[1,"text-left","kpis-1-col-width","text-left","pl-4","pr-50"],[1,"text-left","kpis-2-col-width"],[1,"text-left","kpis-3-col-width"],["colspan","2",1,"text-right"],[1,"bg-light-violet"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"text-left","pr-50"],["class","bx bx-info-circle mr-1 pointer relative bx-tool-tip fs-18 ",3,"matTooltip","mouseover",4,"ngIf"],[1,"text-right",3,"click"],[1,"flex","aic","gap-x-2","jce"],[1,"bx","bx-info-circle","mr-1","pointer","relative","bx-tool-tip","fs-18",3,"matTooltip","mouseover"],["class","bold fs-16",4,"ngIf"],[1,"bold","fs-16"],["mat-menu-item","","dir","auto","class"," fw-500 pointer",3,"click",4,"ngIf"],["mat-menu-item","","dir","auto",1,"fw-500","pointer",3,"click"],[1,"text-center","py-1"],[1,"flex","aic","jcc","py-5"],[3,"centerd",4,"ngIf"],[3,"centerd"],[1,"p-2","dir"],[1,"mb-2"],[1,"fs-18","simibold"],["class","mb-2",4,"ngIf"],[1,"flex-grid","jcs"],[1,"col-lg-6","mb-2"],["for","name",1,"fs-11","simibold","mb-75"],[1,"mr-50","bx","bx-dumbbell"],[1,"mr-50","bx","bx-target-lock"],["class","col-lg-12 mb-2",4,"ngIf"],["class","col-lg-6 mb-2",4,"ngIf"],["class","text-right mt-2",4,"ngIf"],[1,"label","flex","aic","jcsb"],[1,"mr-50","bx","bx-align-justify"],[1,"col-lg-12","mb-2"],[1,"mr-50","bx","bx-category"],[1,"p-1","rouunded","bg-light-violet","flex","jcsb","mt-50","rounded"],[1,"mr-50","bx","bx-calndar"],[1,"mr-50","bx","bx-buildings"],["class","mr-1",4,"ngFor","ngForOf"],[1,"mr-1"],[1,"mr-50","bx","bx-repost"],[1,"text-right","mt-2"],[3,"open"],["header",""],["content",""],["class","flex aic jcc w-100",4,"ngIf"],["class","timeline ml-3 mb-4",4,"ngIf"],[1,"flex","aic","jcc","w-100"],[1,"timeline","ml-3","mb-4"],["class","relative h-100",4,"ngIf"],[1,"history","relative"],[1,"date","mt-1","fs-15"],[1,"log","mt-1"],[1,"fs-12","simibold","mb-50"],[1,"muted","fs-12","simibold"],[1,"relative","h-100"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"layout")(2,"div",1)(3,"div",2)(4,"h5",0),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",3)(8,"button",4),e.NdJ("click",function(){return n.createOrUpdate(!1)}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",4),e.NdJ("click",function(){return n.createOrUpdate(!0)}),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",5),e.YNc(15,gt,22,24,"table",6),e.qZA(),e.TgZ(16,"div",7)(17,"div",8)(18,"p",9),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"input",10),e.NdJ("ngModelChange",function(p){return n.limit=p})("ngModelChange",function(){return n.changeLimit()}),e.qZA(),e.TgZ(22,"p",11),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"pagination-controls",12),e.NdJ("pageChange",function(p){return n.pageChanged(p)}),e.ALo(26,"translate"),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"p",13),e._uU(29),e.ALo(30,"translate"),e.TgZ(31,"span",14),e._uU(32),e.ALo(33,"arabicNumbers"),e.ALo(34,"translate"),e.qZA()()()(),e.YNc(35,ft,3,2,"div",15),e.qZA()(),e.YNc(36,kt,30,16,"ng-template",null,16,e.W1O),e.YNc(38,Ut,8,6,"info-sidebar",17)),2&a&&(e.xp6(5),e.Oqu(e.lcZ(6,16,"kpis_bank_categories")),e.xp6(4),e.hij(" ",e.lcZ(10,18,"create_kpi_category")," "),e.xp6(3),e.hij(" ",e.lcZ(13,20,"create_kpi")," "),e.xp6(3),e.Q6J("ngIf",!n.loading&&n.itemsList.length>0),e.xp6(4),e.hij("",e.lcZ(20,22,"pagination_per_page")," "),e.xp6(2),e.Q6J("ngModel",n.limit),e.xp6(2),e.Oqu(e.lcZ(24,24,"record")),e.xp6(2),e.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",e.lcZ(26,26,"previous"))("nextLabel",e.lcZ(27,28,"next")),e.xp6(4),e.hij("",e.lcZ(30,30,"pagination_total_records")," "),e.xp6(3),e.AsE("",e.lcZ(33,32,n.totalItems)," ",e.lcZ(34,34,"record"),""),e.xp6(3),e.Q6J("ngIf",n.loading||0==n.itemsList.length),e.xp6(3),e.Q6J("ngIf",n.historyIsOpen))},dependencies:[o.mk,o.sg,o.O5,d.N,P.$,M.w,E.VK,Je.Lv,E.OP,E.p6,w.LS,R.K,r.Fj,r.wV,r.JJ,r.qQ,r.On,D.gM,o.OU,_.X$,U.m,Q.P,w._s,ee.E],styles:['td.kpis-1-col-width[_ngcontent-%COMP%], th.kpis-1-col-width[_ngcontent-%COMP%]{width:25%}th.kpis-two-2span-col-width[_ngcontent-%COMP%]{width:45%}th.kpis-2-col-width[_ngcontent-%COMP%]{width:30%}th.kpis-3-col-width[_ngcontent-%COMP%]{width:15%}th.kpis-4-col-width[_ngcontent-%COMP%], th.kpis-5-col-width[_ngcontent-%COMP%]{width:10%}th.kpis-6-col-width[_ngcontent-%COMP%]{width:15%}.table-filter-content[_ngcontent-%COMP%]{height:calc(100vh - 110px)}.table-container[_ngcontent-%COMP%]{height:calc(100vh - 225px);overflow:auto}.timeline[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]:not(:last-of-type):before{content:"";position:absolute;height:calc(100% + 24px);top:12px;inset-inline-start:-20px;border-inline-start:1px dashed #ccc}.timeline[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]:after{content:"";position:absolute;height:10px;width:10px;background:var(--primary);border-radius:50%;top:12px;inset-inline-start:-24.5px}.timeline[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#c7c7cc}.kpi-bank[_ngcontent-%COMP%]   .kpi-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:15px;font-weight:500}.bx-tool-tip[_ngcontent-%COMP%]   .tool-tip[_ngcontent-%COMP%]{bottom:5px;inset-inline-start:15px;opacity:0;transition:all .3s;word-wrap:break-word;overflow-wrap:break-word;display:none}.bx-tool-tip[_ngcontent-%COMP%]:hover   .tool-tip[_ngcontent-%COMP%]{opacity:1;display:inline-block}']})}}return i})();var Lt=c(22084),$=c(24971),V=c(32801);function Dt(i,l){1&i&&(e.TgZ(0,"th",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"achieved")))}function Jt(i,l){if(1&i&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"arabicNumbers"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.value))}}function Nt(i,l){if(1&i&&(e.ynx(0),e.TgZ(1,"tr",26)(2,"td",27)(3,"div",12)(4,"span"),e._uU(5),e.qZA()()(),e.TgZ(6,"td",27),e._uU(7),e.ALo(8,"arabicNumbers"),e.qZA(),e.TgZ(9,"td",27),e._uU(10),e.ALo(11,"arabicNumbers"),e.qZA(),e.YNc(12,Jt,3,3,"td",28),e.TgZ(13,"td",27),e._uU(14),e.ALo(15,"arabicDate"),e.qZA(),e.TgZ(16,"td",27),e._uU(17),e.ALo(18,"arabicDate"),e.qZA(),e.TgZ(19,"td",27),e._uU(20),e.qZA(),e.TgZ(21,"td",29),e.NdJ("click",function(a){return a.stopPropagation()}),e._UZ(22,"app-img-title",30),e.qZA()(),e.BQk()),2&i){const t=l.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("routerLink","./"+t.id),e.xp6(4),e.hij(" ",t.kpiName," "),e.xp6(2),e.Oqu(e.lcZ(8,12,t.weight)),e.xp6(3),e.Oqu(e.lcZ(11,14,t.target)),e.xp6(2),e.Q6J("ngIf",a.ratedKpis),e.xp6(2),e.Oqu(e.lcZ(15,16,t.dateFrom)),e.xp6(3),e.Oqu(e.lcZ(18,18,t.dateTo)),e.xp6(3),e.Oqu(t.evaluationfrequency>0?a.evaluationfrequency[t.evaluationfrequency-1].name:"-"),e.xp6(2),e.Q6J("imgSrc",t.employeePic)("title",t.employeeName)("subTitle",t.employeeJobTitle)("userId",t.employeeId)}}const Mt=function(i,l,t){return{itemsPerPage:i,currentPage:l,totalItems:t}};function Qt(i,l){if(1&i&&(e.TgZ(0,"table",19)(1,"thead")(2,"tr",20)(3,"th",21),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",22),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",23),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,Dt,3,3,"th",24),e.TgZ(13,"th",22),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th",22),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th",22),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th",22),e._uU(23),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"tbody"),e.YNc(26,Nt,23,20,"ng-container",25),e.ALo(27,"paginate"),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,9,"name")," "),e.xp6(3),e.Oqu(e.lcZ(8,11,"weight")),e.xp6(3),e.Oqu(e.lcZ(11,13,"target")),e.xp6(2),e.Q6J("ngIf",t.ratedKpis),e.xp6(2),e.Oqu(e.lcZ(15,15,"start_date")),e.xp6(3),e.Oqu(e.lcZ(18,17,"end_date")),e.xp6(3),e.Oqu(e.lcZ(21,19,"repeat")),e.xp6(3),e.Oqu(e.lcZ(24,21,"employee")),e.xp6(3),e.Q6J("ngForOf",e.xi3(27,23,t.itemsList,e.kEZ(26,Mt,t.limit,t.page,t.totalItems)))}}function Ft(i,l){1&i&&e._UZ(0,"loading",34),2&i&&e.Q6J("centerd",!0)}function St(i,l){1&i&&e._UZ(0,"not-found")}function Yt(i,l){if(1&i&&(e.TgZ(0,"div",31),e.YNc(1,Ft,1,1,"loading",32),e.YNc(2,St,1,0,"not-found",33),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading&&0==t.itemsList.length)}}let Pt=(()=>{class i{constructor(t,a,n){this.service=t,this.datePipe=a,this.alert=n,this.ratedKpis=!1,this.itemsList=[],this.limit=15,this.page=1,this.evaluationfrequency=(0,S.q)(Y)}ngOnInit(){this.getKpisList()}getKpisList(){this.loading=!0;let t=(new h.LE).set("page",this.page).set("limit",this.limit).set("IsRated",this.ratedKpis);this.searchValue&&(t=t.append("search",this.searchValue)),this.service.getRaterKpis(t).subscribe(a=>{this.loading=!1,a.success&&(this.itemsList=a.data.items.map(n=>n),this.totalItems=a.data.totalItems)})}search(t){this.searchValue=t,this.page=1,this.getKpisList()}pageChanged(t){this.page=t,this.getKpisList()}changeLimit(){this.page=1,this.getKpisList()}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(x.q),e.Y36(o.uU),e.Y36(N.c))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["rater-kpis-list"]],decls:35,vars:42,consts:[[1,"dir","pt-1"],[1,"flex","aic","mb-2"],[3,"click"],[1,"h-100"],[1,"kpis-bank-list"],[1,"px-2","flex","aic","jcsb","mb-1"],[1,"flex","aic","gap-x-1"],[3,"width","classes","newSearch","hideLabel","valueChanged"],[1,"table-container","border-0"],["class","table table-bordered ",4,"ngIf"],["class","flex aic jcc py-5",4,"ngIf"],[1,"pagination-content","flex","aic","jcsb","py-1","bg-white","border-top","border-bottom","px-2"],[1,"flex","aic"],[1,"fs-12","simibold"],["type","number","min","1",1,"input","ml-75","limit","text-center","py-50","px-0",2,"width","50px",3,"ngModel","ngModelChange"],[1,"ml-50","primary","fs-12"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"],[1,"fs-12","simibold","pr-3"],[1,"primary"],[1,"table","table-bordered"],[1,"bg-gray"],[1,"text-left","kpis-1-col-width"],[1,"text-left","kpis-4-col-width"],[1,"text-left","kpis-5-col-width"],["class","text-left kpis-5-col-width",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"border-bottom","pointer",3,"routerLink"],[1,"text-left"],["class","text-left",4,"ngIf"],[1,"text-left",3,"click"],[3,"imgSrc","title","subTitle","userId"],[1,"flex","aic","jcc","py-5"],[3,"centerd",4,"ngIf"],[4,"ngIf"],[3,"centerd"]],template:function(a,n){1&a&&(e.TgZ(0,"layout",0)(1,"div",1)(2,"p",2),e.NdJ("click",function(){return n.ratedKpis=!1,n.getKpisList()}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"p",2),e.NdJ("click",function(){return n.ratedKpis=!0,n.getKpisList()}),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"div",6)(12,"search",7),e.NdJ("valueChanged",function(p){return n.search(p)}),e.qZA()()(),e.TgZ(13,"div",8),e.YNc(14,Qt,28,30,"table",9),e.YNc(15,Yt,3,2,"div",10),e.qZA(),e.TgZ(16,"div",11)(17,"div",12)(18,"p",13),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"input",14),e.NdJ("ngModelChange",function(p){return n.limit=p})("ngModelChange",function(){return n.changeLimit()}),e.qZA(),e.TgZ(22,"p",15),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"pagination-controls",16),e.NdJ("pageChange",function(p){return n.pageChanged(p)}),e.ALo(26,"translate"),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"p",17),e._uU(29),e.ALo(30,"translate"),e.TgZ(31,"span",18),e._uU(32),e.ALo(33,"arabicNumbers"),e.ALo(34,"translate"),e.qZA()()()()()()),2&a&&(e.xp6(2),e.Gre("fw-500 px-2 pt-2 pb-1 pointer fs-14 ",n.ratedKpis?"":"primary border-bottom rate-active-btn",""),e.xp6(1),e.Oqu(e.lcZ(4,24,"unrated_kpis")),e.xp6(2),e.Gre("fw-500 px-2 pt-2 pb-1 pointer fs-14 ",n.ratedKpis?"primary border-bottom rate-active-btn":"",""),e.xp6(1),e.Oqu(e.lcZ(7,26,"rated_kpis")),e.xp6(6),e.Q6J("width","w-15r")("classes","py-50")("newSearch",!0)("hideLabel",!0),e.xp6(2),e.Q6J("ngIf",!n.loading&&n.itemsList.length>0),e.xp6(1),e.Q6J("ngIf",n.loading||0==n.itemsList.length),e.xp6(4),e.hij("",e.lcZ(20,28,"pagination_per_page")," "),e.xp6(2),e.Q6J("ngModel",n.limit),e.xp6(2),e.Oqu(e.lcZ(24,30,"record")),e.xp6(2),e.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",e.lcZ(26,32,"previous"))("nextLabel",e.lcZ(27,34,"next")),e.xp6(4),e.hij("",e.lcZ(30,36,"pagination_total_records")," "),e.xp6(3),e.AsE("",e.lcZ(33,38,n.totalItems)," ",e.lcZ(34,40,"record"),""))},dependencies:[o.sg,o.O5,g.rH,d.N,P.$,M.w,w.LS,r.Fj,r.wV,r.JJ,r.qQ,r.On,$.g,V.G,_.X$,U.m,Q.P,w._s],styles:[".table-container[_ngcontent-%COMP%]{height:calc(100vh - 280px);overflow:auto}.border-bottom-3[_ngcontent-%COMP%]{border-width:3px;border-bottom:transparent 2px solid!important}.rate-active-btn[_ngcontent-%COMP%]{border-bottom:#7b5bca 2px solid!important}"]})}}return i})();var te=c(66507),Et=c(1350);function Bt(i,l){if(1&i&&(e.TgZ(0,"p",19),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"arabicNumbers"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"average_rate")," ",e.lcZ(3,4,t.achieved)," ")}}function jt(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",16)(2,"ngx-star-rating",17),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.ratedFun())})("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.achieved=n)}),e.qZA()(),e.YNc(3,Bt,4,6,"p",18),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.achieved),e.xp6(1),e.Q6J("ngIf",t.achieved)}}function Rt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e._UZ(1,"input-label",21),e.TgZ(2,"input",22),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.achieved=n)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.achieved)}}let $t=(()=>{class i{constructor(t,a,n,s){this.data=t,this.service=a,this.alert=n,this.dialogRef=s,this.rated=!1,this.rate=0,this.rateReason="",this.achieved=0,console.log(this.data)}ratedFun(){this.rated=!0,this.rateReason=""}submit(){let t;t={kpiEmployeeId:this.data.id,comment:this.rateReason,value:this.achieved},this.service.evaluateKpis(t).subscribe(a=>{this.dialogRef.close(!0),this.alert.showAlert("success")})}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(b.WI),e.Y36(x.q),e.Y36(N.c),e.Y36(b.so))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["kpi-rate-form"]],standalone:!0,features:[e.jDz],decls:26,vars:19,consts:[[1,"add-rate","dir"],[1,"black","text-center"],[1,"target","text-center","pt-2","flex","aic","jcc"],[1,"bg-gray","py-75","px-2","w-19r","rounded"],[1,"fs-18"],[1,"fs-22","bold","primary",2,"margin-top","-5px"],["mat-dialog-content",""],[4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"reason"],["key","comment"],["rows","3",1,"input","mb-1",3,"ngModel","ngModelChange"],["mat-dialog-actions","",1,"mt-50"],[1,"flex","aic","gap-x-2","w-100"],["mat-dialog-close","","mat-raised-button","",1,"flex-50","w-100","dark-color","rounded","cancel-btn"],["mat-raised-button","","color","primary",1,"flex-50","w-100","rounded",3,"disabled","click"],[1,"flex-center","mt-1"],["id","rate",3,"ngModel","change","ngModelChange"],["class","mb-2 text-center fs-14",4,"ngIf"],[1,"mb-2","text-center","fs-14"],[1,"mb-2"],["key","achieved"],["type","number","min","1",1,"input",3,"ngModel","ngModelChange"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"div",4),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",5),e._uU(10),e.ALo(11,"arabicNumbers"),e.qZA()()(),e.TgZ(12,"div",6),e.YNc(13,jt,4,2,"ng-container",7),e.YNc(14,Rt,3,1,"div",8),e.TgZ(15,"div",9),e._UZ(16,"input-label",10),e.TgZ(17,"textarea",11),e.NdJ("ngModelChange",function(p){return n.rateReason=p}),e.qZA()()(),e.TgZ(18,"div",12)(19,"div",13)(20,"button",14),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"button",15),e.NdJ("click",function(){return n.submit()}),e._uU(24),e.ALo(25,"translate"),e.qZA()()()()),2&a&&(e.xp6(2),e.Oqu(e.lcZ(3,9,"whats_your_rate")),e.xp6(5),e.Oqu(e.lcZ(8,11,"target")),e.xp6(3),e.hij(" ",e.lcZ(11,13,n.data.target)," "),e.xp6(3),e.Q6J("ngIf",4==n.data.valueType.id),e.xp6(1),e.Q6J("ngIf",4!=n.data.valueType.id),e.xp6(3),e.Q6J("ngModel",n.rateReason),e.xp6(4),e.hij(" ",e.lcZ(22,15,"cancel")," "),e.xp6(2),e.Q6J("disabled",n.rateReason.length<1&&n.achieved<1),e.xp6(1),e.hij(" ",e.lcZ(25,17,"save")," "))},dependencies:[o.ez,o.O5,_.aw,_.X$,r.u5,r.Fj,r.wV,r.JJ,r.qQ,r.On,b.Is,b.ZT,b.xY,b.H8,F.ot,F.lW,U.m,te.nI,te.wK,Et.i],encapsulation:2})}}return i})();function Vt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.addRate())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.oxw(2),e.xp6(1),e.hij(" ",e.lcZ(2,1,"evaluate")," "))}function Gt(i,l){if(1&i&&(e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,"kpi_repeat_message")+" - "+t.evaluationfrequency[t.kpiDetails.evaluationfrequency-1].name," ")}}function Ht(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6),e._UZ(3,"i",7),e.TgZ(4,"p",8),e._uU(5),e.qZA()(),e.TgZ(6,"div",9),e.YNc(7,Vt,3,3,"button",10),e.TgZ(8,"i",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.getLogs(n.kpiDetails.id))}),e.qZA()()(),e.TgZ(9,"div",12)(10,"div",13)(11,"div",14)(12,"div",15)(13,"div",16),e._UZ(14,"i",17),e.TgZ(15,"span",18),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",19),e._UZ(19,"app-img-title",20),e.qZA()()(),e.TgZ(20,"div",14)(21,"div",15)(22,"div",16),e._UZ(23,"i",17),e.TgZ(24,"span",18),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",19),e._UZ(28,"app-img-title",20),e.qZA()()(),e.TgZ(29,"div",14)(30,"div",15)(31,"div",16),e._UZ(32,"i",21),e.TgZ(33,"span",18),e._uU(34),e.ALo(35,"translate"),e.qZA()(),e.TgZ(36,"div",19),e._uU(37),e.qZA()()(),e.TgZ(38,"div",14)(39,"div",15)(40,"div",16),e._UZ(41,"i",22),e.TgZ(42,"span",18),e._uU(43),e.ALo(44,"translate"),e.qZA()(),e.TgZ(45,"div",19),e._uU(46),e.qZA()()(),e.TgZ(47,"div",14)(48,"div",15)(49,"div",16),e._UZ(50,"i",23),e.TgZ(51,"span",18),e._uU(52),e.ALo(53,"translate"),e.qZA()(),e.TgZ(54,"div",19),e._uU(55),e.ALo(56,"arabicDate"),e.qZA()()(),e.TgZ(57,"div",14)(58,"div",15)(59,"div",16),e._UZ(60,"i",23),e.TgZ(61,"span",18),e._uU(62),e.ALo(63,"translate"),e.qZA()(),e.TgZ(64,"div",19),e._uU(65),e.ALo(66,"arabicDate"),e.qZA()()(),e.TgZ(67,"div",24)(68,"div",25)(69,"div",16),e._UZ(70,"i",26),e.TgZ(71,"span",18),e._uU(72),e.ALo(73,"translate"),e.qZA()(),e.TgZ(74,"div",19),e._UZ(75,"p",27),e.qZA()()()(),e.TgZ(76,"div",28),e._UZ(77,"chart-radial-bar",29),e.qZA(),e.YNc(78,Gt,3,3,"div",30),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.kpiDetails.kpiName),e.xp6(2),e.Q6J("ngIf",!t.isCurrentDate||t.isCurrentDate&&!t.kpiDetails.value),e.xp6(9),e.Oqu(e.lcZ(17,24,"assignee")),e.xp6(3),e.Q6J("imgSize",25)("userId",t.kpiDetails.employeeId)("imgSrc",t.kpiDetails.employeePic)("title",t.kpiDetails.employeeName),e.xp6(6),e.Oqu(e.lcZ(26,26,"rater")),e.xp6(3),e.Q6J("imgSize",25)("userId",t.kpiDetails.raterId)("imgSrc",t.kpiDetails.raterPic)("title",t.kpiDetails.raterName),e.xp6(6),e.Oqu(e.lcZ(35,28,"department")),e.xp6(3),e.hij(" ",t.kpiDetails.departmentName," "),e.xp6(6),e.Oqu(e.lcZ(44,30,"category")),e.xp6(3),e.hij(" ",t.kpiDetails.categoryName," "),e.xp6(6),e.Oqu(e.lcZ(53,32,"date_from")),e.xp6(3),e.hij(" ",e.lcZ(56,34,t.kpiDetails.dateFrom)," "),e.xp6(7),e.Oqu(e.lcZ(63,36,"date_to")),e.xp6(3),e.hij(" ",e.lcZ(66,38,t.kpiDetails.dateTo)," "),e.xp6(7),e.Oqu(e.lcZ(73,40,"description")),e.xp6(3),e.Q6J("innerHTML",t.kpiDetails.describtion,e.oJD),e.xp6(2),e.Q6J("details",t.kpiDetails),e.xp6(1),e.Q6J("ngIf",t.kpiDetails.evaluationfrequency>0)}}function zt(i,l){1&i&&(e.TgZ(0,"div",33),e._UZ(1,"loading",34),e.qZA()),2&i&&(e.xp6(1),e.Q6J("centerd",!0))}function Xt(i,l){1&i&&(e.TgZ(0,"div",40),e._UZ(1,"loading",34),e.qZA()),2&i&&(e.xp6(1),e.Q6J("centerd",!0))}function Wt(i,l){if(1&i&&(e.ynx(0),e.TgZ(1,"div",44)(2,"div",45),e._uU(3),e.ALo(4,"arabicDate"),e.qZA(),e.TgZ(5,"div",46)(6,"div",47)(7,"p",48),e._uU(8),e.qZA(),e.TgZ(9,"p",49),e._uU(10),e.ALo(11,"arabicTime"),e.qZA()()()(),e.BQk()),2&i){const t=l.$implicit,a=e.oxw(3);e.xp6(3),e.hij(" ",e.lcZ(4,3,t.createdDate)," "),e.xp6(5),e.Oqu(a.enLanguage?t.actionEn:t.actionAr),e.xp6(2),e.Oqu(e.lcZ(11,5,null==t?null:t.createdDate))}}function ei(i,l){1&i&&(e.TgZ(0,"div",50),e._UZ(1,"not-found"),e.qZA())}function ti(i,l){if(1&i&&(e.TgZ(0,"div",41),e.YNc(1,Wt,12,7,"ng-container",42),e.YNc(2,ei,2,0,"div",43),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.itemLogs),e.xp6(1),e.Q6J("ngIf",0==(null==t.itemLogs?null:t.itemLogs.length)&&!t.historyloading)}}function ii(i,l){if(1&i&&(e.TgZ(0,"info-sidebar",35),e.ynx(1,36),e.TgZ(2,"h2"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.BQk(),e.ynx(5,37),e.YNc(6,Xt,2,1,"div",38),e.YNc(7,ti,3,2,"div",39),e.BQk(),e.qZA()),2&i){const t=e.oxw();e.Q6J("open",t.historyIsOpen),e.xp6(3),e.Oqu(e.lcZ(4,4,"history")),e.xp6(3),e.Q6J("ngIf",t.historyloading),e.xp6(1),e.Q6J("ngIf",t.itemLogs.length>0)}}let ie=(()=>{class i{constructor(t,a,n){this.route=t,this.service=a,this.dialog=n,this.kpiId=this.route.snapshot.params.id,this.loading=!0,this.historyIsOpen=!1,this.historyloading=!0,this.enLanguage=localStorage.getItem("language"),this.isCurrentDate=!1,this.evaluationfrequency=(0,S.q)(Y)}ngOnInit(){this.getKpiDetails()}getKpiDetails(){this.loading=!0,this.service.getKpiDetailsById(this.kpiId).subscribe(t=>{this.kpiDetails=t.data,this.kpiDetails.kpi=!0,this.loading=!1,this.isCurrentDate=!(new Date(this.kpiDetails.dateTo)>=new Date)})}addRate(){this.dialog.open($t,{width:"400px",data:{id:this.kpiId,target:this.kpiDetails.target||0,valueType:this.kpiDetails.kpiValueType||0}}).afterClosed().subscribe(a=>{a&&this.getKpiDetails()})}getLogs(t){this.historyloading=!0,this.historyIsOpen=!1;let a=(new h.LE).set("ObjectId",t).set("kpiHistoryRefrance",4);this.service.getKpisHestory(a).subscribe(n=>{this.historyloading=!1,this.historyIsOpen=!0,this.itemLogs=n.data})}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(g.gz),e.Y36(x.q),e.Y36(b.uw))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["kpi-details"]],decls:4,vars:3,consts:[[1,"dir","pt-1"],["class","kpi-details",4,"ngIf"],["class","py-5",4,"ngIf"],[3,"open",4,"ngIf"],[1,"kpi-details"],[1,"kpi-details-header","py-1","px-2","border-bottom","flex","aic","jcsb"],[1,"flex","aic","gap-x-1"],[1,"bx","bx-tachometer","danger","fs-25","flex","pointer"],[1,"fs-14","fw-500"],[1,"flex","aic","jce","gap-x-1"],["type","submit","class","fs-12 btn rounded bg-primary white py-50 px-2 ",3,"click",4,"ngIf"],[1,"bx","bx-history","fs-25","flex","pointer",3,"click"],[1,"kpi-details-body","px-2","pt-2","pb-2"],[1,"flex-grid","mx-0","mb-2"],[1,"col-lg-6","col-md-12","mb-2","fs-16","pl-0"],[1,"flex","aic"],[1,"fs-15","info-title","flex","aic","gap-x-1","w-11r"],[1,"bx","bx-user"],[1,"fw-500"],[1,"info-data"],[3,"imgSize","userId","imgSrc","title"],[1,"bx","bx-buildings"],[1,"bx","bx-category"],[1,"bx","bx-calendar"],[1,"col-lg-12","col-md-12","mb-2","fs-16","pl-0"],[1,""],[1,"bx","bx-align-justify"],[3,"innerHTML"],[1,"card-shadow","pt-3","rounded","mb-2"],[3,"details"],["class"," mb-2 px-2 py-1 rounded border-danger bg-light-danger",4,"ngIf"],["type","submit",1,"fs-12","btn","rounded","bg-primary","white","py-50","px-2",3,"click"],[1,"mb-2","px-2","py-1","rounded","border-danger","bg-light-danger"],[1,"py-5"],[3,"centerd"],[3,"open"],["header",""],["content",""],["class","flex aic jcc w-100",4,"ngIf"],["class","timeline ml-3 mb-4",4,"ngIf"],[1,"flex","aic","jcc","w-100"],[1,"timeline","ml-3","mb-4"],[4,"ngFor","ngForOf"],["class","relative h-100",4,"ngIf"],[1,"history","relative"],[1,"date","mt-1","fs-15"],[1,"log","mt-1"],[1,"mb-2"],[1,"fs-12","simibold","mb-50"],[1,"muted","fs-12","simibold"],[1,"relative","h-100"]],template:function(a,n){1&a&&(e.TgZ(0,"layout",0),e.YNc(1,Ht,79,42,"div",1),e.YNc(2,zt,2,1,"div",2),e.qZA(),e.YNc(3,ii,8,6,"info-sidebar",3)),2&a&&(e.xp6(1),e.Q6J("ngIf",n.kpiDetails&&!n.loading),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.historyIsOpen))},dependencies:[o.sg,o.O5,C.y,d.N,P.$,M.w,R.K,V.G,_.X$,Q.P,ee.E],styles:[".kpi-details-body[_ngcontent-%COMP%]{max-height:calc(100vh - 161px);overflow:auto}"]})}}return i})(),ni=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["rater-kpis"]],decls:1,vars:0,template:function(a,n){1&a&&e._UZ(0,"router-outlet")},dependencies:[g.lC]})}}return i})();var ne=c(75986),ai=c(77902),B=c(11486),oi=c(3375),li=c(20553),si=c(41263);function ri(i,l){if(1&i&&(e.TgZ(0,"div",42),e._UZ(1,"img",43),e.qZA()),2&i){const t=e.oxw().$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("src",a.imageRootUrl+(null==t?null:t.employeeImage),e.LSH)("alt",null==t?null:t.employeeName)}}function ci(i,l){1&i&&e._UZ(0,"i",44)}function pi(i,l){1&i&&e._UZ(0,"i",45)}function di(i,l){if(1&i&&(e.TgZ(0,"div",42),e._UZ(1,"img",43),e.qZA()),2&i){const t=e.oxw().$implicit,a=e.oxw(5);e.xp6(1),e.Q6J("src",a.imageRootUrl+(null==t?null:t.raterImage),e.LSH)("alt",null==t?null:t.raterName)}}function _i(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"tr",50)(1,"td",53)(2,"div",42)(3,"mat-checkbox",54),e.NdJ("change",function(n){const p=e.CHM(t).$implicit,A=e.oxw(3).$implicit,q=e.oxw(2);return e.KtG(q.selectRow(n,p,A))}),e.qZA()()(),e.TgZ(4,"td",31),e._uU(5),e.qZA(),e.TgZ(6,"td",31),e._uU(7),e.qZA(),e.TgZ(8,"td",31),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"td",31),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td",31),e._uU(15),e.qZA(),e.TgZ(16,"td",55)(17,"div",56),e.YNc(18,di,2,2,"div",33),e.TgZ(19,"div",34)(20,"span",57),e._uU(21),e.qZA(),e.TgZ(22,"span",36),e._uU(23),e.qZA()()()(),e.TgZ(24,"td",31),e._uU(25),e.qZA(),e.TgZ(26,"td",31),e._uU(27),e.qZA(),e.TgZ(28,"td",31)(29,"span",58),e._uU(30),e.qZA()(),e.TgZ(31,"td",31)(32,"span",58),e._uU(33),e.qZA()(),e.TgZ(34,"td",31),e._uU(35),e.qZA()()}if(2&i){const t=l.$implicit,a=e.oxw(5);e.xp6(3),e.Q6J("checked",t.isSelected),e.xp6(2),e.Oqu(null==t?null:t.kpiName),e.xp6(2),e.Oqu(null==t?null:t.kpiCategoryName),e.xp6(2),e.Oqu(e.xi3(10,17,null==t?null:t.startDate,"d/M/yyyy")),e.xp6(3),e.Oqu(e.xi3(13,20,null==t?null:t.endDate,"d/M/yyyy")),e.xp6(3),e.Oqu(null==a.EvaluationFrequency[t.evaluationFrequency-1]?null:a.EvaluationFrequency[t.evaluationFrequency-1].name),e.xp6(3),e.Q6J("ngIf",null==t?null:t.raterImage),e.xp6(3),e.Oqu(null==t?null:t.raterName),e.xp6(2),e.Oqu((null==t?null:t.raterJobTitle)||""),e.xp6(2),e.AsE("",null==t?null:t.weight," ",t.weight?"%":"",""),e.xp6(2),e.Oqu(null==t?null:t.target),e.xp6(2),e.Q6J("ngClass",a.getAchievementColor((null==t?null:t.value)||0)),e.xp6(1),e.Oqu(null==t?null:t.value),e.xp6(2),e.Q6J("ngClass",a.getAchievementColor((null==t?null:t.actual_on_target)||0)),e.xp6(1),e.Oqu(null==t?null:t.actual_on_target),e.xp6(2),e.Oqu(null==t?null:t.actual_on_Weight)}}function ui(i,l){if(1&i&&(e.TgZ(0,"table",49)(1,"thead",23)(2,"tr",50),e._UZ(3,"th",31),e.TgZ(4,"th",31),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th",31),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",31),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th",31),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th",31),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th",31),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th",31),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th",31),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"th",31),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"th",31),e._uU(32),e.ALo(33,"translate"),e._UZ(34,"i",28),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"th",31),e._uU(37),e.ALo(38,"translate"),e._UZ(39,"i",28),e.ALo(40,"translate"),e.qZA()()(),e.TgZ(41,"tbody",51),e.YNc(42,_i,36,23,"tr",52),e.qZA()()),2&i){const t=e.oxw(2).$implicit,a=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,15,"teamKpis.performance_name")),e.xp6(3),e.Oqu(e.lcZ(9,17,"teamKpis.performance_category")),e.xp6(3),e.Oqu(e.lcZ(12,19,"teamKpis.start_date")),e.xp6(3),e.Oqu(e.lcZ(15,21,"teamKpis.end_date")),e.xp6(3),e.Oqu(e.lcZ(18,23,"teamKpis.repetition")),e.xp6(3),e.Oqu(e.lcZ(21,25,"teamKpis.evaluator")),e.xp6(3),e.Oqu(e.lcZ(24,27,"teamKpis.weight")),e.xp6(3),e.Oqu(e.lcZ(27,29,"teamKpis.target")),e.xp6(3),e.Oqu(e.lcZ(30,31,"teamKpis.actual")),e.xp6(3),e.hij(" ",e.lcZ(33,33,"teamKpis.achievement_rate")," "),e.xp6(2),e.Q6J("matTooltip",e.lcZ(35,35,"teamKpis.achievement_rate_tooltip")),e.xp6(3),e.hij(" ",e.lcZ(38,37,"teamKpis.achieved_weight")," "),e.xp6(2),e.Q6J("matTooltip",e.lcZ(40,39,"teamKpis.achieved_weight_tooltip")),e.xp6(3),e.Q6J("ngForOf",null==t?null:t.employeeKpiLists)("ngForTrackBy",a.trackByKpiId)}}function gi(i,l){1&i&&(e.TgZ(0,"p",59),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"no_data_found")))}function mi(i,l){if(1&i&&(e.TgZ(0,"tr")(1,"td",46),e.YNc(2,ui,43,41,"table",47),e.YNc(3,gi,3,3,"p",48),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",(null==t?null:t.employeeKpiLists)&&t.employeeKpiLists.length>0),e.xp6(1),e.Q6J("ngIf",!(null!=t&&null!=t.employeeKpiLists&&t.employeeKpiLists.length))}}function hi(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",30)(2,"td",31)(3,"div",15)(4,"mat-checkbox",32),e.NdJ("change",function(n){const p=e.CHM(t).$implicit,A=e.oxw(2);return e.KtG(A.selectRow(n,p,null))}),e.qZA(),e.YNc(5,ri,2,2,"div",33),e.TgZ(6,"div",34)(7,"span",35),e._uU(8),e.qZA(),e.TgZ(9,"span",36),e._uU(10),e.qZA()(),e.TgZ(11,"button",37),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.KtG(s.isExpand=!s.isExpand)}),e.YNc(12,ci,1,0,"i",38),e.YNc(13,pi,1,0,"i",39),e.qZA()()(),e.TgZ(14,"td",31),e._uU(15),e.qZA(),e.TgZ(16,"td",31)(17,"span",40),e._uU(18),e.qZA()()(),e.YNc(19,mi,4,2,"tr",41),e.BQk()}if(2&i){const t=l.$implicit;e.xp6(4),e.Q6J("checked",t.isSelected),e.xp6(1),e.Q6J("ngIf",null==t?null:t.employeeImage),e.xp6(3),e.Oqu(null==t?null:t.employeeName),e.xp6(2),e.Oqu((null==t?null:t.employeeJobTitle)||""),e.xp6(1),e.uIk("aria-expanded",t.isExpand)("aria-label",t.isExpand?"Collapse":"Expand"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(2),e.Oqu((null==t?null:t.kpisCount)||0),e.xp6(3),e.hij("",null!=t&&t.totalAchive?t.totalAchive.toFixed(2):0,"%"),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}const fi=function(i,l,t){return{itemsPerPage:i,currentPage:l,totalItems:t}};function xi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"table",22)(1,"thead")(2,"tr",23)(3,"th",24)(4,"mat-checkbox",25),e.NdJ("change",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.checkAll(n))}),e.qZA(),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th",26),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",27)(11,"span",21),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"i",28),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,hi,20,11,"ng-container",29),e.ALo(18,"paginate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("checked",t.allCategoriesChecked),e.xp6(1),e.hij(" ",e.lcZ(6,7,"teamKpis.employeeName")," "),e.xp6(3),e.Oqu(e.lcZ(9,9,"teamKpis.numberOfPerformanceIndicators")),e.xp6(4),e.Oqu(e.lcZ(13,11,"teamKpis.totalPerformance")),e.xp6(2),e.Q6J("matTooltip",e.lcZ(15,13,"teamKpis.totalPerformanceTooltip")),e.xp6(3),e.Q6J("ngForOf",e.xi3(18,15,t.usersKpisDataList,e.kEZ(18,fi,t.limit,t.page,t.totalItems)))("ngForTrackBy",t.trackByUserId)}}function bi(i,l){1&i&&e._UZ(0,"loading",62),2&i&&e.Q6J("centerd",!0)}function Zi(i,l){1&i&&e._UZ(0,"not-found")}function vi(i,l){if(1&i&&(e.TgZ(0,"div",60),e.YNc(1,bi,1,1,"loading",61),e.YNc(2,Zi,1,0,"not-found",41),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading&&0==t.usersKpisDataList.length)}}const Ai=[{path:"",component:v,children:[{path:"",redirectTo:"user-kpis",pathMatch:"full"},{path:"user-kpis",component:G,title:"Taskedin - user Kpis"},{path:"user-kpis/:id",component:G,title:"Taskedin - user Kpis"},{path:"kpis-bank",component:Ot,title:"Taskedin - Kpis Bank"},{path:"kpis-users",component:Lt.EmployeesComponent,title:"Taskedin - Kpis users",data:{kpis:!0}},{path:"details/:id",component:ie},{path:"rater-kpis",component:ni,title:"Taskedin - Rate users Kpis",children:[{path:"",component:Pt},{path:":id",component:ie}]},{path:"team-kpis",component:(()=>{class i{constructor(t,a,n,s,p,A){this.service=t,this.datePipe=a,this.alert=n,this.selectedUserService=s,this.elm=p,this.translate=A,this.imageRootUrl=li.N.imageUrl,this.FilterType=J,this.selectedDepartment=null,this.selectedDate={startDate:this.getFormattedDate(new Date((new Date).getFullYear(),(new Date).getMonth(),1)),endDate:this.getFormattedDate(new Date)},this.searchValue=null,this.loading=!1,this.usersKpisDataList=[],this.allCategoriesChecked=!1,this.selectedKpis=[],this.selectedKpiCategories=[],this.unSelectedKpis=[],this.unSelectedKpiCategories=[],this.totalItems=0,this.limit=15,this.page=1,this.EvaluationFrequency=(0,S.q)(z)}ngOnInit(){this.getUsersKpi()}getFormattedDate(t){return this.datePipe.transform(t,"yyyy-MM-dd")||""}exportToExcel(){const t=this.elm.nativeElement.querySelector("#team-kpis-table"),a=B.P6.table_to_sheet(t),n=B.P6.book_new();B.P6.book_append_sheet(n,a,"Sheet1"),B.NC(n,"assignees.xlsx")}getUsersKpi(t){let a=t||new h.LE;a=a.set("page",this.page.toString()).set("limit",this.limit.toString()),this.selectedDate&&this.selectedDate.startDate&&this.selectedDate.endDate&&(a=a.set("from",this.selectedDate.startDate),a=a.set("To",this.selectedDate.endDate)),this.service.getTeamKpi(a).subscribe({next:n=>{this.loading=!1,this.usersKpisDataList=n.data.items,this.totalItems=n.data.totalItems},error:n=>{this.loading=!1,this.alert.showAlert("Error loading KPIs","bg-danger")}})}applyFilter(t,a){switch(t){case J.SEARCH:this.searchValue=a;break;case J.DEPARTMENT:this.selectedDepartment=a;break;case J.DATE:this.selectedDate=a}this.page=1,this.loadFilteredData()}loadFilteredData(){let t=new h.LE;this.searchValue&&(t=t.append("Search",this.searchValue)),this.selectedDepartment&&(t=t.set("DepartmentId",this.selectedDepartment)),this.selectedDate&&this.selectedDate.startDate&&this.selectedDate.endDate&&(t=t.set("from",this.selectedDate.startDate),t=t.set("To",this.selectedDate.endDate)),this.getUsersKpi(t)}pageChanged(t){this.page=t,this.loadFilteredData()}changeLimit(){this.page=1,this.loadFilteredData()}getAchievementColor(t){return t?t>=40?"text-purple":t>=15?"text-green":t>=13?"text-red":"":""}checkAll(t){this.allCategoriesChecked=t.checked,this.usersKpisDataList.forEach(a=>{a.isSelected=this.allCategoriesChecked,this.selectRow(t,a)})}selectRow(t,a,n){const s=t.checked;a.isSelected=s,"employeeKpiLists"in a?a.employeeKpiLists.forEach(p=>{p.isSelected=s}):n&&(n.isSelected=s),this.updateSelectedItems(a,s),this.checkAllCheckedItems()}updateSelectedItems(t,a){a?(this.unSelectedKpiCategories=this.unSelectedKpiCategories.filter(n=>n!==t),this.unSelectedKpis=this.unSelectedKpis.filter(n=>n!==t)):"employeeKpiLists"in t?(this.unSelectedKpiCategories.push(t),t.employeeKpiLists.forEach(n=>{this.unSelectedKpis.push(n)})):this.unSelectedKpis.push(t),this.updateSelectedLists()}updateSelectedLists(){this.selectedKpis=[],this.selectedKpiCategories=[],this.usersKpisDataList.forEach(t=>{t.isSelected&&(this.selectedKpiCategories.push(t),t.employeeKpiLists.forEach(a=>{a.isSelected&&this.selectedKpis.push(a)}))})}checkAllCheckedItems(){const t=this.usersKpisDataList.every(a=>a.isSelected);this.allCategoriesChecked=t}trackByUserId(t,a){return a?.employeeId||t}trackByKpiId(t,a){return a?.kpiId||t}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(x.q),e.Y36(o.uU),e.Y36(N.c),e.Y36(si.u),e.Y36(e.SBq),e.Y36(_.sK))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["app-team-kpis"]],standalone:!0,features:[e.jDz],decls:38,vars:36,consts:[[1,"bg-white","border","layout","rounded","shadow-sm"],[1,"dir","pt-1"],[1,"flex","jcsb","aic","mb-2","px-2"],[1,"fs-18","font-weight-bold","text-primary","mb-0"],[1,"h-100"],[1,"kpis-bank-list"],[1,"px-2","flex","aic","jcsb","mb-2","flex-wrap","gap-y-1"],[1,"flex","aic","gap-x-2","flex-wrap"],[3,"width","classes","newSearch","hideLabel","valueChanged"],[3,"valueChanged"],["aria-label","Export",1,"btn","rounded","bg-success","white","py-75","px-2","fs-14","d-flex","aic","gap-x-1",3,"click"],[1,"table-container","border-0","rounded","shadow-xs","overflow-auto"],["class","table table-bordered table-hover","id","team-kpis-table",4,"ngIf"],["class","flex aic jcc py-5",4,"ngIf"],[1,"pagination-content","flex","aic","jcsb","py-1","bg-white","border-top","border-bottom","px-2","mt-2"],[1,"flex","aic","gap-x-1"],[1,"fs-12","simibold","mb-0"],["type","number","min","1","aria-label","Items per page",1,"input","ml-75","limit","text-center","py-50","px-0",2,"width","50px",3,"ngModel","ngModelChange"],[1,"ml-50","primary","fs-12","mb-0"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"],[1,"fs-12","simibold","pr-3","mb-0"],[1,"primary"],["id","team-kpis-table",1,"table","table-bordered","table-hover"],[1,"bg-gray"],[1,"text-left","w-20"],["color","primary","aria-label","Select all employees",1,"mr-1","example-margin",3,"checked","change"],[1,"text-left","w-60"],[1,"text-left","w-10"],["aria-label","Info",1,"bx","bx-info-circle","fs-12","pointer","ml-1",3,"matTooltip"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","hoverable-row"],[1,"text-left"],["color","primary","aria-label","Select employee",1,"mr-1","example-margin",3,"checked","change"],["class","flex aic mr-1",4,"ngIf"],[1,"flex","flex-column"],[1,"employee-name","fw-600"],[1,"employee-title","text-muted","fs-12"],[1,"btn","btn-link","btn-sm","px-1","py-0","ml-2",3,"click"],["class","pointer fs-19 bx bx-chevron-down",4,"ngIf"],["class","pointer fs-19 bx bx-chevron-up",4,"ngIf"],[1,"fw-600"],[4,"ngIf"],[1,"flex","aic","mr-1"],[1,"avatar-xs","rounded-circle","border",3,"src","alt"],[1,"pointer","fs-19","bx","bx-chevron-down"],[1,"pointer","fs-19","bx","bx-chevron-up"],["colspan","4",1,"px-0","py-0","bg-gray"],["class","table table-sm bg-gray mb-0",4,"ngIf"],["class","text-center py-1 text-muted",4,"ngIf"],[1,"table","table-sm","bg-gray","mb-0"],[1,"border-bottom"],[1,"bg-light-violet"],["class","border-bottom",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-left","pl-4","pr-50"],["color","primary","aria-label","Select KPI",1,"mr-1","example-margin",3,"checked","change"],[1,"text-left","flex","aic","gap-x-1"],[1,"flex","aic"],[1,"employee-name"],[3,"ngClass"],[1,"text-center","py-1","text-muted"],[1,"flex","aic","jcc","py-5"],[3,"centerd",4,"ngIf"],[3,"centerd"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"search",8),e.NdJ("valueChanged",function(p){return n.applyFilter(n.FilterType.SEARCH,p)}),e.qZA(),e.TgZ(11,"app-departments-filter",9),e.NdJ("valueChanged",function(p){return n.applyFilter(n.FilterType.DEPARTMENT,p)}),e.qZA(),e.TgZ(12,"app-date-filter",9),e.NdJ("valueChanged",function(p){return n.applyFilter(n.FilterType.DATE,p)}),e.qZA()(),e.TgZ(13,"button",10),e.NdJ("click",function(){return n.exportToExcel()}),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",11),e.YNc(17,xi,19,22,"table",12),e.YNc(18,vi,3,2,"div",13),e.qZA(),e.TgZ(19,"div",14)(20,"div",15)(21,"p",16),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"input",17),e.NdJ("ngModelChange",function(p){return n.limit=p})("ngModelChange",function(){return n.changeLimit()}),e.qZA(),e.TgZ(25,"p",18),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"pagination-controls",19),e.NdJ("pageChange",function(p){return n.pageChanged(p)}),e.ALo(29,"translate"),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"p",20),e._uU(32),e.ALo(33,"translate"),e.TgZ(34,"span",21),e._uU(35),e.ALo(36,"arabicNumbers"),e.ALo(37,"translate"),e.qZA()()()()()()()),2&a&&(e.xp6(4),e.Oqu(e.lcZ(5,18,"teamKpis.teamPerformanceMetrics")),e.xp6(6),e.Q6J("width","w-15r")("classes","py-50")("newSearch",!0)("hideLabel",!0),e.xp6(4),e.hij(" ",e.lcZ(15,20,"export")," "),e.xp6(3),e.Q6J("ngIf",!n.loading&&n.usersKpisDataList.length>0),e.xp6(1),e.Q6J("ngIf",n.loading||0==n.usersKpisDataList.length),e.xp6(4),e.Oqu(e.lcZ(23,22,"pagination_per_page")),e.xp6(2),e.Q6J("ngModel",n.limit),e.xp6(2),e.Oqu(e.lcZ(27,24,"record")),e.xp6(2),e.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",e.lcZ(29,26,"previous"))("nextLabel",e.lcZ(30,28,"next")),e.xp6(4),e.hij("",e.lcZ(33,30,"pagination_total_records")," "),e.xp6(3),e.AsE("",e.lcZ(36,32,n.totalItems)," ",e.lcZ(37,34,"record"),""))},dependencies:[o.ez,o.mk,o.sg,o.O5,o.uU,_.aw,_.X$,d.N,M.w,w.JX,w._s,w.LS,r.u5,r.Fj,r.wV,r.JJ,r.qQ,r.On,ne.p9,ne.oG,D.AV,D.gM,Z._8,U.m,ai.JH,$.g,oi.x,L],styles:[".text-green{color:#1db489;font-weight:700}.text-red{color:#e14b4b;font-weight:700}.text-purple{color:#7c3aed;font-weight:700}.avatar-xs{width:32px;height:32px;border-radius:50%;object-fit:cover}.fs-12{font-size:12px}.gray{color:#888}.fw-600{font-weight:600}.flex{display:flex}.aic{align-items:center}.gap-x-1{gap:.5rem}.text-center{text-align:center}.ml-2{margin-left:.5rem}.table-container{height:67vh;overflow-y:auto}\n"],encapsulation:2})}}return i})(),title:"Taskedin - Team Kpis"}]}];let yi=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=e.oAB({type:i})}static{this.\u0275inj=e.cJS({imports:[g.Bz.forChild(Ai),g.Bz]})}}return i})(),Ci=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=e.oAB({type:i})}static{this.\u0275inj=e.cJS({imports:[o.ez,yi,m.z,f.S,u.u,C.y,_.aw,d.N,L,P.$,M.w,E.Tx,w.JX,R.K,r.u5,$.g,V.G,D.AV]})}}return i})()}}]);