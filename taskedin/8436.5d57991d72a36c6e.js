"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[8436],{38140:(k,P,a)=>{a.d(P,{Y:()=>t});var e=a(65879),f=a(96814),v=a(89515),d=a(824),C=a(52081),u=a(56223),m=a(76472),U=a(3131);function c(l,b){if(1&l&&(e.TgZ(0,"p",10),e._uU(1),e.ALo(2,"arabicNumbers"),e.ALo(3,"translate"),e.qZA()),2&l){const g=e.oxw();e.xp6(1),e.Oqu(null!=g.meta&&g.meta.pageSize?e.lcZ(2,1,null==g.meta?null:g.meta.pageSize):e.lcZ(3,3,"unlimited"))}}function s(l,b){if(1&l){const g=e.EpF();e.TgZ(0,"input",11),e.NdJ("ngModelChange",function(p){e.CHM(g);const A=e.oxw();return e.KtG(A.limit=p)})("ngModelChange",function(){e.CHM(g);const p=e.oxw();return e.KtG(p.changeLimit())}),e.qZA()}if(2&l){const g=e.oxw();e.Q6J("ngModel",g.limit)}}function h(l,b){1&l&&(e.TgZ(0,"p",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&l&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"record")))}function O(l,b){if(1&l){const g=e.EpF();e.TgZ(0,"pagination-controls",13),e.NdJ("pageChange",function(p){e.CHM(g);const A=e.oxw();return e.KtG(A.pageChanged(p))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.qZA()}2&l&&e.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",e.lcZ(1,4,"previous"))("nextLabel",e.lcZ(2,6,"next"))}const L=[[["","filters",""]],[["","content",""]]],y=function(l,b){return{height:l,"max-width":b}},I=["[filters]","[content]"];let t=(()=>{class l{constructor(){this.pageChange=new e.vpe,this.limitChanged=new e.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,e.f3M)(U.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(g){this.pageChange.emit(g)}static{this.\u0275fac=function(Z){return new(Z||l)}}static{this.\u0275cmp=e.Xpm({type:l,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[e.jDz],ngContentSelectors:I,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(Z,p){1&Z&&(e.F$t(L),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA(),e.TgZ(3,"div",2),e.Hsn(4,1),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"p"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,c,4,5,"p",5),e.YNc(11,s,1,1,"input",6),e.YNc(12,h,3,3,"p",7),e.qZA(),e.YNc(13,O,3,8,"pagination-controls",8),e.TgZ(14,"p"),e._uU(15),e.ALo(16,"translate"),e.TgZ(17,"span",9),e._uU(18),e.ALo(19,"arabicNumbers"),e.ALo(20,"translate"),e.qZA()()()()),2&Z&&(e.Q6J("ngStyle",e.WLB(17,y,p.hasTitle?"calc(100vh - 14.5rem)":p.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",p.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),e.xp6(8),e.hij("",e.lcZ(9,9,"pagination_per_page")," "),e.xp6(2),e.Q6J("ngIf",!p.admin),e.xp6(1),e.Q6J("ngIf",p.admin),e.xp6(1),e.Q6J("ngIf",null==p.meta?null:p.meta.pageSize),e.xp6(1),e.Q6J("ngIf",(null==p.meta?null:p.meta.totalItems)>15),e.xp6(2),e.hij("",e.lcZ(16,11,"pagination_total_records")," "),e.xp6(3),e.AsE("",e.lcZ(19,13,null==p.meta?null:p.meta.totalItems)," ",e.lcZ(20,15,"record"),""))},dependencies:[f.ez,f.O5,f.PC,v.aw,v.X$,d.h,C.m,u.u5,u.Fj,u.wV,u.JJ,u.qQ,u.On,m.JX,m.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return l})()},3131:(k,P,a)=>{a.d(P,{P:()=>v});var e=a(65619),f=a(65879);let v=(()=>{class d{constructor(){this.withSubMenu=new e.X(!0)}static{this.\u0275fac=function(m){return new(m||d)}}static{this.\u0275prov=f.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},81854:(k,P,a)=>{a.d(P,{U:()=>u});var e=a(20553),f=a(65619),v=a(37398),d=a(65879),C=a(69862);let u=(()=>{class m{constructor(c){this.http=c,this.meta=new f.X({}),this.currentPage=new f.X({}),this.packages$=new f.X([])}getPackages(){return this.http.get(`${e.N.coreBase}/api/PaymentPacakage/Get`).pipe((0,v.U)(c=>{let s={pageSize:c.data.pageSize,totalItems:c.data.totalItems,totalPages:c.data.totalPages,totalUnSeen:c.data.totalUnSeen,currentPage:c.data.currentPage};return this.meta.next(s),this.currentPage.next(s.currentPage),this.packages$.next(c.data.items),c.data.items}))}createPackage(c){return this.http.post(`${e.N.apiUrl}api/PaymentPacakage/Create`,c)}updatePackage(c){return this.http.put(`${e.N.apiUrl}api/PaymentPacakage/Update`,c)}deletePackage(c){return this.http.put(`${e.N.apiUrl}api/PaymentPacakage/Delete`,c)}static{this.\u0275fac=function(s){return new(s||m)(d.LFG(C.eN))}}static{this.\u0275prov=d.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},68436:(k,P,a)=>{a.r(P),a.d(P,{PackagesComponent:()=>S});var e=a(96814),f=a(65668),v=a(57105),d=a(38140),C=a(32296),u=a(89515),m=a(76472),U=a(52081),c=a(83318),s=a(56223),h=a(17700),O=a(1350),L=a(58964),y=a(54807),I=a(82458),t=a(65879),l=a(81854),b=a(99758),g=a(49388);let Z=(()=>{class i{constructor(n,r,o,x,T){this.data=n,this.fb=r,this.service=o,this.dialog=x,this.alert=T,this.loading=!1,this.currencies=[{name:"EGP",value:1},{name:"USD",value:2}];let M=this.data?._package;this.form=this.fb.group({name:["",s.kI.required],description:[""],gracePeriod:["",s.kI.required],pricePerUser:["",s.kI.required],currencyId:[1,s.kI.required],limitedNumberOfUser:["",s.kI.required]}),M&&this.form.patchValue({...M,currencyId:M.currencyId||1})}ngOnInit(){}submit(){this.loading=!0,this.data?.isEdit?this.service.updatePackage({...this.form.value,id:this.data._package?.id}).subscribe(n=>{n.success&&(this.service.getPackages().subscribe(),this.dialog.closeAll(),this.alert.showAlert("package_updated"))}):this.service.createPackage(this.form.value).subscribe(n=>{n.success&&(this.service.getPackages().subscribe(),this.dialog.closeAll(),this.alert.showAlert("package_created"))})}get f(){return this.form.controls}static{this.\u0275fac=function(r){return new(r||i)(t.Y36(h.WI),t.Y36(s.qu),t.Y36(l.U),t.Y36(h.uw),t.Y36(b.c))}}static{this.\u0275cmp=t.Xpm({type:i,selectors:[["package-form"]],standalone:!0,features:[t.jDz],decls:36,vars:25,consts:[["mat-dialog-title",""],["mat-dialog-content","",3,"formGroup"],[1,"flex-grid"],[1,"col-lg-6"],["key","name",3,"control"],["type","text","formControlName","name",1,"input"],[3,"control"],["key","description",3,"control"],["type","text","formControlName","description",1,"input"],["key","duration",3,"control"],["type","number","min","0","formControlName","gracePeriod",1,"input"],["key","limited_number_of_users",3,"control"],["type","number","min","0","formControlName","limitedNumberOfUser",1,"input"],["key","currency",3,"control"],["appendTo","body","formControlName","currencyId","bindLabel","name","bindValue","value",3,"items","multiple","closeOnSelect","clearable"],["key","price_per_user",3,"control"],["type","number","min","0","formControlName","pricePerUser",1,"input"],["mat-dialog-actions","","align","end","dir","auto",1,"buttons"],[1,"flex"],["mat-dialog-close","",1,"px-4","mr-2","dark-color","clickable-btn","rounded","cancel-btn"],["mat-raised-button","","color","primary",1,"px-4","fs-15",3,"disabled","click"],["text","save",3,"loading"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"form",1)(4,"div",2)(5,"div",3),t._UZ(6,"input-label",4)(7,"input",5)(8,"input-error",6),t.qZA(),t.TgZ(9,"div",3),t._UZ(10,"input-label",7)(11,"input",8)(12,"input-error",6),t.qZA(),t.TgZ(13,"div",3),t._UZ(14,"input-label",9)(15,"input",10)(16,"input-error",6),t.qZA(),t.TgZ(17,"div",3),t._UZ(18,"input-label",11)(19,"input",12)(20,"input-error",6),t.qZA(),t.TgZ(21,"div",3),t._UZ(22,"input-label",13)(23,"ng-select",14)(24,"input-error",6),t.qZA(),t.TgZ(25,"div",3),t._UZ(26,"input-label",15)(27,"input",16)(28,"input-error",6),t.qZA()()(),t.TgZ(29,"div",17)(30,"div",18)(31,"button",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"button",20),t.NdJ("click",function(){return o.submit()}),t._UZ(35,"submit-button",21),t.qZA()()()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,21,null!=o.data&&o.data.isEdit?"update_package":"create_package")),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("control",o.f.name),t.xp6(2),t.Q6J("control",o.f.name),t.xp6(2),t.Q6J("control",o.f.description),t.xp6(2),t.Q6J("control",o.f.description),t.xp6(2),t.Q6J("control",o.f.gracePeriod),t.xp6(2),t.Q6J("control",o.f.gracePeriod),t.xp6(2),t.Q6J("control",o.f.limitedNumberOfUser),t.xp6(2),t.Q6J("control",o.f.limitedNumberOfUser),t.xp6(2),t.Q6J("control",o.f.currencyId),t.xp6(1),t.Q6J("items",o.currencies)("multiple",!1)("closeOnSelect",!0)("clearable",!1),t.xp6(1),t.Q6J("control",o.f.currencyId),t.xp6(2),t.Q6J("control",o.f.pricePerUser),t.xp6(2),t.Q6J("control",o.f.pricePerUser),t.xp6(4),t.Oqu(t.lcZ(33,23,"cancel")),t.xp6(2),t.Q6J("disabled",o.form.invalid||o.loading),t.xp6(1),t.Q6J("loading",o.loading))},dependencies:[e.ez,u.aw,u.X$,h.Is,h.ZT,h.uh,h.xY,h.H8,g.Lv,s.UX,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.qQ,s.sg,s.u,O.i,L.w,y.A0,y.w9,C.ot,C.lW,I.w]})}}return i})();var p=a(55006),A=a(3131);function E(i,_){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"egp")))}function J(i,_){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"usd")))}function N(i,_){if(1&i&&(t.TgZ(0,"p",14),t.YNc(1,E,3,3,"span",8),t.YNc(2,J,3,3,"span",8),t.qZA()),2&i){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",1==n.currencyId),t.xp6(1),t.Q6J("ngIf",2==n.currencyId)}}function Q(i,_){1&i&&(t.TgZ(0,"p"),t._uU(1,"-"),t.qZA())}function D(i,_){if(1&i){const n=t.EpF();t.TgZ(0,"tr",13)(1,"td",11)(2,"p",14),t._uU(3),t.qZA()(),t.TgZ(4,"td",11)(5,"p",14),t._uU(6),t.qZA()(),t.TgZ(7,"td",11)(8,"p",14),t._uU(9),t.ALo(10,"arabicNumbers"),t.ALo(11,"translate"),t.qZA()(),t.TgZ(12,"td",11)(13,"p",14),t._uU(14),t.qZA()(),t.TgZ(15,"td",11),t.YNc(16,N,3,2,"p",15),t.YNc(17,Q,2,0,"p",8),t.qZA(),t.TgZ(18,"td",11)(19,"p",14),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"td")(23,"i",16),t.NdJ("click",function(){const x=t.CHM(n).$implicit,T=t.oxw(3);return t.KtG(T.edit(x))}),t.qZA(),t.TgZ(24,"i",17),t.NdJ("click",function(){const x=t.CHM(n).$implicit,T=t.oxw(3);return t.KtG(T.deletePackage(x.id))}),t.qZA()()()}if(2&i){const n=_.$implicit;t.xp6(3),t.Oqu(n.name),t.xp6(3),t.Oqu(n.description),t.xp6(3),t.AsE("",t.lcZ(10,8,n.gracePeriod)," ",n.gracePeriod?t.lcZ(11,10,"day"):"-",""),t.xp6(5),t.Oqu(n.pricePerUser?n.pricePerUser:"-"),t.xp6(2),t.Q6J("ngIf",n.currencyId),t.xp6(1),t.Q6J("ngIf",!n.currencyId),t.xp6(3),t.Oqu(n.limitedNumberOfUser?n.limitedNumberOfUser:t.lcZ(21,12,"unlimited"))}}const F=function(i,_,n){return{itemsPerPage:i,currentPage:_,totalItems:n}};function q(i,_){if(1&i&&(t.TgZ(0,"table",9)(1,"thead",10)(2,"tr")(3,"th",11),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",11),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",11),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",11),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",11),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",11),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"th"),t.qZA()(),t.TgZ(22,"tbody"),t.YNc(23,D,25,14,"tr",12),t.ALo(24,"paginate"),t.qZA()()),2&i){const n=t.oxw().ngIf,r=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,8,"name")),t.xp6(3),t.Oqu(t.lcZ(8,10,"description")),t.xp6(3),t.Oqu(t.lcZ(11,12,"grace_period")),t.xp6(3),t.Oqu(t.lcZ(14,14,"price_per_user")),t.xp6(3),t.Oqu(t.lcZ(17,16,"currency")),t.xp6(3),t.Oqu(t.lcZ(20,18,"limited_number_of_users")),t.xp6(4),t.Q6J("ngForOf",t.xi3(24,20,n,t.kEZ(23,F,r.meta.pageSize,r.meta.currentPage,r.meta.totalItems)))("ngForTrackBy",r.trackBy)}}function W(i,_){1&i&&t._UZ(0,"not-found")}function Y(i,_){1&i&&t._UZ(0,"loading")}function w(i,_){if(1&i&&(t.ynx(0,6),t.YNc(1,q,25,27,"table",7),t.YNc(2,W,1,0,"not-found",8),t.YNc(3,Y,1,0,"loading",8),t.BQk()),2&i){const n=_.ngIf,r=t.oxw();t.xp6(1),t.Q6J("ngIf",n&&n.length>0&&!r.loading),t.xp6(1),t.Q6J("ngIf",n&&0==n.length&&!r.loading),t.xp6(1),t.Q6J("ngIf",r.loading)}}let S=(()=>{class i{constructor(n,r,o,x){this.service=n,this.dialog=r,this.alert=o,this.layoutSer=x,this.packages$=this.service.packages$,this.loading=!1}ngOnInit(){this.layoutSer.withSubMenu.next(!1),this.service.meta.subscribe(n=>this.meta=n),this.getPackages()}getPackages(){this.service.getPackages().subscribe()}createPackage(){this.dialog.open(Z,{panelClass:"large-dialog"})}edit(n){this.dialog.open(Z,{panelClass:"large-dialog",data:{_package:n,isEdit:!0}})}deletePackage(n){this.dialog.open(c.v,{panelClass:"confirmation-dialog",data:{message:"delete_package",btn_name:"confirm",classes:"bg-danger white"}}).afterClosed().subscribe(o=>{o&&this.service.deletePackage({id:n}).subscribe(()=>{this.service.getPackages().subscribe(),this.alert.showAlert("package_deleted")})})}trackBy(n,r){return r.spaceId}static{this.\u0275fac=function(r){return new(r||i)(t.Y36(l.U),t.Y36(h.uw),t.Y36(b.c),t.Y36(A.P))}}static{this.\u0275cmp=t.Xpm({type:i,selectors:[["packages"]],standalone:!0,features:[t.jDz],decls:10,vars:7,consts:[[1,"p-2"],[3,"meta"],["filters",""],[1,"packages-filters","px-2","pb-1","pt-2","flex","aic","jcfe"],["mat-raised-button","","color","primary",3,"click"],["content","",4,"ngIf"],["content",""],["class","table","id","packages-table",4,"ngIf"],[4,"ngIf"],["id","packages-table",1,"table"],[1,"bg-gray","border-bottom"],[1,"text-center"],["class","border-bottom pointer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","pointer"],[1,"fs-13"],["class","fs-13",4,"ngIf"],[1,"bx","bxs-edit","primary","fs-23",3,"click"],[1,"bx","bx-trash-alt","danger","fs-23","ml-2",3,"click"]],template:function(r,o){1&r&&(t._UZ(0,"user-navbar"),t.TgZ(1,"div",0)(2,"layout-with-filters",1),t.ynx(3,2),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return o.createPackage()}),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.BQk(),t.YNc(8,w,4,3,"ng-container",5),t.ALo(9,"async"),t.qZA()()),2&r&&(t.xp6(2),t.Q6J("meta",o.meta),t.xp6(4),t.Oqu(t.lcZ(7,3,"create_package")),t.xp6(2),t.Q6J("ngIf",t.lcZ(9,5,o.packages$)))},dependencies:[e.ez,e.sg,e.O5,e.Ov,f.N,v.w,d.Y,C.ot,C.lW,u.aw,u.X$,m.JX,m._s,U.m,p.o]})}}return i})()}}]);