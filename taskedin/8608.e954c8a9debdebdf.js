"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[8608],{48608:(G,c,s)=>{s.r(c),s.d(c,{CreatorsReportComponent:()=>J});var l=s(96814),p=s(11486),h=s(38140),C=s(59466),u=s(89515),d=s(76472),x=s(57105),Z=s(65668),_=s(15e3),f=s(32801),t=s(65879),T=s(83620),v=s(94664),m=s(37398),A=s(20553),b=s(34673),R=s(69862);let U=(()=>{class n extends b.q{constructor(e){super(),this.http=e,this.reports$=this.hasChanged.pipe((0,T.b)(400),(0,v.w)(()=>this.getCreatorsTable().pipe((0,m.U)(r=>r))))}getCreatorsTable(){this.loading.next(!0);const e=new URL(`${A.N.apiUrl}api/TaskGroups/GetTaskGroupCreatorReport`);return this.params(e),this.http.get(`${e}`).pipe((0,m.U)(r=>{this.loading.next(!1);let o=r.data.items;return this.setMeta(r),o}))}static{this.\u0275fac=function(r){return new(r||n)(t.LFG(R.eN))}}static{this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function q(n,a){if(1&n&&(t.TgZ(0,"tr",16)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",9)(4,"div",17),t._UZ(5,"app-img-title",18),t.qZA()(),t.TgZ(6,"td",9),t._uU(7),t.qZA(),t.TgZ(8,"td",9),t._uU(9),t.qZA(),t.TgZ(10,"td",10)(11,"div"),t._uU(12),t.qZA()(),t.TgZ(13,"td")(14,"div"),t._uU(15),t.qZA()(),t.TgZ(16,"td")(17,"div"),t._uU(18),t.qZA()(),t.TgZ(19,"td")(20,"div"),t._uU(21),t.qZA()(),t.TgZ(22,"td",19)(23,"div"),t._uU(24),t.qZA()()()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(3),t.Q6J("imgSrc",e.imageUrl)("title",e.name)("subTitle",e.jobTitle)("userId",e.id),t.xp6(2),t.Oqu(e.jobTitle),t.xp6(2),t.Oqu(e.departmentName),t.xp6(3),t.Oqu(e.totalCount),t.xp6(3),t.Oqu(e.repeatedCount),t.xp6(3),t.hij("",e.repeatedPercentage.toFixed(),"%"),t.xp6(3),t.Oqu(e.unRepeatedCount),t.xp6(3),t.Oqu(e.parentRepeatedCount)}}const w=function(n,a,e){return{itemsPerPage:n,currentPage:a,totalItems:e}};function y(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"table",6)(1,"thead",7)(2,"tr")(3,"th"),t._uU(4,"#"),t.qZA(),t.TgZ(5,"th",8),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th",9),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",9),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",10)(15,"div",11)(16,"p",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"sorting",13),t.NdJ("up",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.sort("1",o))})("down",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.sort("1",o))}),t.qZA()()(),t.TgZ(20,"th")(21,"div",11)(22,"p",12),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"sorting",13),t.NdJ("up",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.sort("2",o))})("down",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.sort("2",o))}),t.qZA()()(),t.TgZ(26,"th"),t._uU(27,"%"),t.qZA(),t.TgZ(28,"th")(29,"div",11)(30,"p",12),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"sorting",13),t.NdJ("up",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.sort("4",o))})("down",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.sort("4",o))}),t.qZA()()(),t.TgZ(34,"th",14)(35,"div",11)(36,"p",12),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"sorting",13),t.NdJ("up",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.sort("3",o))})("down",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.sort("3",o))}),t.qZA()()()()(),t.TgZ(40,"tbody"),t.YNc(41,q,25,12,"tr",15),t.ALo(42,"paginate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,9,"user")),t.xp6(3),t.Oqu(t.lcZ(10,11,"job_title")),t.xp6(3),t.Oqu(t.lcZ(13,13,"department")),t.xp6(5),t.Oqu(t.lcZ(18,15,"total_tasks")),t.xp6(6),t.Oqu(t.lcZ(24,17,"repeated")),t.xp6(8),t.Oqu(t.lcZ(32,19,"t_new")),t.xp6(6),t.Oqu(t.lcZ(38,21,"new_repeated")),t.xp6(4),t.Q6J("ngForOf",t.xi3(42,23,e.reports,t.kEZ(26,w,e.meta.pageSize,e.meta.currentPage,e.meta.totalItems)))("ngForTrackBy",e.trackBy)}}function O(n,a){1&n&&t._UZ(0,"not-found")}function N(n,a){1&n&&t._UZ(0,"loading")}let J=(()=>{class n{constructor(e,r){this.service=e,this.elm=r,this.loading=!1}ngOnInit(){this.source$=this.service.reports$.subscribe(e=>this.reports=e),this.service.loading.subscribe(e=>this.loading=e),this.service.meta.subscribe(e=>this.meta=e)}sort(e,r){this.service.page.next(1),this.service.orderKey.next(e),this.service.orderDirection.next(r),this.getReports()}getReports(){this.service.hasChanged.next(!0)}changePage(e){this.service.page.next(e),this.getReports()}limitChanged(e){this.service.page.next(1),this.service.limit.next(e),this.getReports()}exportToExcel(){let e=this.elm.nativeElement.querySelector("#creators");const r=p.P6.table_to_sheet(e),o=p.P6.book_new();p.P6.book_append_sheet(o,r,"Sheet1"),p.NC(o,"creators.xlsx")}trackBy(e,r){return r.id}ngOnDestroy(){this.source$.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)(t.Y36(U),t.Y36(t.SBq))}}static{this.\u0275cmp=t.Xpm({type:n,selectors:[["creators-report"]],standalone:!0,features:[t.jDz],decls:7,vars:7,consts:[[3,"meta","admin","limit","pageChange","limitChanged"],["filters",""],[3,"service","export"],["content",""],["class","table","id","creators",4,"ngIf"],[4,"ngIf"],["id","creators",1,"table"],[1,"bg-gray","border-bottom"],[1,"text-left","w-auto"],[1,"text-left"],[1,"bg-light-success-1"],[1,"flex-center"],[1,"mr-50"],[3,"up","down"],[1,"bg-light-primary-1"],["class","border-bottom",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom"],[1,"flex","aic","gap-x-1"],[3,"imgSrc","title","subTitle","userId"],[1,"bg-light-primary-1",2,"width","19rem"]],template:function(r,o){1&r&&(t.TgZ(0,"layout-with-filters",0),t.NdJ("pageChange",function(g){return o.changePage(g)})("limitChanged",function(g){return o.limitChanged(g)}),t.ynx(1,1),t.TgZ(2,"reports-filter",2),t.NdJ("export",function(){return o.exportToExcel()}),t.qZA(),t.BQk(),t.ynx(3,3),t.YNc(4,y,43,30,"table",4),t.YNc(5,O,1,0,"not-found",5),t.YNc(6,N,1,0,"loading",5),t.BQk(),t.qZA()),2&r&&(t.Q6J("meta",o.meta)("admin",!0)("limit",o.service.limit.value),t.xp6(2),t.Q6J("service",o.service),t.xp6(2),t.Q6J("ngIf",o.reports&&o.reports.length>0&&!o.loading),t.xp6(1),t.Q6J("ngIf",o.reports&&0==o.reports.length&&!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading))},dependencies:[l.ez,l.sg,l.O5,h.Y,C.i,u.aw,u.X$,d.JX,d._s,x.w,Z.N,_.I,f.G],styles:["table[_ngcontent-%COMP%]{min-width:140rem!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:1.4rem!important;border:1px solid #e7e7e7!important}"]})}}return n})()}}]);