"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[1329],{38140:(I,f,n)=>{n.d(f,{Y:()=>y});var t=n(65879),u=n(96814),v=n(89515),E=n(824),M=n(52081),_=n(56223),C=n(76472),O=n(3131);function x(a,g){if(1&a&&(t.TgZ(0,"p",10),t._uU(1),t.ALo(2,"arabicNumbers"),t.ALo(3,"translate"),t.qZA()),2&a){const r=t.oxw();t.xp6(1),t.Oqu(null!=r.meta&&r.meta.pageSize?t.lcZ(2,1,null==r.meta?null:r.meta.pageSize):t.lcZ(3,3,"unlimited"))}}function L(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"input",11),t.NdJ("ngModelChange",function(i){t.CHM(r);const h=t.oxw();return t.KtG(h.limit=i)})("ngModelChange",function(){t.CHM(r);const i=t.oxw();return t.KtG(i.changeLimit())}),t.qZA()}if(2&a){const r=t.oxw();t.Q6J("ngModel",r.limit)}}function T(a,g){1&a&&(t.TgZ(0,"p",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"record")))}function Z(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"pagination-controls",13),t.NdJ("pageChange",function(i){t.CHM(r);const h=t.oxw();return t.KtG(h.pageChanged(i))}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.qZA()}2&a&&t.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",t.lcZ(1,4,"previous"))("nextLabel",t.lcZ(2,6,"next"))}const A=[[["","filters",""]],[["","content",""]]],P=function(a,g){return{height:a,"max-width":g}},D=["[filters]","[content]"];let y=(()=>{class a{constructor(){this.pageChange=new t.vpe,this.limitChanged=new t.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,t.f3M)(O.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(r){this.pageChange.emit(r)}static{this.\u0275fac=function(c){return new(c||a)}}static{this.\u0275cmp=t.Xpm({type:a,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[t.jDz],ngContentSelectors:D,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(c,i){1&c&&(t.F$t(A),t.TgZ(0,"div",0)(1,"div",1),t.Hsn(2),t.qZA(),t.TgZ(3,"div",2),t.Hsn(4,1),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,x,4,5,"p",5),t.YNc(11,L,1,1,"input",6),t.YNc(12,T,3,3,"p",7),t.qZA(),t.YNc(13,Z,3,8,"pagination-controls",8),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.TgZ(17,"span",9),t._uU(18),t.ALo(19,"arabicNumbers"),t.ALo(20,"translate"),t.qZA()()()()),2&c&&(t.Q6J("ngStyle",t.WLB(17,P,i.hasTitle?"calc(100vh - 14.5rem)":i.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",i.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),t.xp6(8),t.hij("",t.lcZ(9,9,"pagination_per_page")," "),t.xp6(2),t.Q6J("ngIf",!i.admin),t.xp6(1),t.Q6J("ngIf",i.admin),t.xp6(1),t.Q6J("ngIf",null==i.meta?null:i.meta.pageSize),t.xp6(1),t.Q6J("ngIf",(null==i.meta?null:i.meta.totalItems)>15),t.xp6(2),t.hij("",t.lcZ(16,11,"pagination_total_records")," "),t.xp6(3),t.AsE("",t.lcZ(19,13,null==i.meta?null:i.meta.totalItems)," ",t.lcZ(20,15,"record"),""))},dependencies:[u.ez,u.O5,u.PC,v.aw,v.X$,E.h,M.m,_.u5,_.Fj,_.wV,_.JJ,_.qQ,_.On,C.JX,C.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return a})()},71329:(I,f,n)=>{n.r(f),n.d(f,{LeavesRequestsComponent:()=>q});var t=n(65879),u=n(96814),v=n(38140),E=n(52597),M=n(65668),_=n(76472),C=n(57105),O=n(64190),x=n(89515),L=n(45843),T=n(92596),Z=n(83620),A=n(94664),P=n(37398),D=n(17700),y=n(84458),a=n(99758),g=n(9619),r=n(52341);function c(o,m){if(1&o){const e=t.EpF();t.TgZ(0,"tr",10)(1,"td")(2,"div",11),t._UZ(3,"user-image",12),t.TgZ(4,"div",13)(5,"p",14),t._uU(6),t.qZA(),t.TgZ(7,"p",15),t._uU(8),t.qZA()()()(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"arabicDate"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"arabicDate"),t.qZA(),t.TgZ(19,"td",16),t.NdJ("click",function(s){return s.stopImmediatePropagation()}),t.TgZ(20,"div",17)(21,"button",18),t.NdJ("click",function(){const d=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.approveRequest(d.id))}),t._UZ(22,"i",19),t.qZA(),t.TgZ(23,"button",20),t.NdJ("click",function(){const d=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.rejectRequest(d.id))}),t._UZ(24,"i",21),t.qZA()()()()}if(2&o){const e=m.$implicit;t.MGl("routerLink","details/",e.id,""),t.xp6(3),t.Q6J("img",e.image_url),t.xp6(3),t.Oqu(e.user_name),t.xp6(2),t.Oqu(null==e.job_title?"test":e.job_title),t.xp6(2),t.Oqu(e.leaves_type),t.xp6(2),t.Oqu(e.leave_days),t.xp6(2),t.Oqu(t.lcZ(15,8,e.start_date)),t.xp6(3),t.Oqu(t.lcZ(18,10,e.end_date))}}const i=function(o,m,e){return{itemsPerPage:o,currentPage:m,totalItems:e}};function h(o,m){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,c,25,12,"tr",9),t.ALo(2,"paginate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,2,e.requests,t.kEZ(5,i,e.meta.pageSize,e.meta.currentPage,e.meta.totalItems)))("ngForTrackBy",e.trackBy)}}function U(o,m){1&o&&t._UZ(0,"not-found",22)}function b(o,m){1&o&&t._UZ(0,"loading")}const R=function(o){return{"h-100":o}};let q=(()=>{class o{constructor(){this.service=(0,t.f3M)(E.N),this.dialog=(0,t.f3M)(D.uw),this.alert=(0,t.f3M)(a.c),this.pageInfoSer=(0,t.f3M)(r.Z),this.requests=[],this.loading=!0}ngOnInit(){this.pageInfoSer.pageInfoEnum.next("Leaves"),this.service.loading.subscribe(e=>this.loading=e),this.service.meta.subscribe(e=>this.meta=e),this.service.hasChanged.pipe((0,Z.b)(400),(0,A.w)(()=>(this.service.loading.next(!0),this.service.getManagerRequests().pipe((0,P.U)(e=>{this.requests=e,this.service.loading.next(!1)}))))).subscribe()}approveRequest(e){this.service.updateRequestStatus({requestId:e,status:1,reason:"Approved"}).subscribe(s=>{s.success&&(this.alert.showAlert("leaves_request_approved"),this.service.hasChanged.next(!0))})}rejectRequest(e){this.dialog.open(y.P,{disableClose:!0,panelClass:"reject-leave-dialog"}).afterClosed().subscribe(s=>{s&&this.service.updateRequestStatus({requestId:e,status:2,reason:s}).subscribe(p=>{p.success&&(this.alert.showAlert("leaves_request_rejected"),this.service.hasChanged.next(!0))})})}trackBy(e,l){return l.id}ngOnDestroy(){this.service.loading.next(!0),this.pageInfoSer.pageInfoEnum.next("")}static{this.\u0275fac=function(l){return new(l||o)}}static{this.\u0275cmp=t.Xpm({type:o,selectors:[["leaves-requests"]],standalone:!0,features:[t.jDz],decls:28,vars:25,consts:[[3,"meta","pageChange"],["filters",""],[1,"pt-50","pl-1"],["content",""],[1,"table","w-100","relative",3,"ngClass"],[1,"bg-gray","border-bottom"],[1,"text-left"],[4,"ngIf"],["class","a-center",4,"ngIf"],["class","border-bottom pointer",3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","pointer",3,"routerLink"],[1,"flex","jcs","aic","gap-x-2"],[3,"img"],[1,"content","text-left"],[1,"bold"],[1,""],[3,"click"],[1,"flex","aic","jcc"],[1,"pointer","border-0","flex","aic","jcc","action","rounded-50","bg-success","mr-1",3,"click"],[1,"fs-22","bx","bx-check"],[1,"pointer","border-0","flex","aic","jcc","action","rounded-50","bg-danger",3,"click"],[1,"fs-22","bx","bx-x"],[1,"a-center"]],template:function(l,s){1&l&&(t.TgZ(0,"layout-with-filters",0),t.NdJ("pageChange",function(p){return s.service.page.next(p),s.service.hasChanged.next(!0)}),t.ynx(1,1),t.TgZ(2,"h2",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.BQk(),t.ynx(5,3),t.TgZ(6,"table",4)(7,"thead",5)(8,"tr")(9,"th",6),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"th"),t.qZA()(),t.YNc(25,h,3,9,"tbody",7),t.YNc(26,U,1,0,"not-found",8),t.YNc(27,b,1,0,"loading",7),t.qZA(),t.BQk(),t.qZA()),2&l&&(t.Q6J("meta",s.meta),t.xp6(3),t.Oqu(t.lcZ(4,11,"leave_request")),t.xp6(3),t.Q6J("ngClass",t.VKq(23,R,0==s.requests.length||s.loading)),t.xp6(4),t.Oqu(t.lcZ(11,13,"member")),t.xp6(3),t.Oqu(t.lcZ(14,15,"leaves_type")),t.xp6(3),t.Oqu(t.lcZ(17,17,"leave_days")),t.xp6(3),t.Oqu(t.lcZ(20,19,"start_date")),t.xp6(3),t.Oqu(t.lcZ(23,21,"end_date")),t.xp6(3),t.Q6J("ngIf",s.requests.length>0&&!s.loading),t.xp6(1),t.Q6J("ngIf",0==s.requests.length&&!s.loading),t.xp6(1),t.Q6J("ngIf",s.loading))},dependencies:[u.ez,u.mk,u.sg,u.O5,v.Y,M.N,_.JX,_._s,C.w,O.rH,x.aw,x.X$,L.l,T.AV,g.P]})}}return o})()}}]);