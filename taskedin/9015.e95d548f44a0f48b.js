"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[9015],{99015:(k,u,a)=>{a.r(u),a.d(u,{TeamReportComponent:()=>Y});var l=a(96814),h=a(57105),Z=a(65668),C=a(28591),g=a(52081),x=a(88492),d=a(89515),R=a(45843),v=a(38140),A=a(24971),p=a(54807),f=a(32296),m=a(11486),c=a(56223),T=a(76472),b=a(59466),E=a(49939),O=a(1350),e=a(65879),M=a(80905);function P(o,_){1&o&&e._uU(0),2&o&&e.hij(" ",_.item.name," ")}function D(o,_){if(1&o&&(e.TgZ(0,"span",15),e._uU(1),e.qZA()),2&o){const t=_.item;e.xp6(1),e.Oqu(t.name)}}function U(o,_){if(1&o&&(e.TgZ(0,"span",20),e._uU(1),e.ALo(2,"arabicNumbers"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.required))}}function L(o,_){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"defineDays"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,e.lcZ(3,3,t.required)+"_hour"))}}function I(o,_){if(1&o&&(e.TgZ(0,"span",20),e._uU(1),e.ALo(2,"arabicNumbers"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.actual))}}function q(o,_){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"defineDays"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,e.lcZ(3,3,t.actual)+"_hour"))}}function N(o,_){1&o&&e._UZ(0,"i",35)}function w(o,_){1&o&&e._UZ(0,"i",36)}const K=function(o,_){return{success:o,danger:_}};function J(o,_){if(1&o&&(e.TgZ(0,"tr",23)(1,"td")(2,"div",24),e._UZ(3,"user-image",25),e.TgZ(4,"div",26)(5,"p",27),e._uU(6),e.qZA(),e.TgZ(7,"p",28),e._uU(8),e.qZA()()()(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"arabicNumbers"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"arabicNumbers"),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"td"),e.YNc(17,U,3,3,"span",29),e.YNc(18,L,4,5,"span",14),e.qZA(),e.TgZ(19,"td"),e.YNc(20,I,3,3,"span",29),e.YNc(21,q,4,5,"span",14),e.qZA(),e.TgZ(22,"td")(23,"div",19),e._UZ(24,"rate",30),e.qZA()(),e.TgZ(25,"td")(26,"div",19)(27,"div",31),e._uU(28),e.ALo(29,"arabicNumbers"),e.qZA(),e.TgZ(30,"div",32),e.YNc(31,N,1,0,"i",33),e.YNc(32,w,1,0,"i",34),e.qZA()()()()),2&o){const t=_.$implicit,r=e.oxw(2);e.xp6(3),e.Q6J("img",t.imageUrl)("id",t.id),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.jobTitle),e.xp6(2),e.Oqu(e.lcZ(11,16,t.taskTotalCount)),e.xp6(3),e.AsE("",e.lcZ(14,18,t.shiftWorkingHoursMonthly)," ",e.lcZ(15,20,"hour"),""),e.xp6(4),e.Q6J("ngIf",t.required>2&&"ar"==r.language||"en"==r.language||0==t.actual),e.xp6(1),e.Q6J("ngIf",t.required>0),e.xp6(2),e.Q6J("ngIf",t.actual>2&&"ar"==r.language||"en"==r.language||0==t.actual),e.xp6(1),e.Q6J("ngIf",t.actual>0),e.xp6(3),e.Q6J("rate",t.averageRate),e.xp6(3),e.Q6J("ngClass",e.WLB(24,K,t.performanceRate>0,t.performanceRate<0)),e.xp6(1),e.hij("",e.lcZ(29,22,t.performanceRate)," % "),e.xp6(3),e.Q6J("ngIf",t.performanceRate>0),e.xp6(1),e.Q6J("ngIf",t.performanceRate<0)}}const B=function(o,_,t){return{itemsPerPage:o,currentPage:_,totalItems:t}};function W(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"table",16)(1,"thead",17)(2,"tr")(3,"th",18),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th")(7,"div",19)(8,"p",20),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"sorting",21),e.NdJ("up",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sort("taskTotalCount",!0))})("down",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sort("taskTotalCount",!1))}),e.qZA()()(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"th")(16,"div",19)(17,"p",20),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"sorting",21),e.NdJ("up",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sort("workingHours",!0,"required"))})("down",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sort("workingHours",!1,"required"))}),e.qZA()()(),e.TgZ(21,"th")(22,"div",19)(23,"p",20),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"sorting",21),e.NdJ("up",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sort("workingHours",!0,"actual"))})("down",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sort("workingHours",!1,"actual"))}),e.qZA()()(),e.TgZ(27,"th")(28,"div",19)(29,"p",20),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"sorting",21),e.NdJ("up",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sort("averageRate",!0))})("down",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sort("averageRate",!1))}),e.qZA()()(),e.TgZ(33,"th")(34,"div",19)(35,"p",20),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"sorting",21),e.NdJ("up",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sort("performanceRate",!0))})("down",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sort("performanceRate",!1))}),e.qZA()()()()(),e.TgZ(39,"tbody"),e.YNc(40,J,33,27,"tr",22),e.ALo(41,"paginate"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,9,"member")),e.xp6(5),e.Oqu(e.lcZ(10,11,"inbox_tasks")),e.xp6(4),e.Oqu(e.lcZ(14,13,"working_hours")),e.xp6(5),e.Oqu(e.lcZ(19,15,"expected_hours")),e.xp6(6),e.Oqu(e.lcZ(25,17,"actual_hours")),e.xp6(6),e.Oqu(e.lcZ(31,19,"average_rate")),e.xp6(6),e.Oqu(e.lcZ(37,21,"performance_rate")),e.xp6(4),e.Q6J("ngForOf",e.xi3(41,23,t.reports,e.kEZ(26,B,t.meta.pageSize,t.meta.currentPage,t.meta.totalItems)))("ngForTrackBy",t.trackBy)}}function y(o,_){1&o&&e._UZ(0,"not-found")}function Q(o,_){1&o&&e._UZ(0,"loading")}let Y=(()=>{class o{constructor(t,r,n){this.service=t,this.elm=r,this.arabicNumber=n,this.reports=[],this.loading=!1,this.language=localStorage.getItem("language")||"en",this.averageRate=null,this.performanceRate=null,this.oldValue=[],this.list=[{name:this.arabicNumber.transform(1),value:1},{name:this.arabicNumber.transform(2),value:2},{name:this.arabicNumber.transform(3),value:3},{name:this.arabicNumber.transform(4),value:4},{name:this.arabicNumber.transform(5),value:5}]}ngOnInit(){this.service.meta.subscribe(t=>this.meta=t),this.service.loading.subscribe(t=>this.loading=t),this.service.teamReport.subscribe(t=>{this.reports=t,this.oldValue=t}),0==this.reports.length&&this.service.search.next("")}getReport(){this.service.getTeamReport().subscribe()}sort(t,r,n=""){this.reports=this.reports.sort(n?r?(i,s)=>i[t][n]>s[t][n]?-1:1:(i,s)=>i[t][n]<s[t][n]?-1:1:r?(i,s)=>i[t]>s[t]?-1:1:(i,s)=>i[t]<s[t]?-1:1)}clientsideFilter(t,r){this.reports=this.oldValue,this.reports=this.reports.filter(n=>r.map(i=>n[t]==i).filter(Boolean)[0]),0==r.length&&(this.reports=this.oldValue)}filter(t,r,n){clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.service.currentPage.next(1),r?.next(t),this.averageRate=null,this.getReport()},500)}search(t,r){r?.next(t)}exportToExcel(){let t=this.elm.nativeElement.querySelector("#team-report");const r=m.P6.table_to_sheet(t),n=m.P6.book_new();m.P6.book_append_sheet(n,r,"Sheet1"),m.NC(n,"team-report.xlsx")}limitChange(t){this.service.currentPage.next(1),this.service.limit.next(t),this.averageRate=null,this.getReport()}changePage(t){this.service.currentPage.next(t),this.averageRate=null,this.getReport()}trackBy(t,r){return r.id}static{this.\u0275fac=function(r){return new(r||o)(e.Y36(M.D),e.Y36(e.SBq),e.Y36(g.m))}}static{this.\u0275cmp=e.Xpm({type:o,selectors:[["team-report"]],standalone:!0,features:[e.jDz],decls:18,vars:17,consts:[[3,"meta","admin","limit","pageChange","limitChanged"],["filters",""],[1,"filter","px-50","flex","aic","jcsb"],[1,"flex","aic","gap-x-2"],[3,"key","valueChanged"],[1,"average-rate","w-19r"],["key","average_rate"],["bindLabel","name","bindValue","value","appendTo","body",3,"items","multiple","closeOnSelect","ngModel","ngModelChange"],["ng-option-tmp",""],["ng-label-tmp",""],[3,"start_date_key","end_date_key","selectedDate","onChange"],["mat-raised-button","",1,"bg-success","export",3,"click"],["content",""],["class","table","id","team-report",4,"ngIf"],[4,"ngIf"],[1,"fs-14","px-50","rounded-50"],["id","team-report",1,"table"],[1,"bg-gray","border-bottom"],[1,"text-left"],[1,"flex-center"],[1,"mr-50"],[3,"up","down"],["class","border-bottom",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom"],[1,"flex","aic"],[3,"img","id"],[1,"info","ml-75","text-left"],[1,"fs-16","primary"],[1,"muted","fs-13"],["class","mr-50",4,"ngIf"],["type","small",3,"rate"],[1,"start","line-height",3,"ngClass"],[1,"end","ml-50"],["class","bx bxs-up-arrow success fs-15",4,"ngIf"],["class","bx bxs-down-arrow danger fs-15",4,"ngIf"],[1,"bx","bxs-up-arrow","success","fs-15"],[1,"bx","bxs-down-arrow","danger","fs-15"]],template:function(r,n){1&r&&(e.TgZ(0,"layout-with-filters",0),e.NdJ("pageChange",function(s){return n.changePage(s)})("limitChanged",function(s){return n.limitChange(s)}),e.ynx(1,1),e.TgZ(2,"div",2)(3,"div",3)(4,"search",4),e.NdJ("valueChanged",function(s){return n.search(s,n.service.search)}),e.qZA(),e.TgZ(5,"div",5),e._UZ(6,"input-label",6),e.TgZ(7,"ng-select",7),e.NdJ("ngModelChange",function(s){return n.averageRate=s})("ngModelChange",function(s){return n.clientsideFilter("averageRate",s)}),e.YNc(8,P,1,1,"ng-template",8),e.YNc(9,D,2,1,"ng-template",9),e.qZA()(),e.TgZ(10,"month-filter",10),e.NdJ("onChange",function(){return n.getReport()}),e.qZA()(),e.TgZ(11,"button",11),e.NdJ("click",function(){return n.exportToExcel()}),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.BQk(),e.ynx(14,12),e.YNc(15,W,42,30,"table",13),e.YNc(16,y,1,0,"not-found",14),e.YNc(17,Q,1,0,"loading",14),e.BQk(),e.qZA()),2&r&&(e.Q6J("meta",n.meta)("admin",!0)("limit",n.service.limitValue),e.xp6(4),e.Q6J("key",n.service.searchValue),e.xp6(3),e.Q6J("items",n.list)("multiple",!0)("closeOnSelect",!1)("ngModel",n.averageRate),e.xp6(3),e.Q6J("start_date_key",n.service.startDateFrom)("end_date_key",n.service.startDateTo)("selectedDate",n.service.selectedDate),e.xp6(2),e.Oqu(e.lcZ(13,15,"export")),e.xp6(3),e.Q6J("ngIf",n.reports&&n.reports.length>0&&!n.loading),e.xp6(1),e.Q6J("ngIf",n.reports&&0==n.reports.length&&!n.loading),e.xp6(1),e.Q6J("ngIf",n.loading))},dependencies:[l.ez,l.mk,l.sg,l.O5,h.w,Z.N,C.T,g.m,x.K,d.aw,d.X$,R.l,v.Y,A.g,p.A0,p.w9,p.ir,p.mR,f.ot,f.lW,c.u5,c.JJ,c.On,T.JX,T._s,b.i,E.z,O.i]})}}return o})()}}]);