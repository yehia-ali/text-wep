"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[165,1428,6526],{1428:(Z,m,a)=>{a.d(m,{$:()=>v});var t=a(65879),c=a(96814),f=a(3131);const r=function(o){return{"max-width":o}},_=["*"];let v=(()=>{class o{constructor(){this.scroll=!1,this.service=(0,t.f3M)(f.P)}static{this.\u0275fac=function(g){return new(g||o)}}static{this.\u0275cmp=t.Xpm({type:o,selectors:[["layout"]],inputs:{scroll:"scroll"},standalone:!0,features:[t.jDz],ngContentSelectors:_,decls:2,vars:6,consts:[[3,"ngStyle"]],template:function(g,u){1&g&&(t.F$t(),t.TgZ(0,"div",0),t.Hsn(1),t.qZA()),2&g&&(t.Gre("",u.scroll?"scroll":""," layout rounded bg-white border"),t.Q6J("ngStyle",t.VKq(4,r,u.service.withSubMenu.value?"100vw":"calc(100vw - 92px)")))},dependencies:[c.ez,c.PC],styles:[".layout[_ngcontent-%COMP%]{overflow:hidden;height:calc(100vh - 11rem);box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.scroll[_ngcontent-%COMP%]{overflow-y:auto!important}"]})}}return o})()},3131:(Z,m,a)=>{a.d(m,{P:()=>f});var t=a(65619),c=a(65879);let f=(()=>{class r{constructor(){this.withSubMenu=new t.X(!0)}static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},20165:(Z,m,a)=>{a.r(m),a.d(m,{DetailsComponent:()=>Y});var t=a(65879),c=a(96814),f=a(20553),r=a(65619),_=a(37398),v=a(69862);let o=(()=>{class i{constructor(e){this.http=e,this.id=new r.X(0)}getDetails(e){return this.http.get(`${f.N.coreBase}/api/EmailBox/GetMessageDetails?Folder=${"inbox"==e?0:1}&MessageId=${this.id.value}`).pipe((0,_.U)(l=>{let s=l.data.message;return s.attachment=s.attachment.map(p=>{let K=atob(p.content).split("base64")[1];const y=atob(K),D=new Array(y.length);for(let T=0;T<y.length;T++)D[T]=y.charCodeAt(T);const S=new Uint8Array(D);let n=p.fileName.split(".").pop(),x="application/octet-stream";"jpg"==n||"jpeg"==n?x="image/jpeg":"png"==n?x="image/png":"pdf"==n&&(x="application/pdf");const $=new Blob([S],{type:x});return p.content=URL.createObjectURL($),p.fileType="jpg"==n||"png"==n||"jpeg"==n?2:"pdf"==n||"doc"==n||"docx"==n||"xls"==n||"xlsx"==n?3:"mp4"==n||"avi"==n||"mkv"==n?4:5,p}),s}))}static{this.\u0275fac=function(l){return new(l||i)(t.LFG(v.eN))}}static{this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var b=a(1428),h=a(64190),g=a(824),u=a(89515),M=a(65668),U=a(9619),I=a(11383),E=a(32296),A=a(92596),L=a(17700),C=a(95013);function N(i,d){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.AsE("",t.lcZ(2,2,"cc"),": ",null==e.details?null:e.details.cCs,"")}}function O(i,d){1&i&&t._UZ(0,"img",31)}function j(i,d){1&i&&t._UZ(0,"img",32)}function w(i,d){1&i&&t._UZ(0,"img",33)}function J(i,d){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.fileName)}}function P(i,d){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij("",t.Dn7(2,1,e.fileName,0,20),"...")}}function Q(i,d){if(1&i&&(t.ynx(0),t.TgZ(1,"div",22)(2,"div",23)(3,"div",24)(4,"div",25),t.YNc(5,O,1,0,"img",26),t.YNc(6,j,1,0,"img",27),t.YNc(7,w,1,0,"img",28),t.qZA(),t.YNc(8,J,2,1,"p",2),t.YNc(9,P,3,5,"p",2),t.qZA(),t.TgZ(10,"a",29),t._UZ(11,"img",30),t.qZA()()(),t.BQk()),2&i){const e=d.$implicit;t.xp6(5),t.Q6J("ngIf",2==e.fileType),t.xp6(1),t.Q6J("ngIf",3==e.fileType||1==e.fileType||6==e.fileType),t.xp6(1),t.Q6J("ngIf",4==e.fileType),t.xp6(1),t.Q6J("ngIf",e.fileName.length<=20),t.xp6(1),t.Q6J("ngIf",e.fileName.length>20),t.xp6(1),t.Q6J("href",e.content,t.LSH)}}function F(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h2"),t._uU(3),t.qZA()(),t.TgZ(4,"div",5)(5,"div",6)(6,"p",7),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"p",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,N,3,4,"p",2),t.qZA(),t.TgZ(13,"div",8)(14,"p",9),t._uU(15),t.ALo(16,"arabicDate"),t.ALo(17,"arabicTime"),t.qZA(),t.TgZ(18,"div",10)(19,"img",11),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.reply())}),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"img",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.forward())}),t.ALo(22,"translate"),t.qZA()()()(),t.TgZ(23,"div",13),t._UZ(24,"div",14),t.TgZ(25,"div",15),t.YNc(26,Q,12,6,"ng-container",16),t.qZA(),t.TgZ(27,"div",17)(28,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.reply())}),t._UZ(29,"img",19),t.TgZ(30,"p",20),t._uU(31),t.ALo(32,"translate"),t.qZA()(),t.TgZ(33,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.forward())}),t._UZ(34,"img",21),t.TgZ(35,"p",20),t._uU(36),t.ALo(37,"translate"),t.qZA()()()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Oqu(null==e.details?null:e.details.subject),t.xp6(4),t.AsE("",t.lcZ(8,14,"from"),": ",null==e.details?null:e.details.senderEmail,""),t.xp6(3),t.AsE("",t.lcZ(11,16,"to"),": ",null==e.details?null:e.details.to,""),t.xp6(2),t.Q6J("ngIf",(null==e.details.cSc?null:e.details.cSc.length)>0),t.xp6(3),t.AsE("",t.lcZ(16,18,null==e.details?null:e.details.date),", ",t.xi3(17,20,null==e.details?null:e.details.date,!1),""),t.xp6(4),t.Q6J("matTooltip",t.lcZ(20,23,"reply")),t.xp6(2),t.Q6J("matTooltip",t.lcZ(22,25,"forward")),t.xp6(3),t.Q6J("innerHTML",null==e.details?null:e.details.htmlBody,t.oJD),t.xp6(2),t.Q6J("ngForOf",null==e.details?null:e.details.attachment),t.xp6(5),t.Oqu(t.lcZ(32,27,"reply")),t.xp6(5),t.Oqu(t.lcZ(37,29,"forward"))}}function B(i,d){1&i&&t._UZ(0,"loading")}let Y=(()=>{class i{constructor(){this.service=(0,t.f3M)(o),this.route=(0,t.f3M)(h.gz),this.dialog=(0,t.f3M)(L.uw),this.router=(0,t.f3M)(h.F0),this.loading=!0}ngOnInit(){this.service.id.next(this.route.snapshot.params.id),this.detailsType=this.router.url.includes("inbox")?"inbox":"sent",this.service.getDetails(this.detailsType).subscribe(e=>{this.loading=!1,this.details=e})}forward(){this.dialog.open(C.d,{panelClass:"create-task-dialog",data:{isForward:!0,messageId:this.details.messageId,subject:this.details.subject,isEdit:!1,folder:"inbox"==this.detailsType?0:1}})}reply(){this.dialog.open(C.d,{panelClass:"create-task-dialog",data:{isReply:!0,messageId:this.details.messageId,subject:this.details.subject,folder:"inbox"==this.detailsType?0:1}})}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275cmp=t.Xpm({type:i,selectors:[["email-details"]],standalone:!0,features:[t.jDz],decls:4,vars:2,consts:[["magicScroll","",1,"details","h-100","relative"],["class","content",4,"ngIf"],[4,"ngIf"],[1,"content"],[1,"top-section","p-2","border-bottom"],[1,"top-info","flex","aic","jcsb","p-2"],[1,"users"],[1,"mb-1"],[1,"date","flex","aic","jcsb","gap-x-3"],[1,"muted"],[1,"flex","aic","gap-x-2"],["src","assets/images/icons/email-reply.svg","matTooltipClass","tooltip","alt","",1,"right","pointer",3,"matTooltip","click"],["src","assets/images/icons/email-forward.svg","matTooltipClass","tooltip","alt","",1,"right","pointer",3,"matTooltip","click"],[1,"main-section","p-2"],[1,"mb-2",3,"innerHTML"],[1,"flex-grid"],[4,"ngFor","ngForOf"],[1,"actions","flex","aic","gap-x-2","mt-3"],[1,"clickable-btn","border","rounded","px-2","flex","aic","py-50",3,"click"],["src","assets/images/icons/email-reply.svg","alt","",1,"right"],[1,"ml-50"],["src","assets/images/icons/email-forward.svg","alt","",1,"right"],[1,"col-lg-4"],[1,"attachment-card","p-2","bg-gray","rounded","flex","jcsb","mt-1"],[1,"start","flex","aic"],[1,"img","mr-1"],["src","assets/images/attachments/image.svg","alt","image icon",4,"ngIf"],["src","assets/images/attachments/document.svg","alt","image icon",4,"ngIf"],["src","assets/images/attachments/video.svg","alt","image icon",4,"ngIf"],["download","","target","_blank",1,"end","pointer",3,"href"],["src","assets/images/attachments/download.svg","alt","image icon"],["src","assets/images/attachments/image.svg","alt","image icon"],["src","assets/images/attachments/document.svg","alt","image icon"],["src","assets/images/attachments/video.svg","alt","image icon"]],template:function(l,s){1&l&&(t.TgZ(0,"layout")(1,"div",0),t.YNc(2,F,38,31,"div",1),t.YNc(3,B,1,0,"loading",2),t.qZA()()),2&l&&(t.xp6(2),t.Q6J("ngIf",!s.loading),t.xp6(1),t.Q6J("ngIf",s.loading))},dependencies:[c.ez,c.sg,c.O5,c.OU,b.$,g.h,u.aw,u.X$,M.N,U.P,I.E,E.ot,A.AV,A.gM]})}}return i})()}}]);