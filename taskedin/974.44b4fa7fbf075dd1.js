"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[974],{1428:(Z,m,o)=>{o.d(m,{$:()=>h});var t=o(65879),r=o(96814),A=o(3131);const p=function(_){return{"max-width":_}},f=["*"];let h=(()=>{class _{constructor(){this.scroll=!1,this.service=(0,t.f3M)(A.P)}static{this.\u0275fac=function(g){return new(g||_)}}static{this.\u0275cmp=t.Xpm({type:_,selectors:[["layout"]],inputs:{scroll:"scroll"},standalone:!0,features:[t.jDz],ngContentSelectors:f,decls:2,vars:6,consts:[[3,"ngStyle"]],template:function(g,x){1&g&&(t.F$t(),t.TgZ(0,"div",0),t.Hsn(1),t.qZA()),2&g&&(t.Gre("",x.scroll?"scroll":""," layout rounded bg-white border"),t.Q6J("ngStyle",t.VKq(4,p,x.service.withSubMenu.value?"100vw":"calc(100vw - 92px)")))},dependencies:[r.ez,r.PC],styles:[".layout[_ngcontent-%COMP%]{overflow:hidden;height:calc(100vh - 11rem);box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.scroll[_ngcontent-%COMP%]{overflow-y:auto!important}"]})}}return _})()},40974:(Z,m,o)=>{o.r(m),o.d(m,{AllSpacesNewComponent:()=>j});var t=o(65879),r=o(96814),A=o(55006),p=o(11486),f=o(83318),h=o(89515),_=o(76472),O=o(22557),u=o(92596),g=o(57105),x=o(65668),T=o(3131),E=o(99758),b=o(82599),P=o(33857),M=o(75986),v=o(32296),S=o(6156),L=o(82740),D=o(69862),w=o(1428),U=o(52081),d=o(56223),N=o(24971),y=o(92965),I=o(17700);function K(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",19)(1,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changeMultiSpacesStatus(!0))}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",21),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changeMultiSpacesStatus(!1))}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,2,"activate")+" "+e.selectedSpaces.length," "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"deactivate")+" "+e.selectedSpaces.length," ")}}function J(s,i){1&s&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"active")))}function B(s,i){1&s&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"inactive")))}function R(s,i){if(1&s&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Oqu("rtl"==n.dir?e.countryArName:e.country)}}function W(s,i){1&s&&(t.TgZ(0,"p"),t._uU(1,"-"),t.qZA())}const k=function(s){return{"bx-rotate-180":s}};function q(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"tr",29)(1,"td",25)(2,"mat-checkbox",30),t.NdJ("change",function(){const l=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.selectSpace(l.id))}),t.qZA(),t._uU(3),t.qZA(),t.TgZ(4,"td",25)(5,"p",31)(6,"i",32),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.showLogs(l.id))}),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA()()(),t.TgZ(9,"td",25)(10,"a",33),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.createLog(l,"whatsapp"))}),t.ALo(11,"slice"),t.qZA(),t.TgZ(12,"a",34),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.createLog(l,"call"))}),t.ALo(13,"slice"),t.qZA(),t.TgZ(14,"span",35),t._uU(15),t.qZA()(),t.TgZ(16,"td",25)(17,"a",36),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.createLog(l,"email"))}),t._UZ(18,"i",37),t._uU(19),t.qZA()(),t.TgZ(20,"td")(21,"mat-slide-toggle",38),t.NdJ("change",function(a){const c=t.CHM(e).$implicit,C=t.oxw(2);return t.KtG(C.toggleSpace(a,c.id,c))}),t.qZA(),t.TgZ(22,"p",39),t.YNc(23,J,3,3,"span",18),t.YNc(24,B,3,3,"span",18),t.qZA()(),t.TgZ(25,"td",25),t.YNc(26,R,2,1,"p",18),t.YNc(27,W,2,0,"p",18),t.qZA(),t.TgZ(28,"td")(29,"i",40),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.goToSpace(l))}),t.ALo(30,"translate"),t.qZA()(),t.TgZ(31,"td",41),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.spaceConfiguration(l))}),t.ALo(32,"translate"),t._UZ(33,"i",42),t.qZA()()}if(2&s){const e=i.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("checked",n.selectedSpaces.includes(e.id)),t.xp6(1),t.hij(" ",e.id," "),t.xp6(5),t.Oqu(e.name),t.xp6(2),t.Q6J("href","https://wa.me/+"+t.xi3(11,16,e.phone,2),t.LSH),t.xp6(2),t.Q6J("href","tel:+"+t.xi3(13,19,e.phone,2),t.LSH),t.xp6(3),t.Oqu(e.phone),t.xp6(2),t.Q6J("href","mailto:"+(e.email||""),t.LSH),t.xp6(2),t.hij(" ",e.email||"-"," "),t.xp6(2),t.Q6J("checked",e.isActive),t.xp6(2),t.Q6J("ngIf",e.isActive),t.xp6(1),t.Q6J("ngIf",!e.isActive),t.xp6(2),t.Q6J("ngIf",e.country),t.xp6(1),t.Q6J("ngIf",!e.country),t.xp6(2),t.Q6J("matTooltip",t.lcZ(30,22,"go_to_space"))("ngClass",t.VKq(26,k,"rtl"==n.dir)),t.xp6(2),t.Q6J("matTooltip",t.lcZ(32,24,"space_configuration"))}}const Q=function(s,i,e){return{itemsPerPage:s,currentPage:i,totalItems:e}};function H(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"table",22)(1,"thead",23)(2,"tr",24)(3,"th",25)(4,"mat-checkbox",26),t.NdJ("change",function(a){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleSelectAll(a.checked))}),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",25)(8,"div",11)(9,"p",27),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"th",25),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",25),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",25)(19,"div",11)(20,"p",27),t._uU(21),t.ALo(22,"translate"),t.qZA()()(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th",25),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"th")(30,"th"),t.qZA()(),t.TgZ(31,"tbody"),t.YNc(32,q,34,28,"tr",28),t.ALo(33,"paginate"),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,9,"id")," "),t.xp6(5),t.Oqu(t.lcZ(11,11,"name")),t.xp6(3),t.Oqu(t.lcZ(14,13,"phone")),t.xp6(3),t.Oqu(t.lcZ(17,15,"email")),t.xp6(5),t.Oqu(t.lcZ(22,17,"creation_date")),t.xp6(3),t.Oqu(t.lcZ(25,19,"is_active")),t.xp6(3),t.Oqu(t.lcZ(28,21,"country")),t.xp6(5),t.Q6J("ngForOf",t.xi3(33,23,e.spaces,t.kEZ(26,Q,e.limit,e.page,e.totalItems)))("ngForTrackBy",e.trackBy)}}function $(s,i){1&s&&t._UZ(0,"not-found")}function G(s,i){1&s&&t._UZ(0,"loading")}let j=(()=>{class s{constructor(e,n,a){this.service=e,this.dialog=n,this.elm=a,this.selectedSpaces=[],this.spaces=[],this.loading=!1,this.dir=document.dir,this.layout=(0,t.f3M)(T.P),this.alert=(0,t.f3M)(E.c),this.page=1,this.limit=15,this.getSpaces()}ngOnInit(){this.layout.withSubMenu.next(!1)}getSpaces(){this.loading=!0;let e=(new D.LE).set("page",this.page).set("limit",this.limit);this.searchValue&&(e=e.set("search",this.searchValue)),this.service.getAllSpacesLight(e).subscribe(n=>{this.loading=!1,this.spaces=n.data.items,this.page=n.data.currentPage,this.limit=n.data.pageSize,this.totalItems=n.data.totalItems,console.log(n)})}pageChanged(e){this.page=e,this.getSpaces()}changeLimit(){this.getSpaces()}search(e){this.searchValue=e,this.getSpaces()}toggleSpace(e,n,a){this.dialog.open(f.v,{panelClass:"small-dialog",data:{btn_name:"confirm",classes:"bg-primary white",message:a.isActive?"deactivate_space":"activate_space"}}).afterClosed().subscribe(c=>{c&&this.service.activeOrDeactiveSpace({id:n,isActivated:!a.isActive}).subscribe(F=>{F.success&&(this.alert.showAlert("space_status_changed"),this.service.getAllSpacesLight().subscribe())})})}createLog(e,n=""){this.dialog.open(S.f,{panelClass:"small-dialog",width:"600px",data:{btn_name:"confirm",type:n,space:e}}).afterClosed().subscribe(l=>{l&&this.alert.showAlert("space_status_changed")})}showLogs(e){this.dialog.open(L.H,{panelClass:"small-dialog",width:"800px",data:{btn_name:"confirm",space:e}}).afterClosed().subscribe(a=>{a&&this.alert.showAlert("space_status_changed")})}goToSpace(e){localStorage.setItem("space-id",JSON.stringify(e.id)),localStorage.setItem("space-name",e.spaceName),localStorage.setItem("base-url",e.baseUrl),window.location.href="/tasks/all-tasks"}spaceConfiguration(e){this.dialog.open(P.U,{panelClass:"configure-space-dialog",data:{space:e}})}changePage(e){this.service.currentPage.next(e),this.getSpaces()}limitChanged(e){this.service.currentPage.next(1),this.service.limit.next(e),this.getSpaces()}exportToExcel(){let e=this.elm.nativeElement.querySelector("#spaces-table");const n=p.P6.table_to_sheet(e),a=p.P6.book_new();p.P6.book_append_sheet(a,n,"Sheet1"),p.NC(a,"spaces.xlsx")}trackBy(e,n){return n.id}changeMultiSpacesStatus(e){this.service.activeOrDeactiveMultiSpace({id:this.selectedSpaces,isActivated:e}).subscribe(a=>{this.alert.showAlert("success"),this.selectedSpaces=[],this.getSpaces()})}selectSpace(e){console.log(e);const n=this.selectedSpaces.indexOf(e);-1===n?this.selectedSpaces.push(e):this.selectedSpaces.splice(n,1),this.isAllSelected()}toggleSelectAll(e){this.selectedSpaces=e?this.spaces.map(n=>n.id):[],console.log(this.selectedSpaces)}isAllSelected(){return this.selectedSpaces.length===this.spaces.length}static{this.\u0275fac=function(n){return new(n||s)(t.Y36(y.s),t.Y36(I.uw),t.Y36(t.SBq))}}static{this.\u0275cmp=t.Xpm({type:s,selectors:[["all-spaces-new"]],standalone:!0,features:[t.jDz],decls:33,vars:29,consts:[[1,"p-2"],["filters",""],[1,"flex-grid","aic","jcsb","mb-1","p-1"],[1,"col-md-3"],[3,"newSearch","valueChanged"],[1,"col-md-6","text-right"],["class","mt-1",4,"ngIf"],["content",""],[1,"table-container"],["class","table","id","spaces-table",4,"ngIf"],[1,"pagination-content","flex","aic","jcsb","py-1","bg-white","border-top","border-bottom","px-2"],[1,"flex","aic"],[1,"fs-12","simibold"],["type","number","min","1",1,"input","ml-75","limit","text-center","py-50","px-0",2,"width","50px",3,"ngModel","ngModelChange"],[1,"ml-50","primary","fs-12"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"],[1,"fs-12","simibold","pr-3"],[1,"primary"],[4,"ngIf"],[1,"mt-1"],["mat-raised-button","","color","primary",1,"mr-50",3,"click"],["mat-raised-button","","color","primary",3,"click"],["id","spaces-table",1,"table"],[1,""],[1,"border-bottom","fs-12","simibold"],[1,"text-left"],["color","primary",3,"change"],[1,"mr-50"],["class","border-bottom",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom"],["color","primary",3,"checked","change"],[1,"bold","primary","flex","aic"],[1,"bx","bx-file","blue","fs-18","pointer","mr-1",3,"click"],["target","_blank",1,"mr-50","bx","bxl-whatsapp","fs-18","success",3,"href","click"],[1,"mr-50","bx","bx-phone","fs-18","blue",3,"href","click"],[1,"bold"],[1,"bold",3,"href","click"],[1,"mr-50","bx","bx-envelope","fs-18","blue"],["color","primary",1,"example-margin",3,"checked","change"],[1,"print"],[1,"bx","bx-right-arrow-circle","fs-25","pointer","primary",3,"matTooltip","ngClass","click"],[3,"matTooltip","click"],[1,"bx","bxs-edit","fs-23","primary","pointer"]],template:function(n,a){1&n&&(t._UZ(0,"user-navbar"),t.TgZ(1,"div",0)(2,"layout"),t.ynx(3,1),t.TgZ(4,"div",2)(5,"div",3)(6,"search",4),t.NdJ("valueChanged",function(c){return a.search(c)}),t.qZA()(),t.TgZ(7,"div",5),t.YNc(8,K,7,6,"div",6),t.qZA()(),t.BQk(),t.ynx(9,7),t.TgZ(10,"div",8),t.YNc(11,H,34,30,"table",9),t.qZA(),t.TgZ(12,"div",10)(13,"div",11)(14,"p",12),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"input",13),t.NdJ("ngModelChange",function(c){return a.limit=c})("ngModelChange",function(){return a.changeLimit()}),t.qZA(),t.TgZ(18,"p",14),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t.TgZ(21,"pagination-controls",15),t.NdJ("pageChange",function(c){return a.pageChanged(c)}),t.ALo(22,"translate"),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"p",16),t._uU(25),t.ALo(26,"translate"),t.TgZ(27,"span",17),t._uU(28),t.ALo(29,"arabicNumbers"),t.ALo(30,"translate"),t.qZA()()(),t.YNc(31,$,1,0,"not-found",18),t.YNc(32,G,1,0,"loading",18),t.BQk(),t.qZA()()),2&n&&(t.xp6(6),t.Q6J("newSearch",!0),t.xp6(2),t.Q6J("ngIf",a.selectedSpaces.length>0),t.xp6(3),t.Q6J("ngIf",a.spaces&&a.spaces.length>0&&!a.loading),t.xp6(4),t.hij("",t.lcZ(16,15,"pagination_per_page")," "),t.xp6(2),t.Q6J("ngModel",a.limit),t.xp6(2),t.Oqu(t.lcZ(20,17,"record")),t.xp6(2),t.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",t.lcZ(22,19,"previous"))("nextLabel",t.lcZ(23,21,"next")),t.xp6(4),t.hij("",t.lcZ(26,23,"pagination_total_records")," "),t.xp6(3),t.AsE("",t.lcZ(29,25,a.totalItems)," ",t.lcZ(30,27,"record"),""),t.xp6(3),t.Q6J("ngIf",a.spaces&&0==a.spaces.length&&!a.loading),t.xp6(1),t.Q6J("ngIf",a.loading))},dependencies:[d.u5,d.Fj,d.wV,d.JJ,d.qQ,d.On,v.ot,v.lW,M.p9,M.oG,r.ez,r.mk,r.sg,r.O5,r.OU,A.o,h.aw,h.X$,_.JX,_._s,_.LS,O.Hi,u.AV,u.gM,g.w,x.N,b.rP,b.Rr,w.$,U.m,N.g],styles:["[_nghost-%COMP%]     .search, [_nghost-%COMP%]     .ng-select{width:100%}[_nghost-%COMP%]     label{font-size:11px}.table-container[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-spacing:0}th[_ngcontent-%COMP%]{border:none;position:sticky;top:0;z-index:1}tbody[_ngcontent-%COMP%]{padding-bottom:5px}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-block:10px;padding-inline:15px;border:none;font-size:12px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-inline:15px;border:none}tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.btn[_ngcontent-%COMP%]{display:inline-block;height:41.2px}.aie[_ngcontent-%COMP%]{align-items:end}.table-filter-content[_ngcontent-%COMP%]{height:calc(100vh - 110px)}.table-container[_ngcontent-%COMP%]{max-height:calc(100vh - 265px);height:calc(100vh - 265px);overflow:auto}.pagination-content[_ngcontent-%COMP%]{margin-top:-5px}"]})}}return s})()}}]);