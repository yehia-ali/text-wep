"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[2536],{38140:(P,y,i)=>{i.d(y,{Y:()=>f});var e=i(65879),_=i(96814),a=i(89515),d=i(824),l=i(52081),O=i(56223),M=i(76472),A=i(3131);function L(u,g){if(1&u&&(e.TgZ(0,"p",10),e._uU(1),e.ALo(2,"arabicNumbers"),e.ALo(3,"translate"),e.qZA()),2&u){const Z=e.oxw();e.xp6(1),e.Oqu(null!=Z.meta&&Z.meta.pageSize?e.lcZ(2,1,null==Z.meta?null:Z.meta.pageSize):e.lcZ(3,3,"unlimited"))}}function v(u,g){if(1&u){const Z=e.EpF();e.TgZ(0,"input",11),e.NdJ("ngModelChange",function(C){e.CHM(Z);const k=e.oxw();return e.KtG(k.limit=C)})("ngModelChange",function(){e.CHM(Z);const C=e.oxw();return e.KtG(C.changeLimit())}),e.qZA()}if(2&u){const Z=e.oxw();e.Q6J("ngModel",Z.limit)}}function x(u,g){1&u&&(e.TgZ(0,"p",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&u&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"record")))}function b(u,g){if(1&u){const Z=e.EpF();e.TgZ(0,"pagination-controls",13),e.NdJ("pageChange",function(C){e.CHM(Z);const k=e.oxw();return e.KtG(k.pageChanged(C))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.qZA()}2&u&&e.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",e.lcZ(1,4,"previous"))("nextLabel",e.lcZ(2,6,"next"))}const c=[[["","filters",""]],[["","content",""]]],h=function(u,g){return{height:u,"max-width":g}},I=["[filters]","[content]"];let f=(()=>{class u{constructor(){this.pageChange=new e.vpe,this.limitChanged=new e.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,e.f3M)(A.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(Z){this.pageChange.emit(Z)}static{this.\u0275fac=function(T){return new(T||u)}}static{this.\u0275cmp=e.Xpm({type:u,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[e.jDz],ngContentSelectors:I,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(T,C){1&T&&(e.F$t(c),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA(),e.TgZ(3,"div",2),e.Hsn(4,1),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"p"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,L,4,5,"p",5),e.YNc(11,v,1,1,"input",6),e.YNc(12,x,3,3,"p",7),e.qZA(),e.YNc(13,b,3,8,"pagination-controls",8),e.TgZ(14,"p"),e._uU(15),e.ALo(16,"translate"),e.TgZ(17,"span",9),e._uU(18),e.ALo(19,"arabicNumbers"),e.ALo(20,"translate"),e.qZA()()()()),2&T&&(e.Q6J("ngStyle",e.WLB(17,h,C.hasTitle?"calc(100vh - 14.5rem)":C.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",C.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),e.xp6(8),e.hij("",e.lcZ(9,9,"pagination_per_page")," "),e.xp6(2),e.Q6J("ngIf",!C.admin),e.xp6(1),e.Q6J("ngIf",C.admin),e.xp6(1),e.Q6J("ngIf",null==C.meta?null:C.meta.pageSize),e.xp6(1),e.Q6J("ngIf",(null==C.meta?null:C.meta.totalItems)>15),e.xp6(2),e.hij("",e.lcZ(16,11,"pagination_total_records")," "),e.xp6(3),e.AsE("",e.lcZ(19,13,null==C.meta?null:C.meta.totalItems)," ",e.lcZ(20,15,"record"),""))},dependencies:[_.ez,_.O5,_.PC,a.aw,a.X$,d.h,l.m,O.u5,O.Fj,O.wV,O.JJ,O.qQ,O.On,M.JX,M.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return u})()},47919:(P,y,i)=>{i.d(y,{J:()=>L});var e=i(65879),_=i(96814),a=i(6311),d=i(89515),l=i(49388);function O(v,x){if(1&v){const b=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(b);const h=e.oxw();return e.KtG(h.reassignFun())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&v&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"reassign")))}function M(v,x){if(1&v){const b=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(b);const h=e.oxw();return e.KtG(h.editTask())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&v&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"edit")))}function A(v,x){if(1&v){const b=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(b);const h=e.oxw();return e.KtG(h.deleteFun())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&v&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"delete")))}let L=(()=>{class v{constructor(){this.reassign=new e.vpe,this.cancel=new e.vpe,this.delete=new e.vpe,this.edit=new e.vpe,this.reassignVisible=!0,this.taskDetails=!1,this.isRepate=!1,this.dir=document.dir}ngOnInit(){}reassignFun(){this.reassign.emit()}cancelFun(){this.cancel.emit()}deleteFun(){this.delete.emit()}editTask(){this.edit.emit()}static{this.\u0275fac=function(c){return new(c||v)}}static{this.\u0275cmp=e.Xpm({type:v,selectors:[["task-actions"]],inputs:{reassignVisible:"reassignVisible",taskDetails:"taskDetails",taskState:"taskState",isRepate:"isRepate"},outputs:{reassign:"reassign",cancel:"cancel",delete:"delete",edit:"edit"},standalone:!0,features:[e.jDz],decls:11,vars:8,consts:[[1,"task-actions","line-height"],[1,"clickable-btn","line-height",3,"matMenuTriggerFor","dir"],[1,"bx","bx-dots-vertical-rounded","fs-25"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(c,h){if(1&c&&(e.TgZ(0,"div",0)(1,"button",1),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"mat-menu",3,4),e.YNc(5,O,3,3,"button",5),e.YNc(6,M,3,3,"button",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return h.cancelFun()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,A,3,3,"button",5),e.qZA()()),2&c){const I=e.MAs(4);e.xp6(1),e.Q6J("matMenuTriggerFor",I)("dir",h.dir),e.xp6(4),e.Q6J("ngIf",h.reassignVisible),e.xp6(1),e.Q6J("ngIf",!h.isRepate&&!h.taskDetails),e.xp6(2),e.Oqu(e.lcZ(9,6,"archive")),e.xp6(2),e.Q6J("ngIf",1==h.taskState||7==h.taskState||!h.taskState)}},dependencies:[_.ez,_.O5,a.Tx,a.VK,l.Lv,a.OP,a.p6,d.aw,d.X$],styles:[".bx[_ngcontent-%COMP%]{width:15px!important}"]})}}return v})()},9798:(P,y,i)=>{i.d(y,{h:()=>b});var e=i(96814),_=i(89515),a=i(65879);function d(c,h){1&c&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&c&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"new")))}function l(c,h){1&c&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&c&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"completed")))}function O(c,h){1&c&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&c&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"in_progress")))}function M(c,h){1&c&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&c&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"canceled")))}function A(c,h){1&c&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&c&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"pending")))}function L(c,h){1&c&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&c&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"rejected")))}function v(c,h){1&c&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&c&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"notified")))}const x=function(c,h,I,f,u,g,Z){return{"chip-light-danger":c,"chip-light-primary":h,"chip-light-warning":I,"chip-light-success":f,"chip-light-gray":u,"chip-light-canceled":g,"chip-light-info":Z}};let b=(()=>{class c{constructor(){this.classes=""}static{this.\u0275fac=function(f){return new(f||c)}}static{this.\u0275cmp=a.Xpm({type:c,selectors:[["task-status"]],inputs:{state:"state",classes:"classes"},standalone:!0,features:[a.jDz],decls:8,vars:19,consts:[[3,"ngClass"],[4,"ngIf"]],template:function(f,u){1&f&&(a.TgZ(0,"div",0),a.YNc(1,d,3,3,"span",1),a.YNc(2,l,3,3,"span",1),a.YNc(3,O,3,3,"span",1),a.YNc(4,M,3,3,"span",1),a.YNc(5,A,3,3,"span",1),a.YNc(6,L,3,3,"span",1),a.YNc(7,v,3,3,"span",1),a.qZA()),2&f&&(a.Gre("chip rounded fs-13 text-center ",u.classes,""),a.Q6J("ngClass",a.Hh0(11,x,8==u.state,1==u.state,3==u.state,2==u.state,7==u.state,6==u.state,9==u.state)),a.xp6(1),a.Q6J("ngIf",1==u.state),a.xp6(1),a.Q6J("ngIf",2==u.state),a.xp6(1),a.Q6J("ngIf",3==u.state),a.xp6(1),a.Q6J("ngIf",6==u.state),a.xp6(1),a.Q6J("ngIf",7==u.state),a.xp6(1),a.Q6J("ngIf",8==u.state),a.xp6(1),a.Q6J("ngIf",9==u.state))},dependencies:[e.ez,e.mk,e.O5,_.aw,_.X$],encapsulation:2})}}return c})()},34493:(P,y,i)=>{i.d(y,{i:()=>M});var e=i(96814),_=i(52081),a=i(45843),d=i(65879);function l(A,L){if(1&A&&(d.ynx(0),d.TgZ(1,"div",3),d._UZ(2,"user-image",4),d.qZA(),d.BQk()),2&A){const v=L.$implicit;d.xp6(2),d.Q6J("img",v)("dim",35)}}function O(A,L){if(1&A&&(d.ynx(0),d.TgZ(1,"div",5),d._uU(2),d.ALo(3,"arabicNumbers"),d.qZA(),d.BQk()),2&A){const v=d.oxw();d.xp6(2),d.hij(" +",d.lcZ(3,1,v.images.length-3)," ")}}let M=(()=>{class A{constructor(){this.images=[]}static{this.\u0275fac=function(x){return new(x||A)}}static{this.\u0275cmp=d.Xpm({type:A,selectors:[["task-vote-users"]],inputs:{images:"images"},standalone:!0,features:[d.jDz],decls:3,vars:2,consts:[[1,"flex","aic","users-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"user-image","rounded-50","border"],[3,"img","dim"],[1,"number-left","flex-center","rounded-50","border","fs-13","pointer"]],template:function(x,b){1&x&&(d.TgZ(0,"div",0),d.YNc(1,l,3,2,"ng-container",1),d.YNc(2,O,4,3,"ng-container",2),d.qZA()),2&x&&(d.xp6(1),d.Q6J("ngForOf",b.images.slice(0,3)),d.xp6(1),d.Q6J("ngIf",(null==b.images?null:b.images.length)>3))},dependencies:[e.ez,e.sg,e.O5,_.m,a.l],styles:[".users-container[_ngcontent-%COMP%]{margin-inline-start:1.5rem}.user-image[_ngcontent-%COMP%]{margin-inline-start:-1.5rem;border-color:#f5f5f5}.user-image[_ngcontent-%COMP%]:hover{z-index:5;cursor:pointer}.number-left[_ngcontent-%COMP%]{background:var(--primary);width:3.5rem;height:3.5rem;margin-inline-start:-1.5rem;color:#fff}"]})}}return A})()},68577:(P,y,i)=>{i.d(y,{p:()=>v});var e=i(96814),_=i(89515),a=i(52081),d=i(88492),l=i(65879);function O(x,b){1&x&&(l.TgZ(0,"span",3),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&x&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"left")))}function M(x,b){if(1&x&&(l.TgZ(0,"span",3),l._uU(1),l.ALo(2,"arabicNumbers"),l.qZA()),2&x){const c=l.oxw(2);l.xp6(1),l.Oqu(l.lcZ(2,1,c.timeLeft))}}function A(x,b){1&x&&(l.TgZ(0,"span",4),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&x&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"left")))}function L(x,b){if(1&x&&(l.ynx(0),l.TgZ(1,"div"),l._UZ(2,"div"),l.YNc(3,O,3,3,"span",1),l.YNc(4,M,3,3,"span",1),l.TgZ(5,"span"),l._uU(6),l.ALo(7,"translate"),l.ALo(8,"defineDays"),l.qZA(),l.YNc(9,A,3,3,"span",2),l.qZA(),l.BQk()),2&x){const c=l.oxw();l.xp6(1),l.Gre("flex aic ",c.classes,""),l.xp6(1),l.Gre("bullet ",c.bullet," rounded-50 mr-75"),l.xp6(1),l.Q6J("ngIf","ar"==c.lang&&c.showLeft),l.xp6(1),l.Q6J("ngIf",c.timeLeft>2&&"ar"==c.lang||"en"==c.lang),l.xp6(2),l.Oqu(l.lcZ(7,10,l.lcZ(8,12,c.timeLeft)+"_"+c.label)),l.xp6(3),l.Q6J("ngIf","en"==c.lang&&c.showLeft)}}let v=(()=>{class x{constructor(){this.label="",this.classes="",this.bullet="",this.lang=localStorage.getItem("language")||"en"}static{this.\u0275fac=function(h){return new(h||x)}}static{this.\u0275cmp=l.Xpm({type:x,selectors:[["time-left"]],inputs:{timeLeft:"timeLeft",label:"label",classes:"classes",bullet:"bullet",showLeft:"showLeft"},standalone:!0,features:[l.jDz],decls:1,vars:1,consts:[[4,"ngIf"],["class","mr-50",4,"ngIf"],["class","ml-50",4,"ngIf"],[1,"mr-50"],[1,"ml-50"]],template:function(h,I){1&h&&l.YNc(0,L,10,14,"ng-container",0),2&h&&l.Q6J("ngIf",I.timeLeft)},dependencies:[e.ez,e.O5,_.aw,_.X$,a.m,d.K],styles:[".bullet[_ngcontent-%COMP%]{width:1rem;height:1rem}"]})}}return x})()},68585:(P,y,i)=>{i.d(y,{h:()=>e});var e=function(_){return _[_.new=1]="new",_[_.completed=2]="completed",_[_.in_progress=3]="in_progress",_[_.canceled=6]="canceled",_[_.pending=7]="pending",_[_.rejected=8]="rejected",_}(e||{})},73847:(P,y,i)=>{i.d(y,{v:()=>I});var e=i(65879),_=i(96814),a=i(54807),d=i(89515),l=i(56223),O=i(70468),M=i(84526);function A(f,u){1&f&&e._UZ(0,"filter-label",5)}function L(f,u){if(1&f&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&f){const g=u.item;e.xp6(1),e.Oqu(e.lcZ(2,1,g.title))}}function v(f,u){if(1&f&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"slice"),e.ALo(3,"translate"),e.qZA()),2&f){const g=e.oxw().items;e.xp6(1),e.hij("",e.Dn7(2,1,e.lcZ(3,5,null==g[0]?null:g[0].title),0,10),"...")}}function x(f,u){if(1&f&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&f){const g=e.oxw().items;e.xp6(1),e.Oqu(e.lcZ(2,1,null==g[0]?null:g[0].title))}}function b(f,u){if(1&f&&(e.TgZ(0,"div",12)(1,"span",13),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&f){const g=e.oxw().items;e.xp6(2),e.AsE("",g.length-1," ",e.lcZ(3,2,"more"),"...")}}function c(f,u){if(1&f){const g=e.EpF();e.TgZ(0,"div",6)(1,"span",7)(2,"span",8),e.YNc(3,v,4,7,"span",9),e.YNc(4,x,3,3,"span",9),e.qZA()(),e.TgZ(5,"span",10),e.NdJ("click",function(){const T=e.CHM(g);return e.KtG((0,T.clear)(T.items[0]))}),e._uU(6,"\xd7"),e.qZA()(),e.YNc(7,b,4,4,"div",11)}if(2&f){const g=u.items;e.xp6(3),e.Q6J("ngIf",(null==g[0]||null==g[0].title?null:g[0].title.length)>=10),e.xp6(1),e.Q6J("ngIf",(null==g[0]||null==g[0].title?null:g[0].title.length)<10),e.xp6(3),e.Q6J("ngIf",g.length>1)}}function h(f,u){if(1&f&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&f){const g=e.oxw();e.xp6(1),e.hij(" ",g.selectedValue.length," ")}}let I=(()=>{class f{ngOnChanges(g){g.clearData&&!0===g.clearData.currentValue&&(this.selectedValue=[],this.onChange())}constructor(g){this.projectsSer=g,this.selectedValue=[],this.valueChanged=new e.vpe,this.classes="",this.placeholder="",this.newFilter=!1,this.clearData=!1,this.hideLabel=!1,this.projects$=this.projectsSer.projects}ngOnInit(){0==this.projectsSer.projects.value.length&&this.projectsSer.getProjects().subscribe()}onChange(){this.valueChanged.emit(this.selectedValue)}static{this.\u0275fac=function(Z){return new(Z||f)(e.Y36(M.Y))}}static{this.\u0275cmp=e.Xpm({type:f,selectors:[["projects"]],inputs:{selectedValue:"selectedValue",classes:"classes",placeholder:"placeholder",newFilter:"newFilter",clearData:"clearData",hideLabel:"hideLabel"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[e.TTD,e.jDz],decls:8,vars:18,consts:[["key","project",4,"ngIf"],["bindLabel","title","bindValue","id","appendTo","body",3,"placeholder","items","ngModel","multiple","closeOnSelect","clearSearchOnAdd","ngModelChange"],["ng-option-tmp",""],["ng-multi-label-tmp",""],["class","rounded-5 bg-primary count flex aic jcc fs-11 simibold white ml-50",4,"ngIf"],["key","project"],[1,"ng-value","flex","aic"],[1,"ng-value-label"],[1,"flex","aic","fs-11"],[4,"ngIf"],["aria-hidden","true",1,"ng-value-icon","right",3,"click"],["class","ng-value rounded-2",4,"ngIf"],[1,"ng-value","rounded-2"],[1,"ng-value-label","fs-11"],[1,"rounded-5","bg-primary","count","flex","aic","jcc","fs-11","simibold","white","ml-50"]],template:function(Z,T){1&Z&&(e.TgZ(0,"div"),e.YNc(1,A,1,0,"filter-label",0),e.TgZ(2,"ng-select",1),e.NdJ("ngModelChange",function(k){return T.selectedValue=k})("ngModelChange",function(){return T.onChange()}),e.ALo(3,"translate"),e.ALo(4,"async"),e.YNc(5,L,3,3,"ng-template",2),e.YNc(6,c,8,3,"ng-template",3),e.qZA(),e.YNc(7,h,2,1,"span",4),e.qZA()),2&Z&&(e.Gre("project-filter ",T.newFilter?"new-filter":"",""),e.xp6(1),e.Q6J("ngIf",!T.hideLabel),e.xp6(1),e.Gre(" w-16r ",T.classes,""),e.Q6J("placeholder",e.lcZ(3,14,T.placeholder))("items",e.lcZ(4,16,T.projects$))("ngModel",T.selectedValue)("multiple",!0)("closeOnSelect",!1)("clearSearchOnAdd",!0),e.xp6(5),e.Q6J("ngIf",T.newFilter&&T.selectedValue.length>0))},dependencies:[_.ez,_.O5,_.Ov,_.OU,a.A0,a.w9,a.ir,a.zB,d.aw,d.X$,l.u5,l.JJ,l.On,O.r],encapsulation:2})}}return f})()},88492:(P,y,i)=>{i.d(y,{K:()=>_});var e=i(65879);let _=(()=>{class a{constructor(){this.lang=localStorage.getItem("language")}transform(l){return new Intl.PluralRules("ar-EG").select(l)}static{this.\u0275fac=function(O){return new(O||a)}}static{this.\u0275pipe=e.Yjl({name:"defineDays",type:a,pure:!0,standalone:!0})}}return a})()},3131:(P,y,i)=>{i.d(y,{P:()=>a});var e=i(65619),_=i(65879);let a=(()=>{class d{constructor(){this.withSubMenu=new e.X(!0)}static{this.\u0275fac=function(M){return new(M||d)}}static{this.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},4780:(P,y,i)=>{i.r(y),i.d(y,{SentComponent:()=>Ke});var e=i(65879),_=i(96814),a=i(38140),d=i(65668),l=i(76472),O=i(57105),M=i(39326),A=i(43228),L=i(89515),v=i(65648),x=i(92596),b=i(88492),c=i(52081),h=i(9619),I=i(47919),f=i(34493),u=i(74104),g=i(56223),Z=i(49298),T=i(17700),C=i(32296),k=i(99758),Q=i(49388);let q=(()=>{class n{constructor(t,o,s,r){this.data=t,this.service=o,this.alert=s,this.dialog=r,this.loading=!1}ngOnInit(){let t=this.data.task;this.hours=t.expectedHours,this.minutes=t.expectedMinutes}update(){this.service.updateExpectedTime({id:this.data.task.id,expectedTime:this.time}).subscribe(o=>{o.success&&(this.alert.showAlert("expected_time_updated"),this.service.hasChanged.next(!0),this.dialog.closeAll())})}static{this.\u0275fac=function(o){return new(o||n)(e.Y36(T.WI),e.Y36(v.Q),e.Y36(k.c),e.Y36(T.uw))}}static{this.\u0275cmp=e.Xpm({type:n,selectors:[["update-expected-time"]],standalone:!0,features:[e.jDz],decls:14,vars:13,consts:[["dir","auto",1,"update-expected-time","px-2"],[1,"bold","text-center","mb-2"],[1,"time"],[3,"withMargin","hours","minutes","calcMinutes"],["mat-dialog-actions","",1,"mt-1"],[1,"flex","aic","gap-x-2","w-100"],["mat-dialog-close","","mat-raised-button","",1,"flex-50","w-100","dark-color","rounded","cancel-btn"],["mat-raised-button","","color","primary",1,"flex-50","w-100","rounded",3,"disabled","click"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"select-time",3),e.NdJ("calcMinutes",function(p){return s.time=p}),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"button",6),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(){return s.update()}),e._uU(12),e.ALo(13,"translate"),e.qZA()()()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,7,"update_expected_time")),e.xp6(3),e.Q6J("withMargin",!1)("hours",s.hours||0)("minutes",s.minutes||0),e.xp6(4),e.Oqu(e.lcZ(10,9,"cancel")),e.xp6(2),e.Q6J("disabled",!s.time||s.loading),e.xp6(1),e.Oqu(e.lcZ(13,11,"save")))},dependencies:[_.ez,Z.m,L.aw,L.X$,T.Is,T.ZT,T.H8,Q.Lv,C.ot,C.lW],encapsulation:2})}}return n})();var J=i(83318),Y=i(86760),j=i(52868),K=i(63243),B=i(824),F=i(75986),R=i(22931),G=i(24971),W=i(13249),V=i(58697),H=i(86817),$=i(10480),z=i(73847),S=i(7314),D=i(20553),N=i(37008),w=i(11486),X=i(36516);function ee(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"priority-filter",19),e.NdJ("valueChanged",function(s){e.CHM(t);const r=e.oxw();return r.service.priority.next(s),e.KtG(r.filter())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("placeholder","priority")("hideLabel",!0)("selectedValue",t.service.priority.value)}}function te(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"is-rated",4),e.NdJ("valueChanged",function(s){e.CHM(t);const r=e.oxw();return r.service.rated.next(s),e.KtG(r.filter())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("hideLabel",!0)("selectedValue",t.service.rated.value)}}function ne(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"is-overdue",4),e.NdJ("valueChanged",function(s){e.CHM(t);const r=e.oxw();return r.service.isOverdue.next(s),e.KtG(r.filter())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("hideLabel",!0)("selectedValue",t.service.isOverdue.value)}}function se(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"projects",19),e.NdJ("valueChanged",function(s){e.CHM(t);const r=e.oxw();return r.service.project.next(s),e.KtG(r.filter())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("placeholder","project")("hideLabel",!0)("selectedValue",t.service.project.value)}}function ie(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"date-filter",20),e.NdJ("valueChanged",function(s){e.CHM(t);const r=e.oxw();return r.service.dateFrom.next(s),r.service.dateTo.next(""),e.KtG(r.filter())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("hideLabel",!0)("selectedValue",t.service.dateFrom.value)}}function ae(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"date-filter",21),e.NdJ("valueChanged",function(s){e.CHM(t);const r=e.oxw();return r.service.dateTo.next(s),e.KtG(r.filter())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("hideLabel",!0)("minDate",t.service.dateFrom.value)("selectedValue",t.service.dateTo.value)}}function oe(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"mat-checkbox",25),e.NdJ("change",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.unCheck(r))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const t=m.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("checked",o.visibleFilters[t])("indeterminate",!1)("labelPosition","after"),e.xp6(1),e.hij(" ",e.lcZ(3,4,t)," ")}}function le(n,m){if(1&n&&(e.TgZ(0,"div",22),e.NdJ("click",function(o){return o.stopImmediatePropagation()}),e.YNc(1,oe,4,6,"div",23),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.filtersArray)}}let re=(()=>{class n{constructor(t,o,s,r,p){this.elm=t,this.dialog=o,this.createTaskService=s,this.alert=r,this.translate=p,this.uploadFile=!1,this.url=D.N.apiUrl,this.service=(0,e.f3M)(v.Q),this.showFilters=!1,this.visibleFilters={priority:this.service.priority.value.length>0,rate:!0,overdue:1==this.service.isOverdue.value||0==this.service.isOverdue.value,project:this.service.project.value.length>0,date:this.service.dateFrom.value||this.service.dateTo.value},this.filtersArray=Object.keys(this.visibleFilters).map(U=>U)}ngOnInit(){this.emloyeesItems=[{label:this.translate.instant("upload_branch_file"),command:()=>this.selectFile(!1)},{label:this.translate.instant("download_branche_template"),command:()=>this.downloadFile(!1)},{label:this.translate.instant("upload_employee_file"),command:()=>this.selectFile(!0)},{label:this.translate.instant("download_employee_template"),command:()=>this.downloadFile(!0)}]}filter(){this.service.filter()}unCheck(t){this.visibleFilters[t]=!this.visibleFilters[t]}documentClickEvent(t){this.showFilters=!1}createTask(){this.dialog.open(S.T,{disableClose:!0,panelClass:"create-task-dialog"}).afterClosed().subscribe(()=>{this.service.hasChanged.next(!0)})}onSubmit(t){const o=new FormData;o.append("file",this.selectedFile),t?this.createTaskService.createBulkTaskByEmpCode(o).subscribe(s=>{s.success&&(this.alert.showAlert("success"),this.service.hasChanged.next(!0),this.uploadFile=!0,setTimeout(()=>{this.uploadFile=!1},0))}):this.createTaskService.CreateBulkTaskByBrancheCode(o).subscribe(s=>{s.success&&(this.alert.showAlert("success"),this.service.hasChanged.next(!0),this.uploadFile=!0,setTimeout(()=>{this.uploadFile=!1},0))})}onFileSelect(t){const o=t.target.files[0];if(o){if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(o.type))return;this.selectedFile=o,setTimeout(()=>{this.onSubmit(this.employeeMode)},0)}}downloadFile(t){let o;o=t?this.url+"api/TaskGroups/download-template":this.url+"api/TaskGroups/download-templateForBranch",window.open(o,"_blank")}selectFile(t){this.employeeMode=t;const o=document.getElementById("fileInput");o&&o.click()}exportToExcel(){let t=document.getElementById("tasks");const o=w.P6.table_to_sheet(t),s=w.P6.book_new();w.P6.book_append_sheet(s,o,"Sheet1"),w.NC(s,"sent-Tasks.xlsx")}static{this.\u0275fac=function(o){return new(o||n)(e.Y36(e.SBq),e.Y36(T.uw),e.Y36(X.g),e.Y36(k.c),e.Y36(L.sK))}}static{this.\u0275cmp=e.Xpm({type:n,selectors:[["sent-filters"]],hostBindings:function(o,s){1&o&&e.NdJ("click",function(p){return s.documentClickEvent(p)},!1,e.evT)},standalone:!0,features:[e.jDz],decls:24,vars:25,consts:[[1,"filters","flex","aic","jcsb","gap-x-4"],[1,"flex-wrap","aic","gap-x-1","gap-y-1","py-50"],[3,"hideLabel","key","width","valueChanged"],[3,"placeholder","hideLabel","width","selectedValue","valueChanged"],[3,"hideLabel","selectedValue","valueChanged"],[3,"placeholder","hideLabel","selectedValue","valueChanged",4,"ngIf"],[3,"hideLabel","selectedValue","valueChanged",4,"ngIf"],["key","start_date",3,"hideLabel","selectedValue","valueChanged",4,"ngIf"],["key","end_date",3,"hideLabel","minDate","selectedValue","valueChanged",4,"ngIf"],["text","assignees",3,"selectedUsers","getSelectedUsers"],[1,"end","flex","aic","gap-x-1"],["mat-raised-button","",1,"bg-success","export",3,"click"],[1,"create-task-sp"],[3,"model","label","onClick"],["type","file","hidden","","id","fileInput","accept",".xlsx, .xls","required","",1,"form-control",3,"change"],[3,"selectedValue","sortChanged"],[1,"img","relative","pointer",3,"click"],["alt","","src","assets/images/icons/filters.svg",1,"convert-image-color"],["class","filters-menu bg-white p-1 rounded","magicScroll","",3,"click",4,"ngIf"],[3,"placeholder","hideLabel","selectedValue","valueChanged"],["key","start_date",3,"hideLabel","selectedValue","valueChanged"],["key","end_date",3,"hideLabel","minDate","selectedValue","valueChanged"],["magicScroll","",1,"filters-menu","bg-white","p-1","rounded",3,"click"],["class","menu-item",4,"ngFor","ngForOf"],[1,"menu-item"],["color","primary",3,"checked","indeterminate","labelPosition","change"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"search",2),e.NdJ("valueChanged",function(p){return s.service.search.next(p),s.filter()}),e.qZA(),e.TgZ(3,"task-status",3),e.NdJ("valueChanged",function(p){return s.service.taskStatus.next(p),s.filter()}),e.qZA(),e.TgZ(4,"task-type",4),e.NdJ("valueChanged",function(p){return s.service.taskType.next(p),s.filter()}),e.qZA(),e.YNc(5,ee,1,3,"priority-filter",5),e.YNc(6,te,1,2,"is-rated",6),e.YNc(7,ne,1,2,"is-overdue",6),e.YNc(8,se,1,3,"projects",5),e.YNc(9,ie,1,2,"date-filter",7),e.YNc(10,ae,1,3,"date-filter",8),e.TgZ(11,"select-user",9),e.NdJ("getSelectedUsers",function(p){return s.service.assignees.next(p),s.filter()}),e.qZA()(),e.TgZ(12,"div",10)(13,"button",11),e.NdJ("click",function(){return s.exportToExcel()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"span",12)(17,"p-splitButton",13),e.NdJ("onClick",function(){return s.createTask()}),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"input",14),e.NdJ("change",function(p){return s.onFileSelect(p)}),e.qZA(),e.TgZ(20,"task-vote-sort",15),e.NdJ("sortChanged",function(p){return s.service.orderKey.next(p),s.filter()}),e.qZA(),e.TgZ(21,"div",16),e.NdJ("click",function(p){return p.stopImmediatePropagation(),s.showFilters=!0}),e._UZ(22,"img",17),e.YNc(23,le,2,1,"div",18),e.qZA()()()),2&o&&(e.xp6(2),e.Q6J("hideLabel",!0)("key",s.service.search.value)("width","w-16r"),e.xp6(1),e.Q6J("placeholder","status")("hideLabel",!0)("width","w-11r")("selectedValue",s.service.taskStatus.value),e.xp6(1),e.Q6J("hideLabel",!0)("selectedValue",s.service.taskType.value),e.xp6(1),e.Q6J("ngIf",s.visibleFilters.priority),e.xp6(1),e.Q6J("ngIf",s.visibleFilters.rate),e.xp6(1),e.Q6J("ngIf",s.visibleFilters.overdue),e.xp6(1),e.Q6J("ngIf",s.visibleFilters.project),e.xp6(1),e.Q6J("ngIf",s.visibleFilters.date),e.xp6(1),e.Q6J("ngIf",s.visibleFilters.date),e.xp6(1),e.Q6J("selectedUsers",s.service.assignees.value),e.xp6(3),e.Oqu(e.lcZ(15,21,"export")),e.xp6(3),e.Q6J("model",s.emloyeesItems)("label",e.lcZ(18,23,"create_task")),e.xp6(3),e.Q6J("selectedValue",s.service.orderKey.value),e.xp6(3),e.Q6J("ngIf",s.showFilters))},dependencies:[C.ot,C.lW,_.ez,_.sg,_.O5,Y.g,j.V,K.N,B.h,F.p9,F.oG,R.X,G.g,W.v,V.h,H.U,L.aw,L.X$,$.V,z.v,N.l,N.a]})}}return n})();var ce=i(20400),pe=i(42666),_e=i(69862),de=i(32801),ue=i(19300),ge=i(88730),me=i(68671);const fe=["dialogTemplate"],he=function(n){return{"bx-flip-horizontal":n}};function xe(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"p",11)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"i",12),e.TgZ(5,"span",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.removeUser())}),e.ALo(6,"translate"),e.TgZ(7,"span"),e._uU(8),e.qZA(),e._UZ(9,"i",14),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"sent")),e.xp6(2),e.Q6J("ngClass",e.VKq(8,he,"ar"==t.lang)),e.xp6(1),e.Q6J("matTooltip",e.lcZ(6,6,"click_to_remove")),e.xp6(3),e.Oqu(t.service.userName.value)}}function ve(n,m){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t?null:t.title)}}function Te(n,m){if(1&n&&(e.TgZ(0,"span",39),e._uU(1),e.ALo(2,"slice"),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("matTooltip",t.title),e.xp6(1),e.hij("",e.Dn7(2,2,null==t?null:t.title,0,40),"...")}}function Ce(n,m){if(1&n&&(e.TgZ(0,"span",41),e._uU(1),e.ALo(2,"arabicNumbers"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.expectedHours))}}function Ze(n,m){if(1&n&&(e.TgZ(0,"p"),e.YNc(1,Ce,3,3,"span",40),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"defineDays"),e.qZA()()),2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.expectedHours>2&&"ar"==o.lang||"en"==o.lang),e.xp6(2),e.Oqu(e.lcZ(4,2,e.lcZ(5,4,t.expectedHours)+"_hour"))}}function be(n,m){1&n&&(e.TgZ(0,"p",42),e._uU(1,":"),e.qZA())}function Ae(n,m){if(1&n&&(e.TgZ(0,"span",41),e._uU(1),e.ALo(2,"arabicNumbers"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.expectedMinutes))}}function Oe(n,m){if(1&n&&(e.TgZ(0,"p"),e.YNc(1,Ae,3,3,"span",40),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"defineDays"),e.qZA()()),2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.expectedMinutes>2&&"ar"==o.lang||"en"==o.lang),e.xp6(2),e.Oqu(e.lcZ(4,2,e.lcZ(5,4,t.expectedMinutes)+"_minute"))}}function ye(n,m){1&n&&e._UZ(0,"img",43)}function Le(n,m){1&n&&e._UZ(0,"img",44)}const Me=function(n){return{danger:n}};function Ie(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"tr",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return p.selectedTask=r,e.KtG(p.getAssignees())}),e.TgZ(1,"td")(2,"p",17),e._uU(3),e.qZA()(),e.TgZ(4,"td",18)(5,"div",19),e._UZ(6,"priority",20),e.YNc(7,ve,2,1,"span",7),e.YNc(8,Te,3,6,"span",21),e.qZA()(),e.TgZ(9,"td")(10,"div",22),e.NdJ("click",function(s){const p=e.CHM(t).$implicit,U=e.oxw(2);return!U.service.userId.value&&8!=p.taskGroupType&&s.stopImmediatePropagation(),e.KtG(!U.service.userId.value&&8!=p.taskGroupType&&U.editExpected(p))}),e.ALo(11,"translate"),e.YNc(12,Ze,6,6,"p",7),e.YNc(13,be,2,0,"p",23),e.YNc(14,Oe,6,6,"p",7),e.qZA()(),e.TgZ(15,"td",24),e._UZ(16,"task-vote-users",25),e.qZA(),e.TgZ(17,"td")(18,"div",26),e._uU(19),e.qZA()(),e.TgZ(20,"td")(21,"div",27),e._uU(22),e.qZA()(),e.TgZ(23,"td")(24,"div",28),e._uU(25),e.qZA()(),e.TgZ(26,"td")(27,"div",24)(28,"div",29),e.YNc(29,ye,1,0,"img",30),e.YNc(30,Le,1,0,"img",31),e.qZA(),e.TgZ(31,"span",32),e._uU(32),e.ALo(33,"arabicDate"),e.qZA()()(),e.TgZ(34,"td")(35,"div",24),e._UZ(36,"repetition",33),e.qZA()(),e.TgZ(37,"td",34),e.NdJ("click",function(s){return s.stopImmediatePropagation()}),e.TgZ(38,"div",35)(39,"i",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.getTaskAnswers(r))}),e.qZA(),e._UZ(40,"a",37),e.TgZ(41,"task-actions",38),e.NdJ("cancel",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.cancel(r.id))})("delete",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.delete(r.id))})("edit",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.edit(r))})("reassign",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.reassign(r))}),e.qZA()()()()}if(2&n){const t=m.$implicit,o=e.oxw(2);e.xp6(3),e.Oqu(t.id),e.xp6(3),e.Q6J("priority",null==t?null:t.priority),e.xp6(1),e.Q6J("ngIf",(null==t||null==t.title?null:t.title.length)<=40),e.xp6(1),e.Q6J("ngIf",(null==t||null==t.title?null:t.title.length)>40),e.xp6(2),e.Q6J("matTooltip",o.service.userId.value||8==t.taskGroupType?null:e.lcZ(11,20,"click_to_update")),e.xp6(2),e.Q6J("ngIf",t.expectedHours),e.xp6(1),e.Q6J("ngIf",t.expectedMinutes&&t.expectedHours),e.xp6(1),e.Q6J("ngIf",t.expectedMinutes),e.xp6(2),e.Q6J("images",t.assigneeImageUrls),e.xp6(3),e.hij(" ",t.assigneeCount," "),e.xp6(3),e.hij(" ",t.inporogressStateCount," "),e.xp6(3),e.hij(" ",t.complateStateCount," "),e.xp6(4),e.Q6J("ngIf",!t.isOverDue),e.xp6(1),e.Q6J("ngIf",t.isOverDue),e.xp6(1),e.Q6J("ngClass",e.VKq(25,Me,t.isOverDue)),e.xp6(1),e.Oqu(e.xi3(33,22,null==t?null:t.endDate,"typicalDate")),e.xp6(4),e.Q6J("isRepeated",(null==t?null:t.isRepeated)||t.parentTaskGroupId&&!t.isSubTasks)("repeatedPeriod",null==t?null:t.taskRepeatedPeriod),e.xp6(4),e.Q6J("href",o.url+"api/TaskGroups/GetTaskGroupAnswersExcel?TaskGroup="+(null==t?null:t.headParentTaskGroupId),e.LSH),e.xp6(1),e.Q6J("isRepate",t.isRepeated)}}const ke=function(n,m,t){return{itemsPerPage:n,currentPage:m,totalItems:t}};function Pe(n,m){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,Ie,42,27,"tr",15),e.ALo(2,"paginate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.sent,e.kEZ(4,ke,t.meta.pageSize,t.meta.currentPage,t.meta.totalItems)))}}function Ue(n,m){1&n&&e._UZ(0,"not-found",45)}function we(n,m){1&n&&e._UZ(0,"loading")}function Ee(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"task-group-details",46),e.NdJ("close",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.assigneesIsOpen=!1)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("assigneesLoading",t.assigneesLoading)("assignees",t.assignees)("open",t.assigneesIsOpen)("reporters",t.reporters)("task",t.selectedTask)}}function Je(n,m){1&n&&(e.TgZ(0,"div",54),e._UZ(1,"loading"),e.qZA())}function Fe(n,m){1&n&&(e.TgZ(0,"div",55),e._UZ(1,"not-found"),e.qZA())}function Se(n,m){if(1&n&&e._UZ(0,"i"),2&n){const t=e.oxw().$implicit;e.Gre("fs-20 bx bx-","true"==t.answer?"check-circle success":"x-circle danger","")}}function De(n,m){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.answer||"-")}}function Ne(n,m){if(1&n&&(e.TgZ(0,"tr",68)(1,"td",69),e._uU(2),e.qZA(),e.TgZ(3,"td",69),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"td",69),e.YNc(7,Se,1,3,"i",70),e.YNc(8,De,2,1,"span",7),e.qZA()()),2&n){const t=m.$implicit,o=e.oxw(4);e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.lcZ(5,4,o.answersTypes[t.type-1].name)),e.xp6(3),e.Q6J("ngIf",t.answer&&("true"==t.answer||"false"==t.answer)),e.xp6(1),e.Q6J("ngIf","true"!=t.answer&&"false"!=t.answer)}}function Qe(n,m){if(1&n&&(e.TgZ(0,"div",57)(1,"div",58),e._UZ(2,"app-img-title",59),e.qZA(),e.TgZ(3,"div",60)(4,"table",61)(5,"thead",62)(6,"tr",63)(7,"th",64),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",65),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th",66),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,Ne,9,6,"tr",67),e.qZA()()()()),2&n){const t=m.$implicit;e.xp6(2),e.Q6J("imgSrc",t[0].userImg)("title",t[0].userName)("userId",t[0].userId),e.xp6(6),e.Oqu(e.lcZ(9,7,"question")),e.xp6(3),e.Oqu(e.lcZ(12,9,"type")),e.xp6(3),e.Oqu(e.lcZ(15,11,"answer")),e.xp6(3),e.Q6J("ngForOf",t)}}function qe(n,m){if(1&n&&(e.ynx(0),e.YNc(1,Qe,18,13,"div",56),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.taskAnswers)}}function Ye(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"div",47)(1,"div",48)(2,"p",49),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"i",50),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.closeDialog())}),e.qZA()(),e.YNc(6,Je,2,0,"div",51),e.YNc(7,Fe,2,0,"div",52),e.TgZ(8,"div",53),e.YNc(9,qe,2,1,"ng-container",7),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,4,"all_answers")),e.xp6(3),e.Q6J("ngIf",t.answerLoading),e.xp6(1),e.Q6J("ngIf",0==t.taskAnswers.length&&!t.answerLoading),e.xp6(2),e.Q6J("ngIf",t.taskAnswers.length>0)}}const je=function(n){return{"h-100":n}};let Ke=(()=>{class n{constructor(t,o,s){this.dialog=t,this.alert=o,this.chatSer=s,this.sent=[],this.service=(0,e.f3M)(v.Q),this.url=D.N.apiUrl,this.loading=!0,this.lang=localStorage.getItem("language")||"en",this.assigneesIsOpen=!1,this.selectedTap=new g.NI(0),this.assignees=[],this.assigneesLoading=!1,this.reporters=[],this.answersTypes=(0,ue.q)(ge.P)}ngOnInit(){this.service.loading.subscribe(t=>this.loading=t),this.service.meta.subscribe(t=>this.meta=t),this.source1$=this.service.sent$.subscribe(t=>this.sent=t)}openDialog(){console.log(4444),this.dialog.open(this.dialogTemplate,{panelClass:"users-answers-dialog",width:"900px",maxHeight:"90vh"})}closeDialog(){this.dialog.closeAll()}editExpected(t){this.dialog.open(q,{panelClass:"small-dialog",data:{task:t}})}cancel(t){this.dialog.open(J.v,{panelClass:"confirmation-dialog",autoFocus:!1,data:{message:"cancel_task_group",btn_name:"continue",classes:"bg-primary white"}}).afterClosed().subscribe(s=>{s&&this.service.cancelTaskGroup(t).subscribe(r=>{r.success&&(this.service.hasChanged.next(!0),this.alert.showAlert("task_group_canceled"))})})}delete(t){this.dialog.open(J.v,{panelClass:"confirmation-dialog",autoFocus:!1,data:{message:"delete_task_group",btn_name:"delete",classes:"bg-primary white"}}).afterClosed().subscribe(s=>{s&&this.service.deleteTaskGroup(t).subscribe(r=>{r.success&&(this.service.hasChanged.next(!0),this.alert.showAlert("task_group_deleted"))})})}reassign(t){let o=[];this.service.getAssignees(t.id).subscribe(s=>{o=s.map(p=>({id:p.assigneeId,name:p.assigneeName,imageUrl:p.assigneeProfilePicture,departmentId:null,departmentName:null,jobTitle:p.assigneeJob})),this.dialog.open(pe.$,{panelClass:"select-users-dialog",data:{selectedUsers:o,multi:!0}}).afterClosed().subscribe(p=>{if(p?.changed&&p?.users?.length>0){let U=p?.users;const Be={taskGroupId:t.id,assigneeIds:U.map(E=>E.id)};this.service.reassign(Be).subscribe(E=>{E.success&&(this.service.hasChanged.next(!0),this.alert.showAlert("task_group_reassigned"),this.chatSer.refreshTaskUser(t.id).subscribe())})}})})}edit(t){this.dialog.open(S.T,{disableClose:!0,panelClass:"create-task-dialog",data:{task:t,editTask:!0}}).afterClosed().subscribe(s=>{s&&(this.service.loading.subscribe(r=>this.loading=r),this.service.meta.subscribe(r=>this.meta=r),this.source1$=this.service.sent$.subscribe(r=>this.sent=r))})}getAssignees(){this.selectedTap.setValue(0),this.assigneesIsOpen=!1,setTimeout(()=>{this.assigneesIsOpen=!0},0),this.source3$=this.service.getReporters(this.selectedTask?.id).subscribe(t=>{this.reporters=t.data.items})}removeUser(){this.service.loading.next(!0),this.service.userName.next(""),this.service.userSent.next(null),this.service.resetFilter(),this.service.hasChanged.next(!0)}ngOnDestroy(){this.source1$?.unsubscribe(),this.source2$?.unsubscribe(),this.source3$?.unsubscribe(),this.service.loading.next(!0)}getTaskAnswers(t){this.openDialog(),this.selectedTask=t;let o=(new _e.LE).set("TaskGroup",t.headParentTaskGroupId);this.answerLoading=!0,this.service.getTaskGroupAnswers(o).subscribe(s=>{this.answerLoading=!1,s.success&&(this.taskAnswers=s.data)})}static{this.\u0275fac=function(o){return new(o||n)(e.Y36(T.uw),e.Y36(k.c),e.Y36(me.a))}}static{this.\u0275cmp=e.Xpm({type:n,selectors:[["sent"]],viewQuery:function(o,s){if(1&o&&e.Gf(fe,5),2&o){let r;e.iGM(r=e.CRH())&&(s.dialogTemplate=r.first)}},standalone:!0,features:[e.jDz],decls:41,vars:34,consts:[["class","mb-1 flex aic gap-x-1 ",4,"ngIf"],[3,"meta","hasTitle","pageChange"],["filters",""],["content",""],["id","tasks",1,"table","w-100","relative",3,"ngClass"],[1,"bg-gray","border-bottom"],[1,"text-left","pl-4"],[4,"ngIf"],["class","a-center",4,"ngIf"],[3,"assigneesLoading","assignees","open","reporters","task","close",4,"ngIf"],["dialogTemplate",""],[1,"mb-1","flex","aic","gap-x-1"],[1,"bx","bx-chevron-right","fs-20",3,"ngClass"],[1,"primary","flex","aic","gap-x-1","pointer",3,"matTooltip","click"],[1,"bx","bx-x","danger"],["class","border-bottom pointer",3,"click",4,"ngFor","ngForOf"],[1,"border-bottom","pointer",3,"click"],[1,"fs-13"],[1,"pl-4"],[1,"flex","aic","bold"],[1,"mr-1",3,"priority"],[3,"matTooltip",4,"ngIf"],[1,"flex-center",3,"matTooltip","click"],["class","mx-50",4,"ngIf"],[1,"flex-center"],[3,"images"],[1,"flex-center","bold"],[1,"flex-center","warning","bold"],[1,"flex-center","success","bold"],[1,"img","mr-50"],["alt","due date","src","assets/images/icons/due-date.svg",4,"ngIf"],["alt","due date","src","assets/images/icons/due-date-red.svg",4,"ngIf"],[3,"ngClass"],[3,"isRepeated","repeatedPeriod"],[3,"click"],[1,"flex","aic","jce","pr-2"],[1,"bx","bx-show","fs-20","primary","pointer","px-1",3,"click"],["target","_blank",1,"bx","bx-file","fs-20","primary","pointer","px-1",3,"href"],[3,"isRepate","cancel","delete","edit","reassign"],[3,"matTooltip"],["class","mr-50",4,"ngIf"],[1,"mr-50"],[1,"mx-50"],["alt","due date","src","assets/images/icons/due-date.svg"],["alt","due date","src","assets/images/icons/due-date-red.svg"],[1,"a-center"],[3,"assigneesLoading","assignees","open","reporters","task","close"],[1,"dir"],[1,"flex","w-100","jcsb","px-1","py-1"],[1,"fs-20","simibold"],[1,"bx","bx-x","fs-22","danger","pointer",3,"click"],["class","aic flex jcc py-5 h-25v",4,"ngIf"],["class","py-5 text-center",4,"ngIf"],[1,"content-height"],[1,"aic","flex","jcc","py-5","h-25v"],[1,"py-5","text-center"],["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],[1,"mb-1","px-1"],[3,"imgSrc","title","userId"],[1,"table-container","mx-1","mt-1","mb-1"],[1,"w-100"],[1,"border","bg-gray"],[1,"border-bottom","fs-12","simibold"],[1,"text-left","py-1","w-25r"],[1,"text-left","py-1","w-7r"],[1,"text-left","py-1"],["class","border pointer",4,"ngFor","ngForOf"],[1,"border","pointer"],[1,"fs-13","text-left"],[3,"class",4,"ngIf"]],template:function(o,s){1&o&&(e.YNc(0,xe,10,10,"p",0),e.TgZ(1,"layout-with-filters",1),e.NdJ("pageChange",function(p){return s.service.page.next(p),s.service.hasChanged.next(!0)}),e.ynx(2,2),e._UZ(3,"sent-filters"),e.BQk(),e.ynx(4,3),e.TgZ(5,"table",4)(6,"thead",5)(7,"tr")(8,"th"),e._uU(9,"#"),e.qZA(),e.TgZ(10,"th",6),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"th"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"th"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e._UZ(34,"th"),e.qZA()(),e.YNc(35,Pe,3,8,"tbody",7),e.YNc(36,Ue,1,0,"not-found",8),e.YNc(37,we,1,0,"loading",7),e.qZA(),e.BQk(),e.qZA(),e.YNc(38,Ee,1,5,"task-group-details",9),e.YNc(39,Ye,10,6,"ng-template",null,10,e.W1O)),2&o&&(e.Q6J("ngIf",s.service.userSent.value),e.xp6(1),e.Q6J("meta",s.meta)("hasTitle",!!s.service.userSent.value),e.xp6(4),e.Q6J("ngClass",e.VKq(32,je,0==s.sent.length||s.loading)),e.xp6(6),e.Oqu(e.lcZ(12,16,"task_name")),e.xp6(3),e.Oqu(e.lcZ(15,18,"expected_time")),e.xp6(3),e.Oqu(e.lcZ(18,20,"assignees")),e.xp6(3),e.Oqu(e.lcZ(21,22,"assignees_count")),e.xp6(3),e.Oqu(e.lcZ(24,24,"in_progress")),e.xp6(3),e.Oqu(e.lcZ(27,26,"executed")),e.xp6(3),e.Oqu(e.lcZ(30,28,"due_date")),e.xp6(3),e.Oqu(e.lcZ(33,30,"repeat")),e.xp6(3),e.Q6J("ngIf",s.sent.length>0&&!s.loading),e.xp6(1),e.Q6J("ngIf",s.sent&&0==s.sent.length&&!s.loading),e.xp6(1),e.Q6J("ngIf",s.loading),e.xp6(1),e.Q6J("ngIf",s.assigneesIsOpen))},dependencies:[_.ez,_.mk,_.sg,_.O5,_.OU,a.Y,d.N,l.JX,l._s,O.w,M.t,A.P,L.aw,L.X$,x.AV,x.gM,b.K,c.m,h.P,I.J,f.i,u.Nh,re,ce.t,de.G],styles:[".table[_ngcontent-%COMP%]{min-width:115rem}[_nghost-%COMP%]     .search, [_nghost-%COMP%]     .ng-select{width:100%}[_nghost-%COMP%]     label{font-size:11px}.table-container[_ngcontent-%COMP%]{border-radius:8px;border:0;overflow:hidden}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-spacing:0}th[_ngcontent-%COMP%]{border:none;position:sticky;top:0;z-index:1}tbody[_ngcontent-%COMP%]{padding-bottom:5px}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-block:10px;padding-inline:15px;border:none;font-size:12px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-inline:15px;border:none}tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.btn[_ngcontent-%COMP%]{display:inline-block;height:41.2px}.aie[_ngcontent-%COMP%]{align-items:end}.table-filter-content[_ngcontent-%COMP%]{height:calc(100vh - 110px)}.table-container[_ngcontent-%COMP%]{overflow:auto}.pagination-content[_ngcontent-%COMP%]{margin-top:-5px}.content-height[_ngcontent-%COMP%]{height:calc(90vh - 52px);overflow:auto}"]})}}return n})()}}]);