"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[5248],{15714:(P,b,a)=>{a.d(b,{z:()=>d});var t=a(96814),r=a(17700),D=a(824),h=a(89515),C=a(45843),u=a(75986),A=a(56223),O=a(32296),n=a(65879),M=a(53451),v=a(99758);function p(s,f){if(1&s&&(n.TgZ(0,"div",10)(1,"div",11),n._UZ(2,"user-image",12),n.TgZ(3,"p",13),n._uU(4),n.qZA()()()),2&s){const e=f.$implicit;n.xp6(2),n.Q6J("img",e.imageUrl),n.xp6(2),n.Oqu(e.name)}}let d=(()=>{class s{constructor(e,i,o,_){this.data=e,this.service=i,this.alert=o,this.dialog=_,this.admin=!1,this.limited=!1,this.EmployeesKpi=!1,this.KpiRater=!1,this.KpiBankAdmin=!1}ngOnInit(){}setRoles(){const e={profileIds:this.data.users.map(i=>i.id),roleNames:[this.limited&&"SpacelimitedUser",this.admin&&"SpaceAdmin",this.EmployeesKpi&&"EmployeesKpi",this.KpiRater&&"KpiRater",this.KpiBankAdmin&&"KpiBankAdmin"].filter(Boolean),isAddedRole:!0};this.service.addOrRemoveRole(e).subscribe(i=>{i.success&&(this.alert.showAlert("role_added"),this.service.hasChanged.next(!0),this.service.selectedUsersToAddRole.next([])),this.dialog.closeAll()})}static{this.\u0275fac=function(i){return new(i||s)(n.Y36(r.WI),n.Y36(M.L),n.Y36(v.c),n.Y36(r.uw))}}static{this.\u0275cmp=n.Xpm({type:s,selectors:[["add-roles"]],standalone:!0,features:[n.jDz],decls:30,vars:27,consts:[[1,"black"],["mat-dialog-content","","magicScroll","",1,"pb-2","dir"],[1,"flex","aic","flex-wrap","gap-x-1","gap-y-2"],["class","ml-50 primary",4,"ngFor","ngForOf"],[1,"flex","aic","mt-3"],["color","primary",1,"mr-1",3,"ngModel","ngModelChange"],[1,"font-medium-2"],["mat-dialog-actions","","align","end",1,"dir"],["mat-raised-button","","color","primary",1,"mr-1",3,"disabled","click"],["mat-raised-button","","mat-dialog-close",""],[1,"ml-50","primary"],[1,"flex","aic"],[3,"img"],[1,"ml-75"]],template:function(i,o){1&i&&(n.TgZ(0,"h2",0),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"div",1)(4,"div",2),n.YNc(5,p,5,2,"div",3),n.qZA(),n.TgZ(6,"div",4)(7,"mat-checkbox",5),n.NdJ("ngModelChange",function(g){return o.admin=g}),n.TgZ(8,"span",6),n._uU(9),n.ALo(10,"translate"),n.qZA()(),n.TgZ(11,"mat-checkbox",5),n.NdJ("ngModelChange",function(g){return o.limited=g}),n.TgZ(12,"span",6),n._uU(13),n.ALo(14,"translate"),n.qZA()(),n.TgZ(15,"mat-checkbox",5),n.NdJ("ngModelChange",function(g){return o.EmployeesKpi=g}),n.TgZ(16,"span",6),n._uU(17),n.ALo(18,"translate"),n.qZA()(),n.TgZ(19,"mat-checkbox",5),n.NdJ("ngModelChange",function(g){return o.KpiBankAdmin=g}),n.TgZ(20,"span",6),n._uU(21),n.ALo(22,"translate"),n.qZA()()()(),n.TgZ(23,"div",7)(24,"button",8),n.NdJ("click",function(){return o.setRoles()}),n._uU(25),n.ALo(26,"translate"),n.qZA(),n.TgZ(27,"button",9),n._uU(28),n.ALo(29,"translate"),n.qZA()()),2&i&&(n.xp6(1),n.hij(" ",n.lcZ(2,13,"add_roles"),""),n.xp6(4),n.Q6J("ngForOf",o.data.users),n.xp6(2),n.Q6J("ngModel",o.admin),n.xp6(2),n.Oqu(n.lcZ(10,15,"space_admin")),n.xp6(2),n.Q6J("ngModel",o.limited),n.xp6(2),n.Oqu(n.lcZ(14,17,"limited_user")),n.xp6(2),n.Q6J("ngModel",o.EmployeesKpi),n.xp6(2),n.Oqu(n.lcZ(18,19,"kpi_employee")),n.xp6(2),n.Q6J("ngModel",o.KpiBankAdmin),n.xp6(2),n.Oqu(n.lcZ(22,21,"kpi_admin")),n.xp6(3),n.Q6J("disabled",0==o.data.users.length),n.xp6(1),n.Oqu(n.lcZ(26,23,"save")),n.xp6(3),n.Oqu(n.lcZ(29,25,"cancel")))},dependencies:[t.ez,t.sg,r.Is,r.ZT,r.xY,r.H8,D.h,h.aw,h.X$,C.l,u.p9,u.oG,A.u5,A.JJ,A.On,O.ot,O.lW],encapsulation:2})}}return s})()},9983:(P,b,a)=>{a.d(b,{a:()=>S});var t=a(96814),r=a(56223),D=a(20553),h=a(17700),C=a(10480),u=a(45843),A=a(66507),O=a(89515),n=a(9619),M=a(92596),v=a(32296),p=a(1350),d=a(58964),s=a(54807),f=a(82458),e=a(65879),i=a(53451),o=a(65509),_=a(99758),g=a(64190),E=a(24110);function L(m,U){if(1&m&&(e.TgZ(0,"div",46)(1,"a",47),e._uU(2,"Show CV"),e.qZA(),e.TgZ(3,"label",48),e.ALo(4,"translate"),e._UZ(5,"i",49),e.qZA()()),2&m){const c=e.oxw();e.xp6(1),e.Q6J("href",c.env+"/"+c.user.profileCV.filePath,e.LSH),e.xp6(2),e.Q6J("matTooltip",e.lcZ(4,2,"update_cv"))}}function y(m,U){1&m&&(e.TgZ(0,"label",50)(1,"p",51),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&m&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"add_cv")))}function K(m,U){if(1&m){const c=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(c);const l=e.oxw(2);return e.KtG(l.activateAccount(!0))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&m&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"activate")," "))}function R(m,U){if(1&m){const c=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(c);const l=e.oxw(2);return e.KtG(l.activateAccount(!1))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&m&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"deactivate")," "))}function W(m,U){if(1&m&&(e.TgZ(0,"div",52),e.YNc(1,K,3,3,"button",53),e.YNc(2,R,3,3,"button",54),e.qZA()),2&m){const c=e.oxw();e.xp6(1),e.Q6J("ngIf",!c.user.isActivated),e.xp6(1),e.Q6J("ngIf",c.user.isActivated)}}const J=function(m,U){return{name:m,id:U}},B=function(m){return[m]};function N(m,U){if(1&m){const c=e.EpF();e.TgZ(0,"div",19)(1,"div",57),e._UZ(2,"input-label",58),e.TgZ(3,"select-user",59),e.NdJ("getSelectedUsers",function(l){e.CHM(c);const x=e.oxw();return e.KtG(x.selectedManager=l||[{name:x.user.managerName,id:x.user.managerId}])}),e.qZA()()()}if(2&m){const c=e.oxw();e.xp6(2),e.Q6J("control",c.f.managerId),e.xp6(1),e.Q6J("multi",!1)("selectedUsers",c.selectedManager||e.VKq(6,B,e.WLB(3,J,c.user.managerName,c.user.managerId)))}}let S=(()=>{class m{constructor(c,T,l,x,Z,I,k,Q){this.data=c,this.service=T,this.tasksSer=l,this.fb=x,this.alertSer=Z,this.dialog=I,this.router=k,this.globalSer=Q,this.users=[],this.departments$=this.globalSer.departments$,this.loading=!1,this.env=D.N.apiUrl,this.currentUserId=localStorage.getItem("id"),this.form=this.fb.group({name:[this.data.user.name,r.kI.required],jobTitle:[this.data.user.jobTitle],email:[this.data.user.email],phoneNumber:[this.data.user.phoneNumber],departmentId:[this.data.user.departmentId||null],jobDescription:[this.data.user.jobDescription]})}ngOnInit(){this.user=this.data.user,this.userToShow=this.user.managerName,this.service.getRate(this.data.user?.id).subscribe(c=>this.rate=c.data.averageRate),this.selectedManager=[{name:this.user.managerName,id:this.user.managerId}]}updateUser(){this.loading=!0;const c={...this.form.value,managerId:this.selectedManager[0].id,id:this.user.id};this.service.updateUser(c).subscribe(T=>{T.success&&(this.alertSer.showAlert("user_updated"),this.service.hasChanged.next(!0),this.dialog.closeAll()),this.loading=!1})}addCV(c){let T=c.target.files[0];const l={filePath:`Khaled/Attachments${T.name}`,contentType:T.type,fileName:T.name,fileSize:T.size,fileType:1};let x=new FormData;x.append("uploadedFile",T),this.service.addUserCV(l,this.user.id).subscribe(Z=>{Z.success&&(this.alertSer.showAlert("files_uploading","bg-primary",5e14),this.service.uploadCV(x,Z.data.id,this.user.id).subscribe(I=>{I.success&&(this.service.getUsers().subscribe(),this.alertSer.showAlert("user_updated"),this.dialog.closeAll())}))})}activateAccount(c){this.service.activateAccount({id:this.user.id,isActivated:c}).subscribe(l=>{l.success&&(this.alertSer.showAlert("user_status_changed"),this.service.hasChanged.next(!0),this.dialog.closeAll())})}inbox(){this.tasksSer.loading.next(!0),this.dialog.closeAll(),this.router.navigate(["/admin/tasks"]),this.tasksSer.getTasks().subscribe()}get f(){return this.form.controls}sent(){this.tasksSer.loading.next(!0),this.dialog.closeAll(),this.router.navigate(["/admin/tasks"]),this.tasksSer.getTasks().subscribe()}static{this.\u0275fac=function(T){return new(T||m)(e.Y36(h.WI),e.Y36(i.L),e.Y36(o.l),e.Y36(r.qu),e.Y36(_.c),e.Y36(h.uw),e.Y36(g.F0),e.Y36(E.U))}}static{this.\u0275cmp=e.Xpm({type:m,selectors:[["edit-user"]],standalone:!0,features:[e.jDz],decls:62,vars:40,consts:[[1,"mb-1","dir"],[1,"flex-grid","pt-2"],[1,"col-md-4","flex-column-center"],[3,"dim","img"],[1,"primary","mt-75","fs-17"],[1,"mt-25","mb-25"],[2,"min-width","12.5rem",3,"ngModel","disabled","ngModelChange"],["class","cv w-25r flex aic gap-x-1 mt-50 mb-25",4,"ngIf"],["class","fs-11 simibold mb-75","for","cv","class","w-25r clickable-btn bg-primary white flex-center rounded pt-50 pb-50 mt-75 mb-50",4,"ngIf"],[1,"w-25r","flex","aic","jcsb","gap-x-2","my-1","d-none"],[1,"inbox","rounded","bg-gray","p-1","flex","aic","flex-50","pointer",3,"click"],["src","assets/images/user-info/inbox.png","width","30","alt","inbox icon"],[1,"ml-1"],[1,"sent","rounded","bg-gray","p-1","flex","aic","flex-50","pointer",3,"click"],["src","assets/images/user-info/sent.png","width","30","alt","sent icon"],["class","actions",4,"ngIf"],[1,"col-md-8"],[3,"formGroup"],[1,"flex-grid","gap-y-1"],[1,"col-md-6"],[1,"name"],["key","name",3,"control"],["type","text","formControlName","name",1,"input"],[3,"control"],[1,"department"],["key","department",3,"control"],["formControlName","departmentId","bindLabel","name","bindValue","id","appendTo","body",3,"items"],[1,"phone-number"],["key","phone",3,"control"],["formControlName","phoneNumber","readonly","",1,"input"],[1,"email"],["key","email",3,"control"],["formControlName","email",1,"input"],["class","col-md-6",4,"ngIf"],[1,"job-title"],["key","job_title",3,"control"],["formControlName","jobTitle",1,"input"],[1,"col-md-12"],["key","job_description",3,"control"],["formControlName","jobDescription","rows","4",1,"input"],["align","end",1,"dir"],[1,"start","mr-1"],["mat-raised-button","",3,"mat-dialog-close"],["mat-raised-button","","color","primary",3,"disabled","click"],["text","save",3,"loading"],["type","file","id","cv","accept",".DOC,.PDF",3,"hidden","change"],[1,"cv","w-25r","flex","aic","gap-x-1","mt-50","mb-25"],["target","_blank",1,"clickable-btn","edit","bg-primary","white","flex-85","flex-center","rounded",3,"href"],["for","cv",1,"clickable-btn","edit","bg-primary","white","flex-15","flex-center","rounded",3,"matTooltip"],[1,"bx","bxs-edit","fs-20"],["for","cv",1,"w-25r","clickable-btn","bg-primary","white","flex-center","rounded","pt-50","pb-50","mt-75","mb-50"],[1,"ml-1","fs-16"],[1,"actions"],["mat-raised-button","","class","mt-1 w-25r bg-primary white",3,"click",4,"ngIf"],["mat-raised-button","","class","mt-1 w-25r",3,"click",4,"ngIf"],["mat-raised-button","",1,"mt-1","w-25r","bg-primary","white",3,"click"],["mat-raised-button","",1,"mt-1","w-25r",3,"click"],[1,"manager"],["key","manager",3,"control"],["text","manager",3,"multi","selectedUsers","getSelectedUsers"]],template:function(T,l){1&T&&(e.TgZ(0,"mat-dialog-content",0)(1,"div",1)(2,"div",2),e._UZ(3,"user-image",3),e.TgZ(4,"p",4),e._uU(5),e.qZA(),e.TgZ(6,"p",5),e._uU(7),e.ALo(8,"translate"),e.ALo(9,"arabicDate"),e.qZA(),e.TgZ(10,"ngx-star-rating",6),e.NdJ("ngModelChange",function(Z){return l.rate=Z}),e.qZA(),e.YNc(11,L,6,4,"div",7),e.YNc(12,y,4,3,"label",8),e.TgZ(13,"div",9)(14,"div",10),e.NdJ("click",function(){return l.inbox()}),e._UZ(15,"img",11),e.TgZ(16,"p",12),e._uU(17),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",13),e.NdJ("click",function(){return l.sent()}),e._UZ(20,"img",14),e.TgZ(21,"p",12),e._uU(22),e.ALo(23,"translate"),e.qZA()()(),e.YNc(24,W,3,2,"div",15),e.qZA(),e.TgZ(25,"div",16)(26,"form",17)(27,"div",18)(28,"div",19)(29,"div",20),e._UZ(30,"input-label",21)(31,"input",22)(32,"input-error",23),e.qZA()(),e.TgZ(33,"div",19)(34,"div",24),e._UZ(35,"input-label",25)(36,"ng-select",26),e.ALo(37,"async"),e.qZA()(),e.TgZ(38,"div",19)(39,"div",27),e._UZ(40,"input-label",28)(41,"input",29),e.qZA()(),e.TgZ(42,"div",19)(43,"div",30),e._UZ(44,"input-label",31)(45,"input",32),e.qZA()(),e.YNc(46,N,4,8,"div",33),e.TgZ(47,"div",19)(48,"div",34),e._UZ(49,"input-label",35)(50,"input",36),e.qZA()(),e.TgZ(51,"div",37),e._UZ(52,"input-label",38)(53,"textarea",39),e.qZA()()()()()(),e.TgZ(54,"mat-dialog-actions",40)(55,"div",41)(56,"button",42),e._uU(57),e.ALo(58,"translate"),e.qZA()(),e.TgZ(59,"button",43),e.NdJ("click",function(){return l.updateUser()}),e._UZ(60,"submit-button",44),e.qZA()(),e.TgZ(61,"input",45),e.NdJ("change",function(Z){return l.addCV(Z)}),e.qZA()),2&T&&(e.xp6(3),e.Q6J("dim",70)("img",l.user.imageUrl),e.xp6(2),e.Oqu(l.user.name),e.xp6(2),e.AsE(" ",e.lcZ(8,27,"joined_on")," ",e.xi3(9,29,l.user.creationDate,"typicalDate")," "),e.xp6(3),e.Q6J("ngModel",l.rate)("disabled",!0),e.xp6(1),e.Q6J("ngIf",l.user.profileCV),e.xp6(1),e.Q6J("ngIf",!l.user.profileCV),e.xp6(5),e.Oqu(e.lcZ(18,32,"inbox")),e.xp6(5),e.Oqu(e.lcZ(23,34,"sent")),e.xp6(2),e.Q6J("ngIf",l.data.user.id!=l.currentUserId&&!l.data.isSuperAdmin),e.xp6(2),e.Q6J("formGroup",l.form),e.xp6(4),e.Q6J("control",l.f.name),e.xp6(2),e.Q6J("control",l.f.name),e.xp6(3),e.Q6J("control",l.f.departmentId),e.xp6(1),e.Q6J("items",e.lcZ(37,36,l.departments$)),e.xp6(4),e.Q6J("control",l.f.phoneNumber),e.xp6(4),e.Q6J("control",l.f.email),e.xp6(2),e.Q6J("ngIf","SpaceSuperAdmin"!=(null==l.data.user.profileRoles[0]?null:l.data.user.profileRoles[0].roleName)),e.xp6(3),e.Q6J("control",l.f.jobTitle),e.xp6(3),e.Q6J("control",l.f.jobDescription),e.xp6(4),e.Q6J("mat-dialog-close",!0),e.xp6(1),e.hij(" ",e.lcZ(58,38,"cancel")," "),e.xp6(2),e.Q6J("disabled",l.form.invalid||l.loading),e.xp6(1),e.Q6J("loading",l.loading),e.xp6(1),e.Q6J("hidden",!0))},dependencies:[t.ez,t.O5,t.Ov,u.l,A.nI,A.wK,O.aw,O.X$,n.P,M.AV,M.gM,v.ot,v.lW,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,p.i,d.w,s.A0,s.w9,f.w,h.Is,h.ZT,h.xY,h.H8,r.u5,r.On,C.V],encapsulation:2})}}return m})()},38140:(P,b,a)=>{a.d(b,{Y:()=>e});var t=a(65879),r=a(96814),D=a(89515),h=a(824),C=a(52081),u=a(56223),A=a(76472),O=a(3131);function n(i,o){if(1&i&&(t.TgZ(0,"p",10),t._uU(1),t.ALo(2,"arabicNumbers"),t.ALo(3,"translate"),t.qZA()),2&i){const _=t.oxw();t.xp6(1),t.Oqu(null!=_.meta&&_.meta.pageSize?t.lcZ(2,1,null==_.meta?null:_.meta.pageSize):t.lcZ(3,3,"unlimited"))}}function M(i,o){if(1&i){const _=t.EpF();t.TgZ(0,"input",11),t.NdJ("ngModelChange",function(E){t.CHM(_);const L=t.oxw();return t.KtG(L.limit=E)})("ngModelChange",function(){t.CHM(_);const E=t.oxw();return t.KtG(E.changeLimit())}),t.qZA()}if(2&i){const _=t.oxw();t.Q6J("ngModel",_.limit)}}function v(i,o){1&i&&(t.TgZ(0,"p",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"record")))}function p(i,o){if(1&i){const _=t.EpF();t.TgZ(0,"pagination-controls",13),t.NdJ("pageChange",function(E){t.CHM(_);const L=t.oxw();return t.KtG(L.pageChanged(E))}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.qZA()}2&i&&t.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",t.lcZ(1,4,"previous"))("nextLabel",t.lcZ(2,6,"next"))}const d=[[["","filters",""]],[["","content",""]]],s=function(i,o){return{height:i,"max-width":o}},f=["[filters]","[content]"];let e=(()=>{class i{constructor(){this.pageChange=new t.vpe,this.limitChanged=new t.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,t.f3M)(O.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(_){this.pageChange.emit(_)}static{this.\u0275fac=function(g){return new(g||i)}}static{this.\u0275cmp=t.Xpm({type:i,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[t.jDz],ngContentSelectors:f,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(g,E){1&g&&(t.F$t(d),t.TgZ(0,"div",0)(1,"div",1),t.Hsn(2),t.qZA(),t.TgZ(3,"div",2),t.Hsn(4,1),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,n,4,5,"p",5),t.YNc(11,M,1,1,"input",6),t.YNc(12,v,3,3,"p",7),t.qZA(),t.YNc(13,p,3,8,"pagination-controls",8),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.TgZ(17,"span",9),t._uU(18),t.ALo(19,"arabicNumbers"),t.ALo(20,"translate"),t.qZA()()()()),2&g&&(t.Q6J("ngStyle",t.WLB(17,s,E.hasTitle?"calc(100vh - 14.5rem)":E.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",E.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),t.xp6(8),t.hij("",t.lcZ(9,9,"pagination_per_page")," "),t.xp6(2),t.Q6J("ngIf",!E.admin),t.xp6(1),t.Q6J("ngIf",E.admin),t.xp6(1),t.Q6J("ngIf",null==E.meta?null:E.meta.pageSize),t.xp6(1),t.Q6J("ngIf",(null==E.meta?null:E.meta.totalItems)>15),t.xp6(2),t.hij("",t.lcZ(16,11,"pagination_total_records")," "),t.xp6(3),t.AsE("",t.lcZ(19,13,null==E.meta?null:E.meta.totalItems)," ",t.lcZ(20,15,"record"),""))},dependencies:[r.ez,r.O5,r.PC,D.aw,D.X$,h.h,C.m,u.u5,u.Fj,u.wV,u.JJ,u.qQ,u.On,A.JX,A.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return i})()},85195:(P,b,a)=>{a.d(b,{r:()=>M});var t=a(65879),r=a(96814),D=a(70468),h=a(54807),C=a(56223),u=a(89515);const A=function(v){return{name:v,id:!0}},O=function(v){return{name:v,id:!1}},n=function(v,p){return[v,p]};let M=(()=>{class v{constructor(){this.valueChanged=new t.vpe,this.translate=(0,t.f3M)(u.sK)}changeValue(d){this.valueChanged.emit(d)}static{this.\u0275fac=function(s){return new(s||v)}}static{this.\u0275cmp=t.Xpm({type:v,selectors:[["assignee-state"]],inputs:{selectedValue:"selectedValue"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[t.jDz],decls:3,vars:11,consts:[[1,"user-state"],["key","assignee_state"],["appendTo","body","bindLabel","name","bindValue","id",1,"w-15r",3,"ngModel","closeOnSelect","items","multiple","ngModelChange"]],template:function(s,f){1&s&&(t.TgZ(0,"div",0),t._UZ(1,"filter-label",1),t.TgZ(2,"ng-select",2),t.NdJ("ngModelChange",function(i){return f.changeValue(i)})("ngModelChange",function(i){return f.selectedValue=i}),t.qZA()()),2&s&&(t.xp6(2),t.Q6J("ngModel",f.selectedValue)("closeOnSelect",!0)("items",t.WLB(8,n,t.VKq(4,A,f.translate.instant("active")),t.VKq(6,O,f.translate.instant("inactive"))))("multiple",!1))},dependencies:[r.ez,D.r,h.A0,h.w9,C.u5,C.JJ,C.On],encapsulation:2})}}return v})()},55237:(P,b,a)=>{a.d(b,{S:()=>d});var t=a(65879),r=a(96814),D=a(70468),h=a(54807),C=a(56223),u=a(89515),A=a(24110);function O(s,f){if(1&s&&t._UZ(0,"filter-label",4),2&s){const e=t.oxw();t.Q6J("key",e.label)}}function n(s,f){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&s){const e=t.oxw().items;t.xp6(1),t.hij("",t.Dn7(2,1,e[0].name,0,10),"...")}}function M(s,f){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const e=t.oxw().items;t.xp6(1),t.Oqu(e[0].name)}}function v(s,f){if(1&s&&(t.TgZ(0,"div",11)(1,"span",12),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&s){const e=t.oxw().items;t.xp6(2),t.AsE("",e.length-1," ",t.lcZ(3,2,"more"),"...")}}function p(s,f){if(1&s){const e=t.EpF();t.TgZ(0,"div",5)(1,"span",6)(2,"span",7),t.YNc(3,n,3,5,"span",8),t.YNc(4,M,2,1,"span",8),t.qZA()(),t.TgZ(5,"span",9),t.NdJ("click",function(){const o=t.CHM(e);return t.KtG((0,o.clear)(o.items[0]))}),t._uU(6,"\xd7"),t.qZA()(),t.YNc(7,v,4,4,"div",10)}if(2&s){const e=f.items;t.xp6(3),t.Q6J("ngIf",e[0].name.length>=10),t.xp6(1),t.Q6J("ngIf",e[0].name.length<10),t.xp6(3),t.Q6J("ngIf",e.length>1)}}let d=(()=>{class s{constructor(){this.label="departments",this.labelVisibilty=!0,this.width="w-24r",this.multiable=!0,this.closeOnSelect=!1,this.formControlName=null,this.valueChanged=new t.vpe,this.service=(0,t.f3M)(A.U)}onChange(){this.valueChanged.emit(this.selectedDepartment)}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=t.Xpm({type:s,selectors:[["departments"]],inputs:{selectedDepartment:"selectedDepartment",label:"label",labelVisibilty:"labelVisibilty",width:"width",multiable:"multiable",closeOnSelect:"closeOnSelect",formControlName:"formControlName"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[t.jDz],decls:5,vars:11,consts:[[1,"departments-filter"],[3,"key",4,"ngIf"],["bindLabel","name","bindValue","id","appendTo","body",3,"items","clearSearchOnAdd","multiple","closeOnSelect","ngModel","ngModelChange"],["ng-multi-label-tmp",""],[3,"key"],[1,"ng-value","flex","aic"],[1,"ng-value-label"],[1,"flex","aic","fs-10"],[4,"ngIf"],["aria-hidden","true",1,"ng-value-icon","right",3,"click"],["class","ng-value rounded-2",4,"ngIf"],[1,"ng-value","rounded-2"],[1,"ng-value-label","fs-10"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.YNc(1,O,1,1,"filter-label",1),t.TgZ(2,"ng-select",2),t.NdJ("ngModelChange",function(g){return o.selectedDepartment=g})("ngModelChange",function(){return o.onChange()}),t.ALo(3,"async"),t.YNc(4,p,8,3,"ng-template",3),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("ngIf",o.labelVisibilty),t.xp6(1),t.Gre("",o.width," icon-input"),t.Q6J("items",t.lcZ(3,9,o.service.departments$))("clearSearchOnAdd",!0)("multiple",o.multiable)("closeOnSelect",o.closeOnSelect)("ngModel",o.selectedDepartment))},dependencies:[r.ez,r.O5,r.Ov,r.OU,D.r,h.A0,h.w9,h.zB,C.u5,C.JJ,C.On,u.aw,u.X$],encapsulation:2})}}return s})()},65509:(P,b,a)=>{a.d(b,{l:()=>n});var t=a(83620),r=a(94664),D=a(37398),h=a(65619),C=a(69862),u=a(20553),A=a(34673),O=a(65879);let n=(()=>{class M extends A.q{constructor(p){super(),this.http=p,this.tasks$=this.hasChanged.pipe((0,t.b)(400),(0,r.w)(()=>this.getTasks().pipe((0,D.U)(d=>d)))),this.selectedTasksToHandover=new h.X([]),this.selectedTasksToHandoverValue=[],this.spaceId=localStorage.getItem("space-id"),this.token=localStorage.getItem("token"),this.url=`${u.N.apiUrl}api/Tasks/GetAllTasksExcel`,this.selectedTasksToHandover.subscribe(d=>this.selectedTasksToHandoverValue=d)}getTasks(){this.loading.next(!0);const p=new URL(`${u.N.apiUrl}api/Tasks/GetAllTasks`);return this.params(p,"all-tasks"),this.http.get(`${p}`).pipe((0,D.U)(d=>{this.loading.next(!1);let s=d.data.items;return s.forEach(f=>{f.isSelected=this.selectedTasksToHandoverValue.find(e=>f.taskId==e.taskId)}),this.setMeta(d),s}))}handover(p){return this.http.put(`${u.N.apiUrl}api/Tasks/Handover`,{newAssigneeId:p,handOverTasksIds:this.selectedTasksToHandoverValue.map(d=>d.taskId)})}changeCreator(p){return this.http.post(`${u.N.apiUrl}api/TaskGroups/ChangeTaskCreator`,{userId:p,taskGroupId:this.selectedTasksToHandoverValue.map(d=>d.taskGroupId)})}getTasksExcel(p){const d=new C.WM({accept:"/"});return this.http.get(this.url,{headers:d,responseType:"blob",params:p})}getTaskProps(p){return this.http.post(`${u.N.apiUrl}api/TaskGroups/GetTaskProps?taskId=${p}`,{})}static{this.\u0275fac=function(d){return new(d||M)(O.LFG(C.eN))}}static{this.\u0275prov=O.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"})}}return M})()}}]);