"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[4509],{74509:(B,_,s)=>{s.r(_),s.d(_,{LoginComponent:()=>N});var e=s(65879),p=s(96814),f=s(80941),a=s(56223),x=s(20198),c=s(73251),d=s(89515),v=s(58964),C=s(1350),b=s(35282),u=s(64190),M=s(82458),h=s(32296),g=s(77124),T=s(17679),E=s(99758),Z=s(89378),A=s(49388);function O(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"p",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.disabelEditBtn?"":n.otpMode=!1)}),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"i",8),e.qZA()}if(2&i){const t=e.oxw();e.Gre("",t.disabelEditBtn?"bg-light disabeld no-drop":"bg-light-violet pointer"," rounded-pill px-1 py-50 mb-2 fs-11 simibold flex aic"),e.xp6(2),e.Oqu(t.loginData)}}function L(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"p",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.disabelEditBtn?"":n.verificationSuccessful=!1)}),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"i",8),e.qZA()}if(2&i){const t=e.oxw();e.Gre("",t.disabelEditBtn?"bg-light disabeld no-drop":"bg-light-violet pointer"," rounded-pill px-1 py-50 mb-1 fs-11 simibold flex aic"),e.xp6(2),e.Oqu(t.loginPhone)}}function y(i,l){1&i&&(e.TgZ(0,"p",23)(1,"span",24),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"required")))}const m=function(i,l){return[i,l]};function P(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",18),e._UZ(1,"input-label",19),e.TgZ(2,"ngx-intl-tel-input",20),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.phoneValidators())}),e.qZA(),e.YNc(3,y,4,3,"p",21),e._UZ(4,"input-error",22),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("control",t.f.phone),e.xp6(1),e.Q6J("cssClass","input")("enableAutoCountrySelect",!1)("enablePlaceholder",!1)("phoneValidation",!0)("preferredCountries",e.WLB(12,m,t.CountryISO.Egypt,t.CountryISO.SaudiArabia))("searchCountryField",e.WLB(15,m,t.SearchCountryField.Iso2,t.SearchCountryField.Name))("searchCountryFlag",!0)("selectedCountryISO",t.CountryISO.Egypt)("separateDialCode",!0),e.xp6(1),e.Q6J("ngIf",t.phoneValidator),e.xp6(1),e.Q6J("control",t.f.phone)}}function w(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",25),e._UZ(1,"input-label",26),e.TgZ(2,"div",27),e._UZ(3,"i",28),e.TgZ(4,"input",29),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.email=n)}),e.qZA()(),e._UZ(5,"input-error",22),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("control",t.f.email),e.xp6(3),e.Q6J("ngModel",t.email),e.xp6(1),e.Q6J("control",t.f.email)}}function I(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div")(2,"div",9),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.emailModeSwitch())}),e._UZ(3,"i"),e.TgZ(4,"p",10),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",11),e._UZ(8,"hr",12),e.TgZ(9,"span",13),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"hr",12),e.qZA()(),e.YNc(13,P,5,18,"div",14),e.YNc(14,w,6,3,"div",15),e.TgZ(15,"button",16),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.next())}),e._UZ(16,"submit-button",17),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Gre("bx bx-",t.emailMode?"mobile":"envelope"," fs-20 primary"),e.xp6(2),e.Oqu(e.lcZ(6,9,t.emailMode?"continue_with_phone":"continue_with_email")),e.xp6(5),e.Oqu(e.lcZ(11,11,"or")),e.xp6(3),e.Q6J("ngIf",!t.emailMode),e.xp6(1),e.Q6J("ngIf",t.emailMode),e.xp6(1),e.Q6J("disabled",t.loading),e.xp6(1),e.Q6J("loading",t.loading)}}function U(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"code-input",31),e.NdJ("codeCompleted",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.check(n))}),e.qZA()(),e._UZ(3,"p",32),e.TgZ(4,"button",16),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sentAnotherCode())}),e._UZ(5,"submit-button",33),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("codeLength",6)("isCodeHidden",!1),e.xp6(2),e.Q6J("disabled",t.loading),e.xp6(1),e.Q6J("loading",t.loading)}}function D(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",34),e._UZ(2,"input-label",35),e.TgZ(3,"input-password",36),e.NdJ("getType",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.passwordType=n)}),e._UZ(4,"input",37),e.qZA(),e._UZ(5,"input-error",22),e.qZA(),e.TgZ(6,"div",38)(7,"a",39),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"button",16),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.submit())}),e._UZ(11,"submit-button",40),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("control",t.f.password),e.xp6(2),e.Q6J("maxlength",16)("type",t.passwordType),e.xp6(1),e.Q6J("control",t.f.password),e.xp6(3),e.hij(" ",e.lcZ(9,7,"forgot_password")," "),e.xp6(2),e.Q6J("disabled",t.loading),e.xp6(1),e.Q6J("loading",t.loading)}}function J(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"p",42)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"a",43),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.otpMode=!1)}),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,2,"verify_data")),e.xp6(3),e.hij(" ",e.lcZ(7,4,"back")," "))}let N=(()=>{class i{phoneValidators(){this.phoneValidator=!1}constructor(t,o,n,r,k){this.recaptchaV3Service=t,this.fb=o,this.alert=n,this.router=r,this.dataService=k,this.disabelEditBtn=!0,this.phoneValidator=!1,this.service=(0,e.f3M)(x.r),this.loading=!1,this.passwordType="password",this.SearchCountryField=c.wX,this.CountryISO=c.HT,this.emailMode=!0,this.verificationSuccessful=!1,this.otpMode=!1,this.recaptchaVerified=!1,this.form=this.fb.group({email:["",[a.kI.email]],phone:["",a.kI.minLength(9)],otp:[""],password:["",[a.kI.required,a.kI.minLength(6)]]})}ngOnInit(){this.phone=null,this.email=null,this.otp=null}executeRecaptcha(){this.recaptchaV3Service.execute("importantAction").subscribe(t=>{this.recaptchaVerified=!!t})}check(t){this.loading=!0,this.service.verifyOtp(t).subscribe(o=>{this.loading=!1,0==o.success?this.alert.showAlert("pattern_error","bg-danger"):this.navigateToRegister()})}sentAnotherCode(){this.next()}next(){this.loading=!0,this.recaptchaV3Service.execute("importantAction").subscribe(t=>{if(t)if(this.emailMode){if(this.form.get("email").markAsTouched(),null==this.form.value.email)return this.loading=!1,void this.alert.showAlert("enter_email","bg-danger");if(!this.form.get("email")?.valid)return void(this.loading=!1);this.phone=null,this.verifyAccount({Email:this.form.value.email})}else{if(!this.form.value.phone)return this.form.get("phone").markAsTouched(),this.phoneValidator=!0,this.loading=!1,void this.alert.showAlert("enter_phone_number","bg-danger");if(!this.form.get("phone")?.valid)return this.loading=!1,void(this.phoneValidator=!1);this.email=null,this.phone=this.form.value.phone.e164Number.replace("+","00"),this.verifyAccount({phoneNumber:this.phone}),this.phoneValidator=!1}})}verifyAccount(t){this.service.verifyAccount(t).subscribe(o=>{this.loading=!1,this.disabelEditBtn=!0,setTimeout(()=>{this.disabelEditBtn=!1},5e3),o.data.state?(this.loginPhone=o.data.userName,this.loginData=null,this.verificationSuccessful=!0):(this.otpMode=!0,this.alert.showAlert(this.emailMode?"sent_otp_success_email":"sent_otp_success_sms","bg-success",5e3),this.loginData=this.form.value.email||this.form.value.phone.e164Number.replace("+","00"))},o=>{this.alert.showAlert("not_allowed_login","bg-danger"),this.loading=!1})}emailModeSwitch(){this.emailMode=!this.emailMode,this.form.reset()}submit(){this.recaptchaV3Service.execute("importantAction").subscribe(t=>{t&&(this.form.value.password?(this.loading=!0,this.service.login({password:this.form.value.password,phoneNumber:this.loginPhone}).subscribe(n=>{this.loading=!1})):this.loading=!1)})}get f(){return this.form.controls}navigateToRegister(){if(this.emailMode)this.dataService.setEmail(this.form.value.email);else{const t=this.form.value.phone.e164Number.replace("+","00");this.dataService.setPhone(t)}this.router.navigate(["/auth/register"])}static{this.\u0275fac=function(o){return new(o||i)(e.Y36(T.YC),e.Y36(a.qu),e.Y36(E.c),e.Y36(u.F0),e.Y36(Z.l))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["login"]],standalone:!0,features:[e.jDz],decls:12,vars:10,consts:[["img","login"],[1,"flex-column","jcc","px-2","py-1","aic",2,"overflow","visible"],[1,"black","mb-2"],[3,"class","click",4,"ngIf"],[1,"w-100",3,"formGroup"],[4,"ngIf"],["class","flex aic jcsb mt-2",4,"ngIf"],[3,"click"],[1,"bx","fs-14","ml-50","bx-edit","primary"],[1,"pointer","btn","btn-block","border","rounded","flex","aic","p-1","mb-2","border-primary","switch",3,"click"],[1,"fs-13","btn","btn-block","simibold","primary"],[1,"flex","aic","jcc","pb-1"],[1,"w-100","border-top"],[1,"px-1","rounded-circel","border"],["class","phone",4,"ngIf"],["class","email text-left relative",4,"ngIf"],["type","submit","color","primary","mat-raised-button","",1,"submit","rounded","mt-2",3,"disabled","click"],["text","continue",3,"loading"],[1,"phone"],["key","phone",3,"control"],["formControlName","phone","dir","auto",3,"cssClass","enableAutoCountrySelect","enablePlaceholder","phoneValidation","preferredCountries","searchCountryField","searchCountryFlag","selectedCountryISO","separateDialCode","ngModelChange"],["class","danger fs-11 mt-75 text-left",4,"ngIf"],[3,"control"],[1,"danger","fs-11","mt-75","text-left"],[1,""],[1,"email","text-left","relative"],["key","email",3,"control"],[1,"relative","input-icon"],[1,"bx","bx-envelope","fs-20"],["type","email","formControlName","email","required","",1,"input","email",3,"ngModel","ngModelChange"],["dir","ltr"],[3,"codeLength","isCodeHidden","codeCompleted"],[1,"pointer","text-left","primary","fs-12"],["text","anoter_otp",3,"loading"],[1,"password"],["key","password",3,"control"],[3,"getType"],["formControlName","password",1,"input","password",3,"maxlength","type"],[1,"forgot-password","mt-1","flex","jcfe"],["routerLink","/auth/forgot-password",1,"fs-11","primary","simibold","inline-block"],["text","login",3,"loading"],[1,"flex","aic","jcsb","mt-2"],[1,"simibold","fs-11","pointer"],[1,"primary","ml-50","pointe",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"auth-layout",0)(1,"div",1)(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,O,4,4,"p",3),e.YNc(6,L,4,4,"p",3),e.TgZ(7,"form",4),e.YNc(8,I,17,13,"div",5),e.YNc(9,U,6,4,"ng-container",5),e.YNc(10,D,12,9,"ng-container",5),e.qZA(),e.YNc(11,J,8,6,"div",6),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,8,"welcome_back")),e.xp6(2),e.Q6J("ngIf",n.loginData&&n.otpMode),e.xp6(1),e.Q6J("ngIf",n.loginPhone&&n.verificationSuccessful),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("ngIf",!n.verificationSuccessful&&!n.otpMode),e.xp6(1),e.Q6J("ngIf",n.otpMode),e.xp6(1),e.Q6J("ngIf",n.verificationSuccessful),e.xp6(1),e.Q6J("ngIf",n.otpMode))},dependencies:[p.ez,p.O5,g.oY,g.Oz,f.J,c.J7,c.FV,c.mh,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,d.aw,d.X$,v.w,C.i,b.P,u.rH,M.w,h.ot,h.lW,A.Lv,a.u5],styles:[".submit[_ngcontent-%COMP%]{width:100%}.rounded-circel[_ngcontent-%COMP%]{border-radius:50px}.rounded-pill[_ngcontent-%COMP%]{border-radius:100px;display:inline-block}.switch[_ngcontent-%COMP%]{transition:ease all .2s}.switch[_ngcontent-%COMP%]:hover{background-color:#7b58ca1a}"]})}}return i})()}}]);