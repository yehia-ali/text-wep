"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[2814],{17986:(Z,m,a)=>{a.d(m,{_:()=>v});var o=a(65879),l=a(96814),t=a(1428);const b=[[["","top",""]],[["","sidebar",""]],[["","top-section",""]],[["","content",""]]],d=function(s){return{open:s}},h=function(s){return{width:s}},u=function(s){return{"d-block":s}},_=["[top]","[sidebar]","[top-section]","[content]"];let v=(()=>{class s{constructor(){this.open=!1,this.width=30}ngOnInit(){}openSidebar(){this.open=!0}onResize(f){f.target.innerWidth>=991&&(this.open=!1)}static{this.\u0275fac=function(p){return new(p||s)}}static{this.\u0275cmp=o.Xpm({type:s,selectors:[["layout-with-sidebar"]],hostBindings:function(p,g){1&p&&o.NdJ("resize",function(O){return g.onResize(O)},!1,o.Jf7)},inputs:{width:"width"},ngContentSelectors:_,decls:12,vars:11,consts:[[1,"layout-with-sidebar","w-100","h-100","relative"],[1,"flex","h-100"],[1,"sidebar","bg-white","border-right",3,"ngClass","ngStyle"],[1,"content"],[1,"menu-button","pl-1","pr-4","flex","aic","relative"],[1,"bx","bx-menu","p-1","fs-25","pointer","d-lg-none",3,"click"],[1,"backdrop","d-none",3,"ngClass","click"]],template:function(p,g){1&p&&(o.F$t(b),o.TgZ(0,"div",0)(1,"layout"),o.Hsn(2),o.TgZ(3,"div",1)(4,"div",2),o.Hsn(5,1),o.qZA(),o.TgZ(6,"div",3)(7,"div",4)(8,"i",5),o.NdJ("click",function(){return g.openSidebar()}),o.qZA(),o.Hsn(9,2),o.qZA(),o.Hsn(10,3),o.qZA()()(),o.TgZ(11,"div",6),o.NdJ("click",function(){return g.open=!1}),o.qZA()()),2&p&&(o.xp6(4),o.Q6J("ngClass",o.VKq(5,d,g.open))("ngStyle",o.VKq(7,h,g.width+"rem")),o.xp6(2),o.Akn("width: calc(100% - "+g.width+"rem)"),o.xp6(5),o.Q6J("ngClass",o.VKq(9,u,g.open)))},dependencies:[l.mk,l.PC,t.$],styles:['[_ngcontent-%COMP%]:root{--primary: #7b58ca;--light-primary: #7b58ca80;--dark-color: #707070;--gray: #FAF9FD;--success: #29CC99;--danger: #ea5455;--canceled: #C7C7CC;--warning: #F69E42;--info: #007AFF;--dark-white: #283046;--dark-gray: #161D31;--white-color: #b4b7bd;--dark-border: #404656;--border-color: #e7e7e7;--closed: rgba(234, 84, 85, .53)}.primary[_ngcontent-%COMP%]{color:#7b58ca!important}.bg-primary[_ngcontent-%COMP%]{background:#7b58ca!important}.bg-light-primary-10[_ngcontent-%COMP%]{background:rgba(123,88,202,.1)!important}.light-primary[_ngcontent-%COMP%]{color:#7b58ca80!important}.bg-light-primary[_ngcontent-%COMP%]{background:rgba(123,88,202,.5019607843)!important}.closed-color[_ngcontent-%COMP%]{color:#ea545587!important}.bg-closed-color[_ngcontent-%COMP%]{background:rgba(234,84,85,.53)!important}.bg-archived[_ngcontent-%COMP%]{background:#c5c5c5!important}.bg-light-success-1[_ngcontent-%COMP%]{color:#29cc99b5;background-color:#f7fffa}.bg-light-primary-1[_ngcontent-%COMP%]{color:#7b58ca;background:#fbf9ff}.bg-light-warning-2[_ngcontent-%COMP%]{color:#f69e42;background-color:#f69e4233!important}.bg-light-primary-2[_ngcontent-%COMP%]{color:#7b58ca;background-color:#7b58ca33!important}.bg-light-success-2[_ngcontent-%COMP%]{color:#29cc99;background-color:#29cc991a!important}.bg-light-canceled-2[_ngcontent-%COMP%]{color:#c7c7cc;background-color:#c7c7cc33!important}.bg-light-danger-1[_ngcontent-%COMP%]{color:#ea5455;background-color:#fff3f3}.border-primary[_ngcontent-%COMP%]{border:1px solid #7b58ca!important}.layout-with-sidebar[_ngcontent-%COMP%]{overflow:hidden}.sidebar[_ngcontent-%COMP%]{transition:inset-inline-start .4s cubic-bezier(.25,.8,.25,1)}.menu-button[_ngcontent-%COMP%]   .bx-menu[_ngcontent-%COMP%]:after{content:"";width:100%;position:absolute;bottom:0;left:0}@media (max-width: 991px){.content[_ngcontent-%COMP%]{width:100%!important}.content[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{border-bottom:1px solid #e7e7e7}.sidebar[_ngcontent-%COMP%]{position:absolute;inset-inline-start:-100%;top:0;height:100%;z-index:98}.sidebar.open[_ngcontent-%COMP%]{inset-inline-start:0}}.backdrop[_ngcontent-%COMP%]{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000000b3;z-index:5}']})}}return s})()},84943:(Z,m,a)=>{a.d(m,{x:()=>b});var o=a(96814),l=a(1428),t=a(65879);let b=(()=>{class d{static{this.\u0275fac=function(_){return new(_||d)}}static{this.\u0275mod=t.oAB({type:d})}static{this.\u0275inj=t.cJS({imports:[o.ez,l.$,l.$]})}}return d})()},12814:(Z,m,a)=>{a.r(m),a.d(m,{SubscriptionModule:()=>V});var o=a(96814),l=a(64190),t=a(65879),b=a(55006);let d=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=t.Xpm({type:e,selectors:[["subscription"]],decls:3,vars:0,consts:[[1,"p-2"]],template:function(i,r){1&i&&(t._UZ(0,"user-navbar"),t.TgZ(1,"div",0),t._UZ(2,"router-outlet"),t.qZA())},dependencies:[l.lC,b.o]})}}return e})();var h=a(9619),u=a(89515),_=a(824),v=a(92596),s=a(32296),P=a(1428),f=a(95509),p=a(30833),g=a(17700),x=a(48626);function O(e,c){1&e&&(t.TgZ(0,"span"),t._uU(1,"\u0634\u0631\u0643\u0629"),t.qZA())}function M(e,c){1&e&&(t.TgZ(0,"span"),t._uU(1,"'s Space"),t.qZA())}function k(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.renew())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"renew")))}function T(e,c){if(1&e&&t._UZ(0,"img",25),2&e){const n=t.oxw().$implicit;t.MGl("src","assets/images/icons/",n.icon,".svg",t.LSH),t.Q6J("alt",n.icon)}}function A(e,c){if(1&e&&(t.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21),t.YNc(5,T,1,2,"img",22),t.qZA(),t.TgZ(6,"p",23),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"p",24),t._uU(10),t.ALo(11,"translate"),t.qZA()()()()),2&e){const n=c.$implicit;t.xp6(5),t.Q6J("ngIf",n.icon),t.xp6(2),t.Oqu(t.lcZ(8,3,n.name)),t.xp6(3),t.Oqu(t.lcZ(11,5,n.value))}}const D=function(e){return{rtl:e}};function w(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"layout")(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",3),t.ALo(7,"translate"),t._UZ(8,"img",4),t.qZA()(),t.TgZ(9,"div",5)(10,"div",6)(11,"h1",7),t.YNc(12,O,2,0,"span",0),t._uU(13),t.YNc(14,M,2,0,"span",0),t.qZA(),t.TgZ(15,"div",8),t.YNc(16,k,3,3,"button",9),t.TgZ(17,"button",10),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.manageSubscription())}),t._uU(18),t.ALo(19,"translate"),t.qZA()()(),t.TgZ(20,"div",11),t._UZ(21,"img",12),t.qZA()(),t.TgZ(22,"div",13)(23,"div",14),t.YNc(24,A,12,7,"div",15),t.qZA()()()()}if(2&e){const n=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,9,"subscription_details")),t.xp6(2),t.Q6J("matTooltip",t.lcZ(7,11,"billing_history")),t.xp6(3),t.Q6J("ngClass",t.VKq(15,D,"rtl"==n.dir)),t.xp6(3),t.Q6J("ngIf","rtl"==n.dir),t.xp6(1),t.hij(" ",n.spaceName," "),t.xp6(1),t.Q6J("ngIf","ltr"==n.dir),t.xp6(2),t.Q6J("ngIf",1!==(null==n._package?null:n._package.paymentPackageId)&&n.renewable),t.xp6(2),t.Oqu(t.lcZ(19,13,"manage_subscription")),t.xp6(6),t.Q6J("ngForOf",n.details)}}let U=(()=>{class e{constructor(n,i,r,y,C){this.service=n,this.dialog=i,this.arabicDate=r,this.spaceConfigSer=y,this.translate=C,this.dir=document.dir,this.renewable=!1}ngOnInit(){this.service.details.subscribe(n=>{this.spaceName=n?.spaceName,this._package=n,this.details=[{name:"subscription_plan",value:n?.paymentPackageName,icon:"plan"},{name:"cost_per_user",value:n?.paymentPackagePricePerUser+"$",icon:"cost"},{name:"number_of_users",value:n?.totalNumberOfUser||"unlimited",icon:"people"},{name:"expiry_date",value:n?.endDate?this.arabicDate.transform(n?.endDate):"unlimited",icon:"expiry-date"},{name:"usage",value:n?.totalNumberOfUser?n?.totalNumberOfUser-n?.availableUsers+"/"+n?.totalNumberOfUser:"unlimited",icon:"usage"},{name:"total_cost",value:n?.totalPrice+" "+this.translate.instant("EGP"),icon:"cost"}],this.isExpiryDateNear(this._package?.endDate)}),this.service.getSubscriptionDetails().subscribe()}renew(){this.spaceConfigSer.updateSpacePackage({paymentPackageId:this._package.paymentPackageId,numberOfEmployees:this._package.totalNumberOfUser}).subscribe(i=>{this.afterUpdate(i)})}afterUpdate(n){n.success&&(this.dialog.closeAll(),this.service.getUnpaidOrders().subscribe(i=>{}))}isExpiryDateNear(n){const i=new Date,r=new Date;r.setDate(i.getDate()+5),new Date(n).getTime()<=new Date(r).getTime()&&(this.renewable=!0)}manageSubscription(){this.dialog.open(f.k,{panelClass:"manage-subscription-dialog",data:{_package:this._package}})}static{this.\u0275fac=function(i){return new(i||e)(t.Y36(p.F),t.Y36(g.uw),t.Y36(h.P),t.Y36(x.X),t.Y36(u.sK))}}static{this.\u0275cmp=t.Xpm({type:e,selectors:[["subscription-details"]],standalone:!0,features:[t._Bn([h.P]),t.jDz],decls:1,vars:1,consts:[[4,"ngIf"],["magicScroll","",1,"subscription-details","h-100","pb-3"],[1,"top-section","flex","aic","jcsb","py-2","px-4"],["routerLink","/subscription/history",1,"img","pointer",3,"matTooltip"],["alt","history","height","28","src","assets/images/icons/history.svg","width","28",1,"convert-image-color"],[1,"space-card","flex","aic","jcsb","gap-x-5","px-3",3,"ngClass"],[1,"flex-auto","actions"],[1,"white"],[1,"w-100","flex","aic","gap-x-2","mt-4"],["class","flex-50","color","primary","mat-raised-button","",3,"click",4,"ngIf"],["mat-raised-button","",1,"flex-50",3,"click"],[1,"img","mr-5"],["alt","","height","183","src","assets/images/icons/wallet.svg","width","181"],[1,"details","mt-5","px-3"],[1,"flex-grid","gap-y-5"],["class","col-lg-4",4,"ngFor","ngForOf"],["color","primary","mat-raised-button","",1,"flex-50",3,"click"],[1,"col-lg-4"],[1,"card","shadow","rounded","p-3","text-center","w-60","mx-auto","bg-gray"],[1,"card-body"],[1,"card-title","flex-center","gap-x-1"],[1,"img","rounded-50","bg-light-primary-2","flex-center"],["height","20","width","20",3,"alt","src",4,"ngIf"],[1,"primary"],[1,"card-text","mt-1"],["height","20","width","20",3,"alt","src"]],template:function(i,r){1&i&&t.YNc(0,w,25,17,"layout",0),2&i&&t.Q6J("ngIf",r.details)},dependencies:[o.ez,o.mk,o.sg,o.O5,_.h,u.aw,u.X$,v.AV,v.gM,l.rH,s.ot,s.lW,P.$],styles:[".space-card[_ngcontent-%COMP%]{background:linear-gradient(271.36deg,#7B55D3 0%,rgba(123,85,211,.96) 47.98%,rgba(123,85,211,.8) 71.63%,rgba(123,85,211,.62) 100%)}.space-card.rtl[_ngcontent-%COMP%]{background:linear-gradient(-271.36deg,#7B55D3 0%,rgba(123,85,211,.96) 47.98%,rgba(123,85,211,.8) 71.63%,rgba(123,85,211,.62) 100%)}.actions[_ngcontent-%COMP%]{margin-inline-end:14rem}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 0!important;border-radius:.8rem}.card-title[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:3rem;height:3rem}"]})}}return e})();var S=a(84943),F=a(52081),N=a(65668),J=a(45048),E=a(57105),L=a(17986);const H=function(e){return{active:e}};function I(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"p",10),t.NdJ("click",function(){const y=t.CHM(n).$implicit,C=t.oxw();return t.KtG(C.filter(y.value))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const n=c.$implicit,i=t.oxw();t.Q6J("ngClass",t.VKq(4,H,n.value==i.service.paymentStatus.value)),t.xp6(1),t.hij(" ",t.lcZ(2,2,n.title)," ")}}function Q(e,c){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"payment_paid")))}function B(e,c){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"payment_offline")))}function Y(e,c){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"payment_unpaid")))}const q=function(e,c,n){return{"chip-light-danger":e,"chip-light-primary":c,"pb-50":n}};function K(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"div",12),t.NdJ("click",function(){const y=t.CHM(n).$implicit,C=t.oxw(2);return t.KtG(C.orderDetails(y.id))}),t.TgZ(1,"div",13)(2,"p"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"arabicNumbers"),t.qZA(),t.TgZ(6,"p",14),t._uU(7),t.ALo(8,"arabicDate"),t.qZA()(),t.TgZ(9,"div",15)(10,"p"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"p",16),t.YNc(14,Q,3,3,"span",9),t.YNc(15,B,3,3,"span",9),t.YNc(16,Y,3,3,"span",9),t.qZA()()()}if(2&e){const n=c.$implicit,i=t.oxw(2);t.xp6(3),t.AsE("",t.lcZ(4,9,"order")," ",t.lcZ(5,11,n.id),""),t.xp6(4),t.Oqu(t.xi3(8,13,n.creationDate,"long")),t.xp6(4),t.AsE("",n.price," ",t.lcZ(12,16,"EGP"),""),t.xp6(2),t.Q6J("ngClass",t.kEZ(18,q,!n.paymentStatus,n.paymentStatus,"rtl"==i.dir)),t.xp6(1),t.Q6J("ngIf",1==n.paymentStatus),t.xp6(1),t.Q6J("ngIf",2==n.paymentStatus),t.xp6(1),t.Q6J("ngIf",0==n.paymentStatus)}}function z(e,c){if(1&e&&(t.ynx(0),t.YNc(1,K,17,22,"div",11),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.orders)}}function W(e,c){1&e&&t._UZ(0,"loading")}function $(e,c){1&e&&t._UZ(0,"not-found")}const j=function(e){return{"pt-3":e}},R=[{path:"",component:d,children:[{path:"",component:U},{path:"history",component:(()=>{class e{constructor(n,i){this.service=n,this.dialog=i,this.loading=!1,this.status=[{title:"all",value:null},{title:"paid",value:1},{title:"unpaid",value:0}],this.dir=document.dir}getHistory(){this.loading=!0,this.service.billingHistory().subscribe(n=>{this.orders=n,this.loading=!1})}filter(n){this.service.paymentStatus.next(n),this.getHistory()}ngOnInit(){this.getHistory()}orderDetails(n){this.dialog.open(J.T,{panelClass:"order-details-dialog",data:{order:n}})}static{this.\u0275fac=function(i){return new(i||e)(t.Y36(p.F),t.Y36(g.uw))}}static{this.\u0275cmp=t.Xpm({type:e,selectors:[["history"]],standalone:!0,features:[t.jDz],decls:16,vars:10,consts:[["top",""],[1,"top-section","py-2","px-3","flex","aic","gap-x-2","border-bottom"],["routerLink","/subscription",1,"img","pointer","right"],["src","assets/images/icons/Back.svg","alt","","height","24","width","24",1,"convert-image-color"],["sidebar",""],[1,"mt-4"],["class","sidebar-item flex aic px-3 mb-3 pointer",3,"ngClass","click",4,"ngFor","ngForOf"],["content",""],["magicScroll","calc(100% - 7rem)",1,"px-4","relative","h-100",3,"ngClass"],[4,"ngIf"],[1,"sidebar-item","flex","aic","px-3","mb-3","pointer",3,"ngClass","click"],["class","card flex aic jcsb shadow bg-gray py-1 px-3 mb-3 rounded pointer",3,"click",4,"ngFor","ngForOf"],[1,"card","flex","aic","jcsb","shadow","bg-gray","py-1","px-3","mb-3","rounded","pointer",3,"click"],[1,"start"],[1,"fs-14","muted"],[1,"end","flex","gap-x-2"],[1,"order-status","px-1","rounded-5",3,"ngClass"]],template:function(i,r){1&i&&(t.TgZ(0,"layout-with-sidebar"),t.ynx(1,0),t.TgZ(2,"div",1)(3,"div",2),t._UZ(4,"img",3),t.qZA(),t.TgZ(5,"h3"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.BQk(),t.ynx(8,4),t.TgZ(9,"div",5),t.YNc(10,I,3,6,"p",6),t.qZA(),t.BQk(),t.ynx(11,7),t.TgZ(12,"div",8),t.YNc(13,z,2,1,"ng-container",9),t.YNc(14,W,1,0,"loading",9),t.YNc(15,$,1,0,"not-found",9),t.qZA(),t.BQk(),t.qZA()),2&i&&(t.xp6(6),t.Oqu(t.lcZ(7,6,"billing_history")),t.xp6(4),t.Q6J("ngForOf",r.status),t.xp6(2),t.Q6J("ngClass",t.VKq(8,j,0!=(null==r.orders?null:r.orders.length))),t.xp6(1),t.Q6J("ngIf",!r.loading),t.xp6(1),t.Q6J("ngIf",r.loading),t.xp6(1),t.Q6J("ngIf",0==(null==r.orders?null:r.orders.length)&&!r.loading))},dependencies:[o.ez,o.mk,o.sg,o.O5,S.x,L._,l.rH,u.aw,u.X$,_.h,F.m,h.P,N.N,E.w],styles:['[_ngcontent-%COMP%]:root{--primary: #7b58ca;--light-primary: #7b58ca80;--dark-color: #707070;--gray: #FAF9FD;--success: #29CC99;--danger: #ea5455;--canceled: #C7C7CC;--warning: #F69E42;--info: #007AFF;--dark-white: #283046;--dark-gray: #161D31;--white-color: #b4b7bd;--dark-border: #404656;--border-color: #e7e7e7;--closed: rgba(234, 84, 85, .53)}.primary[_ngcontent-%COMP%]{color:#7b58ca!important}.bg-primary[_ngcontent-%COMP%]{background:#7b58ca!important}.bg-light-primary-10[_ngcontent-%COMP%]{background:rgba(123,88,202,.1)!important}.light-primary[_ngcontent-%COMP%]{color:#7b58ca80!important}.bg-light-primary[_ngcontent-%COMP%]{background:rgba(123,88,202,.5019607843)!important}.closed-color[_ngcontent-%COMP%]{color:#ea545587!important}.bg-closed-color[_ngcontent-%COMP%]{background:rgba(234,84,85,.53)!important}.bg-archived[_ngcontent-%COMP%]{background:#c5c5c5!important}.bg-light-success-1[_ngcontent-%COMP%]{color:#29cc99b5;background-color:#f7fffa}.bg-light-primary-1[_ngcontent-%COMP%]{color:#7b58ca;background:#fbf9ff}.bg-light-warning-2[_ngcontent-%COMP%]{color:#f69e42;background-color:#f69e4233!important}.bg-light-primary-2[_ngcontent-%COMP%]{color:#7b58ca;background-color:#7b58ca33!important}.bg-light-success-2[_ngcontent-%COMP%]{color:#29cc99;background-color:#29cc991a!important}.bg-light-canceled-2[_ngcontent-%COMP%]{color:#c7c7cc;background-color:#c7c7cc33!important}.bg-light-danger-1[_ngcontent-%COMP%]{color:#ea5455;background-color:#fff3f3}.border-primary[_ngcontent-%COMP%]{border:1px solid #7b58ca!important}.sidebar-item.active[_ngcontent-%COMP%], .sidebar-item[_ngcontent-%COMP%]:hover{color:#7b58ca;position:relative}.sidebar-item.active[_ngcontent-%COMP%]:before, .sidebar-item[_ngcontent-%COMP%]:hover:before{content:"";height:3.5rem;width:2px;background:#7b58ca;position:absolute;inset-inline:0}']})}}return e})()}]}];let G=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.oAB({type:e})}static{this.\u0275inj=t.cJS({imports:[l.Bz.forChild(R),l.Bz]})}}return e})(),V=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.oAB({type:e})}static{this.\u0275inj=t.cJS({imports:[o.ez,G,b.o]})}}return e})()}}]);