"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[2181],{69755:(me,c,s)=>{s.r(c),s.d(c,{ManagerCalendarComponent:()=>ce});var d=s(96814),M=s(55006),h=s(1428),T=s(824),v=s(89515),C=s(2495),p=s(92596),x=s(16111),f=s(95932),E=s(73023),P=s(51086),O=s(12201),m=s(75986),g=s(56223),y=s(95195),D=s(38034),A=s(23680),U=s(32296),Z=s(54807),J=s(6311),u=s(7314),K=s(6223),k=s(48474),I=s(55786),R=s(24234),L=s(30860),W=s(10480),B=s(86817),Q=s(58697),N=s(63243),S=s(52868),b=s(73847),G=s(22931),w=s(50802),V=s(27584),H=s(65668),e=s(65879),Y=s(34241),F=s(17700),j=s(98771),$=s(9174),z=s(84193),X=s(64190);const q=["calendar"];function ee(r,i){1&r&&e._UZ(0,"loading")}function te(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",19)(1,"div")(2,"div",20)(3,"select-user",21),e.NdJ("getSelectedUsers",function(a){e.CHM(t);const n=e.oxw();return n.service.taskAssignee.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()(),e.TgZ(4,"div",22)(5,"select-user",23),e.NdJ("getSelectedUsers",function(a){e.CHM(t);const n=e.oxw();return n.service.taskCreator.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()()(),e.TgZ(6,"div",24)(7,"div",22)(8,"task-type",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.taskType.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()(),e.TgZ(9,"div",22)(10,"task-status",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.taskStatus.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()()(),e.TgZ(11,"div",24)(12,"div",22)(13,"is-overdue",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.taskOverdue.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()(),e.TgZ(14,"div",22)(15,"projects",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.taskProject.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("multi",!0)("selectedUsers",t.service.taskAssignee.value),e.xp6(2),e.Q6J("multi",!0)("selectedUsers",t.service.taskCreator.value),e.xp6(3),e.Q6J("selectedValue",t.service.taskType.value),e.xp6(2),e.Q6J("selectedValue",t.service.taskStatus.value),e.xp6(3),e.Q6J("selectedValue",t.service.taskOverdue.value),e.xp6(2),e.Q6J("selectedValue",t.service.taskProject.value)}}function ae(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",26)(1,"div")(2,"div",20)(3,"select-user",21),e.NdJ("getSelectedUsers",function(a){e.CHM(t);const n=e.oxw();return n.service.taskAssignee.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()(),e.TgZ(4,"div",22)(5,"select-user",23),e.NdJ("getSelectedUsers",function(a){e.CHM(t);const n=e.oxw();return n.service.taskCreator.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()()(),e.TgZ(6,"div",24)(7,"div",22)(8,"task-type",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.taskType.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()(),e.TgZ(9,"div",22)(10,"task-status",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.taskStatus.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()()(),e.TgZ(11,"div",24)(12,"div",22)(13,"priority-filter",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.taskPriority.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()(),e.TgZ(14,"div",22)(15,"is-rated",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.taskRate.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()()(),e.TgZ(16,"div",24)(17,"div",22)(18,"is-overdue",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.taskOverdue.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()(),e.TgZ(19,"div",22)(20,"projects",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.taskProject.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("multi",!1)("selectedUsers",t.service.taskAssignee.value),e.xp6(2),e.Q6J("multi",!1)("selectedUsers",t.service.taskCreator.value),e.xp6(3),e.Q6J("selectedValue",t.service.taskType.value),e.xp6(2),e.Q6J("selectedValue",t.service.taskStatus.value),e.xp6(3),e.Q6J("selectedValue",t.service.taskPriority.value),e.xp6(2),e.Q6J("selectedValue",t.service.taskRate.value),e.xp6(3),e.Q6J("selectedValue",t.service.taskOverdue.value),e.xp6(2),e.Q6J("selectedValue",t.service.taskProject.value)}}function ne(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",27)(1,"div")(2,"div",20)(3,"select-user",21),e.NdJ("getSelectedUsers",function(a){e.CHM(t);const n=e.oxw();return n.service.voteAssignees.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()(),e.TgZ(4,"div",22)(5,"select-user",23),e.NdJ("getSelectedUsers",function(a){e.CHM(t);const n=e.oxw();return n.service.voteCreators.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()()(),e.TgZ(6,"div",24)(7,"div",22)(8,"vote-status",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.voteStates.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("multi",!1)("selectedUsers",t.service.voteAssignees.value),e.xp6(2),e.Q6J("multi",!1)("selectedUsers",t.service.voteCreators.value),e.xp6(3),e.Q6J("selectedValue",t.service.voteStates.value)}}function se(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",28)(1,"div")(2,"div",20)(3,"select-user",29),e.NdJ("getSelectedUsers",function(a){e.CHM(t);const n=e.oxw();return n.service.leaveUser.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()(),e.TgZ(4,"div",22)(5,"select-user",30),e.NdJ("getSelectedUsers",function(a){e.CHM(t);const n=e.oxw();return n.service.leaveManager.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()(),e.TgZ(6,"div",31)(7,"leave-status",25),e.NdJ("valueChanged",function(a){e.CHM(t);const n=e.oxw();return n.service.leaveStatus.next(a),e.KtG(n.getManagerCalendar())}),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("multi",!1)("selectedUsers",t.service.leaveUser.value),e.xp6(2),e.Q6J("multi",!1)("selectedUsers",t.service.leaveManager.value),e.xp6(2),e.Q6J("selectedValue",t.service.leaveStatus.value)}}function le(r,i){1&r&&e._UZ(0,"img",40)}function re(r,i){1&r&&e._UZ(0,"img",41)}function oe(r,i){1&r&&e._UZ(0,"img",42)}function ie(r,i){1&r&&e._UZ(0,"img",43)}function _e(r,i){1&r&&e._UZ(0,"img",44)}const de=function(r,i,t,l,a){return{"bg-primary":r,"bg-meeting":i,"bg-vote":t,"bg-leave":l,"bg-holiday":a}};function ge(r,i){if(1&r&&(e.TgZ(0,"div",32)(1,"div",5)(2,"div",33),e.YNc(3,le,1,0,"img",34),e.YNc(4,re,1,0,"img",35),e.YNc(5,oe,1,0,"img",36),e.YNc(6,ie,1,0,"img",37),e.YNc(7,_e,1,0,"img",38),e.qZA(),e.TgZ(8,"p",39),e._uU(9),e.qZA()()()),2&r){const t=i.$implicit;e.Q6J("ngClass",e.qbA(8,de,1==(null==t.event?null:t.event.extendedProps.calenderType),5==(null==t.event?null:t.event.extendedProps.calenderType),2==(null==t.event?null:t.event.extendedProps.calenderType),3==(null==t.event?null:t.event.extendedProps.calenderType),4==(null==t.event?null:t.event.extendedProps.calenderType)))("matTooltip",t.event.title),e.xp6(3),e.Q6J("ngIf",1==(null==t.event?null:t.event.extendedProps.calenderType)),e.xp6(1),e.Q6J("ngIf",2==(null==t.event?null:t.event.extendedProps.calenderType)),e.xp6(1),e.Q6J("ngIf",3==(null==t.event?null:t.event.extendedProps.calenderType)),e.xp6(1),e.Q6J("ngIf",4==(null==t.event?null:t.event.extendedProps.calenderType)),e.xp6(1),e.Q6J("ngIf",5==(null==t.event?null:t.event.extendedProps.calenderType)),e.xp6(2),e.Oqu(t.event.title)}}const _=function(r){return{"bx-rotate-180":r}};let ce=(()=>{class r{constructor(t,l,a,n,o,ve,Ce){this.changeDetector=t,this.service=l,this.dialog=a,this.detailsSer=n,this.voteSer=o,this.leaveSer=ve,this.router=Ce,this.dir=document.dir,this.inbox=[],this.tasksToggle=!0,this.meetingsToggle=!1,this.votesToggle=!1,this.holidaysToggle=!1,this.leavesToggle=!1,this.teamMembers$=this.service.getTeamMembers(),this.selectedUser=null,this.calendarOptions={plugins:[x.ZP,f.Z,E.Z,P.Z],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},..."rtl"==this.dir&&{locale:O.Z},initialView:"dayGridMonth",weekends:!0,selectMirror:!0,dayMaxEvents:!0,eventClick:this.handleEventClick.bind(this),datesSet:pe=>this.handleMonthChange(pe)},this.currentEvents=[],this.filterType=1}changeFilterType(t){this.filterType=this.filterType==t?0:t}getManagerCalendar(){this.loading=!0,this.service.getManagerCalendar().subscribe(t=>{this.events=t,this.loading=!1})}handleMonthChange(t){const l=t.view.currentStart.getMonth(),a=t.view.currentStart.getFullYear();this.service.startDate.next(new Date(a,l,1)),this.service.lastDayOfMonth.next(new Date(a,l+1,0)),this.events=[],this.getManagerCalendar()}userChanged(){this.service.id.next(this.selectedUser||localStorage.getItem("id")),this.getManagerCalendar()}handleEventClick(t){(1==t.event.extendedProps.calenderType||5==t.event.extendedProps.calenderType)&&this.getTask(t.event.extendedProps.myCalendarTaskId,t.event.extendedProps.calenderType),2==t.event.extendedProps.calenderType&&this.getVote(t.event.extendedProps.myCalendarTaskId),3==t.event.extendedProps.calenderType&&this.getLeave(t.event.extendedProps.myCalendarTaskId)}handleEvents(t){this.currentEvents=t,this.changeDetector.detectChanges()}getTask(t,l){this.detailsSer.id.next(t),this.dialog.open(I.N,{panelClass:"task-details-dialog",data:{type:l}}).afterClosed().subscribe(n=>{n?.value?this.router.navigate([`/tasks/inbox/details/${t}`]):this.detailsSer.details.next({})})}getVote(t){this.voteSer.id.next(t),this.dialog.open(R.d,{panelClass:"task-details-dialog"}).afterClosed().subscribe(a=>{a?.value?this.router.navigate([`/votes/inbox/${t}`]):this.detailsSer.details.next({})})}getLeave(t){this.leaveSer.id.next(t),this.dialog.open(L.b,{panelClass:"task-details-dialog"}).afterClosed().subscribe(a=>{a?.value?this.router.navigate([`/hr/leave-dashboard/details/${t}`]):this.detailsSer.details.next({})})}createTask(){this.dialog.open(u.T,{disableClose:!0,panelClass:"create-task-dialog"})}createVote(){this.dialog.open(K._,{panelClass:"create-task-dialog"})}createMeeting(){this.dialog.open(u.T,{disableClose:!0,panelClass:"create-task-dialog",data:{isMeeting:!0}})}createLeave(){this.dialog.open(k.e,{panelClass:"create-task-dialog"})}static{this.\u0275fac=function(l){return new(l||r)(e.Y36(e.sBO),e.Y36(Y.o),e.Y36(F.uw),e.Y36(j.i),e.Y36($.z),e.Y36(z.P),e.Y36(X.F0))}}static{this.\u0275cmp=e.Xpm({type:r,selectors:[["calendar"]],viewQuery:function(l,a){if(1&l&&e.Gf(q,7),2&l){let n;e.iGM(n=e.CRH())&&(a.calendar=n.first)}},standalone:!0,features:[e.jDz],decls:43,vars:40,consts:[[4,"ngIf"],[1,"p-2"],[1,"my-calendar"],[1,"flex","h-100","gap-x-3"],["magicScroll","",1,"sidebar","border","p-2"],[1,"flex","aic"],["color","primary",3,"ngModel","ngModelChange"],[1,"bx","bx-chevron-down","fs-30","pointer",3,"ngClass","click"],["class","task-filters bg-gray px-1 py-1",4,"ngIf"],["color","primary",1,"meeting",3,"ngModel","ngModelChange"],["class","meeting-filters bg-gray px-1 py-1",4,"ngIf"],["color","primary",1,"vote",3,"ngModel","ngModelChange"],["class","vote-filters bg-gray px-1 py-1",4,"ngIf"],["color","primary",1,"leave",3,"ngModel","ngModelChange"],["class","leaves-filters bg-gray px-1 py-1",4,"ngIf"],["color","primary",1,"holiday",3,"ngModel","ngModelChange"],[3,"options","events","deepChangeDetection"],["calendar",""],["eventContent",""],[1,"task-filters","bg-gray","px-1","py-1"],[1,"w-100","mb-1"],["text","assignee","classes","w-100",3,"multi","selectedUsers","getSelectedUsers"],[1,"w-100"],["text","creator","classes","w-100",3,"multi","selectedUsers","getSelectedUsers"],[1,"mt-1"],["classes","w-100",3,"selectedValue","valueChanged"],[1,"meeting-filters","bg-gray","px-1","py-1"],[1,"vote-filters","bg-gray","px-1","py-1"],[1,"leaves-filters","bg-gray","px-1","py-1"],["text","user","classes","w-100",3,"multi","selectedUsers","getSelectedUsers"],["text","manager","classes","w-100",3,"multi","selectedUsers","getSelectedUsers"],[1,"w-100","mt-1"],[1,"calendar-chip","rounded","px-75","flex","aic","white","pointer",3,"ngClass","matTooltip"],[1,"img"],["src","assets/images/main-sidebar/tasks.svg","width","17","alt","icon","class","convert-image-color",4,"ngIf"],["src","assets/images/main-sidebar/voting.svg","width","17","alt","icon","class","convert-image-color",4,"ngIf"],["src","assets/images/icons/leave.svg","width","17","alt","icon","class","convert-image-color",4,"ngIf"],["src","assets/images/icons/holiday.svg","width","17","alt","icon","class","convert-image-color",4,"ngIf"],["src","assets/images/main-sidebar/meeting.svg","width","17","alt","icon","class","convert-image-color",4,"ngIf"],[1,"ml-50"],["src","assets/images/main-sidebar/tasks.svg","width","17","alt","icon",1,"convert-image-color"],["src","assets/images/main-sidebar/voting.svg","width","17","alt","icon",1,"convert-image-color"],["src","assets/images/icons/leave.svg","width","17","alt","icon",1,"convert-image-color"],["src","assets/images/icons/holiday.svg","width","17","alt","icon",1,"convert-image-color"],["src","assets/images/main-sidebar/meeting.svg","width","17","alt","icon",1,"convert-image-color"]],template:function(l,a){1&l&&(e.YNc(0,ee,1,0,"loading",0),e._UZ(1,"user-navbar"),e.TgZ(2,"div",1)(3,"layout")(4,"div",2)(5,"div",3)(6,"div",4)(7,"div")(8,"div",5)(9,"mat-checkbox",6),e.NdJ("ngModelChange",function(o){return a.tasksToggle=o})("ngModelChange",function(o){return a.service.tasksToggle.next(o),a.getManagerCalendar()}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"i",7),e.NdJ("click",function(){return a.changeFilterType(1)}),e.qZA()(),e.YNc(13,te,16,8,"div",8),e.qZA(),e.TgZ(14,"div")(15,"div",5)(16,"mat-checkbox",9),e.NdJ("ngModelChange",function(o){return a.meetingsToggle=o})("ngModelChange",function(o){return a.service.meetingsToggle.next(o),a.getManagerCalendar()}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"i",7),e.NdJ("click",function(){return a.changeFilterType(2)}),e.qZA()(),e.YNc(20,ae,21,10,"div",10),e.qZA(),e.TgZ(21,"div")(22,"div",5)(23,"mat-checkbox",11),e.NdJ("ngModelChange",function(o){return a.votesToggle=o})("ngModelChange",function(o){return a.service.votesToggle.next(o),a.getManagerCalendar()}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"i",7),e.NdJ("click",function(){return a.changeFilterType(3)}),e.qZA()(),e.YNc(27,ne,9,5,"div",12),e.qZA(),e.TgZ(28,"div")(29,"div",5)(30,"mat-checkbox",13),e.NdJ("ngModelChange",function(o){return a.leavesToggle=o})("ngModelChange",function(o){return a.service.leavesToggle.next(o),a.getManagerCalendar()}),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"i",7),e.NdJ("click",function(){return a.changeFilterType(4)}),e.qZA()(),e.YNc(34,se,8,5,"div",14),e.qZA(),e.TgZ(35,"div")(36,"mat-checkbox",15),e.NdJ("ngModelChange",function(o){return a.holidaysToggle=o})("ngModelChange",function(o){return a.service.holidaysToggle.next(o),a.getManagerCalendar()}),e._uU(37),e.ALo(38,"translate"),e.qZA()()(),e.TgZ(39,"full-calendar",16,17),e.YNc(41,ge,10,14,"ng-template",null,18,e.W1O),e.qZA()()()()()),2&l&&(e.Q6J("ngIf",a.loading),e.xp6(9),e.Q6J("ngModel",a.tasksToggle),e.xp6(1),e.Oqu(e.lcZ(11,22,"tasks")),e.xp6(2),e.Q6J("ngClass",e.VKq(32,_,1==a.filterType)),e.xp6(1),e.Q6J("ngIf",1==a.filterType),e.xp6(3),e.Q6J("ngModel",a.meetingsToggle),e.xp6(1),e.hij("",e.lcZ(18,24,"meetings")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(34,_,2==a.filterType)),e.xp6(1),e.Q6J("ngIf",2==a.filterType),e.xp6(3),e.Q6J("ngModel",a.votesToggle),e.xp6(1),e.Oqu(e.lcZ(25,26,"votes")),e.xp6(2),e.Q6J("ngClass",e.VKq(36,_,3==a.filterType)),e.xp6(1),e.Q6J("ngIf",3==a.filterType),e.xp6(3),e.Q6J("ngModel",a.leavesToggle),e.xp6(1),e.Oqu(e.lcZ(32,28,"leaves")),e.xp6(2),e.Q6J("ngClass",e.VKq(38,_,4==a.filterType)),e.xp6(1),e.Q6J("ngIf",4==a.filterType),e.xp6(2),e.Q6J("ngModel",a.holidaysToggle),e.xp6(1),e.hij("",e.lcZ(38,30,"holiday_of_egypt")," "),e.xp6(2),e.Q6J("options",a.calendarOptions)("events",a.events)("deepChangeDetection",!0))},dependencies:[d.ez,d.mk,d.O5,M.o,h.$,T.h,v.aw,v.X$,C.z,C.w,p.AV,p.gM,m.p9,m.oG,g.u5,g.JJ,g.On,y.QW,D.FA,A.XK,U.ot,Z.A0,J.Tx,W.V,B.U,Q.h,G.X,N.N,S.V,b.v,w.r,V.x,H.N],styles:[".my-calendar[_ngcontent-%COMP%]{height:100%!important;padding:3rem}.my-calendar[_ngcontent-%COMP%]   full-calendar[_ngcontent-%COMP%]{height:100%;width:100%}.sidebar[_ngcontent-%COMP%]{width:420px}.sidebar[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{gap:0 .4rem!important}.sidebar[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .date-icon[_ngcontent-%COMP%]{transform:translateY(-.2rem)}.select[_ngcontent-%COMP%]{max-width:310px}.sidebar-height[_ngcontent-%COMP%]{height:calc(100% - 5.5rem)}.wrap[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;white-space:pre-wrap}.bg-meeting[_ngcontent-%COMP%]{background-color:#f46850}.bg-vote[_ngcontent-%COMP%]{background-color:#29cc99}.bg-holiday[_ngcontent-%COMP%]{background-color:#557fde}.bg-leave[_ngcontent-%COMP%]{background-color:#8dc8c8}.calendar-chip[_ngcontent-%COMP%]   .convert-image-color[_ngcontent-%COMP%]{filter:brightness(0) invert(.9)!important}.plus-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}"]})}}return r})()}}]);