"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[4015],{84015:(X,g,s)=>{s.r(g),s.d(g,{ListComponent:()=>V});var h=s(56223),l=s(96814),b=s(9619),Z=s(1428),x=s(65668),p=s(76472),T=s(57105),v=s(39326),P=s(64190),A=s(68577),m=s(89515),L=s(45843),C=s(41614),_=s(6311),u=s(92596),j=s(99481),M=s(83318),O=s(42666),f=s(2667),E=s(52081),U=s(24971),t=s(65879),I=s(84526),D=s(17700),y=s(99758);function k(n,r){1&n&&(t.TgZ(0,"div",23),t._UZ(1,"loading"),t.qZA())}function J(n,r){if(1&n&&(t.TgZ(0,"span",36),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(null==e?null:e.title)}}function q(n,r){if(1&n&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("matTooltip",e.title),t.xp6(1),t.hij("",t.Dn7(2,2,null==e?null:e.title,0,50)," ...")}}function N(n,r){if(1&n&&t._UZ(0,"time-left",54),2&n){const e=t.oxw().$implicit;t.Q6J("bullet",e.bullet)("label",e.timeLeftLabel)("timeLeft",e.timeLeft)}}function B(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"-"),t.qZA())}function Q(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(i){t.CHM(e);const c=t.oxw().$implicit,a=t.oxw(2);return i.stopImmediatePropagation(),a.projectId=c.id,t.KtG(a.selectedProject=c)}),t._UZ(1,"i",56),t.qZA()}if(2&n){t.oxw(3);const e=t.MAs(15);t.Q6J("matMenuTriggerFor",e)}}function K(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",30)(1,"td",31)(2,"div",32),t._UZ(3,"priority",33),t.YNc(4,J,2,1,"span",34),t.YNc(5,q,3,6,"span",35),t.qZA()(),t.TgZ(6,"td",36)(7,"div",37)(8,"div",38),t.NdJ("click",function(i){return i.stopImmediatePropagation()}),t._UZ(9,"user-image",39),t.qZA(),t.TgZ(10,"div",40)(11,"p",41),t._uU(12),t.qZA(),t.TgZ(13,"p",42),t._uU(14),t.qZA()()()(),t.TgZ(15,"td",41),t._uU(16),t.ALo(17,"arabicDate"),t.qZA(),t.TgZ(18,"td",41),t._uU(19),t.ALo(20,"arabicDate"),t.qZA(),t.TgZ(21,"td")(22,"div",43),t.YNc(23,N,1,3,"time-left",44),t.YNc(24,B,2,0,"span",22),t.qZA()(),t.TgZ(25,"td")(26,"project-status",45),t.NdJ("click",function(i){const a=t.CHM(e).$implicit,d=t.oxw(2);return i.stopImmediatePropagation(),t.KtG(d.selectedProject=a)}),t.qZA()(),t.TgZ(27,"td")(28,"div",46),t.NdJ("click",function(i){return i.stopImmediatePropagation()}),t.TgZ(29,"div",47),t.NdJ("click",function(i){const a=t.CHM(e).$implicit,d=t.oxw(2);return i.stopImmediatePropagation(),t.KtG(d.getMembers(a.id,a.isCreator))}),t.ALo(30,"translate"),t.TgZ(31,"div",48),t._UZ(32,"img",49),t.qZA()(),t.TgZ(33,"div",50),t.ALo(34,"translate"),t.TgZ(35,"div",48),t._UZ(36,"img",51),t.qZA()(),t.YNc(37,Q,2,1,"button",52),t.qZA()()()}if(2&n){const e=r.$implicit;t.oxw(2);const o=t.MAs(23);t.MGl("routerLink","/projects/details/",e.id,""),t.xp6(3),t.Q6J("priority",null==e?null:e.priority),t.xp6(1),t.Q6J("ngIf",(null==e||null==e.title?null:e.title.length)<=50),t.xp6(1),t.Q6J("ngIf",(null==e||null==e.title?null:e.title.length)>50),t.xp6(4),t.Q6J("id",e.projectCreatorId)("img",e.creatorImageUrl),t.xp6(3),t.Oqu(e.creatorName),t.xp6(2),t.Oqu(e.creatorJobTitle),t.xp6(2),t.hij(" ",t.lcZ(17,18,e.startDate)," "),t.xp6(3),t.hij(" ",t.lcZ(20,20,e.endDate)," "),t.xp6(4),t.Q6J("ngIf",e.timeLeft),t.xp6(1),t.Q6J("ngIf",!e.timeLeft),t.xp6(2),t.Q6J("matMenuTriggerFor",e.isCreator?o:null)("state",e.projectState),t.xp6(3),t.Q6J("matTooltip",t.lcZ(30,22,"members")),t.xp6(4),t.MGl("routerLink","/projects/tasks/",e.id,""),t.Q6J("matTooltip",t.lcZ(34,24,"tasks")),t.xp6(4),t.Q6J("ngIf",e.isCreator)}}const R=function(n,r,e){return{itemsPerPage:n,currentPage:r,totalItems:e}};function W(n,r){if(1&n&&(t.TgZ(0,"div",24)(1,"table",25)(2,"thead")(3,"tr",26)(4,"th",27),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",27),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",27),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",27),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",27),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th",27),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"th",27),t.qZA()(),t._UZ(23,"tbody",28),t.TgZ(24,"tbody"),t.YNc(25,K,38,26,"tr",29),t.ALo(26,"paginate"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,8,"project")),t.xp6(3),t.Oqu(t.lcZ(9,10,"creator")),t.xp6(3),t.Oqu(t.lcZ(12,12,"start_date")),t.xp6(3),t.Oqu(t.lcZ(15,14,"end_date")),t.xp6(3),t.Oqu(t.lcZ(18,16,"remaining_time")),t.xp6(3),t.Oqu(t.lcZ(21,18,"status")),t.xp6(5),t.Q6J("ngForOf",t.xi3(26,20,e.projects,t.kEZ(23,R,e.meta.pageSize,e.meta.currentPage,e.meta.totalItems)))("ngForTrackBy",e.trackBy)}}function Y(n,r){1&n&&(t.TgZ(0,"div",57),t._UZ(1,"not-found"),t.qZA())}function F(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",58)(1,"div",59)(2,"p",60),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"p",61),t._uU(6),t.qZA(),t.TgZ(7,"p",62),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"div",63)(11,"pagination-controls",64),t.NdJ("pageChange",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.changePage(i))}),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"p",65),t._uU(15),t.ALo(16,"translate"),t.TgZ(17,"span",66),t._uU(18),t.ALo(19,"arabicNumbers"),t.ALo(20,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,10,"pagination_per_page")," "),t.xp6(3),t.Oqu(e.meta.pageSize),t.xp6(2),t.Oqu(t.lcZ(9,12,"record")),t.xp6(3),t.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",t.lcZ(12,14,"previous"))("nextLabel",t.lcZ(13,16,"next")),t.xp6(4),t.hij("",t.lcZ(16,18,"pagination_total_records")," "),t.xp6(3),t.AsE("",t.lcZ(19,20,e.meta.totalItems)," ",t.lcZ(20,22,"record"),"")}}function S(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"i",67),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.reassignMembers())}),t.ALo(1,"translate"),t.qZA()}2&n&&t.Q6J("matTooltip",t.lcZ(1,1,"reassign_members"))}function w(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1," / "),t.qZA())}function z(n,r){if(1&n&&(t.TgZ(0,"div",69)(1,"div",70),t._UZ(2,"user-image",39),t.TgZ(3,"div",71)(4,"p",72),t._uU(5),t.qZA(),t.TgZ(6,"p",73)(7,"span"),t._uU(8),t.qZA(),t.YNc(9,w,2,0,"span",22),t.TgZ(10,"span",61),t._uU(11),t.qZA()()()()()),2&n){const e=r.$implicit;t.xp6(2),t.Q6J("id",e.id)("img",e.imageUrl),t.xp6(3),t.Oqu(e.name),t.xp6(3),t.Oqu(e.jobTitle),t.xp6(1),t.Q6J("ngIf",e.jobTitle&&e.departmentName),t.xp6(2),t.Oqu(e.departmentName)}}function $(n,r){if(1&n&&(t.ynx(0),t.YNc(1,z,12,6,"div",68),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.members)}}function G(n,r){1&n&&(t.ynx(0),t._UZ(1,"not-found"),t.BQk())}const H=function(){return["./employee"]};let V=(()=>{class n{constructor(e,o,i){this.service=e,this.dialog=o,this.alert=i,this.projects=[],this.loading=!0,this.open=!1,this.members=[],this.isCreator=!1,this.limit=15}addProject(){this.dialog.open(f.z,{panelClass:"create-task-dialog"}).afterClosed().subscribe(o=>{!0===o&&(this.getProjects(),this.searchValue=null)})}search(e){this.searchValue=e,this.getProjects()}changeLimit(){this.meta.pageSize=this.limit,setTimeout(()=>{this.service.projects.subscribe(e=>{this.projects=e,this.projects.length>0&&(this.loading=!1)}),this.getProjects()},500)}ngOnInit(){this.service.projectMembers.subscribe(e=>{this.members=e}),this.service.meta.subscribe(e=>this.meta=e),this.service.projects.subscribe(e=>{this.projects=e,this.projects.length>0&&(this.loading=!1)}),0==this.projects.length&&this.getProjects()}getProjects(){this.loading=!0,this.service.getProjects(this.searchValue).subscribe(()=>this.loading=!1),console.log(this.meta)}getMembers(e,o){this.projectId=e,this.isCreator=o,this.open=!1,this.service.getProjectMembers(e).subscribe(i=>{this.open=!0})}reassignMembers(){this.dialog.open(O.$,{panelClass:"select-users-dialog",data:{selectedUsers:this.members,multi:!0}}).afterClosed().subscribe(o=>{if(o?.changed&&o?.users.length>0){const i={projectId:this.projectId,assigneeIds:o.users.map(c=>c.id)};this.service.reassign(i).subscribe(()=>{this.alert.showAlert("members_reassigned"),this.service.getProjectMembers(this.projectId).subscribe()})}})}deleteProject(){this.dialog.open(M.v,{panelClass:"small-dialog",data:{id:this.projectId,btn_name:"confirm",classes:"bg-primary white",message:"delete_project"}}).afterClosed().subscribe(o=>{o&&this.service.deleteProject(this.projectId).subscribe(i=>{i.success&&(this.alert.showAlert("project_deleted"),this.getProjects())})})}editProject(){this.dialog.open(f.z,{panelClass:"create-task-dialog",data:{edit:!0,project:this.selectedProject}})}changeStatue(e){this.service.editProject({id:this.selectedProject.id,title:this.selectedProject.title,description:this.selectedProject.description,definitionOfDone:this.selectedProject.definitionOfDone,endDate:this.selectedProject.endDate,priority:this.selectedProject.priority,projectState:e}).subscribe(()=>{this.alert.showAlert("project_status_changed"),this.getProjects()})}changePage(e){this.service.currentPage.next(e),this.getProjects()}trackBy(e,o){return o.id}static{this.\u0275fac=function(o){return new(o||n)(t.Y36(I.Y),t.Y36(D.uw),t.Y36(y.c))}}static{this.\u0275cmp=t.Xpm({type:n,selectors:[["list"]],standalone:!0,features:[t.jDz],decls:47,vars:35,consts:[[1,"pt-1"],[1,"filters","flex-grid","mb-2","aie","jcsb","w-100","mx-0"],[1,"col-lg-3"],[3,"newSearch","valueChanged"],[1,"col-lg-3","text-right"],[1,"btn","rounded","bg-primary","white","py-75","px-1","fs-14",2,"display","inline-block",3,"routerLink","click"],[1,""],["class","aic flex jcc py-5 h-50v",4,"ngIf"],["class","table-container",4,"ngIf"],["class","py-5 text-center",4,"ngIf"],["class","pagination-content flex-grid aic jcsb py-1 bg-white border-top border-bottom px-4",4,"ngIf"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",3,"click"],["status","matMenu"],[3,"open"],["header",""],[1,"flex","aic","jcsb","w-100"],[1,"card-title"],["class","bx bxs-edit fs-22 pointer primary",3,"matTooltip","click",4,"ngIf"],["content",""],[1,"content","h-100","p-2"],[4,"ngIf"],[1,"aic","flex","jcc","py-5","h-50v"],[1,"table-container"],[1,"w-100","rounded"],[1,"border-bottom","fs-12","simibold"],[1,"text-left","py-1"],[1,"table-body"],["class","border-bottom pointer",3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","pointer",3,"routerLink"],[1,"pl-4"],[1,"flex","aic","bold"],[1,"mr-1",3,"priority"],["class","text-left",4,"ngIf"],["class","text-left",3,"matTooltip",4,"ngIf"],[1,"text-left"],[1,"flex","aic"],[1,"start",3,"click"],[3,"id","img"],[1,"info","ml-1","w-18r"],[1,"fs-15"],[1,"mt-25","muted","fs-13"],[1,"flex-center"],[3,"bullet","label","timeLeft",4,"ngIf"],[3,"matMenuTriggerFor","state","click"],[1,"flex","aic","gap-x-2",3,"click"],[1,"members","action","flex-center","rounded-50","bg-gray","pointer",3,"matTooltip","click"],[1,"img"],["alt","","src","assets/images/icons/users.svg","width","21",1,"convert-image-color"],[1,"tasks","action","flex-center","rounded-50","bg-gray","pointer",3,"matTooltip","routerLink"],["alt","","src","assets/images/icons/sub-tasks.svg","width","21",1,"convert-image-color"],["class","clickable-btn dir",3,"matMenuTriggerFor","click",4,"ngIf"],[1,"text-left",3,"matTooltip"],[3,"bullet","label","timeLeft"],[1,"clickable-btn","dir",3,"matMenuTriggerFor","click"],[1,"bx","bx-dots-vertical-rounded","fs-25"],[1,"py-5","text-center"],[1,"pagination-content","flex-grid","aic","jcsb","py-1","bg-white","border-top","border-bottom","px-4"],[1,"flex","aic","col-lg-3"],[1,"fs-12","simibold"],[1,"bold"],[1,"ml-50","primary","fs-12"],[1,"col-lg-3","flex","aic","jcc"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"],[1,"text-right","pr-3","fs-12","simibold","col-lg-3"],[1,"primary"],[1,"bx","bxs-edit","fs-22","pointer","primary",3,"matTooltip","click"],["class","member-card rounded bg-gray p-1",4,"ngFor","ngForOf"],[1,"member-card","rounded","bg-gray","p-1"],[1,"start","flex","aic"],[1,"user-info","ml-1"],[1,"mb-25","fs-15"],[1,"muted","fs-14"]],template:function(o,i){1&o&&(t.TgZ(0,"layout")(1,"div",0)(2,"div",1)(3,"div",2)(4,"search",3),t.NdJ("valueChanged",function(a){return i.search(a)}),t.qZA()(),t.TgZ(5,"div",4)(6,"a",5),t.NdJ("click",function(){return i.addProject()}),t._uU(7),t.ALo(8,"translate"),t.qZA()()(),t.TgZ(9,"div",6),t.YNc(10,k,2,0,"div",7),t.YNc(11,W,27,27,"div",8),t.YNc(12,Y,2,0,"div",9),t.qZA(),t.YNc(13,F,21,24,"div",10),t.qZA()(),t.TgZ(14,"mat-menu",11,12)(16,"button",13),t.NdJ("click",function(){return i.editProject()}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"button",13),t.NdJ("click",function(){return i.deleteProject()}),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"mat-menu",null,14)(24,"button",13),t.NdJ("click",function(){return i.changeStatue(2)}),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"button",13),t.NdJ("click",function(){return i.changeStatue(1)}),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"button",13),t.NdJ("click",function(){return i.changeStatue(3)}),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"button",13),t.NdJ("click",function(){return i.changeStatue(4)}),t._uU(34),t.ALo(35,"translate"),t.qZA()(),t.TgZ(36,"info-sidebar",15),t.ynx(37,16),t.TgZ(38,"div",17)(39,"h2",18),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.YNc(42,S,2,3,"i",19),t.qZA(),t.BQk(),t.ynx(43,20),t.TgZ(44,"div",21),t.YNc(45,$,2,1,"ng-container",22),t.YNc(46,G,2,0,"ng-container",22),t.qZA(),t.BQk(),t.qZA()),2&o&&(t.xp6(4),t.Q6J("newSearch",!0),t.xp6(2),t.Q6J("routerLink",t.DdM(34,H)),t.xp6(1),t.hij(" ",t.lcZ(8,18,"create_project")," "),t.xp6(3),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",i.projects.length>0&&!i.loading),t.xp6(1),t.Q6J("ngIf",0==i.projects.length&&!i.loading),t.xp6(1),t.Q6J("ngIf",i.projects&&i.projects.length>0&&!i.loading),t.xp6(4),t.hij(" ",t.lcZ(18,20,"edit")," "),t.xp6(3),t.hij(" ",t.lcZ(21,22,"delete")," "),t.xp6(5),t.hij(" ",t.lcZ(26,24,"hold")," "),t.xp6(3),t.hij(" ",t.lcZ(29,26,"project_open")," "),t.xp6(3),t.hij(" ",t.lcZ(32,28,"project_completed")," "),t.xp6(3),t.hij(" ",t.lcZ(35,30,"project_closed")," "),t.xp6(2),t.Q6J("open",i.open),t.xp6(4),t.Oqu(t.lcZ(41,32,"members")),t.xp6(2),t.Q6J("ngIf",i.isCreator),t.xp6(3),t.Q6J("ngIf",i.members&&i.members.length>0),t.xp6(1),t.Q6J("ngIf",i.members&&0==i.members.length))},dependencies:[h.u5,l.ez,l.sg,l.O5,l.OU,b.P,Z.$,x.N,p.JX,p._s,p.LS,T.w,v.t,P.rH,A.p,m.aw,m.X$,L.l,C.K,_.Tx,_.VK,_.OP,_.p6,u.AV,u.gM,j.M,E.m,U.g],styles:["[_nghost-%COMP%]     .search, [_nghost-%COMP%]     .ng-select{width:100%}[_nghost-%COMP%]     label{font-size:11px}.table-container[_ngcontent-%COMP%]{overflow:hidden}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-spacing:0}th[_ngcontent-%COMP%]{border:none;position:sticky;top:0;z-index:1}tbody[_ngcontent-%COMP%]{padding-bottom:5px}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-block:10px;padding-inline:15px;border:none;font-size:12px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-inline:15px;border:none}tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.btn[_ngcontent-%COMP%]{display:inline-block;height:41.2px}.aie[_ngcontent-%COMP%]{align-items:end}.table-filter-content[_ngcontent-%COMP%]{height:calc(100vh - 110px)}.table-container[_ngcontent-%COMP%]{max-height:calc(100vh - 260px);height:calc(100vh - 260px);overflow:auto}.pagination-content[_ngcontent-%COMP%]{margin-top:-5px}"]})}}return n})()}}]);