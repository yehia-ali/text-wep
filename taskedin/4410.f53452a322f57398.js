"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[4410],{4410:(z,T,i)=>{i.r(T),i.d(T,{TimesheetListComponent:()=>V});var t=i(65879),l=i(96814),E=i(1428),x=i(32296),_=i(38034),g=i(64170),c=i(56223),A=i(89515),M=i(22950),m=i(23680),f=i(73445),L=i(52081),v=i(11383),b=i(65668),C=i(76472),O=i(57105),D=i(824),U=i(9619),p=i(64190),y=i(52341),u=i(11486);function P(e,s){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Oqu(n.timesheet.userName)}}function I(e,s){1&e&&(t.TgZ(0,"thead",27)(1,"tr")(2,"th",28),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th",42),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._UZ(11,"th",42),t.qZA()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,3,"title")),t.xp6(3),t.Oqu(t.lcZ(7,5,"time")),t.xp6(3),t.Oqu(t.lcZ(10,7,"total_time")))}const q=function(e){return[e]};function B(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"tr",43)(2,"td",28),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"arabicTime"),t.qZA(),t.TgZ(7,"td",42)(8,"div",44)(9,"div",34),t._uU(10),t.ALo(11,"arabicNumbers"),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",20),t._uU(14,":"),t.qZA(),t.TgZ(15,"div",35),t._uU(16),t.ALo(17,"arabicNumbers"),t.ALo(18,"translate"),t.qZA()()(),t.TgZ(19,"td"),t._UZ(20,"a",45),t.qZA()(),t.BQk()),2&e){const n=s.$implicit,o=t.oxw(5);t.xp6(3),t.Oqu(n.title),t.xp6(2),t.Oqu(t.lcZ(6,7,n.time)),t.xp6(5),t.AsE(" ",t.lcZ(11,9,o.Math.floor(n.hours))," ",t.lcZ(12,11,"h")," "),t.xp6(6),t.AsE(" ",t.lcZ(17,13,60*n.hours%60)," ",t.lcZ(18,15,"m")," "),t.xp6(4),t.Q6J("routerLink",t.VKq(17,q,"/tasks/details/"+n.taskId))}}function J(e,s){if(1&e&&(t.TgZ(0,"tbody"),t.YNc(1,B,21,19,"ng-container",30),t.qZA()),2&e){const n=t.oxw(2).$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.logs)("ngForTrackBy",o.trackBy)}}function K(e,s){1&e&&(t.TgZ(0,"p",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"no_data_found")))}function N(e,s){1&e&&t._UZ(0,"loading")}function k(e,s){if(1&e&&(t.TgZ(0,"tr",37)(1,"td",38)(2,"table",39),t.YNc(3,I,12,9,"thead",40),t.YNc(4,J,2,2,"tbody",2),t.YNc(5,K,3,3,"p",41),t.YNc(6,N,1,0,"loading",2),t.qZA()()()),2&e){const n=t.oxw().$implicit,o=t.oxw(2);t.xp6(3),t.Q6J("ngIf",n.logs),t.xp6(1),t.Q6J("ngIf",n.logs),t.xp6(1),t.Q6J("ngIf",!n.logs&&!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading)}}const R=function(e){return{"bg-gray":e}},W=function(e){return{"bx-rotate-180":e}};function Q(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"tr",31),t.NdJ("click",function(){const r=t.CHM(n).$implicit;return t.KtG(r.expanded=!r.expanded)}),t.TgZ(2,"td",32),t._UZ(3,"i",33),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"arabicDate"),t.qZA()(),t.TgZ(7,"td")(8,"div",18)(9,"div",34),t._uU(10),t.ALo(11,"arabicNumbers"),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",20),t._uU(14,":"),t.qZA(),t.TgZ(15,"div",35),t._uU(16),t.ALo(17,"arabicNumbers"),t.ALo(18,"translate"),t.qZA()()()(),t.YNc(19,k,7,4,"tr",36),t.BQk()}if(2&e){const n=s.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(18,R,n.expanded)),t.xp6(2),t.Q6J("ngClass",t.VKq(20,W,n.expanded)),t.xp6(2),t.Oqu(t.lcZ(6,8,n.day)),t.xp6(5),t.AsE(" ",t.lcZ(11,10,o.Math.floor(n.total))," ",t.lcZ(12,12,"h")," "),t.xp6(6),t.AsE(" ",t.lcZ(17,14,60*n.total%60)," ",t.lcZ(18,16,"m")," "),t.xp6(3),t.Q6J("ngIf",n.expanded)}}function Y(e,s){if(1&e&&(t.TgZ(0,"tbody"),t.YNc(1,Q,20,22,"ng-container",30),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.timesheet.dataList)("ngForTrackBy",n.trackBy)}}function F(e,s){1&e&&t._UZ(0,"not-found",47)}function S(e,s){1&e&&t._UZ(0,"loading")}const $=function(e,s){return{jcsb:e,jcfe:s}},j=function(e){return{"h-100":e}};let Z,H=document.dir;Z="rtl"===H?"ar-EG":"en-GB";let V=(()=>{class e{constructor(n,o){this.datePipe=n,this.elm=o,this.service=(0,t.f3M)(M.r),this.route=(0,t.f3M)(p.gz),this.pageInfoSer=(0,t.f3M)(y.Z),this.currentDate=new Date,this.startDate=this.datePipe.transform(this.currentDate,"yyyy-MM-01"),this.endDate=this.datePipe.transform(this.currentDate,"yyyy-MM-dd"),this.timesheet=[],this.loading=!1,this.currentUser=localStorage.getItem("id"),this.Math=Math}ngOnInit(){console.log(this.startDate),console.log(this.endDate),this.dateChanged(),this.pageInfoSer.pageInfoEnum.next("Timesheet");const n=this.route.snapshot.paramMap.get("id");this.service.userId.next(n||localStorage.getItem("id")),this.service.meta.subscribe(o=>this.meta=o),this.service.loading.subscribe(o=>this.loading=o),this.source$=this.service.timesheet$.subscribe(o=>{let a=o;a.dataList?.forEach(r=>{r.expanded=!1}),this.timesheet=a})}dateChanged(){this.service.from.next(this.datePipe.transform(this.startDate,"yyyy-MM-dd")),this.service.to.next(this.datePipe.transform(this.endDate,"yyyy-MM-dd")),this.service.hasChanged.next(!0)}trackBy(n,o){return o.id}ngOnDestroy(){this.source$.unsubscribe(),this.service.loading.next(!0),this.pageInfoSer.pageInfoEnum.next("")}exportToExcel(){let n=this.elm.nativeElement.querySelector("#timesheet-list");const o=u.P6.table_to_sheet(n),a=u.P6.book_new();u.P6.book_append_sheet(a,o,"Sheet1"),u.NC(a,this.service.userId.value!=this.currentUser?this.timesheet.userName+"-timesheet.xlsx":"my-timesheet-list.xlsx")}static{this.\u0275fac=function(o){return new(o||e)(t.Y36(l.uU),t.Y36(t.SBq))}}static{this.\u0275cmp=t.Xpm({type:e,selectors:[["timesheet-list"]],standalone:!0,features:[t._Bn([{provide:m.Ad,useValue:Z},{provide:m._A,useClass:f.t7,deps:[m.Ad,f.o8]},{provide:m.sG,useValue:f.$o}]),t.jDz],decls:64,vars:55,consts:[["magicScroll","",1,"timesheet","p-2","h-100"],[1,"flex","aic",3,"ngClass"],[4,"ngIf"],[1,"date-picker","flex","aic","jcfe","gap-x-1"],["appearance","fill",1,"example-form-field",3,"click"],[1,"fs-15"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matSuffix","",3,"for"],["rangePicker",""],["mat-button","","matDateRangePickerCancel",""],["mat-raised-button","","color","primary","matDateRangePickerApply","",3,"click"],["mat-raised-button","",1,"bg-primary","white","export",3,"click"],[1,"time-logged","flex","aic","jcsb","white","px-5","rounded","mt-1"],[1,"start"],[1,"flex","aic","gap-x-5"],[1,"logged"],[1,"flex-center"],[1,"hours","bold"],[1,"mx-50"],[1,"minutes","bold"],[1,"required"],[1,"bold"],[1,"end","img"],["src","assets/images/clock.svg","alt","clock image"],["id","timesheet-list",1,"table","w-100","mt-2","relative",3,"ngClass"],[1,"bg-gray","border-bottom"],[1,"text-left"],["class","a-center",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","pointer",3,"ngClass","click"],[1,"flex","aic","gap-x-1"],[1,"bx","bxs-chevron-down","fs-21",3,"ngClass"],[1,"hours"],[1,"minutes"],["class","log-details border-bottom bg-gray",4,"ngIf"],[1,"log-details","border-bottom","bg-gray"],["colspan","2"],[1,"table","w-100","px-0","relative"],["class","bg-gray border-bottom",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"text-right"],[1,"border-bottom"],[1,"flex","aic","jcfe","pr-50"],["routerLinkActive","router-link-active",1,"bx","bx-show","pointer","fs-18","primary",3,"routerLink"],[1,"text-center"],[1,"a-center"]],template:function(o,a){if(1&o){const r=t.EpF();t.TgZ(0,"layout")(1,"div",0)(2,"div",1),t.YNc(3,P,2,1,"p",2),t.TgZ(4,"div",3)(5,"mat-form-field",4),t.NdJ("click",function(){t.CHM(r);const d=t.MAs(14);return t.KtG(d.open())}),t.TgZ(6,"mat-label",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-date-range-input",6)(10,"input",7),t.NdJ("ngModelChange",function(d){return a.startDate=d}),t.qZA(),t.TgZ(11,"input",8),t.NdJ("ngModelChange",function(d){return a.endDate=d}),t.qZA()(),t._UZ(12,"mat-datepicker-toggle",9),t.TgZ(13,"mat-date-range-picker",null,10)(15,"mat-date-range-picker-actions")(16,"button",11),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){return a.dateChanged()}),t._uU(20),t.ALo(21,"translate"),t.qZA()()()(),t.TgZ(22,"button",13),t.NdJ("click",function(){return a.exportToExcel()}),t._uU(23),t.ALo(24,"translate"),t.qZA()()(),t.TgZ(25,"div",14)(26,"div",15)(27,"div",16)(28,"div",17)(29,"div",18)(30,"div",19),t._uU(31),t.ALo(32,"arabicNumbers"),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"div",20),t._uU(35,":"),t.qZA(),t.TgZ(36,"div",21),t._uU(37),t.ALo(38,"arabicNumbers"),t.ALo(39,"translate"),t.qZA()(),t.TgZ(40,"p"),t._uU(41),t.ALo(42,"translate"),t.qZA()(),t.TgZ(43,"div",22)(44,"p",23),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"p"),t._uU(48),t.ALo(49,"translate"),t.qZA()()()(),t.TgZ(50,"div",24),t._UZ(51,"img",25),t.qZA()(),t.TgZ(52,"table",26)(53,"thead",27)(54,"tr")(55,"th",28),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"th"),t._uU(59),t.ALo(60,"translate"),t.qZA()()(),t.YNc(61,Y,2,2,"tbody",2),t.YNc(62,F,1,0,"not-found",29),t.YNc(63,S,1,0,"loading",2),t.qZA()()()}if(2&o){const r=t.MAs(14);t.xp6(2),t.Q6J("ngClass",t.WLB(50,$,a.service.userId.value!=a.currentUser,a.service.userId.value==a.currentUser)),t.xp6(1),t.Q6J("ngIf",a.service.userId.value!=a.currentUser),t.xp6(4),t.Oqu(t.lcZ(8,24,"date_range")),t.xp6(2),t.Q6J("rangePicker",r),t.xp6(1),t.Q6J("ngModel",a.startDate),t.xp6(1),t.Q6J("ngModel",a.endDate),t.xp6(1),t.Q6J("for",r),t.xp6(5),t.Oqu(t.lcZ(18,26,"cancel")),t.xp6(3),t.hij(" ",t.lcZ(21,28,"apply")," "),t.xp6(3),t.Oqu(t.lcZ(24,30,"export")),t.xp6(8),t.AsE(" ",t.lcZ(32,32,a.Math.floor(a.timesheet.totalHours||0)),"",t.lcZ(33,34,"h")," "),t.xp6(6),t.AsE(" ",t.lcZ(38,36,a.Math.floor(60*a.timesheet.totalHours%60||0))," ",t.lcZ(39,38,"m")," "),t.xp6(4),t.Oqu(t.lcZ(42,40,"logged")),t.xp6(4),t.AsE("",a.timesheet.requiredMonthlyHours,"",t.lcZ(46,42,"h"),""),t.xp6(3),t.Oqu(t.lcZ(49,44,"required_word")),t.xp6(4),t.Q6J("ngClass",t.VKq(53,j,0==a.timesheet.length||a.loading)),t.xp6(4),t.Oqu(t.lcZ(57,46,"date")),t.xp6(3),t.Oqu(t.lcZ(60,48,"total_time")),t.xp6(2),t.Q6J("ngIf",(null==a.timesheet.dataList?null:a.timesheet.dataList.length)>0&&!a.loading),t.xp6(1),t.Q6J("ngIf",0==(null==a.timesheet.dataList?null:a.timesheet.dataList.length)&&!a.loading),t.xp6(1),t.Q6J("ngIf",a.loading)}},dependencies:[l.ez,l.mk,l.sg,l.O5,E.$,x.ot,x.lW,_.FA,_.nW,_.wx,_.zY,_.By,_._g,_.M5,_.dp,_.DK,g.lN,g.KE,g.hX,g.R9,c.UX,c.Fj,c.JJ,A.aw,A.X$,c.u5,c.On,L.m,v.E,b.N,C.JX,O.w,D.h,U.P,p.Bz,p.rH,p.Od],styles:[".time-logged[_ngcontent-%COMP%]{background:linear-gradient(93.27deg,#7B55D3 0%,rgba(123,85,211,.9) 56.67%,rgba(123,85,211,.8) 76.35%,rgba(123,85,211,.85) 100%)}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{top:-20px!important}"]})}}return e})()}}]);