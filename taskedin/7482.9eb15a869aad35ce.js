"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[7482],{38140:(N,M,l)=>{l.d(M,{Y:()=>g});var t=l(65879),v=l(96814),b=l(89515),T=l(824),A=l(52081),h=l(56223),Z=l(76472),D=l(3131);function x(r,u){if(1&r&&(t.TgZ(0,"p",10),t._uU(1),t.ALo(2,"arabicNumbers"),t.ALo(3,"translate"),t.qZA()),2&r){const d=t.oxw();t.xp6(1),t.Oqu(null!=d.meta&&d.meta.pageSize?t.lcZ(2,1,null==d.meta?null:d.meta.pageSize):t.lcZ(3,3,"unlimited"))}}function e(r,u){if(1&r){const d=t.EpF();t.TgZ(0,"input",11),t.NdJ("ngModelChange",function(_){t.CHM(d);const O=t.oxw();return t.KtG(O.limit=_)})("ngModelChange",function(){t.CHM(d);const _=t.oxw();return t.KtG(_.changeLimit())}),t.qZA()}if(2&r){const d=t.oxw();t.Q6J("ngModel",d.limit)}}function F(r,u){1&r&&(t.TgZ(0,"p",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"record")))}function J(r,u){if(1&r){const d=t.EpF();t.TgZ(0,"pagination-controls",13),t.NdJ("pageChange",function(_){t.CHM(d);const O=t.oxw();return t.KtG(O.pageChanged(_))}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.qZA()}2&r&&t.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",t.lcZ(1,4,"previous"))("nextLabel",t.lcZ(2,6,"next"))}const L=[[["","filters",""]],[["","content",""]]],p=function(r,u){return{height:r,"max-width":u}},C=["[filters]","[content]"];let g=(()=>{class r{constructor(){this.pageChange=new t.vpe,this.limitChanged=new t.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,t.f3M)(D.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(d){this.pageChange.emit(d)}static{this.\u0275fac=function(f){return new(f||r)}}static{this.\u0275cmp=t.Xpm({type:r,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[t.jDz],ngContentSelectors:C,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(f,_){1&f&&(t.F$t(L),t.TgZ(0,"div",0)(1,"div",1),t.Hsn(2),t.qZA(),t.TgZ(3,"div",2),t.Hsn(4,1),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,x,4,5,"p",5),t.YNc(11,e,1,1,"input",6),t.YNc(12,F,3,3,"p",7),t.qZA(),t.YNc(13,J,3,8,"pagination-controls",8),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.TgZ(17,"span",9),t._uU(18),t.ALo(19,"arabicNumbers"),t.ALo(20,"translate"),t.qZA()()()()),2&f&&(t.Q6J("ngStyle",t.WLB(17,p,_.hasTitle?"calc(100vh - 14.5rem)":_.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",_.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),t.xp6(8),t.hij("",t.lcZ(9,9,"pagination_per_page")," "),t.xp6(2),t.Q6J("ngIf",!_.admin),t.xp6(1),t.Q6J("ngIf",_.admin),t.xp6(1),t.Q6J("ngIf",null==_.meta?null:_.meta.pageSize),t.xp6(1),t.Q6J("ngIf",(null==_.meta?null:_.meta.totalItems)>15),t.xp6(2),t.hij("",t.lcZ(16,11,"pagination_total_records")," "),t.xp6(3),t.AsE("",t.lcZ(19,13,null==_.meta?null:_.meta.totalItems)," ",t.lcZ(20,15,"record"),""))},dependencies:[v.ez,v.O5,v.PC,b.aw,b.X$,T.h,A.m,h.u5,h.Fj,h.wV,h.JJ,h.qQ,h.On,Z.JX,Z.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return r})()},55237:(N,M,l)=>{l.d(M,{S:()=>L});var t=l(65879),v=l(96814),b=l(70468),T=l(54807),A=l(56223),h=l(89515),Z=l(24110);function D(p,C){if(1&p&&t._UZ(0,"filter-label",4),2&p){const g=t.oxw();t.Q6J("key",g.label)}}function x(p,C){if(1&p&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&p){const g=t.oxw().items;t.xp6(1),t.hij("",t.Dn7(2,1,g[0].name,0,10),"...")}}function e(p,C){if(1&p&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&p){const g=t.oxw().items;t.xp6(1),t.Oqu(g[0].name)}}function F(p,C){if(1&p&&(t.TgZ(0,"div",11)(1,"span",12),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&p){const g=t.oxw().items;t.xp6(2),t.AsE("",g.length-1," ",t.lcZ(3,2,"more"),"...")}}function J(p,C){if(1&p){const g=t.EpF();t.TgZ(0,"div",5)(1,"span",6)(2,"span",7),t.YNc(3,x,3,5,"span",8),t.YNc(4,e,2,1,"span",8),t.qZA()(),t.TgZ(5,"span",9),t.NdJ("click",function(){const u=t.CHM(g);return t.KtG((0,u.clear)(u.items[0]))}),t._uU(6,"\xd7"),t.qZA()(),t.YNc(7,F,4,4,"div",10)}if(2&p){const g=C.items;t.xp6(3),t.Q6J("ngIf",g[0].name.length>=10),t.xp6(1),t.Q6J("ngIf",g[0].name.length<10),t.xp6(3),t.Q6J("ngIf",g.length>1)}}let L=(()=>{class p{constructor(){this.label="departments",this.labelVisibilty=!0,this.width="w-24r",this.multiable=!0,this.closeOnSelect=!1,this.formControlName=null,this.valueChanged=new t.vpe,this.service=(0,t.f3M)(Z.U)}onChange(){this.valueChanged.emit(this.selectedDepartment)}static{this.\u0275fac=function(r){return new(r||p)}}static{this.\u0275cmp=t.Xpm({type:p,selectors:[["departments"]],inputs:{selectedDepartment:"selectedDepartment",label:"label",labelVisibilty:"labelVisibilty",width:"width",multiable:"multiable",closeOnSelect:"closeOnSelect",formControlName:"formControlName"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[t.jDz],decls:5,vars:11,consts:[[1,"departments-filter"],[3,"key",4,"ngIf"],["bindLabel","name","bindValue","id","appendTo","body",3,"items","clearSearchOnAdd","multiple","closeOnSelect","ngModel","ngModelChange"],["ng-multi-label-tmp",""],[3,"key"],[1,"ng-value","flex","aic"],[1,"ng-value-label"],[1,"flex","aic","fs-10"],[4,"ngIf"],["aria-hidden","true",1,"ng-value-icon","right",3,"click"],["class","ng-value rounded-2",4,"ngIf"],[1,"ng-value","rounded-2"],[1,"ng-value-label","fs-10"]],template:function(r,u){1&r&&(t.TgZ(0,"div",0),t.YNc(1,D,1,1,"filter-label",1),t.TgZ(2,"ng-select",2),t.NdJ("ngModelChange",function(f){return u.selectedDepartment=f})("ngModelChange",function(){return u.onChange()}),t.ALo(3,"async"),t.YNc(4,J,8,3,"ng-template",3),t.qZA()()),2&r&&(t.xp6(1),t.Q6J("ngIf",u.labelVisibilty),t.xp6(1),t.Gre("",u.width," icon-input"),t.Q6J("items",t.lcZ(3,9,u.service.departments$))("clearSearchOnAdd",!0)("multiple",u.multiable)("closeOnSelect",u.closeOnSelect)("ngModel",u.selectedDepartment))},dependencies:[v.ez,v.O5,v.Ov,v.OU,b.r,T.A0,T.w9,T.zB,A.u5,A.JJ,A.On,h.aw,h.X$],encapsulation:2})}}return p})()},37482:(N,M,l)=>{l.r(M),l.d(M,{UsersAttendanceComponent:()=>de});var t=l(96814),v=l(57105),b=l(65668),T=l(9619),A=l(38140),h=l(89515),Z=l(76472),D=l(45843),x=l(11486),e=l(65879),F=l(86760),J=l(55237),L=l(824),p=l(32296),C=l(75986),g=l(24971),r=l(10480),u=l(83620),d=l(94664),f=l(37398),_=l(34673),O=l(20553),k=l(69862);let P=(()=>{class a extends _.q{constructor(n){super(),this.http=n,this.reports$=this.hasChanged.pipe((0,u.b)(400),(0,d.w)(()=>this.getAttendance().pipe((0,f.U)(s=>s)))),this.geoCoder=new google.maps.Geocoder}getAttendance(){this.loading.next(!0);const n=new URL(`${O.N.apiUrl}api/Attendance/GetAll`);return this.params(n,"users-attendance"),this.http.get(`${n}`).pipe((0,f.U)(s=>{this.loading.next(!1);let i=s.data.items;return i.map(o=>{this.geoCoder?.geocode({location:{lat:o.latitude,lng:o.longitude}},(m,me)=>{"OK"===me&&m[0]&&(o.address=m[0].formatted_address)})}),this.setMeta(s),i}))}updateAttendance(n){return this.http.post(`${O.N.apiUrl}api/Attendance/UpdateEmployeeAttendance`,n)}static{this.\u0275fac=function(s){return new(s||a)(e.LFG(k.eN))}}static{this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var Q=l(1350),w=l(54807),y=l(56223);function q(a,c){1&a&&(e._uU(0),e.ALo(1,"translate")),2&a&&e.hij(" ",e.lcZ(1,1,c.item.name)," ")}function Y(a,c){if(1&a&&(e.TgZ(0,"span",5),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a){const n=c.item;e.xp6(1),e.Oqu(e.lcZ(2,1,n.name))}}const S=function(a){return{name:a,value:1}},K=function(a){return{name:a,value:2}},B=function(a,c){return[a,c]};let W=(()=>{class a{constructor(n){this.translate=n,this.valueChanged=new e.vpe}ngOnInit(){}onChange(){this.valueChanged.emit(this.selectedValue)}static{this.\u0275fac=function(s){return new(s||a)(e.Y36(h.sK))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["attendnace-type"]],inputs:{selectedValue:"selectedValue"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[e.jDz],decls:5,vars:11,consts:[[1,"transaction-type"],["key","transaction_type"],["bindLabel","name","bindValue","value","appendTo","body",1,"w-17",3,"items","ngModel","multiple","closeOnSelect","ngModelChange"],["ng-option-tmp",""],["ng-label-tmp",""],[1,"fs-14"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0),e._UZ(1,"input-label",1),e.TgZ(2,"ng-select",2),e.NdJ("ngModelChange",function(m){return i.selectedValue=m})("ngModelChange",function(){return i.onChange()}),e.YNc(3,q,2,3,"ng-template",3),e.YNc(4,Y,3,3,"ng-template",4),e.qZA()()),2&s&&(e.xp6(2),e.Q6J("items",e.WLB(8,B,e.VKq(4,S,i.translate.instant("check-in")),e.VKq(6,K,i.translate.instant("check-out"))))("ngModel",i.selectedValue)("multiple",!1)("closeOnSelect",!0))},dependencies:[t.ez,Q.i,w.A0,w.w9,w.ir,w.mR,y.u5,y.JJ,y.On,h.aw,h.X$],encapsulation:2})}}return a})();function z(a,c){if(1&a){const n=e.EpF();e.TgZ(0,"departments",13),e.NdJ("valueChanged",function(i){e.CHM(n);const o=e.oxw();return o.service.department.next(i),e.KtG(o.filter())}),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("selectedDepartment",n.service.department.value)}}function H(a,c){if(1&a){const n=e.EpF();e.TgZ(0,"attendnace-type",14),e.NdJ("valueChanged",function(i){e.CHM(n);const o=e.oxw();return o.service.attendanceType.next(i),e.KtG(o.filter())}),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("selectedValue",n.service.attendanceType.value)}}function V(a,c){if(1&a){const n=e.EpF();e.TgZ(0,"date-filter",15),e.NdJ("valueChanged",function(i){e.CHM(n);const o=e.oxw();return o.service.dateFrom.next(i),o.service.dateTo.next(""),e.KtG(o.filter())}),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("selectedValue",n.service.dateFrom.value)}}function G(a,c){if(1&a){const n=e.EpF();e.TgZ(0,"date-filter",16),e.NdJ("valueChanged",function(i){e.CHM(n);const o=e.oxw();return o.service.dateTo.next(i),e.KtG(o.filter())}),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("minDate",n.service.dateFrom.value)("selectedValue",n.service.dateTo.value)}}function R(a,c){if(1&a){const n=e.EpF();e.TgZ(0,"select-user",17),e.NdJ("getSelectedUsers",function(i){e.CHM(n);const o=e.oxw();return o.service.managers.next(i),e.KtG(o.filter())}),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("selectedUsers",n.service.managers.value)}}function j(a,c){if(1&a){const n=e.EpF();e.TgZ(0,"div",20)(1,"mat-checkbox",21),e.NdJ("change",function(){const o=e.CHM(n).$implicit,m=e.oxw(2);return e.KtG(m.unCheck(o))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&a){const n=c.$implicit,s=e.oxw(2);e.xp6(1),e.Q6J("checked",s.visibleFilters[n])("indeterminate",!1)("labelPosition","after"),e.xp6(1),e.hij(" ",e.lcZ(3,4,n)," ")}}function $(a,c){if(1&a&&(e.TgZ(0,"div",18),e.NdJ("click",function(s){return s.stopImmediatePropagation()}),e.YNc(1,j,4,6,"div",19),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.filtersArray)}}let X=(()=>{class a{constructor(){this.export=new e.vpe,this.service=(0,e.f3M)(P),this.showFilters=!1,this.visibleFilters={departments:!0,transaction_type:this.service.attendanceType.value,managers:this.service.managers.value.length>0,date:!0},this.filtersArray=Object.keys(this.visibleFilters).map(n=>n)}filter(){this.service.filter()}unCheck(n){this.visibleFilters[n]=!this.visibleFilters[n]}documentClickEvent(n){this.showFilters=!1}static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["users-attendance-filter"]],hostBindings:function(s,i){1&s&&e.NdJ("click",function(m){return i.documentClickEvent(m)},!1,e.evT)},outputs:{export:"export"},standalone:!0,features:[e.jDz],decls:15,vars:10,consts:[[1,"filters","flex","aic","jcsb","gap-x-4"],[1,"flex-wrap","aic","gap-x-1","gap-y-1"],[3,"key","valueChanged"],[3,"selectedDepartment","valueChanged",4,"ngIf"],[3,"selectedValue","valueChanged",4,"ngIf"],["key","start_date",3,"selectedValue","valueChanged",4,"ngIf"],["key","end_date",3,"minDate","selectedValue","valueChanged",4,"ngIf"],["class","no-label","text","managers",3,"selectedUsers","getSelectedUsers",4,"ngIf"],[1,"end","flex","aic","gap-x-2","pt-75"],["mat-raised-button","",1,"bg-success","export",3,"click"],[1,"img","relative","pointer",3,"click"],["alt","","src","assets/images/icons/filters.svg",1,"convert-image-color"],["class","filters-menu bg-white p-1 rounded","magicScroll","",3,"click",4,"ngIf"],[3,"selectedDepartment","valueChanged"],[3,"selectedValue","valueChanged"],["key","start_date",3,"selectedValue","valueChanged"],["key","end_date",3,"minDate","selectedValue","valueChanged"],["text","managers",1,"no-label",3,"selectedUsers","getSelectedUsers"],["magicScroll","",1,"filters-menu","bg-white","p-1","rounded",3,"click"],["class","menu-item",4,"ngFor","ngForOf"],[1,"menu-item"],["color","primary",3,"checked","indeterminate","labelPosition","change"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"search",2),e.NdJ("valueChanged",function(m){return i.service.search.next(m),i.filter()}),e.qZA(),e.YNc(3,z,1,1,"departments",3),e.YNc(4,H,1,1,"attendnace-type",4),e.YNc(5,V,1,1,"date-filter",5),e.YNc(6,G,1,2,"date-filter",6),e.YNc(7,R,1,1,"select-user",7),e.qZA(),e.TgZ(8,"div",8)(9,"button",9),e.NdJ("click",function(){return i.export.emit()}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",10),e.NdJ("click",function(m){return m.stopImmediatePropagation(),i.showFilters=!0}),e._UZ(13,"img",11),e.YNc(14,$,2,1,"div",12),e.qZA()()()),2&s&&(e.xp6(2),e.Q6J("key",i.service.search.value),e.xp6(1),e.Q6J("ngIf",i.visibleFilters.departments),e.xp6(1),e.Q6J("ngIf",i.visibleFilters.transaction_type),e.xp6(1),e.Q6J("ngIf",i.visibleFilters.date),e.xp6(1),e.Q6J("ngIf",i.visibleFilters.date),e.xp6(1),e.Q6J("ngIf",i.visibleFilters.managers),e.xp6(3),e.Oqu(e.lcZ(11,8,"export")),e.xp6(4),e.Q6J("ngIf",i.showFilters))},dependencies:[t.ez,t.sg,t.O5,F.g,J.S,L.h,p.ot,p.lW,C.p9,C.oG,g.g,r.V,h.aw,h.X$,W]})}}return a})();var U=l(17700),E=l(69025);function ee(a,c){if(1&a&&e._UZ(0,"map-marker",5),2&a){const n=c.$implicit;e.Q6J("position",n.position)("label",n.label)("title",n.title)("options",n.options)}}let te=(()=>{class a{constructor(n){this.data=n,this.center={lat:this.data.lat,lng:this.data.lng},this.markers=[],this.options={zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!1,maxZoom:25,minZoom:8}}ngOnInit(){this.markers=[{position:{lat:this.data.lat,lng:this.data.lng},label:{color:"#fff",text:" "},title:"Marker title "+(this.markers.length+1)}]}onMapLoad(n){this.map=n}static{this.\u0275fac=function(s){return new(s||a)(e.Y36(U.WI))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["display-map"]],standalone:!0,features:[e.jDz],decls:6,vars:5,consts:[[1,"flex","aic","jcsb","py-1","pr-1","pl-2"],[1,"fs-18","primary"],["mat-dialog-close","",1,"bx","bx-x","danger","fs-35","line-height","pointer"],["height","500px","width","100%",3,"zoom","center","options","mapInitialized"],[3,"position","label","title","options",4,"ngFor","ngForOf"],[3,"position","label","title","options"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.qZA(),e._UZ(3,"i",2),e.qZA(),e.TgZ(4,"google-map",3),e.NdJ("mapInitialized",function(m){return i.onMapLoad(m)}),e.YNc(5,ee,1,4,"map-marker",4),e.qZA()),2&s&&(e.xp6(2),e.Oqu(null==i.data?null:i.data.address),e.xp6(2),e.Q6J("zoom",15)("center",i.center)("options",i.options),e.xp6(1),e.Q6J("ngForOf",i.markers))},dependencies:[t.ez,t.sg,E.Y4,E.b6,E.O_,U.Is,U.ZT],encapsulation:2})}}return a})();var I=l(20938);const ne=["dialogTemplate"];function ae(a,c){1&a&&e._UZ(0,"img",24)}function ie(a,c){1&a&&e._UZ(0,"img",25)}function se(a,c){if(1&a){const n=e.EpF();e.TgZ(0,"tr",12)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"div",13),e._UZ(7,"user-image",14),e.TgZ(8,"div",15)(9,"p",16),e._uU(10),e.qZA(),e.TgZ(11,"p",17),e._uU(12),e.qZA()()()(),e.TgZ(13,"td",10),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td")(18,"div",18)(19,"div",19),e.YNc(20,ae,1,0,"img",20),e.YNc(21,ie,1,0,"img",21),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.ALo(24,"arabicDate"),e.qZA()()(),e.TgZ(25,"td",10)(26,"div",22),e.NdJ("click",function(){const o=e.CHM(n).$implicit,m=e.oxw(2);return e.KtG(m.getLocation(o))}),e.TgZ(27,"p"),e._uU(28),e.qZA()()(),e.TgZ(29,"td")(30,"div",23),e._uU(31),e.qZA()()()}if(2&a){const n=c.$implicit;e.xp6(2),e.Oqu(n.id),e.xp6(2),e.Oqu(n.employeeId),e.xp6(3),e.Q6J("img",n.employeePhoto)("id",n.employeeId),e.xp6(3),e.Oqu(n.employeeName),e.xp6(2),e.Oqu(n.employeeJobTitle),e.xp6(2),e.Oqu(n.employeeDepartmentName),e.xp6(2),e.Oqu(n.employeeManagerName||"-"),e.xp6(4),e.Q6J("ngIf",1==n.status),e.xp6(1),e.Q6J("ngIf",2==n.status),e.xp6(2),e.Oqu(e.xi3(24,13,n.creationDate,"withTime")),e.xp6(5),e.Oqu(n.address||"-"),e.xp6(3),e.hij(" ",n.macAddress?n.macAddress:"-"," ")}}const le=function(a,c,n){return{itemsPerPage:a,currentPage:c,totalItems:n}};function oe(a,c){if(1&a&&(e.TgZ(0,"table",7)(1,"thead",8)(2,"tr")(3,"th"),e._uU(4,"#"),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"th",9),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"th",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"th"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"th",10),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"th"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"th"),e._uU(24),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"tbody"),e.YNc(27,se,32,16,"tr",11),e.ALo(28,"paginate"),e.qZA()()),2&a){const n=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,9,"employee_id")),e.xp6(3),e.Oqu(e.lcZ(10,11,"user")),e.xp6(3),e.Oqu(e.lcZ(13,13,"department")),e.xp6(3),e.Oqu(e.lcZ(16,15,"manager")),e.xp6(3),e.Oqu(e.lcZ(19,17,"date_time")),e.xp6(3),e.Oqu(e.lcZ(22,19,"location")),e.xp6(3),e.Oqu(e.lcZ(25,21,"mac_address")),e.xp6(3),e.Q6J("ngForOf",e.xi3(28,23,n.reports,e.kEZ(26,le,null==n.meta?null:n.meta.pageSize,null==n.meta?null:n.meta.currentPage,null==n.meta?null:n.meta.totalItems)))("ngForTrackBy",n.trackBy)}}function re(a,c){1&a&&e._UZ(0,"not-found")}function ce(a,c){1&a&&e._UZ(0,"loading")}function pe(a,c){if(1&a){const n=e.EpF();e.TgZ(0,"div",26)(1,"div",27)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"i",28),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.closeDialog())}),e.qZA()(),e.TgZ(6,"mat-dialog-content")(7,"div",29)(8,"div",30)(9,"div",31),e._UZ(10,"input-label",32),e.TgZ(11,"input",33),e.NdJ("ngModelChange",function(i){e.CHM(n);const o=e.oxw();return e.KtG(o.selectedAttendance.creationDate=i)})("dateTimeChange",function(i){e.CHM(n);const o=e.oxw();return e.KtG(o.onDateChange(i))}),e.qZA(),e._UZ(12,"owl-date-time",null,34),e.qZA()()()(),e.TgZ(14,"mat-dialog-actions")(15,"div",35)(16,"a",36),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.updateAttendance())}),e._uU(17),e.ALo(18,"translate"),e.qZA()()()()}if(2&a){const n=e.MAs(13),s=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,5,"add_reward")),e.xp6(8),e.Q6J("owlDateTime",n)("owlDateTimeTrigger",n)("ngModel",s.selectedAttendance.creationDate),e.xp6(6),e.hij(" ",e.lcZ(18,7,"save")," ")}}let de=(()=>{class a{constructor(n,s,i,o){this.service=n,this.elm=s,this.dialog=i,this.datePipe=o,this.loading=!1}getReport(){this.service.hasChanged.next(!0)}getLocation(n){this.dialog.open(te,{panelClass:"display-map-dialog",autoFocus:!1,data:{lat:n.latitude,lng:n.longitude,address:n.address}})}ngOnInit(){this.service.reports$.subscribe(n=>this.reports=n),this.service.meta.subscribe(n=>this.meta=n),this.service.loading.subscribe(n=>this.loading=n)}changePage(n){this.service.page.next(n),this.getReport()}limitChanged(n){this.service.page.next(1),this.service.limit.next(n),this.getReport()}exportToExcel(){let n=this.elm.nativeElement.querySelector("#attendance");const s=x.P6.table_to_sheet(n),i=x.P6.book_new();x.P6.book_append_sheet(i,s,"Sheet1"),x.NC(i,"attendance.xlsx")}trackBy(n,s){return s.taskId}openDialog(n){this.selectedAttendance=n,this.dialog.open(this.dialogTemplate,{width:"500px"})}updateAttendance(){console.log(45564465654),this.service.updateAttendance({id:this.selectedAttendance.id,dateTime:this.newAttendanceDate}).subscribe(s=>{console.log(s)})}closeDialog(){this.dialog.closeAll()}onDateChange(n){this.newAttendanceDate=this.datePipe.transform(n.value,"yyyy-MM-ddThh:mm:00","UTC")}static{this.\u0275fac=function(s){return new(s||a)(e.Y36(P),e.Y36(e.SBq),e.Y36(U.uw),e.Y36(t.uU))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["users-attendance"]],viewQuery:function(s,i){if(1&s&&e.Gf(ne,5),2&s){let o;e.iGM(o=e.CRH())&&(i.dialogTemplate=o.first)}},standalone:!0,features:[e._Bn([t.uU]),e.jDz],decls:9,vars:6,consts:[[3,"meta","admin","limit","pageChange","limitChanged"],["filters",""],[3,"export"],["content",""],["class","table","id","attendance",4,"ngIf"],[4,"ngIf"],["dialogTemplate",""],["id","attendance",1,"table"],[1,"bg-gray","border-bottom"],[1,"text-left","pl-4"],[1,"text-left"],["class","border-bottom",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom"],[1,"flex","aic","text-left","pl-3"],[3,"img","id"],[1,"end","ml-1"],[1,"line-height"],[1,"muted","fs-13"],[1,"flex","aic","gap-x-1",2,"width","22rem"],[1,"img"],["src","assets/images/icons/Checkin.svg","alt","checkin icon",4,"ngIf"],["src","assets/images/icons/Checkout.svg","alt","checkout icon",4,"ngIf"],[1,"primary","pointer",3,"click"],[1,"flex-center"],["src","assets/images/icons/Checkin.svg","alt","checkin icon"],["src","assets/images/icons/Checkout.svg","alt","checkout icon"],[1,"dir"],[1,"flex","w-100","jcsb"],[1,"bx","bx-x","fs-25","danger","pointer","p-1",3,"click"],[1,"flex-grid","gap-y-2"],[1,"col-lg-12"],[1,"name"],["key","amount"],["placeholder","Select Date",1,"input",3,"owlDateTime","owlDateTimeTrigger","ngModel","ngModelChange","dateTimeChange"],["dt1",""],[1,"text-right","w-100"],[1,"btn","rounded","bg-primary","white","py-75","px-1","fs-14",2,"display","inline-block",3,"click"]],template:function(s,i){1&s&&(e.TgZ(0,"layout-with-filters",0),e.NdJ("pageChange",function(m){return i.changePage(m)})("limitChanged",function(m){return i.limitChanged(m)}),e.ynx(1,1),e.TgZ(2,"users-attendance-filter",2),e.NdJ("export",function(){return i.exportToExcel()}),e.qZA(),e.BQk(),e.ynx(3,3),e.YNc(4,oe,29,30,"table",4),e.YNc(5,re,1,0,"not-found",5),e.YNc(6,ce,1,0,"loading",5),e.BQk(),e.qZA(),e.YNc(7,pe,19,9,"ng-template",null,6,e.W1O)),2&s&&(e.Q6J("meta",i.meta)("admin",!0)("limit",i.service.limit.value),e.xp6(4),e.Q6J("ngIf",i.reports&&i.reports.length>0&&!i.loading),e.xp6(1),e.Q6J("ngIf",i.reports&&0==i.reports.length&&!i.loading),e.xp6(1),e.Q6J("ngIf",i.loading))},dependencies:[I.Ll,I.sZ,I.BO,I.hV,I.x,U.Is,U.xY,U.H8,t.ez,t.sg,t.O5,v.w,b.N,T.P,A.Y,h.aw,h.X$,Z.JX,Z._s,D.l,X,Q.i,y.u5,y.Fj,y.JJ,y.On],styles:["table[_ngcontent-%COMP%]{min-width:130rem}th[_ngcontent-%COMP%]:nth-of-type(2){min-width:13rem}"]})}}return a})()}}]);