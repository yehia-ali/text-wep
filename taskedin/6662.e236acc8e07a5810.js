"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[6662],{38140:(Y,w,o)=>{o.d(w,{Y:()=>M});var e=o(65879),g=o(96814),x=o(89515),b=o(824),h=o(52081),u=o(56223),C=o(76472),Z=o(3131);function O(r,_){if(1&r&&(e.TgZ(0,"p",10),e._uU(1),e.ALo(2,"arabicNumbers"),e.ALo(3,"translate"),e.qZA()),2&r){const p=e.oxw();e.xp6(1),e.Oqu(null!=p.meta&&p.meta.pageSize?e.lcZ(2,1,null==p.meta?null:p.meta.pageSize):e.lcZ(3,3,"unlimited"))}}function y(r,_){if(1&r){const p=e.EpF();e.TgZ(0,"input",11),e.NdJ("ngModelChange",function(d){e.CHM(p);const v=e.oxw();return e.KtG(v.limit=d)})("ngModelChange",function(){e.CHM(p);const d=e.oxw();return e.KtG(d.changeLimit())}),e.qZA()}if(2&r){const p=e.oxw();e.Q6J("ngModel",p.limit)}}function T(r,_){1&r&&(e.TgZ(0,"p",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"record")))}function f(r,_){if(1&r){const p=e.EpF();e.TgZ(0,"pagination-controls",13),e.NdJ("pageChange",function(d){e.CHM(p);const v=e.oxw();return e.KtG(v.pageChanged(d))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.qZA()}2&r&&e.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",e.lcZ(1,4,"previous"))("nextLabel",e.lcZ(2,6,"next"))}const A=[[["","filters",""]],[["","content",""]]],D=function(r,_){return{height:r,"max-width":_}},L=["[filters]","[content]"];let M=(()=>{class r{constructor(){this.pageChange=new e.vpe,this.limitChanged=new e.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,e.f3M)(Z.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(p){this.pageChange.emit(p)}static{this.\u0275fac=function(m){return new(m||r)}}static{this.\u0275cmp=e.Xpm({type:r,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[e.jDz],ngContentSelectors:L,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(m,d){1&m&&(e.F$t(A),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA(),e.TgZ(3,"div",2),e.Hsn(4,1),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"p"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,O,4,5,"p",5),e.YNc(11,y,1,1,"input",6),e.YNc(12,T,3,3,"p",7),e.qZA(),e.YNc(13,f,3,8,"pagination-controls",8),e.TgZ(14,"p"),e._uU(15),e.ALo(16,"translate"),e.TgZ(17,"span",9),e._uU(18),e.ALo(19,"arabicNumbers"),e.ALo(20,"translate"),e.qZA()()()()),2&m&&(e.Q6J("ngStyle",e.WLB(17,D,d.hasTitle?"calc(100vh - 14.5rem)":d.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",d.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),e.xp6(8),e.hij("",e.lcZ(9,9,"pagination_per_page")," "),e.xp6(2),e.Q6J("ngIf",!d.admin),e.xp6(1),e.Q6J("ngIf",d.admin),e.xp6(1),e.Q6J("ngIf",null==d.meta?null:d.meta.pageSize),e.xp6(1),e.Q6J("ngIf",(null==d.meta?null:d.meta.totalItems)>15),e.xp6(2),e.hij("",e.lcZ(16,11,"pagination_total_records")," "),e.xp6(3),e.AsE("",e.lcZ(19,13,null==d.meta?null:d.meta.totalItems)," ",e.lcZ(20,15,"record"),""))},dependencies:[g.ez,g.O5,g.PC,x.aw,x.X$,b.h,h.m,u.u5,u.Fj,u.wV,u.JJ,u.qQ,u.On,C.JX,C.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return r})()},76662:(Y,w,o)=>{o.r(w),o.d(w,{TeamBalanceComponent:()=>ce});var e=o(65879),g=o(96814),x=o(32296),b=o(17700),h=o(89515),u=o(76472),C=o(54807),Z=o(16676),O=o(65619),y=o(83620),T=o(94664),f=o(37398),A=o(20553),D=o(34673),L=o(69862);let M=(()=>{class n extends D.q{constructor(t){super(),this.http=t}getBalances(){this.loading.next(!0);const t=new URL(`${A.N.apiUrl}api/Leave/GetBalances`);return this.params(t,"team-balance"),this.http.get(`${t}`).pipe((0,f.U)(i=>(this.loading.next(!1),this.setBalanceMeta(i),i.data)))}getBalancesFile(){this.loading.next(!0);const t=new URL(`${A.N.apiUrl}api/Leave/GetBalancesExcel`);return this.params(t,"team-balance"),this.http.get(`${t}`,{responseType:"blob"}).pipe((0,f.U)(i=>{this.loading.next(!1);const a=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=window.URL.createObjectURL(a),l=document.createElement("a");return l.href=c,l.download="team-balances.xlsx",l.click(),window.URL.revokeObjectURL(c),i}))}static{this.\u0275fac=function(i){return new(i||n)(e.LFG(L.eN))}}static{this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var r=o(71566),_=o(38140),p=o(65668),m=o(57105),d=o(10480),v=o(32801),U=o(86421),P=o(18620),k=o(1350),I=o(99758),B=o(83449),q=o(9619),J=o(64190),N=o(56223),S=o(2032);const E=["yearPickerContainer"];function F(n,s){if(1&n&&(e.TgZ(0,"label",8),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.label))}}function Q(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.selectYear(c))}),e._uU(1),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2);e.ekj("selected",t===i.selectedYear)("disabled",t<i.minYear||t>i.maxYear),e.Q6J("disabled",t<i.minYear||t>i.maxYear),e.xp6(1),e.hij(" ",t," ")}}function j(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(1,"div",10)(2,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.previousDecade())}),e._UZ(3,"i",12),e.qZA(),e.TgZ(4,"span",13),e._uU(5),e.qZA(),e.TgZ(6,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.nextDecade())}),e._UZ(7,"i",14),e.qZA()(),e.TgZ(8,"div",15),e.YNc(9,Q,2,6,"button",16),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.currentDecadeStart<=t.minYear),e.xp6(3),e.AsE("",t.currentDecadeStart," - ",t.currentDecadeEnd,""),e.xp6(1),e.Q6J("disabled",t.currentDecadeEnd>=t.maxYear),e.xp6(3),e.Q6J("ngForOf",t.yearsInDecade)}}let z=(()=>{class n{constructor(){this.onChange=new e.vpe,this.onYearChange=new e.vpe,this.selectedYear=(new Date).getFullYear(),this.isDropdownOpen=!1,this.yearsInDecade=[],this.minYear=1900,this.maxYear=2100,this.currentDecadeStart=10*Math.floor(this.selectedYear/10),this.currentDecadeEnd=this.currentDecadeStart+9,this.generateYearsInDecade()}ngOnInit(){this.selectedDate&&this.selectedDate.subscribe(t=>{if(t){let i;i="string"==typeof t?parseInt(t,10):"number"==typeof t?t:Z(t).year(),isNaN(i)||(this.selectedYear=i,this.currentDecadeStart=10*Math.floor(i/10),this.currentDecadeEnd=this.currentDecadeStart+9,this.generateYearsInDecade())}}),this.min&&(this.minYear=this.min.getFullYear()),this.max&&(this.maxYear=this.max.getFullYear()),document.addEventListener("click",t=>{this.isDropdownOpen&&this.yearPickerContainer&&!this.yearPickerContainer.nativeElement.contains(t.target)&&(this.isDropdownOpen=!1)})}toggleDropdown(t){t&&t.stopPropagation(),console.log("Toggle dropdown clicked, current state:",this.isDropdownOpen),this.isDropdownOpen=!this.isDropdownOpen,console.log("New dropdown state:",this.isDropdownOpen)}previousDecade(){this.currentDecadeStart-=10,this.currentDecadeEnd-=10,this.generateYearsInDecade()}nextDecade(){this.currentDecadeStart+=10,this.currentDecadeEnd+=10,this.generateYearsInDecade()}generateYearsInDecade(){this.yearsInDecade=[];for(let t=0;t<10;t++)this.yearsInDecade.push(this.currentDecadeStart+t)}selectYear(t){console.log("Year selected:",t),this.selectedYear=t,this.isDropdownOpen=!1,this.updateYearRange(t)}getDisplayYear(){return this.selectedYear}updateYearRange(t){console.log("Updating year range for year:",t),this.start_date_key&&this.start_date_key.next(`${t}-01-01`),this.end_date_key&&this.end_date_key.next(`${t}-12-31`),console.log("Emitting onChange with year:",t),this.onChange.emit(t),console.log("Emitting onYearChange with year:",t),this.onYearChange.emit(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.Xpm({type:n,selectors:[["app-custom-year-picker"]],viewQuery:function(i,a){if(1&i&&e.Gf(E,7),2&i){let c;e.iGM(c=e.CRH())&&(a.yearPickerContainer=c.first)}},inputs:{start_date_key:"start_date_key",end_date_key:"end_date_key",selectedDate:"selectedDate",max:"max",min:"min",classes:"classes",label:"label",showLabel:"showLabel"},outputs:{onChange:"onChange",onYearChange:"onYearChange"},standalone:!0,features:[e.jDz],decls:9,vars:5,consts:[["class","fs-11 bold",4,"ngIf"],[1,"custom-year-picker-container"],["yearPickerContainer",""],[1,"year-picker-button",3,"click"],[1,"year-display"],[1,"calendar-icon"],["src","assets/images/icons/calendar-icon-2.svg","alt","calendar"],["class","year-dropdown",3,"click",4,"ngIf"],[1,"fs-11","bold"],[1,"year-dropdown",3,"click"],[1,"dropdown-header"],[1,"nav-btn",3,"disabled","click"],[1,"bx","bx-chevron-left"],[1,"decade-range"],[1,"bx","bx-chevron-right"],[1,"years-grid"],["class","year-option",3,"selected","disabled","click",4,"ngFor","ngForOf"],[1,"year-option",3,"disabled","click"]],template:function(i,a){1&i&&(e.YNc(0,F,3,3,"label",0),e.TgZ(1,"div",1,2)(3,"div",3),e.NdJ("click",function(l){return a.toggleDropdown(l)}),e.TgZ(4,"div",4),e._uU(5),e.qZA(),e.TgZ(6,"div",5),e._UZ(7,"img",6),e.qZA()(),e.YNc(8,j,10,5,"div",7),e.qZA()),2&i&&(e.Q6J("ngIf",a.showLabel),e.xp6(1),e.Tol(a.classes),e.xp6(4),e.hij(" ",a.getDisplayYear()," "),e.xp6(3),e.Q6J("ngIf",a.isDropdownOpen))},dependencies:[g.ez,g.sg,g.O5,h.aw,h.X$],styles:[".custom-year-picker-container[_ngcontent-%COMP%]{position:relative}.year-picker-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px;background-color:#fff;border:.5px solid var(--divder, rgba(0, 0, 0, .15));border-radius:8px;cursor:pointer;transition:all .2s ease;min-height:32px}.year-picker-button[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#d0d0d0;box-shadow:0 2px 6px #00000026}.year-display[_ngcontent-%COMP%]{color:#495057;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:16px;font-weight:500;flex:1;text-align:start}.calendar-icon[_ngcontent-%COMP%]{color:#6c757d;display:flex;align-items:center;justify-content:center;flex-shrink:0}.year-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:white;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 8px 24px #00000026;z-index:1000;margin-top:4px;min-width:200px}.dropdown-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #e0e0e0}.nav-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;border-radius:4px;color:#6c757d;transition:all .2s ease}.nav-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f8f9fa;color:#495057}.nav-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.decade-range[_ngcontent-%COMP%]{font-weight:500;color:#495057;font-size:14px}.years-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:4px;padding:12px}.year-option[_ngcontent-%COMP%]{background:none;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;font-size:14px;color:#495057;transition:all .2s ease;text-align:center}.year-option[_ngcontent-%COMP%]:hover:not(.disabled){background-color:#7b58ca;color:#fff}.year-option.selected[_ngcontent-%COMP%]{background-color:#7b58ca;color:#fff}.year-option.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}"]})}}return n})();var R=o(49388);function W(n,s){if(1&n&&(e.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",24),e._UZ(5,"img",25),e.qZA(),e.TgZ(6,"div",26)(7,"h4",27),e._uU(8),e.qZA(),e.TgZ(9,"p",28),e._uU(10),e.ALo(11,"translate"),e.qZA()()()()()()),2&n){const t=s.$implicit;e.xp6(4),e.Udp("background-color",t.background),e.xp6(1),e.MGl("src","assets/images/leave/",t.icon,"",e.LSH),e.xp6(3),e.Oqu(t.value),e.xp6(2),e.Oqu(e.lcZ(11,5,t.title))}}function $(n,s){1&n&&(e.ynx(0),e.TgZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"pending")))}function V(n,s){1&n&&(e.ynx(0),e.TgZ(1,"span",33),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"approved")))}function K(n,s){1&n&&(e.ynx(0),e.TgZ(1,"span",34),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"rejected")))}function G(n,s){1&n&&(e.ynx(0),e.TgZ(1,"span",35),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"canceled")))}function H(n,s){if(1&n&&(e.TgZ(0,"tr",30)(1,"td",31),e._uU(2),e.qZA(),e.TgZ(3,"td",31),e._uU(4),e.qZA(),e.TgZ(5,"td",31),e._uU(6),e.ALo(7,"arabicDate"),e.qZA(),e.TgZ(8,"td",31),e._uU(9),e.ALo(10,"arabicDate"),e.qZA(),e.TgZ(11,"td",31),e.YNc(12,$,4,3,"ng-container",18),e.YNc(13,V,4,3,"ng-container",18),e.YNc(14,K,4,3,"ng-container",18),e.YNc(15,G,4,3,"ng-container",18),e.qZA()()),2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t.leaves_type),e.xp6(2),e.Oqu(t.leave_days),e.xp6(2),e.Oqu(e.lcZ(7,8,t.start_date)),e.xp6(3),e.Oqu(e.lcZ(10,10,t.end_date)),e.xp6(3),e.Q6J("ngIf",0==t.leaveStatus),e.xp6(1),e.Q6J("ngIf",1==t.leaveStatus),e.xp6(1),e.Q6J("ngIf",2==t.leaveStatus),e.xp6(1),e.Q6J("ngIf",3==t.leaveStatus)}}function X(n,s){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,H,16,12,"tr",29),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.requests)("ngForTrackBy",t.trackBy)}}function ee(n,s){1&n&&e._UZ(0,"not-found",36)}function te(n,s){1&n&&e._UZ(0,"loading")}const ne=function(n){return{"h-100":n}};let ae=(()=>{class n{constructor(){this.service=(0,e.f3M)(B.y),this.dialog=(0,e.f3M)(b.uw),this.alert=(0,e.f3M)(I.c),this.route=(0,e.f3M)(J.gz),this.data=(0,e.f3M)(b.WI),this.requests=[],this.userBalances=[],this.statistics=[],this.loading=!0,this.currentLang=localStorage.getItem("language")||"en",this.selectedYearSubject=new O.X(Z().format("YYYY")),console.log(this.data)}ngOnInit(){this.service.loading.subscribe(t=>this.loading=t),this.service.year.next(this.selectedYearSubject.value),this.service.userId.next(this.data.data.userId),this.service.hasChanged.pipe((0,y.b)(400),(0,T.w)(()=>(this.service.loading.next(!0),this.service.getUserRequests().pipe((0,f.U)(t=>{this.requests=t,this.service.loading.next(!1)}))))).subscribe(),this.service.hasChanged.pipe((0,y.b)(400),(0,T.w)(()=>(this.service.loading.next(!0),this.service.getBalancesByYear().pipe((0,f.U)(t=>{this.balances=t.data,this.statistics=[{title:"paid_leaves",value:t.data.paidBalance,icon:"paid-leave-primary.svg",background:"rgba(123, 85, 211, 0.08)"},{title:"used_leaves-balance",value:t.data.usedPaid,icon:"paid-leave-red.svg",background:"rgba(211, 47, 47, 0.15)"},{title:"leaves_balance-balance_desc",value:t.data.unPaidBalance,icon:"unpaid-leave-primary.svg",background:"rgba(123, 85, 211, 0.08)"},{title:"leaves_balance-balance",value:t.data.usedUnPaid,icon:"unpaid-leave-red.svg",background:"rgba(211, 47, 47, 0.15)"}],this.service.loading.next(!1)}))))).subscribe()}trackBy(t,i){return i.id}ngOnDestroy(){this.service.loading.next(!0)}onYearChange(t){this.service.year.next(t),this.service.userId.next(this.data.data.userId),this.service.hasChanged.next(!0)}closeDialog(){this.dialog.closeAll()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.Xpm({type:n,selectors:[["virew-details-balance"]],standalone:!0,features:[e.jDz],decls:36,vars:33,consts:[[3,"dir"],[1,"d-flex","align-items-center","justify-content-between","gap-x-2"],[1,"fs-18","black","bold"],[1,"bx","bx-x","fs-25","danger","pointer","p-1",3,"click"],[1,"row","justify-content-between","px-2","mt-2","mb-1"],[1,"col-md-6","d-flex","align-items-center","gap-x-2"],[3,"userId","imgSrc","title","subTitle"],[1,"flex","aic","gap-x-1"],[3,"classes","showLabel","selectedDate","onChange"],[1,"flex-grid-center","my-1","gap-y-2","mx-1"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"mx-2","mb-2"],[1,"table-container"],[1,"table","table-bordered","w-100","relative",3,"ngClass"],[1,"bg-gray","border-bottom"],[1,"text-left",2,"width","32.5%"],[1,"text-left",2,"width","10%"],[1,"text-left",2,"width","12.5%"],[4,"ngIf"],["class","a-center",4,"ngIf"],[1,"col-md-3"],[1,"card","bg-white","relative","leave-card","rounded","py-1"],[1,"card-body","flex-grid-center","mx-0"],[1,"col-sm-12","icon","d-flex","align-items-center","gap-x-1"],[1,"image-container"],["alt","",3,"src"],[1,"d-flex","flex-column"],[1,"bold","fs-40","black","line-height-35"],[1,"fs-16"],["class","border-bottom pointer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","pointer"],[1,"text-left"],[1,"rounded","py-25","px-1","fs-14","bg-pending"],[1,"rounded","py-25","px-1","fs-14","bg-approved"],[1,"rounded","py-25","px-1","fs-14","bg-rejected"],[1,"rounded","py-25","px-1","fs-14","bg-canceled"],[1,"a-center"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"i",3),e.NdJ("click",function(){return a.closeDialog()}),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5),e._UZ(8,"app-img-title",6),e.TgZ(9,"div",7)(10,"app-custom-year-picker",8),e.NdJ("onChange",function(l){return a.service.year.next(l),a.service.hasChanged.next(!0)}),e.qZA()()()(),e.TgZ(11,"div",9),e.YNc(12,W,12,7,"div",10),e.qZA(),e.TgZ(13,"div",11)(14,"div",12)(15,"table",13)(16,"thead",14)(17,"tr")(18,"th",15),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"th",16),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"th",17),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"th",17),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"th",15),e._uU(31),e.ALo(32,"translate"),e.qZA()()(),e.YNc(33,X,2,2,"tbody",18),e.YNc(34,ee,1,0,"not-found",19),e.YNc(35,te,1,0,"loading",18),e.qZA()()()()),2&i&&(e.Q6J("dir","ar"==a.currentLang?"rtl":"ltr"),e.xp6(3),e.Oqu(e.lcZ(4,19,"leave_details")),e.xp6(5),e.Q6J("userId",a.data.data.userId)("imgSrc",a.data.data.userPic)("title",a.data.data.userName)("subTitle",a.data.data.jobTitle),e.xp6(2),e.Q6J("classes","w-12r")("showLabel",!1)("selectedDate",a.selectedYearSubject),e.xp6(2),e.Q6J("ngForOf",a.statistics),e.xp6(3),e.Q6J("ngClass",e.VKq(31,ne,0==a.requests.length||a.loading)),e.xp6(4),e.Oqu(e.lcZ(20,21,"leaves_type")),e.xp6(3),e.Oqu(e.lcZ(23,23,"leave_days")),e.xp6(3),e.Oqu(e.lcZ(26,25,"start_date")),e.xp6(3),e.Oqu(e.lcZ(29,27,"end_date")),e.xp6(3),e.Oqu(e.lcZ(32,29,"leave_status")),e.xp6(2),e.Q6J("ngIf",a.requests.length>0&&!a.loading),e.xp6(1),e.Q6J("ngIf",0==a.requests.length&&!a.loading),e.xp6(1),e.Q6J("ngIf",a.loading))},dependencies:[g.ez,g.mk,g.sg,g.O5,u.JX,h.aw,h.X$,x.ot,R.Lv,z,p.N,m.w,q.P,v.G,S.c,N.UX],styles:[".leaves[_ngcontent-%COMP%]{overflow:auto}.bg-pending[_ngcontent-%COMP%]{color:#606060;background-color:#ececed}.bg-approved[_ngcontent-%COMP%]{color:#29cc99;background-color:#29cc9940}.bg-rejected[_ngcontent-%COMP%]{color:#d32f2f;background-color:#d32f2f40}.leave-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000000a}.leave-info[_ngcontent-%COMP%]{position:absolute;inset-inline-end:10px;top:10px}.line-height-35[_ngcontent-%COMP%]{line-height:35px}.image-container[_ngcontent-%COMP%]{padding:12px;border-radius:50%;height:64px;width:64px}.table-container[_ngcontent-%COMP%]{height:calc(100vh - 250px);overflow:auto}"]})}}return n})();function ie(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"tr",21)(1,"td",19),e._UZ(2,"app-img-title",22),e.qZA(),e.TgZ(3,"td")(4,"div",19),e._uU(5),e.qZA()(),e.TgZ(6,"td",19),e._uU(7),e.qZA(),e.TgZ(8,"td",19),e._uU(9),e.qZA(),e.TgZ(10,"td",19),e._uU(11),e.qZA(),e.TgZ(12,"td")(13,"div",23),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.viewBalance(c))}),e._UZ(14,"img",24),e.qZA()()()}if(2&n){const t=s.$implicit;e.xp6(2),e.Q6J("userId",t.userId)("imgSrc",t.userPic)("title",t.userName),e.xp6(3),e.Oqu(t.jobTitle||"-"),e.xp6(2),e.Oqu(t.total),e.xp6(2),e.Oqu(t.balance),e.xp6(2),e.Oqu(t.used)}}const oe=function(n,s,t){return{itemsPerPage:n,currentPage:s,totalItems:t}};function se(n,s){if(1&n&&(e.TgZ(0,"table",17)(1,"thead",18)(2,"tr")(3,"th",19),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",19),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",19),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",19),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"th",19),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"th"),e._uU(19),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,ie,15,7,"tr",20),e.ALo(23,"paginate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,8,"employeeName")),e.xp6(3),e.Oqu(e.lcZ(8,10,"job_title")),e.xp6(3),e.Oqu(e.lcZ(11,12,"annual_leaves_balance")),e.xp6(3),e.Oqu(e.lcZ(14,14,"annual_leaves_balance_used")),e.xp6(3),e.Oqu(e.lcZ(17,16,"unpaid_leaves_balance")),e.xp6(3),e.Oqu(e.lcZ(20,18,"action")),e.xp6(3),e.Q6J("ngForOf",e.xi3(23,20,t.balances,e.kEZ(23,oe,null==t.meta?null:t.meta.pageSize,null==t.meta?null:t.meta.currentPage,null==t.meta?null:t.meta.totalItems)))("ngForTrackBy",t.trackBy)}}function le(n,s){1&n&&(e.TgZ(0,"div",25),e._UZ(1,"not-found"),e.qZA())}function re(n,s){1&n&&e._UZ(0,"loading")}let ce=(()=>{class n{constructor(){this.service=(0,e.f3M)(M),this.attendanceService=(0,e.f3M)(r.v),this.dialog=(0,e.f3M)(b.uw),this.balances=[],this.loading=!1,this.leaveTypes=new Set,this.teamMembers$=this.attendanceService.getTeamMembers(),this.selectedYearSubject=new O.X(Z().format("YYYY"))}ngOnInit(){this.service.loading.subscribe(t=>this.loading=t),this.service.year.next(this.selectedYearSubject.value),this.service.hasChanged.pipe((0,y.b)(400),(0,T.w)(()=>(this.service.loading.next(!0),this.service.getBalances().pipe((0,f.U)(t=>{this.balances=t.pagedModel.items,this.balances.forEach(i=>{i.balanceDetails.forEach(a=>{this.leaveTypes.add(a.leaveTypeName)})}),this.service.loading.next(!1)}))))).subscribe(),this.service.balanceMeta.subscribe(t=>this.meta=t)}getBalanceForLeaveType(t,i){const a=t.balanceDetails.find(c=>c.leaveTypeName===i);return a?{total:a.total,used:a.total-a.balance}:{total:0,used:0}}exportFile(){this.service.getBalancesFile().subscribe()}changePage(t){this.service.page.next(t),this.service.hasChanged.next(!0)}viewBalance(t){this.dialog.open(ae,{width:"90vw",data:{data:t}})}trackBy(t,i){return i.taskId}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.Xpm({type:n,selectors:[["team-balance"]],standalone:!0,features:[e.jDz],decls:26,vars:34,consts:[[3,"meta","pageChange"],["filters",""],[1,"filters","flex","aie","jcsb","gap-x-4"],[1,"d-flex","aic","jcsb","gap-x-1","mt-1"],[1,"w-15r","overflow-hidden"],[1,"fs-11","bold"],["bindLabel","name","bindValue","id","appendTo","body",1,"w-100","custom-dropdown",3,"items","placeholder","multiple","closeOnSelect","ngModelChange"],[1,"d-flex","flex-column"],[3,"tree","showLabel","labelTitle","classes","valueChanged"],[1,"w-15r",3,"showLabel","label","selectedDate","onChange"],[3,"key","classes","showIcon","icon"],[3,"classes","text","selectedUsers","getSelectedUsers"],["aria-label","Export",1,"btn","rounded","bg-success","white","py-75","px-2","fs-14","d-flex","aic","gap-x-1",3,"click"],["content",""],["class","table","id","attendance",4,"ngIf"],["class","mt-5 pt-5",4,"ngIf"],[4,"ngIf"],["id","attendance",1,"table"],[1,"bg-gray","border-bottom"],[1,"text-left"],["class","border-bottom",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom"],[3,"userId","imgSrc","title"],[1,"img","pointer",3,"click"],["src","assets/images/icons/eye-view.svg","alt","view icon"],[1,"mt-5","pt-5"]],template:function(i,a){1&i&&(e.TgZ(0,"layout-with-filters",0),e.NdJ("pageChange",function(l){return a.changePage(l)}),e.ynx(1,1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"ng-select",6),e.NdJ("ngModelChange",function(l){return a.service.selectedUser.next(l),a.service.hasChanged.next(!0)}),e.ALo(9,"async"),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",7)(12,"app-levels-filter",8),e.NdJ("valueChanged",function(l){return a.service.loading.next(!0),a.service.levels.next(l),a.service.hasChanged.next(!0)}),e.qZA()(),e.TgZ(13,"div",7)(14,"year-filter",9),e.NdJ("onChange",function(l){return a.service.year.next(l),a.service.hasChanged.next(!0)}),e.qZA()(),e.TgZ(15,"div",7),e._UZ(16,"input-label",10),e.ALo(17,"translate"),e.TgZ(18,"select-user",11),e.NdJ("getSelectedUsers",function(l){return a.service.managers.next(l),a.service.hasChanged.next(!0)}),e.qZA()()(),e.TgZ(19,"button",12),e.NdJ("click",function(){return a.exportFile()}),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.BQk(),e.ynx(22,13),e.YNc(23,se,24,27,"table",14),e.YNc(24,le,2,0,"div",15),e.YNc(25,re,1,0,"loading",16),e.BQk(),e.qZA()),2&i&&(e.Q6J("meta",a.meta),e.xp6(6),e.Oqu(e.lcZ(7,24,"team_members")),e.xp6(2),e.Q6J("items",e.lcZ(9,26,a.teamMembers$))("placeholder",e.lcZ(10,28,"select_user"))("multiple",!1)("closeOnSelect",!0),e.xp6(4),e.Q6J("tree",!0)("showLabel",!0)("labelTitle","level_filter")("classes","w-15r py-1"),e.xp6(2),e.Q6J("showLabel",!0)("label","year")("selectedDate",a.selectedYearSubject),e.xp6(2),e.Q6J("key",e.lcZ(17,30,"manager"))("classes","mb-0")("showIcon",!0)("icon","assets/images/icons/user-square.svg"),e.xp6(2),e.Q6J("classes","w-15r")("text","select_manager")("selectedUsers",a.service.managers.value),e.xp6(2),e.hij(" ",e.lcZ(21,32,"export")," "),e.xp6(3),e.Q6J("ngIf",a.balances&&a.balances.length>0&&!a.loading),e.xp6(1),e.Q6J("ngIf",a.balances&&0==a.balances.length&&!a.loading),e.xp6(1),e.Q6J("ngIf",a.loading))},dependencies:[g.ez,g.sg,g.O5,g.Ov,_.Y,p.N,u.JX,u._s,m.w,h.aw,h.X$,d.V,v.G,x.ot,C.A0,C.w9,U.b,P.s,k.i]})}}return n})()}}]);