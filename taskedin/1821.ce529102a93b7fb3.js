"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[1821],{38140:(E,O,i)=>{i.d(O,{Y:()=>g});var n=i(65879),e=i(96814),y=i(89515),C=i(824),b=i(52081),m=i(56223),k=i(76472),M=i(3131);function J(_,f){if(1&_&&(n.TgZ(0,"p",10),n._uU(1),n.ALo(2,"arabicNumbers"),n.ALo(3,"translate"),n.qZA()),2&_){const d=n.oxw();n.xp6(1),n.Oqu(null!=d.meta&&d.meta.pageSize?n.lcZ(2,1,null==d.meta?null:d.meta.pageSize):n.lcZ(3,3,"unlimited"))}}function Z(_,f){if(1&_){const d=n.EpF();n.TgZ(0,"input",11),n.NdJ("ngModelChange",function(T){n.CHM(d);const P=n.oxw();return n.KtG(P.limit=T)})("ngModelChange",function(){n.CHM(d);const T=n.oxw();return n.KtG(T.changeLimit())}),n.qZA()}if(2&_){const d=n.oxw();n.Q6J("ngModel",d.limit)}}function A(_,f){1&_&&(n.TgZ(0,"p",12),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&_&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"record")))}function h(_,f){if(1&_){const d=n.EpF();n.TgZ(0,"pagination-controls",13),n.NdJ("pageChange",function(T){n.CHM(d);const P=n.oxw();return n.KtG(P.pageChanged(T))}),n.ALo(1,"translate"),n.ALo(2,"translate"),n.qZA()}2&_&&n.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",n.lcZ(1,4,"previous"))("nextLabel",n.lcZ(2,6,"next"))}const u=[[["","filters",""]],[["","content",""]]],p=function(_,f){return{height:_,"max-width":f}},v=["[filters]","[content]"];let g=(()=>{class _{constructor(){this.pageChange=new n.vpe,this.limitChanged=new n.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,n.f3M)(M.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(d){this.pageChange.emit(d)}static{this.\u0275fac=function(x){return new(x||_)}}static{this.\u0275cmp=n.Xpm({type:_,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[n.jDz],ngContentSelectors:v,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(x,T){1&x&&(n.F$t(u),n.TgZ(0,"div",0)(1,"div",1),n.Hsn(2),n.qZA(),n.TgZ(3,"div",2),n.Hsn(4,1),n.qZA(),n.TgZ(5,"div",3)(6,"div",4)(7,"p"),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.YNc(10,J,4,5,"p",5),n.YNc(11,Z,1,1,"input",6),n.YNc(12,A,3,3,"p",7),n.qZA(),n.YNc(13,h,3,8,"pagination-controls",8),n.TgZ(14,"p"),n._uU(15),n.ALo(16,"translate"),n.TgZ(17,"span",9),n._uU(18),n.ALo(19,"arabicNumbers"),n.ALo(20,"translate"),n.qZA()()()()),2&x&&(n.Q6J("ngStyle",n.WLB(17,p,T.hasTitle?"calc(100vh - 14.5rem)":T.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",T.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),n.xp6(8),n.hij("",n.lcZ(9,9,"pagination_per_page")," "),n.xp6(2),n.Q6J("ngIf",!T.admin),n.xp6(1),n.Q6J("ngIf",T.admin),n.xp6(1),n.Q6J("ngIf",null==T.meta?null:T.meta.pageSize),n.xp6(1),n.Q6J("ngIf",(null==T.meta?null:T.meta.totalItems)>15),n.xp6(2),n.hij("",n.lcZ(16,11,"pagination_total_records")," "),n.xp6(3),n.AsE("",n.lcZ(19,13,null==T.meta?null:T.meta.totalItems)," ",n.lcZ(20,15,"record"),""))},dependencies:[e.ez,e.O5,e.PC,y.aw,y.X$,C.h,b.m,m.u5,m.Fj,m.wV,m.JJ,m.qQ,m.On,k.JX,k.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return _})()},85195:(E,O,i)=>{i.d(O,{r:()=>Z});var n=i(65879),e=i(96814),y=i(70468),C=i(54807),b=i(56223),m=i(89515);const k=function(A){return{name:A,id:!0}},M=function(A){return{name:A,id:!1}},J=function(A,h){return[A,h]};let Z=(()=>{class A{constructor(){this.valueChanged=new n.vpe,this.translate=(0,n.f3M)(m.sK)}changeValue(u){this.valueChanged.emit(u)}static{this.\u0275fac=function(p){return new(p||A)}}static{this.\u0275cmp=n.Xpm({type:A,selectors:[["assignee-state"]],inputs:{selectedValue:"selectedValue"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[n.jDz],decls:3,vars:11,consts:[[1,"user-state"],["key","assignee_state"],["appendTo","body","bindLabel","name","bindValue","id",1,"w-15r",3,"ngModel","closeOnSelect","items","multiple","ngModelChange"]],template:function(p,v){1&p&&(n.TgZ(0,"div",0),n._UZ(1,"filter-label",1),n.TgZ(2,"ng-select",2),n.NdJ("ngModelChange",function(_){return v.changeValue(_)})("ngModelChange",function(_){return v.selectedValue=_}),n.qZA()()),2&p&&(n.xp6(2),n.Q6J("ngModel",v.selectedValue)("closeOnSelect",!0)("items",n.WLB(8,J,n.VKq(4,k,v.translate.instant("active")),n.VKq(6,M,v.translate.instant("inactive"))))("multiple",!1))},dependencies:[e.ez,y.r,C.A0,C.w9,b.u5,b.JJ,b.On],encapsulation:2})}}return A})()},55237:(E,O,i)=>{i.d(O,{S:()=>u});var n=i(65879),e=i(96814),y=i(70468),C=i(54807),b=i(56223),m=i(89515),k=i(24110);function M(p,v){if(1&p&&n._UZ(0,"filter-label",4),2&p){const g=n.oxw();n.Q6J("key",g.label)}}function J(p,v){if(1&p&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"slice"),n.qZA()),2&p){const g=n.oxw().items;n.xp6(1),n.hij("",n.Dn7(2,1,g[0].name,0,10),"...")}}function Z(p,v){if(1&p&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&p){const g=n.oxw().items;n.xp6(1),n.Oqu(g[0].name)}}function A(p,v){if(1&p&&(n.TgZ(0,"div",11)(1,"span",12),n._uU(2),n.ALo(3,"translate"),n.qZA()()),2&p){const g=n.oxw().items;n.xp6(2),n.AsE("",g.length-1," ",n.lcZ(3,2,"more"),"...")}}function h(p,v){if(1&p){const g=n.EpF();n.TgZ(0,"div",5)(1,"span",6)(2,"span",7),n.YNc(3,J,3,5,"span",8),n.YNc(4,Z,2,1,"span",8),n.qZA()(),n.TgZ(5,"span",9),n.NdJ("click",function(){const f=n.CHM(g);return n.KtG((0,f.clear)(f.items[0]))}),n._uU(6,"\xd7"),n.qZA()(),n.YNc(7,A,4,4,"div",10)}if(2&p){const g=v.items;n.xp6(3),n.Q6J("ngIf",g[0].name.length>=10),n.xp6(1),n.Q6J("ngIf",g[0].name.length<10),n.xp6(3),n.Q6J("ngIf",g.length>1)}}let u=(()=>{class p{constructor(){this.label="departments",this.labelVisibilty=!0,this.width="w-24r",this.multiable=!0,this.closeOnSelect=!1,this.formControlName=null,this.valueChanged=new n.vpe,this.service=(0,n.f3M)(k.U)}onChange(){this.valueChanged.emit(this.selectedDepartment)}static{this.\u0275fac=function(_){return new(_||p)}}static{this.\u0275cmp=n.Xpm({type:p,selectors:[["departments"]],inputs:{selectedDepartment:"selectedDepartment",label:"label",labelVisibilty:"labelVisibilty",width:"width",multiable:"multiable",closeOnSelect:"closeOnSelect",formControlName:"formControlName"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[n.jDz],decls:5,vars:11,consts:[[1,"departments-filter"],[3,"key",4,"ngIf"],["bindLabel","name","bindValue","id","appendTo","body",3,"items","clearSearchOnAdd","multiple","closeOnSelect","ngModel","ngModelChange"],["ng-multi-label-tmp",""],[3,"key"],[1,"ng-value","flex","aic"],[1,"ng-value-label"],[1,"flex","aic","fs-10"],[4,"ngIf"],["aria-hidden","true",1,"ng-value-icon","right",3,"click"],["class","ng-value rounded-2",4,"ngIf"],[1,"ng-value","rounded-2"],[1,"ng-value-label","fs-10"]],template:function(_,f){1&_&&(n.TgZ(0,"div",0),n.YNc(1,M,1,1,"filter-label",1),n.TgZ(2,"ng-select",2),n.NdJ("ngModelChange",function(x){return f.selectedDepartment=x})("ngModelChange",function(){return f.onChange()}),n.ALo(3,"async"),n.YNc(4,h,8,3,"ng-template",3),n.qZA()()),2&_&&(n.xp6(1),n.Q6J("ngIf",f.labelVisibilty),n.xp6(1),n.Gre("",f.width," icon-input"),n.Q6J("items",n.lcZ(3,9,f.service.departments$))("clearSearchOnAdd",!0)("multiple",f.multiable)("closeOnSelect",f.closeOnSelect)("ngModel",f.selectedDepartment))},dependencies:[e.ez,e.O5,e.Ov,e.OU,y.r,C.A0,C.w9,C.zB,b.u5,b.JJ,b.On,m.aw,m.X$],encapsulation:2})}}return p})()},59466:(E,O,i)=>{i.d(O,{i:()=>y});var n=i(65879),e=i(96814);let y=(()=>{class C{constructor(){this.up=new n.vpe,this.down=new n.vpe}ngOnInit(){}sortUp(){this.up.emit(0)}sortDown(){this.down.emit(1)}static{this.\u0275fac=function(k){return new(k||C)}}static{this.\u0275cmp=n.Xpm({type:C,selectors:[["sorting"]],outputs:{up:"up",down:"down"},standalone:!0,features:[n.jDz],decls:3,vars:0,consts:[[1,"flex-column-center"],[1,"bx","bx-chevron-up","fs-18","pointer",3,"click"],[1,"bx","bx-chevron-down","fs-18","pointer",3,"click"]],template:function(k,M){1&k&&(n.TgZ(0,"div",0)(1,"i",1),n.NdJ("click",function(){return M.sortUp()}),n.qZA(),n.TgZ(2,"i",2),n.NdJ("click",function(){return M.sortDown()}),n.qZA()())},dependencies:[e.ez],styles:[".bx[_ngcontent-%COMP%]{line-height:.6}"]})}}return C})()},65509:(E,O,i)=>{i.d(O,{l:()=>J});var n=i(83620),e=i(94664),y=i(37398),C=i(65619),b=i(69862),m=i(20553),k=i(34673),M=i(65879);let J=(()=>{class Z extends k.q{constructor(h){super(),this.http=h,this.tasks$=this.hasChanged.pipe((0,n.b)(400),(0,e.w)(()=>this.getTasks().pipe((0,y.U)(u=>u)))),this.selectedTasksToHandover=new C.X([]),this.selectedTasksToHandoverValue=[],this.spaceId=localStorage.getItem("space-id"),this.token=localStorage.getItem("token"),this.url=`${m.N.apiUrl}api/Tasks/GetAllTasksExcel`,this.selectedTasksToHandover.subscribe(u=>this.selectedTasksToHandoverValue=u)}getTasks(){this.loading.next(!0);const h=new URL(`${m.N.apiUrl}api/Tasks/GetAllTasks`);return this.params(h,"all-tasks"),this.http.get(`${h}`).pipe((0,y.U)(u=>{this.loading.next(!1);let p=u.data.items;return p.forEach(v=>{v.isSelected=this.selectedTasksToHandoverValue.find(g=>v.taskId==g.taskId)}),this.setMeta(u),p}))}handover(h){return this.http.put(`${m.N.apiUrl}api/Tasks/Handover`,{newAssigneeId:h,handOverTasksIds:this.selectedTasksToHandoverValue.map(u=>u.taskId)})}changeCreator(h){return this.http.post(`${m.N.apiUrl}api/TaskGroups/ChangeTaskCreator`,{userId:h,taskGroupId:this.selectedTasksToHandoverValue.map(u=>u.taskGroupId)})}getTasksExcel(h){const u=new b.WM({accept:"/"});return this.http.get(this.url,{headers:u,responseType:"blob",params:h})}getTaskProps(h){return this.http.post(`${m.N.apiUrl}api/TaskGroups/GetTaskProps?taskId=${h}`,{})}static{this.\u0275fac=function(u){return new(u||Z)(M.LFG(b.eN))}}static{this.\u0275prov=M.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"})}}return Z})()},31821:(E,O,i)=>{i.r(O),i.d(O,{AllTasksComponent:()=>ct});var n=i(96814),e=i(65879),y=i(86760),C=i(52868),b=i(63243),m=i(824),k=i(75986),M=i(22931),J=i(24971),Z=i(10480),A=i(58697),h=i(86817),u=i(13249),p=i(89515),v=i(65509),g=i(55237),_=i(85195),f=i(70468),d=i(54807),x=i(56223),T=i(52081);function P(s,r){1&s&&(e._uU(0),e.ALo(1,"translate")),2&s&&e.hij(" ",e.lcZ(1,1,r.item.name)," ")}function Y(s,r){if(1&s&&(e.TgZ(0,"span",5),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s){const t=r.item;e.xp6(1),e.Oqu(e.lcZ(2,1,t.name))}}let R=(()=>{class s{constructor(t,l){this.translate=t,this.arabicNumber=l,this.valueChanged=new e.vpe,this.label="rate_value",this.list=[{name:this.arabicNumber.transform(1),value:1},{name:this.arabicNumber.transform(2),value:2},{name:this.arabicNumber.transform(3),value:3},{name:this.arabicNumber.transform(4),value:4},{name:this.arabicNumber.transform(5),value:5}]}ngOnInit(){}onChange(){this.valueChanged.emit(this.selectedValue)}static{this.\u0275fac=function(l){return new(l||s)(e.Y36(p.sK),e.Y36(T.m))}}static{this.\u0275cmp=e.Xpm({type:s,selectors:[["rate-value"]],inputs:{selectedValue:"selectedValue",label:"label"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[e.jDz],decls:5,vars:5,consts:[[1,"rate-value"],[3,"key"],["bindLabel","name","bindValue","value","appendTo","body",1,"w-17r",3,"items","ngModel","multiple","closeOnSelect","ngModelChange"],["ng-option-tmp",""],["ng-label-tmp",""],[1,"fs-14","px-50","rounded-5"]],template:function(l,a){1&l&&(e.TgZ(0,"div",0),e._UZ(1,"filter-label",1),e.TgZ(2,"ng-select",2),e.NdJ("ngModelChange",function(c){return a.selectedValue=c})("ngModelChange",function(){return a.onChange()}),e.YNc(3,P,2,3,"ng-template",3),e.YNc(4,Y,3,3,"ng-template",4),e.qZA()()),2&l&&(e.xp6(1),e.Q6J("key",a.label),e.xp6(1),e.Q6J("items",a.list)("ngModel",a.selectedValue)("multiple",!0)("closeOnSelect",!1))},dependencies:[n.ez,p.aw,p.X$,f.r,d.A0,d.w9,d.ir,d.mR,x.u5,x.JJ,x.On],encapsulation:2})}}return s})();var w=i(32296),I=i(17700),L=i(1350),Q=i(99758),q=i(68671),F=i(49388);let G=(()=>{class s{constructor(){this.loading=!1,this.selectedValue=[],this.service=(0,e.f3M)(v.l),this.alert=(0,e.f3M)(Q.c),this.dialog=(0,e.f3M)(I.uw),this.chatSer=(0,e.f3M)(q.a)}handover(){this.loading=!0,this.service.handover(this.selectedValue[0].id).subscribe(t=>{t.success&&(this.alert.showAlert("handover_success"),this.dialog.closeAll(),this.service.hasChanged.next(!0),this.service.selectedTasksToHandoverValue.map(l=>{this.chatSer.refreshTaskUser(l.taskGroupId).subscribe()}),this.service.selectedTasksToHandover.next([])),this.loading=!1})}static{this.\u0275fac=function(l){return new(l||s)}}static{this.\u0275cmp=e.Xpm({type:s,selectors:[["handover"]],standalone:!0,features:[e.jDz],decls:14,vars:11,consts:[["dir","auto",1,"handover"],["mat-dialog-content",""],["key","assignees"],["text","assignee","classes","w-100",3,"multi","getSelectedUsers"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","primary",1,"px-4",3,"disabled","click"],["mat-raised-button","","mat-dialog-close","",1,"px-3"]],template:function(l,a){1&l&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1),e._UZ(5,"input-label",2),e.TgZ(6,"select-user",3),e.NdJ("getSelectedUsers",function(c){return a.selectedValue=c}),e.qZA()(),e.TgZ(7,"div",4)(8,"button",5),e.NdJ("click",function(){return a.handover()}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",6),e._uU(12),e.ALo(13,"translate"),e.qZA()()()),2&l&&(e.xp6(2),e.Oqu(e.lcZ(3,5,"handover")),e.xp6(4),e.Q6J("multi",!1),e.xp6(2),e.Q6J("disabled",!a.selectedValue.length),e.xp6(1),e.Oqu(e.lcZ(10,7,"save")),e.xp6(3),e.Oqu(e.lcZ(13,9,"cancel")))},dependencies:[n.ez,p.aw,p.X$,I.Is,I.ZT,I.xY,I.H8,F.Lv,L.i,Z.V,w.ot,w.lW],encapsulation:2})}}return s})();function B(s,r){1&s&&(e._uU(0),e.ALo(1,"translate")),2&s&&e.hij(" ",e.lcZ(1,1,r.item.name)," ")}function W(s,r){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"slice"),e.ALo(3,"translate"),e.qZA()),2&s){const t=e.oxw().items;e.xp6(1),e.hij("",e.Dn7(2,1,e.lcZ(3,5,t[0].name),0,10),"...")}}function $(s,r){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw().items;e.xp6(1),e.Oqu(e.lcZ(2,1,t[0].name))}}function j(s,r){if(1&s&&(e.TgZ(0,"div",11)(1,"span",12),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&s){const t=e.oxw().items;e.xp6(2),e.AsE("",t.length-1," ",e.lcZ(3,2,"more"),"...")}}function z(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",5)(1,"span",6)(2,"span",7),e.YNc(3,W,4,7,"span",8),e.YNc(4,$,3,3,"span",8),e.qZA()(),e.TgZ(5,"span",9),e.NdJ("click",function(){const a=e.CHM(t);return e.KtG((0,a.clear)(a.items[0]))}),e._uU(6,"\xd7"),e.qZA()(),e.YNc(7,j,4,4,"div",10)}if(2&s){const t=r.items;e.xp6(3),e.Q6J("ngIf",t[0].name.length>=10),e.xp6(1),e.Q6J("ngIf",t[0].name.length<10),e.xp6(3),e.Q6J("ngIf",t.length>1)}}let X=(()=>{class s{constructor(t){this.translate=t,this.valueChanged=new e.vpe,this.selectedValue=null,this.repeatPeriods=[{name:this.translate.instant("daily"),id:1},{name:this.translate.instant("weekly"),id:2},{name:this.translate.instant("monthly"),id:3},{name:this.translate.instant("yearly"),id:4},{name:this.translate.instant("not_repeated"),id:6},{name:this.translate.instant("stopped_repeat"),id:7}]}changeValue(t){this.valueChanged.emit(t)}static{this.\u0275fac=function(l){return new(l||s)(e.Y36(p.sK))}}static{this.\u0275cmp=e.Xpm({type:s,selectors:[["repeat"]],inputs:{selectedValue:"selectedValue"},outputs:{valueChanged:"valueChanged"},standalone:!0,features:[e.jDz],decls:5,vars:5,consts:[[1,"repeat"],["key","repeat"],["appendTo","body","bindLabel","name","bindValue","id",1,"w-20r",3,"ngModel","clearSearchOnAdd","closeOnSelect","items","multiple","ngModelChange"],["ng-option-tmp",""],["ng-multi-label-tmp",""],[1,"ng-value","flex","aic"],[1,"ng-value-label"],[1,"flex","aic","fs-11"],[4,"ngIf"],["aria-hidden","true",1,"ng-value-icon","right",3,"click"],["class","ng-value rounded-2",4,"ngIf"],[1,"ng-value","rounded-2"],[1,"ng-value-label","fs-11"]],template:function(l,a){1&l&&(e.TgZ(0,"div",0),e._UZ(1,"input-label",1),e.TgZ(2,"ng-select",2),e.NdJ("ngModelChange",function(c){return a.changeValue(c)})("ngModelChange",function(c){return a.selectedValue=c}),e.YNc(3,B,2,3,"ng-template",3),e.YNc(4,z,8,3,"ng-template",4),e.qZA()()),2&l&&(e.xp6(2),e.Q6J("ngModel",a.selectedValue)("clearSearchOnAdd",!0)("closeOnSelect",!0)("items",a.repeatPeriods)("multiple",!1))},dependencies:[n.ez,n.O5,n.OU,d.A0,d.w9,d.ir,d.zB,p.aw,p.X$,x.u5,x.JJ,x.On,L.i]})}}return s})(),ee=(()=>{class s{constructor(){this.loading=!1,this.selectedValue=[],this.service=(0,e.f3M)(v.l),this.alert=(0,e.f3M)(Q.c),this.dialog=(0,e.f3M)(I.uw),this.chatSer=(0,e.f3M)(q.a)}changeCreator(){this.loading=!0,this.service.changeCreator(this.selectedValue[0].id).subscribe(t=>{t.success&&(this.alert.showAlert("change_creator_success"),this.dialog.closeAll(),this.service.hasChanged.next(!0),this.service.selectedTasksToHandoverValue.map(l=>{this.chatSer.refreshTaskUser(l.taskGroupId).subscribe()}),this.service.selectedTasksToHandover.next([])),this.loading=!1})}static{this.\u0275fac=function(l){return new(l||s)}}static{this.\u0275cmp=e.Xpm({type:s,selectors:[["change-creator"]],standalone:!0,features:[e.jDz],decls:14,vars:11,consts:[["dir","auto",1,"change-creator"],["mat-dialog-content",""],["key","creator"],["text","creator","classes","w-100",3,"multi","getSelectedUsers"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","primary",1,"px-4",3,"disabled","click"],["mat-raised-button","","mat-dialog-close","",1,"px-3"]],template:function(l,a){1&l&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1),e._UZ(5,"input-label",2),e.TgZ(6,"select-user",3),e.NdJ("getSelectedUsers",function(c){return a.selectedValue=c}),e.qZA()(),e.TgZ(7,"div",4)(8,"button",5),e.NdJ("click",function(){return a.changeCreator()}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",6),e._uU(12),e.ALo(13,"translate"),e.qZA()()()),2&l&&(e.xp6(2),e.Oqu(e.lcZ(3,5,"change_creator")),e.xp6(4),e.Q6J("multi",!1),e.xp6(2),e.Q6J("disabled",!a.selectedValue.length),e.xp6(1),e.Oqu(e.lcZ(10,7,"save")),e.xp6(3),e.Oqu(e.lcZ(13,9,"cancel")))},dependencies:[n.ez,F.vT,F.Lv,L.i,w.ot,w.lW,I.Is,I.ZT,I.xY,I.H8,Z.V,p.aw,p.X$]})}}return s})();var te=i(69862);function ne(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"task-type",3),e.NdJ("valueChanged",function(a){e.CHM(t);const o=e.oxw();return o.service.taskType.next(a),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("selectedValue",t.service.taskType.value)}}function se(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"priority-filter",3),e.NdJ("valueChanged",function(a){e.CHM(t);const o=e.oxw();return o.service.priority.next(a),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("selectedValue",t.service.priority.value)}}function ae(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"repeat",3),e.NdJ("valueChanged",function(a){e.CHM(t);const o=e.oxw();return o.service.repeatPeriod.next(a),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("selectedValue",t.service.repeatPeriod.value)}}function le(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"departments",17),e.NdJ("valueChanged",function(a){e.CHM(t);const o=e.oxw();return o.service.department.next(a),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("selectedDepartment",t.service.department.value)}}function ie(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"assignee-state",3),e.NdJ("valueChanged",function(a){e.CHM(t);const o=e.oxw();return o.service.assigneeState.next(a),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("selectedValue",t.service.assigneeState.value)}}function oe(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"is-rated",3),e.NdJ("valueChanged",function(a){e.CHM(t);const o=e.oxw();return o.service.rated.next(a),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("selectedValue",t.service.rated.value)}}function re(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"rate-value",3),e.NdJ("valueChanged",function(a){e.CHM(t);const o=e.oxw();return o.service.rateValue.next(a),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("selectedValue",t.service.rateValue.value)}}function ce(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"is-overdue",3),e.NdJ("valueChanged",function(a){e.CHM(t);const o=e.oxw();return o.service.isOverdue.next(a),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("selectedValue",t.service.isOverdue.value)}}function pe(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"date-filter",18),e.NdJ("valueChanged",function(a){e.CHM(t);const o=e.oxw();return o.service.dateFrom.next(a),o.service.dateTo.next(""),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("selectedValue",t.service.dateFrom.value)}}function _e(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"date-filter",19),e.NdJ("valueChanged",function(a){e.CHM(t);const o=e.oxw();return o.service.dateTo.next(a),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("minDate",t.service.dateFrom.value)("selectedValue",t.service.dateTo.value)}}function de(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"select-user",20),e.NdJ("getSelectedUsers",function(a){e.CHM(t);const o=e.oxw();return o.service.creators.next(a),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("selectedUsers",t.service.creators.value)}}function ue(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"select-user",21),e.NdJ("getSelectedUsers",function(a){e.CHM(t);const o=e.oxw();return o.service.assignees.next(a),e.KtG(o.filter())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("selectedUsers",t.service.assignees.value)}}function ge(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.export.emit())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"export")))}function me(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.downloadExcel())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"export")))}function he(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",25)(1,"mat-checkbox",26),e.NdJ("change",function(){const o=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.unCheck(o))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=r.$implicit,l=e.oxw(2);e.xp6(1),e.Q6J("checked",l.visibleFilters[t])("indeterminate",!1)("labelPosition","after"),e.xp6(1),e.hij(" ",e.lcZ(3,4,t)," ")}}function ve(s,r){if(1&s&&(e.TgZ(0,"div",23),e.NdJ("click",function(l){return l.stopImmediatePropagation()}),e.YNc(1,he,4,6,"div",24),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.filtersArray)}}const V=function(s){return{"bg-primary white":s}};let fe=(()=>{class s{constructor(t){this.datePipe=t,this.export=new e.vpe,this.service=(0,e.f3M)(v.l),this.dialog=(0,e.f3M)(I.uw),this.showFilters=!1,this.customSpaceId=localStorage.getItem("space-id"),this.visibleFilters={creators:this.service.creators.value.length>0,assignees:this.service.assignees.value.length>0,task_type:this.service.taskType.value.length>0,priority:this.service.priority.value.length>0,repeatPeriod:this.service.repeatPeriod.value,departments:this.service.department.value.length>0,assignee_state:this.service.department.value.length>0,overdue:1==this.service.isOverdue.value||0==this.service.isOverdue.value,rate:this.service.rated.value,rate_value:this.service.rateValue.value.length>0,date:!0},this.filtersArray=Object.keys(this.visibleFilters).map(l=>l)}filter(){this.service.filter()}handover(){this.dialog.open(G,{panelClass:"dialog-message",data:{tasks:this.service.selectedTasksToHandoverValue}})}changeCreator(){this.dialog.open(ee,{panelClass:"dialog-message",data:{tasks:this.service.selectedTasksToHandoverValue}})}unCheck(t){this.visibleFilters[t]=!this.visibleFilters[t]}documentClickEvent(t){this.showFilters=!1}downloadExcel(){let t=new te.LE;const l=[{key:"states",value:this.service.taskStatus.value},{key:"priorities",value:this.service.priority.value},{key:"rate",value:this.service.rateValue.value},{key:"TaskGroupType",value:this.service.taskType.value},{key:"assigneeDepartments",value:this.service.department.value}],a=[{key:"creators",value:this.service.creators.value},{key:"assignees",value:this.service.assignees.value}];l.forEach(c=>{c.value.length>0&&c.value.forEach(U=>{t=t.append(c.key,U.toString())})}),a.forEach(c=>{c.value.length>0&&c.value.forEach(U=>{t=t.append(c.key,U.id.toString())})}),[{key:"search",value:this.service.search.value},{key:"isRated",value:this.service.rated.value},{key:"isRepeated",value:this.service.repeatPeriod.value},{key:"taskRepeatedPeriod",value:this.service.repeatPeriod.value},{key:"assigneeIsActive",value:this.service.assigneeState.value},{key:"startDateFrom",value:this.datePipe.transform(this.service.dateFrom.value,"yyyy-MM-ddT00:00:01")},{key:"startDateTo",value:this.datePipe.transform(this.service.dateTo.value,"yyyy-MM-ddT11:59:59")}].forEach(c=>{c.value&&(t=t.set(c.key,c.value.toString()))}),this.service.getTasksExcel(t).subscribe(c=>{console.log(l);const U=window.URL.createObjectURL(c),S=document.createElement("a");S.href=U,S.download=`Tasks_${(new Date).toISOString().replace(/[-:T]/g,"").split(".")[0]}.xlsx`,S.click(),window.URL.revokeObjectURL(U)})}static{this.\u0275fac=function(l){return new(l||s)(e.Y36(n.uU))}}static{this.\u0275cmp=e.Xpm({type:s,selectors:[["all-tasks-filter"]],hostBindings:function(l,a){1&l&&e.NdJ("click",function(c){return a.documentClickEvent(c)},!1,e.evT)},outputs:{export:"export"},standalone:!0,features:[e.jDz],decls:29,vars:34,consts:[[1,"filters","flex","aic","jcsb","gap-x-4"],[1,"flex-wrap","aic","gap-x-1","gap-y-1"],[3,"key","valueChanged"],[3,"selectedValue","valueChanged"],[3,"selectedValue","valueChanged",4,"ngIf"],[3,"selectedDepartment","valueChanged",4,"ngIf"],["key","start_date",3,"selectedValue","valueChanged",4,"ngIf"],["key","end_date",3,"minDate","selectedValue","valueChanged",4,"ngIf"],["class","no-label","text","creators",3,"selectedUsers","getSelectedUsers",4,"ngIf"],["class","no-label","text","assignees",3,"selectedUsers","getSelectedUsers",4,"ngIf"],[1,"end","flex","aic","gap-x-2","pt-75"],["mat-raised-button","",3,"ngClass","disabled","click"],["mat-raised-button","","class","bg-success export",3,"click",4,"ngIf"],[3,"selectedValue","sortChanged"],[1,"img","relative","pointer",3,"click"],["alt","","src","assets/images/icons/filters.svg",1,"convert-image-color"],["class","filters-menu bg-white p-1 rounded","magicScroll","",3,"click",4,"ngIf"],[3,"selectedDepartment","valueChanged"],["key","start_date",3,"selectedValue","valueChanged"],["key","end_date",3,"minDate","selectedValue","valueChanged"],["text","creators",1,"no-label",3,"selectedUsers","getSelectedUsers"],["text","assignees",1,"no-label",3,"selectedUsers","getSelectedUsers"],["mat-raised-button","",1,"bg-success","export",3,"click"],["magicScroll","",1,"filters-menu","bg-white","p-1","rounded",3,"click"],["class","menu-item",4,"ngFor","ngForOf"],[1,"menu-item"],["color","primary",3,"checked","indeterminate","labelPosition","change"]],template:function(l,a){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"search",2),e.NdJ("valueChanged",function(c){return a.service.search.next(c),a.filter()}),e.qZA(),e.TgZ(3,"task-status",3),e.NdJ("valueChanged",function(c){return a.service.taskStatus.next(c),a.filter()}),e.qZA(),e.YNc(4,ne,1,1,"task-type",4),e.YNc(5,se,1,1,"priority-filter",4),e.YNc(6,ae,1,1,"repeat",4),e.YNc(7,le,1,1,"departments",5),e.YNc(8,ie,1,1,"assignee-state",4),e.YNc(9,oe,1,1,"is-rated",4),e.YNc(10,re,1,1,"rate-value",4),e.YNc(11,ce,1,1,"is-overdue",4),e.YNc(12,pe,1,1,"date-filter",6),e.YNc(13,_e,1,2,"date-filter",7),e.YNc(14,de,1,1,"select-user",8),e.YNc(15,ue,1,1,"select-user",9),e.qZA(),e.TgZ(16,"div",10)(17,"button",11),e.NdJ("click",function(){return a.changeCreator()}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"button",11),e.NdJ("click",function(){return a.handover()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.YNc(23,ge,3,3,"button",12),e.YNc(24,me,3,3,"button",12),e.TgZ(25,"task-vote-sort",13),e.NdJ("sortChanged",function(c){return a.service.orderKey.next(c),a.filter()}),e.qZA(),e.TgZ(26,"div",14),e.NdJ("click",function(c){return c.stopImmediatePropagation(),a.showFilters=!0}),e._UZ(27,"img",15),e.YNc(28,ve,2,1,"div",16),e.qZA()()()),2&l&&(e.xp6(2),e.Q6J("key",a.service.search.value),e.xp6(1),e.Q6J("selectedValue",a.service.taskStatus.value),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.task_type),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.priority),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.repeatPeriod),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.departments),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.assignee_state),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.rate),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.rate_value),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.overdue),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.date),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.date),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.creators),e.xp6(1),e.Q6J("ngIf",a.visibleFilters.assignees),e.xp6(2),e.Q6J("ngClass",e.VKq(30,V,a.service.selectedTasksToHandoverValue.length>0))("disabled",0==a.service.selectedTasksToHandoverValue.length),e.xp6(1),e.AsE(" ",e.lcZ(19,26,"change_creator")," (",a.service.selectedTasksToHandoverValue.length,") "),e.xp6(2),e.Q6J("ngClass",e.VKq(32,V,a.service.selectedTasksToHandoverValue.length>0))("disabled",0==a.service.selectedTasksToHandoverValue.length),e.xp6(1),e.AsE(" ",e.lcZ(22,28,"handover")," (",a.service.selectedTasksToHandoverValue.length,") "),e.xp6(2),e.Q6J("ngIf","98989"!=a.customSpaceId),e.xp6(1),e.Q6J("ngIf","98989"==a.customSpaceId),e.xp6(1),e.Q6J("selectedValue",a.service.orderKey.value),e.xp6(3),e.Q6J("ngIf",a.showFilters))},dependencies:[n.ez,n.mk,n.sg,n.O5,y.g,C.V,b.N,m.h,k.p9,k.oG,M.X,J.g,Z.V,A.h,h.U,u.v,p.aw,p.X$,g.S,_.r,R,w.ot,w.lW,X]})}}return s})();var Te=i(38140),xe=i(59466),H=i(76472),Ce=i(39326),ke=i(45843),K=i(92596),Ae=i(9619),Ze=i(94279),be=i(28591),ye=i(82424),Me=i(57105),Oe=i(65668),N=i(11486),D=i(64190),Ie=i(9798),Je=i(61706),Ue=i(85447),we=i(88730),Ee=i(19300),Pe=i(20553);const Ne=["dialogTemplate"];function Le(s,r){if(1&s&&(e.TgZ(0,"span",41),e._uU(1),e.ALo(2,"slice"),e.qZA()),2&s){const t=e.oxw().$implicit;e.MGl("routerLink","/admin/tasks/task-details/",t.taskId,""),e.Q6J("matTooltip",t.title),e.xp6(1),e.hij("",e.Dn7(2,3,t.title,0,30),"... ")}}function Fe(s,r){if(1&s&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&s){const t=e.oxw().$implicit;e.MGl("routerLink","/admin/tasks/task-details/",t.taskId,""),e.xp6(1),e.Oqu(t.title)}}function De(s,r){if(1&s&&(e.TgZ(0,"user-image",43),e.NdJ("click",function(l){return l.stopImmediatePropagation()}),e.qZA()),2&s){const t=e.oxw().$implicit;e.Q6J("dim",30)("id",t.creatorId)("img",t.creatorProfilePicture)("matTooltip",t.creatorName)}}function Se(s,r){if(1&s&&(e.TgZ(0,"user-image",43),e.NdJ("click",function(l){return l.stopImmediatePropagation()}),e.qZA()),2&s){const t=e.oxw().$implicit;e.Q6J("dim",30)("id",t.assigneeId)("img",t.assigneeProfilePicture)("matTooltip",t.assigneeName)}}function Qe(s,r){1&s&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"active")))}function qe(s,r){1&s&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"inactive")))}function Ve(s,r){1&s&&(e.TgZ(0,"p",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"repeated"),""))}function He(s,r){1&s&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function Ke(s,r){if(1&s&&e._UZ(0,"task-vote-progress",45),2&s){const t=e.oxw().$implicit;e.Q6J("progress",t.percentage)}}function Ye(s,r){1&s&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function Re(s,r){if(1&s&&(e.ynx(0),e._UZ(1,"rate",46),e.BQk()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("rate",t.rate)}}function Ge(s,r){1&s&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function Be(s,r){if(1&s&&e._UZ(0,"task-overdue",47),2&s){const t=e.oxw().$implicit;e.Q6J("endedTaskRepeatedCounter",t.endedTaskRepeatedCounter)}}function We(s,r){1&s&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function $e(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"tr",18),e.NdJ("click",function(){const o=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.openDetails(o))}),e.TgZ(1,"td",19)(2,"div",20)(3,"mat-checkbox",21),e.NdJ("click",function(a){return a.stopImmediatePropagation()})("change",function(a){const c=e.CHM(t).$implicit,U=e.oxw(2);return e.KtG(U.selectTask(a,c))}),e.qZA(),e.TgZ(4,"i",22),e.NdJ("click",function(a){const c=e.CHM(t).$implicit,U=e.oxw(2);return a.stopImmediatePropagation(),e.KtG(U.getTaskProps(c.taskId))}),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",23),e._UZ(7,"priority",24),e.qZA(),e.YNc(8,Le,3,7,"span",25),e.YNc(9,Fe,2,2,"span",26),e.qZA()(),e.TgZ(10,"td",27)(11,"div",11),e.YNc(12,De,1,4,"user-image",28),e.TgZ(13,"p",29),e._uU(14),e.qZA()()(),e.TgZ(15,"td",27)(16,"div",11),e.YNc(17,Se,1,4,"user-image",28),e.TgZ(18,"p",29),e._uU(19),e.qZA()()(),e.TgZ(20,"td",30),e._uU(21),e.qZA(),e.TgZ(22,"td",31)(23,"div",13),e.YNc(24,Qe,3,3,"span",5),e.YNc(25,qe,3,3,"span",5),e.qZA()(),e.TgZ(26,"td",32)(27,"div",33)(28,"p",34),e._uU(29),e.ALo(30,"arabicDate"),e.qZA(),e.TgZ(31,"p"),e._uU(32),e.ALo(33,"arabicDate"),e.qZA()()(),e.TgZ(34,"td"),e._UZ(35,"task-status",35),e.qZA(),e.TgZ(36,"td"),e._uU(37),e.ALo(38,"convertMinutes"),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"td"),e.YNc(41,Ve,3,3,"p",36),e.YNc(42,He,2,0,"span",5),e.qZA(),e.TgZ(43,"td")(44,"div",14),e.YNc(45,Ke,1,1,"task-vote-progress",37),e.YNc(46,Ye,2,0,"span",5),e.qZA()(),e.TgZ(47,"td")(48,"div",14),e.YNc(49,Re,2,1,"ng-container",38),e.YNc(50,Ge,2,0,"ng-template",null,39,e.W1O),e.qZA()(),e.TgZ(52,"td")(53,"div",14),e.YNc(54,Be,1,1,"task-overdue",40),e.YNc(55,We,2,0,"span",5),e.qZA()()()}if(2&s){const t=r.$implicit,l=e.MAs(51),a=e.oxw(2);e.xp6(3),e.Q6J("disabled",1!=t.taskStateId&&3!=t.taskStateId&&7!=t.taskStateId)("checked",t.isSelected),e.xp6(1),e.s9C("matTooltip",e.lcZ(5,25,"show_answers")),e.xp6(3),e.Q6J("priority",t.priority),e.xp6(1),e.Q6J("ngIf",t.title.length>30),e.xp6(1),e.Q6J("ngIf",t.title.length<=30),e.xp6(3),e.Q6J("ngIf",a.service.limit.value<101),e.xp6(2),e.Oqu(t.creatorName),e.xp6(3),e.Q6J("ngIf",a.service.limit.value<101),e.xp6(2),e.Oqu(t.assigneeName),e.xp6(2),e.hij(" ",t.assigneeDepartementName," "),e.xp6(3),e.Q6J("ngIf",t.assigneeStatus),e.xp6(1),e.Q6J("ngIf",!t.assigneeStatus),e.xp6(4),e.Oqu(e.xi3(30,27,t.startDate,"typicalDate")),e.xp6(3),e.Oqu(e.xi3(33,30,t.endDate,"typicalDate")),e.xp6(3),e.Q6J("state",t.taskStateId),e.xp6(2),e.hij(" ",t.actualTime?e.xi3(38,33,t.actualTime,"minutes")+" "+e.lcZ(39,36,"h"):"-"," "),e.xp6(4),e.Q6J("ngIf",t.isRepeated),e.xp6(1),e.Q6J("ngIf",!t.isRepeated),e.xp6(3),e.Q6J("ngIf",t.percentage>0||3==t.taskStateId),e.xp6(1),e.Q6J("ngIf",!t.percentage&&3!=t.taskStateId),e.xp6(3),e.Q6J("ngIf",2==t.taskStateId)("ngIfElse",l),e.xp6(5),e.Q6J("ngIf",t.endedTaskRepeatedCounter>0),e.xp6(1),e.Q6J("ngIf",0==t.endedTaskRepeatedCounter)}}const je=function(s,r,t){return{itemsPerPage:s,currentPage:r,totalItems:t}};function ze(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"table",8)(1,"thead",9)(2,"tr")(3,"th",10)(4,"div",11)(5,"mat-checkbox",12),e.NdJ("change",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.selectAllTasks(a))}),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"th",10),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"th",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"th",10),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"th",13),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"th",13),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"th",13),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"th",13),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"th",13),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"th")(33,"div",14)(34,"p",15),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"sorting",16),e.NdJ("up",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.sort("5",a))})("down",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.sort("5",a))}),e.qZA()()(),e.TgZ(38,"th")(39,"div",14)(40,"p",15),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"sorting",16),e.NdJ("up",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.sort("4",a))})("down",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.sort("4",a))}),e.qZA()()(),e.TgZ(44,"th")(45,"div",14)(46,"p",15),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"sorting",16),e.NdJ("up",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.sort("6",a))})("down",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.sort("6",a))}),e.qZA()()()()(),e.TgZ(50,"tbody"),e.YNc(51,$e,56,38,"tr",17),e.ALo(52,"paginate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(5),e.Q6J("checked",t.allChecked),e.xp6(1),e.hij(" ",e.lcZ(7,15,"title")," "),e.xp6(3),e.Oqu(e.lcZ(10,17,"creator")),e.xp6(3),e.Oqu(e.lcZ(13,19,"assignee")),e.xp6(3),e.Oqu(e.lcZ(16,21,"department")),e.xp6(3),e.Oqu(e.lcZ(19,23,"assignee_state")),e.xp6(3),e.Oqu(e.lcZ(22,25,"date")),e.xp6(3),e.Oqu(e.lcZ(25,27,"status")),e.xp6(3),e.Oqu(e.lcZ(28,29,"actual_time")),e.xp6(3),e.Oqu(e.lcZ(31,31,"repeated")),e.xp6(5),e.Oqu(e.lcZ(36,33,"progress")),e.xp6(6),e.Oqu(e.lcZ(42,35,"rate")),e.xp6(6),e.Oqu(e.lcZ(48,37,"overdue")),e.xp6(4),e.Q6J("ngForOf",e.xi3(52,39,t.tasks,e.kEZ(42,je,t.meta.pageSize,t.meta.currentPage,t.meta.totalItems)))("ngForTrackBy",t.trackBy)}}function Xe(s,r){1&s&&e._UZ(0,"not-found")}function et(s,r){1&s&&e._UZ(0,"loading",48),2&s&&e.Q6J("height",!0)}function tt(s,r){1&s&&(e.TgZ(0,"div",56),e._UZ(1,"loading"),e.qZA())}function nt(s,r){1&s&&(e.TgZ(0,"div",57),e._UZ(1,"not-found"),e.qZA())}function st(s,r){if(1&s&&e._UZ(0,"i"),2&s){const t=e.oxw().$implicit;e.Gre("fs-20 bx bx-","true"==(null==t?null:t.value)?"check-circle success":"x-circle danger","")}}function at(s,r){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.Oqu((null==t?null:t.value)||"-")}}function lt(s,r){if(1&s&&(e.TgZ(0,"a",70),e._uU(1),e.qZA()),2&s){const t=e.oxw().$implicit,l=e.oxw(3);e.Q6J("href",l.url+"Companies/"+l.spaceId+"/attachments/"+t.value,e.LSH),e.xp6(1),e.Oqu(t.value)}}function it(s,r){if(1&s&&(e.TgZ(0,"tr",66)(1,"td",67),e._uU(2),e.qZA(),e.TgZ(3,"td",67),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"td",67),e.YNc(7,st,1,3,"i",68),e.YNc(8,at,2,1,"span",5),e.YNc(9,lt,2,2,"a",69),e.qZA()()),2&s){const t=r.$implicit,l=e.oxw(3);e.xp6(2),e.Oqu(null==t?null:t.name),e.xp6(2),e.Oqu(e.lcZ(5,5,l.answersTypes[(null==t?null:t.dataType)-1].name)),e.xp6(3),e.Q6J("ngIf",(null==t?null:t.isAnswered)&&2==t.dataType),e.xp6(1),e.Q6J("ngIf",t.isAnswered&&5!=t.dataType&&2!=t.dataType),e.xp6(1),e.Q6J("ngIf",t.isAnswered&&5==t.dataType)}}function ot(s,r){if(1&s&&(e.ynx(0),e.TgZ(1,"div",58)(2,"table",59)(3,"thead",60)(4,"tr",61)(5,"th",62),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"th",63),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"th",64),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,it,10,7,"tr",65),e.qZA()()(),e.BQk()),2&s){const t=e.oxw(2);e.xp6(6),e.Oqu(e.lcZ(7,4,"question")),e.xp6(3),e.Oqu(e.lcZ(10,6,"type")),e.xp6(3),e.Oqu(e.lcZ(13,8,"answer")),e.xp6(3),e.Q6J("ngForOf",t.taskAnswers)}}function rt(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",49)(1,"div",50)(2,"p",51),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"i",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialog())}),e.qZA()(),e.YNc(6,tt,2,0,"div",53),e.YNc(7,nt,2,0,"div",54),e.TgZ(8,"div",55),e.YNc(9,ot,16,10,"ng-container",5),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,4,"all_answers")),e.xp6(3),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",0==t.taskAnswers.length&&!t.loading),e.xp6(2),e.Q6J("ngIf",t.taskAnswers.length>0)}}let ct=(()=>{class s{constructor(t,l,a,o){this.service=t,this.elm=l,this.dialog=a,this.router=o,this.spaceId=localStorage.getItem("space-id"),this.url=Pe.N.apiUrl,this.loading=!0,this.allChecked=!1,this.selectedTasks=[],this.selectedTasksToHandover=[],this.answersTypes=(0,Ee.q)(we.P),this.taskAnswers=[]}openDetails(t){this.router.navigate([],{queryParams:{id:t.taskId},queryParamsHandling:"merge"}),this.dialog.open(Ue.TaskDetailsComponent,{data:{task:t.taskId||t},panelClass:"task-details-dialog"}).afterClosed().subscribe(a=>{})}ngOnInit(){this.service.selectedTasksToHandover.subscribe(t=>this.selectedTasksToHandover=t),this.service.tasks$.subscribe(t=>{this.tasks=t,this.checkAllCheckedTasks()}),this.service.loading.subscribe(t=>this.loading=t),this.service.meta.subscribe(t=>this.meta=t),0==this.tasks?.length&&this.service.search.next("")}sort(t,l){this.service.page.next(1),this.service.orderKey.next(t),this.service.orderDirection.next(l),this.getTasks()}getTasks(){this.service.hasChanged.next(!0),this.tasks=[]}selectAllTasks(t){this.allChecked=!0,this.tasks.forEach(l=>{(1==l.taskStateId||3==l.taskStateId||7==l.taskStateId)&&this.selectTask(t,l)})}selectTask(t,l){t.checked?(l.isSelected=!0,this.getSelectedTasks()):(this.allChecked=!1,this.removeSelectedTasks(l),l.isSelected=!1),this.checkAllCheckedTasks()}getSelectedTasks(){this.selectedTasks=this.tasks.filter(l=>l.isSelected),this.selectedTasks=this.selectedTasks.filter(l=>!this.selectedTasksToHandover.find(a=>l.taskId==a.taskId)),this.service.selectedTasksToHandover.next([].concat(this.selectedTasksToHandover,this.selectedTasks))}removeSelectedTasks(t){let l=this.selectedTasksToHandover.filter(a=>t.taskId!=a.taskId);this.service.selectedTasksToHandover.next(l)}checkAllCheckedTasks(){let t=0,l=0;this.tasks.forEach(a=>{a.isSelected&&t++,(1==a.taskStateId||3==a.taskStateId||7==a.taskStateId)&&l++}),this.allChecked=t==l}changePage(t){this.service.page.next(t),this.getTasks()}limitChanged(t){this.service.page.next(1),this.service.limit.next(t),this.getTasks()}exportToExcel(){let t=this.elm.nativeElement.querySelector("#tasks");const l=N.P6.table_to_sheet(t),a=N.P6.book_new();N.P6.book_append_sheet(a,l,"Sheet1"),N.NC(a,"tasks.xlsx")}trackBy(t,l){return l.taskId}getTaskProps(t){this.service.getTaskProps(t).subscribe(l=>{l.success&&(this.taskAnswers=l.data,console.log(this.taskAnswers),this.openDialog())})}openDialog(){this.dialog.open(this.dialogTemplate,{panelClass:"users-answers-dialog",width:"900px",maxHeight:"90vh"})}closeDialog(){this.dialog.closeAll()}static{this.\u0275fac=function(l){return new(l||s)(e.Y36(v.l),e.Y36(e.SBq),e.Y36(I.uw),e.Y36(D.F0))}}static{this.\u0275cmp=e.Xpm({type:s,selectors:[["all-tasks"]],viewQuery:function(l,a){if(1&l&&e.Gf(Ne,5),2&l){let o;e.iGM(o=e.CRH())&&(a.dialogTemplate=o.first)}},standalone:!0,features:[e.jDz],decls:9,vars:6,consts:[[3,"meta","admin","limit","pageChange","limitChanged"],["filters",""],[3,"export"],["content",""],["class","table","id","tasks",4,"ngIf"],[4,"ngIf"],[3,"height",4,"ngIf"],["dialogTemplate",""],["id","tasks",1,"table"],[1,"bg-gray","border-bottom"],[1,"text-left"],[1,"flex","aic"],["color","primary",1,"mr-1","example-margin",3,"checked","change"],[1,"text-center"],[1,"flex-center"],[1,"mr-50"],[3,"up","down"],["class","pointer border-bottom",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"pointer","border-bottom",3,"click"],[2,"width","35rem"],[1,"flex","aic","jcfs","text-left"],["color","primary",1,"mr-1","example-margin",3,"disabled","checked","click","change"],[1,"bx","bx-show","pointer","fs-20","primary","pl-1","pr-2",3,"matTooltip","click"],[1,"start","mr-75"],[3,"priority"],[3,"routerLink","matTooltip",4,"ngIf"],[3,"routerLink",4,"ngIf"],[2,"width","25rem"],[3,"dim","id","img","matTooltip","click",4,"ngIf"],[1,"ml-1","truncate","text-left"],[1,"text-left",2,"width","25rem"],[2,"width","17rem"],[2,"width","19rem"],[1,"flex-column-center"],[1,"mb-75"],[3,"state"],["class","w-100 bg-light-success px-2 py-1 fs-10 simibold rounded",4,"ngIf"],[3,"progress",4,"ngIf"],[4,"ngIf","ngIfElse"],["notRated",""],[3,"endedTaskRepeatedCounter",4,"ngIf"],[3,"routerLink","matTooltip"],[3,"routerLink"],[3,"dim","id","img","matTooltip","click"],[1,"w-100","bg-light-success","px-2","py-1","fs-10","simibold","rounded"],[3,"progress"],["type","small",3,"rate"],[3,"endedTaskRepeatedCounter"],[3,"height"],[1,"dir"],[1,"flex","w-100","jcsb","px-1","py-1"],[1,"fs-20","simibold"],[1,"bx","bx-x","fs-22","danger","pointer",3,"click"],["class","aic flex jcc py-5 h-25v",4,"ngIf"],["class","py-5 text-center",4,"ngIf"],[1,"content-height"],[1,"aic","flex","jcc","py-5","h-25v"],[1,"py-5","text-center"],[1,"table-container","mx-1","mt-1","mb-1"],[1,"w-100"],[1,"border","bg-gray"],[1,"border-bottom","fs-12","simibold"],[1,"text-left","py-1","w-25r"],[1,"text-left","py-1","w-7r"],[1,"text-left","py-1"],["class","border",4,"ngFor","ngForOf"],[1,"border"],[1,"fs-13","text-left"],[3,"class",4,"ngIf"],["class","primary","target","_blank",3,"href",4,"ngIf"],["target","_blank",1,"primary",3,"href"]],template:function(l,a){1&l&&(e.TgZ(0,"layout-with-filters",0),e.NdJ("pageChange",function(c){return a.changePage(c)})("limitChanged",function(c){return a.limitChanged(c)}),e.ynx(1,1),e.TgZ(2,"all-tasks-filter",2),e.NdJ("export",function(){return a.exportToExcel()}),e.qZA(),e.BQk(),e.ynx(3,3),e.YNc(4,ze,53,46,"table",4),e.YNc(5,Xe,1,0,"not-found",5),e.YNc(6,et,1,1,"loading",6),e.BQk(),e.qZA(),e.YNc(7,rt,10,6,"ng-template",null,7,e.W1O)),2&l&&(e.Q6J("meta",a.meta)("admin",!0)("limit",a.service.limit.value),e.xp6(4),e.Q6J("ngIf",a.tasks&&a.tasks.length>0&&!a.loading),e.xp6(1),e.Q6J("ngIf",a.tasks&&0==a.tasks.length&&!a.loading),e.xp6(1),e.Q6J("ngIf",a.loading))},dependencies:[Je.W,n.ez,n.sg,n.O5,n.OU,fe,Te.Y,k.p9,k.oG,p.aw,p.X$,xe.i,H.JX,H._s,Ce.t,ke.l,K.AV,K.gM,Ae.P,Ze.N,be.T,ye.n,Me.w,Oe.N,D.Bz,D.rH,Ie.h],styles:[".table[_ngcontent-%COMP%]{min-width:180rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:1.4rem!important}.truncate[_ngcontent-%COMP%]{width:15rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table[_ngcontent-%COMP%]{min-width:115rem}[_nghost-%COMP%]     .search, [_nghost-%COMP%]     .ng-select{width:100%}[_nghost-%COMP%]     label{font-size:11px}.table-container[_ngcontent-%COMP%]{border-radius:8px;border:0;overflow:hidden}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-spacing:0}th[_ngcontent-%COMP%]{border:none;position:sticky;top:0;z-index:1}tbody[_ngcontent-%COMP%]{padding-bottom:5px}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-block:10px;padding-inline:15px;border:none;font-size:12px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-inline:15px;border:none}tr[_ngcontent-%COMP%]:last-child{border-bottom:none}"]})}}return s})()}}]);