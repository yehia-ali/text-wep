"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[1387],{11387:(I,p,s)=>{s.r(p),s.d(p,{DetailsComponent:()=>j});var a=s(96814),d=s(1428),m=s(824),l=s(89515),_=s(45843),c=s(6311),f=s(39326),Z=s(9619),t=s(65879);const g=function(e){return{width:e}};function h(e,r){if(1&e&&t._UZ(0,"div",10),2&e){const n=t.oxw();t.Q6J("ngStyle",t.VKq(1,g,(null==n.workingHours?null:n.workingHours.extraTimePercentage)+"%"))}}function x(e,r){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Oqu(null==n.workingHours?null:n.workingHours.extraHours)}}function k(e,r){1&e&&(t.TgZ(0,"span",11),t._uU(1,":"),t.qZA())}function T(e,r){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Oqu(null==n.workingHours?null:n.workingHours.extraMinutes)}}function v(e,r){1&e&&(t.TgZ(0,"span",11),t._uU(1,":"),t.qZA())}function C(e,r){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Oqu(null==n.workingHours?null:n.workingHours.requiredMinutes)}}function w(e,r){1&e&&(t.TgZ(0,"span",11),t._uU(1,":"),t.qZA())}function H(e,r){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Oqu(null==n.workingHours?null:n.workingHours.actualMinutes)}}function O(e,r){if(1&e&&(t.TgZ(0,"div",12)(1,"div",13)(2,"p",14),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"p",15)(6,"span"),t._uU(7),t.qZA(),t.YNc(8,v,2,0,"span",8),t.YNc(9,C,2,1,"span",7),t.qZA()(),t.TgZ(10,"div",13)(11,"p",14),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"p",15)(15,"span"),t._uU(16),t.qZA(),t.YNc(17,w,2,0,"span",8),t.YNc(18,H,2,1,"span",7),t.qZA()()()),2&e){const n=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,8,"required_text")),t.xp6(4),t.Oqu(null==n.workingHours?null:n.workingHours.required),t.xp6(1),t.Q6J("ngIf",(null==n.workingHours?null:n.workingHours.requiredMinutes)&&(null==n.workingHours?null:n.workingHours.requiredMinutes)&&!n.dashboard),t.xp6(1),t.Q6J("ngIf",(null==n.workingHours?null:n.workingHours.requiredMinutes)&&!n.dashboard),t.xp6(3),t.Oqu(t.lcZ(13,10,"actual")),t.xp6(4),t.Oqu(null==n.workingHours?null:n.workingHours.actual),t.xp6(1),t.Q6J("ngIf",(null==n.workingHours?null:n.workingHours.actualMinutes)&&!n.dashboard),t.xp6(1),t.Q6J("ngIf",(null==n.workingHours?null:n.workingHours.actualMinutes)&&!n.dashboard)}}let q=(()=>{class e{constructor(){this.dashboard=!0}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.Xpm({type:e,selectors:[["task-working-hours"]],inputs:{workingHours:"workingHours",dashboard:"dashboard"},standalone:!0,features:[t.jDz],decls:11,vars:11,consts:[[1,"new-card","bg-gray","p-1","rounded"],[1,"total","mb-1"],[1,"bg-primary","mb-2","mt-75",3,"ngStyle"],[1,"flex","aic","w-100","relative","extra-hours"],[1,"bg-light-primary",3,"ngStyle"],["class","bg-danger",3,"ngStyle",4,"ngIf"],[1,"line-height","danger","bold"],[4,"ngIf"],["class","mx-50",4,"ngIf"],["class","flex jcsr aic w-100",4,"ngIf"],[1,"bg-danger",3,"ngStyle"],[1,"mx-50"],[1,"flex","jcsr","aic","w-100"],[1,"flex","aic"],[1,"primary"],[1,"bold","ml-1"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3),t._UZ(4,"div",4),t.YNc(5,h,1,3,"div",5),t.TgZ(6,"p",6),t.YNc(7,x,2,1,"span",7),t.YNc(8,k,2,0,"span",8),t.YNc(9,T,2,1,"span",7),t.qZA()()(),t.YNc(10,O,19,12,"div",9),t.qZA()),2&o&&(t.xp6(2),t.Q6J("ngStyle",t.VKq(7,g,(null==i.workingHours?null:i.workingHours.requiredPercentage)+"%")),t.xp6(2),t.Q6J("ngStyle",t.VKq(9,g,(null==i.workingHours?null:i.workingHours.actualPercentage)+"%")),t.xp6(1),t.Q6J("ngIf",(null==i.workingHours?null:i.workingHours.extraHours)||(null==i.workingHours?null:i.workingHours.extraMinutes)),t.xp6(2),t.Q6J("ngIf",null==i.workingHours?null:i.workingHours.extraHours),t.xp6(1),t.Q6J("ngIf",(null==i.workingHours?null:i.workingHours.extraMinutes)&&(null==i.workingHours?null:i.workingHours.extraHours)&&!i.dashboard),t.xp6(1),t.Q6J("ngIf",(null==i.workingHours?null:i.workingHours.extraMinutes)&&!i.dashboard),t.xp6(1),t.Q6J("ngIf",i.workingHours))},dependencies:[a.ez,a.O5,a.PC,l.aw,l.X$],styles:[".new-card[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{border-radius:5rem}.new-card[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .new-card[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   .extra-hours[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:4px}.new-card[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   .extra-hours[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:absolute;top:0;transform:translateY(-100%);inset-inline-end:0}"]})}}return e})(),M=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.Xpm({type:e,selectors:[["details-timeline"]],inputs:{details:"details"},standalone:!0,features:[t.jDz],decls:17,vars:16,consts:[[1,"task-timeline","mb-1","py-2","pr-2","pl-4","bg-gray","rounded"],[1,"timeline","relative"],[1,"start","mb-2"],[1,"fs-14"],[3,"workingHours","dashboard"],[1,"end","mt-2"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"p",3),t._uU(7),t.ALo(8,"arabicDate"),t.qZA()(),t._UZ(9,"task-working-hours",4),t.TgZ(10,"div",5)(11,"h4"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"p",3),t._uU(15),t.ALo(16,"arabicDate"),t.qZA()()()()),2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,6,"start_date")),t.xp6(3),t.Oqu(t.xi3(8,8,i.details.startDate,"withTime")),t.xp6(2),t.Q6J("workingHours",i.details.workingHours)("dashboard",!1),t.xp6(3),t.Oqu(t.lcZ(13,11,"due_date")),t.xp6(3),t.Oqu(t.xi3(16,13,i.details.endDate,"withTime")))},dependencies:[a.ez,l.aw,l.X$,Z.P,q],styles:['.task-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;top:10px;inset-inline-start:-15px;height:calc(100% - 48px);width:2px;border-inline-start:2px dashed #e0e0e0}.task-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .start[_ngcontent-%COMP%], .task-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .end[_ngcontent-%COMP%]{position:relative}.task-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .start[_ngcontent-%COMP%]:before, .task-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .end[_ngcontent-%COMP%]:before{content:"";position:absolute;top:5px;inset-inline-start:-19px;width:1rem;height:1rem;border-radius:50%}.task-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .start[_ngcontent-%COMP%]:before{background:#C7C7CC}.task-timeline[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .end[_ngcontent-%COMP%]:before{background:#CF4747}']})}}return e})();var A=s(99481),b=s(84526),P=s(64190),y=s(99758);function U(e,r){if(1&e&&(t.TgZ(0,"div",19)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"p",20),t.qZA()),2&e){const n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"description")),t.xp6(2),t.Q6J("innerHTML",n.details.description,t.oJD)}}function D(e,r){if(1&e&&(t.TgZ(0,"div",19)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"p",20),t.qZA()),2&e){const n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"dod")),t.xp6(2),t.Q6J("innerHTML",n.details.definitionOfDone,t.oJD)}}function J(e,r){if(1&e&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t._UZ(3,"priority",6),t.TgZ(4,"h3"),t._uU(5),t.qZA()(),t.TgZ(6,"div",7),t._UZ(7,"project-status",8),t.qZA()(),t.TgZ(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12)(12,"h3"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",13)(16,"div",14),t._UZ(17,"user-image",15),t.qZA(),t.TgZ(18,"div")(19,"h4"),t._uU(20),t.qZA(),t.TgZ(21,"p",16),t._uU(22),t.qZA()()()(),t.YNc(23,U,5,4,"div",17),t.YNc(24,D,5,4,"div",17),t.qZA(),t.TgZ(25,"div",11),t._UZ(26,"details-timeline",18),t.qZA()()()()),2&e){const n=t.oxw(),o=t.MAs(3);t.xp6(3),t.Q6J("priority",n.details.priority)("size",17),t.xp6(2),t.Oqu(n.details.title),t.xp6(2),t.Q6J("matMenuTriggerFor",n.isCreator?o:null)("state",n.details.projectState),t.xp6(6),t.Oqu(t.lcZ(14,12,"created_by")),t.xp6(4),t.Q6J("img",n.details.creatorImageUrl),t.xp6(3),t.Oqu(n.details.creatorName),t.xp6(2),t.Oqu(n.details.creatorJobTitle),t.xp6(1),t.Q6J("ngIf",n.details.description),t.xp6(1),t.Q6J("ngIf",n.details.definitionOfDone),t.xp6(2),t.Q6J("details",n.details)}}let j=(()=>{class e{constructor(n,o,i,u){this.service=n,this.route=o,this.alert=i,this.elm=u,this.isCreator=!1}ngOnInit(){this.service.projectDetailsReport.subscribe(n=>this.report=n),this.getProject()}getProject(){this.service.getProjectDetails(+this.route.snapshot.params.id).subscribe(n=>{this.details=n,this.isCreator=+localStorage.getItem("id")==n.projectCreatorId,setTimeout(()=>{let o=this.elm.nativeElement.querySelector(".project-details .top-section");this.elm.nativeElement.querySelector(".project-details .content").style.height="calc(100% - "+o.offsetHeight+"px)"},0)})}changeStatue(n){this.service.editProject({id:this.details.id,title:this.details.title,description:this.details.description,definitionOfDone:this.details.definitionOfDone,endDate:this.details.endDate,priority:this.details.priority,projectState:n}).subscribe(()=>{this.alert.showAlert("project_status_changed"),this.details.projectState=n})}ngOnDestroy(){this.service.projectDetailsReport.next({})}static{this.\u0275fac=function(o){return new(o||e)(t.Y36(b.Y),t.Y36(P.gz),t.Y36(y.c),t.Y36(t.SBq))}}static{this.\u0275cmp=t.Xpm({type:e,selectors:[["project-details"]],standalone:!0,features:[t.jDz],decls:16,vars:13,consts:[["class","project-details h-100",4,"ngIf"],["status","matMenu"],["mat-menu-item","",3,"click"],[1,"project-details","h-100"],[1,"top-section","px-3","py-2","border-bottom","flex","aic","jcsb"],[1,"flex","aic","gap-x-2"],[3,"priority","size"],[1,"status","pointer"],[3,"matMenuTriggerFor","state"],["magicScroll","",1,"content","p-3"],[1,"flex-grid"],[1,"col-lg-6"],[1,"creator"],[1,"flex","aic","gap-x-1","mt-1"],[1,"img"],[3,"img"],[1,"muted"],["class","mt-2",4,"ngIf"],[3,"details"],[1,"mt-2"],[1,"mt-75",3,"innerHTML"]],template:function(o,i){1&o&&(t.TgZ(0,"layout"),t.YNc(1,J,27,14,"div",0),t.qZA(),t.TgZ(2,"mat-menu",null,1)(4,"button",2),t.NdJ("click",function(){return i.changeStatue(2)}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",2),t.NdJ("click",function(){return i.changeStatue(1)}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",2),t.NdJ("click",function(){return i.changeStatue(3)}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"button",2),t.NdJ("click",function(){return i.changeStatue(4)}),t._uU(14),t.ALo(15,"translate"),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("ngIf",i.details),t.xp6(4),t.Oqu(t.lcZ(6,5,"hold")),t.xp6(3),t.Oqu(t.lcZ(9,7,"open")),t.xp6(3),t.Oqu(t.lcZ(12,9,"completed")),t.xp6(3),t.Oqu(t.lcZ(15,11,"closed")))},dependencies:[a.ez,a.O5,d.$,m.h,l.aw,l.X$,_.l,c.Tx,c.VK,c.OP,c.p6,f.t,M,A.M],styles:["content[_ngcontent-%COMP%]{height:100%}"]})}}return e})()}}]);