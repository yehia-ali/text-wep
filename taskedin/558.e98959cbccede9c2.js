"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[558],{53851:(I,_,a)=>{a.d(_,{C:()=>E});var e=a(65879),p=a(96814),h=a(55254),d=a(17700),v=a(99758),g=a(56223),i=a(58964),T=a(1350),A=a(32296),y=a(82458),Z=a(89515),L=a(54807),b=a(52597),O=a(10480);function C(u,U){if(1&u){const s=e.EpF();e.TgZ(0,"div",11),e._UZ(1,"input-label",12),e.TgZ(2,"select-user",13),e.NdJ("getSelectedUsers",function(n){e.CHM(s);const f=e.oxw();return e.KtG(f.getUsers(n))}),e.qZA()()}if(2&u){const s=e.oxw();e.xp6(2),e.Q6J("selectedUsers",s.selectedUsers)}}function x(u,U){if(1&u){const s=e.EpF();e.TgZ(0,"div")(1,"div",14),e._UZ(2,"input-label",15),e.TgZ(3,"ng-select",16),e.NdJ("change",function(n){e.CHM(s);const f=e.oxw();return e.KtG(f.selectType(n))}),e.qZA(),e._UZ(4,"input-error",17),e.qZA()()}if(2&u){const s=e.oxw();e.Tol(null!=s.selectedLeaveType&&s.selectedLeaveType.isPermission?"col-lg-12":"col-lg-6"),e.xp6(2),e.Q6J("control",s.f.leaveTypeId),e.xp6(1),e.Q6J("items",s.leaveTypes)("clearSearchOnAdd",!0),e.xp6(1),e.Q6J("control",s.f.leaveTypeId)}}function D(u,U){if(1&u&&(e.TgZ(0,"div")(1,"div",18),e._UZ(2,"input-label",19)(3,"input",20)(4,"input-error",17),e.qZA()()),2&u){const s=e.oxw();e.Tol(null!=s.data&&s.data.leaveData?"col-lg-12":"col-lg-6"),e.xp6(2),e.Q6J("control",s.f.balance),e.xp6(2),e.Q6J("control",s.f.balance)}}let E=(()=>{class u{constructor(s,c,n){this.fb=s,this.data=c,this.dialogRef=n,this.service=(0,e.f3M)(h.e),this.leaveRequestsSer=(0,e.f3M)(b.N),this.leaveTypes=[],this.dialog=(0,e.f3M)(d.uw),this.alert=(0,e.f3M)(v.c),this.loading=!1,this.selectedUsers=[],this.form=this.fb.group({leaveTypeId:[null,g.kI.required],balance:[0,g.kI.required],accruals:[0,g.kI.required]})}ngOnInit(){this.leaveRequestsSer.getLeaveTypes().subscribe(s=>this.leaveTypes=s.data),this.data&&this.data.leaveData&&this.form.patchValue({leaveTypeId:this.data.leaveData.leaveTypeId,balance:this.data.leaveData.balance,accruals:this.data.leaveData.accruals})}selectType(s){this.selectedLeaveType=s}submit(){let s;if(s=this.data?[Number(this.data.employeeId)]:this.selectedUsers.map(c=>c.id),this.form.valid)if(this.loading=!0,this.data&&this.data.leaveData){let c={balance:-this.data.leaveData.balance+this.form.value.balance,userid:Number(this.data.employeeId),leaveTypeId:this.data.leaveData.leaveTypeId};this.service.updateBalance(c).subscribe(n=>{n.success?(this.alert.showAlert("balance_added"),this.dialogRef.close(!0)):this.loading=!1})}else{let c={...this.form.value,accruals:this.form.value.balance,usersId:s};this.service.addBalance(c).subscribe(n=>{n.success?(this.alert.showAlert("balance_added"),this.dialogRef.close(!0)):this.loading=!1})}}getUsers(s){this.selectedUsers=s}get f(){return this.form.controls}static{this.\u0275fac=function(c){return new(c||u)(e.Y36(g.qu),e.Y36(d.WI),e.Y36(d.so))}}static{this.\u0275cmp=e.Xpm({type:u,selectors:[["assign-leave-form"]],standalone:!0,features:[e.jDz],decls:17,vars:13,consts:[[1,"add-leave","dir"],["mat-dialog-content","",1,"overflow-visible"],[3,"formGroup"],[1,"flex-grid","gap-y-2"],["class","col-lg-12",4,"ngIf"],[3,"class",4,"ngIf"],["mat-dialog-actions","","align","end"],[1,"flex","w-100"],["mat-dialog-close","",1,"px-4","flex-50","mr-2","dark-color","clickable-btn","rounded","cancel-btn"],["mat-raised-button","","color","primary",1,"px-5","fs-15","flex-50",3,"disabled","click"],[3,"text","loading"],[1,"col-lg-12"],["key","assignees"],["text","assignees",3,"selectedUsers","getSelectedUsers"],[1,"type"],["key","leave_type",3,"control"],["bindLabel","name","bindValue","id","appendTo","body","formControlName","leaveTypeId",3,"items","clearSearchOnAdd","change"],[3,"control"],[1,"days-number"],["key","days_number",3,"control"],["type","number","formControlName","balance","min","0",1,"input"]],template:function(c,n){1&c&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1)(5,"form",2)(6,"div",3),e.YNc(7,C,3,1,"div",4),e.YNc(8,x,5,7,"div",5),e.YNc(9,D,5,5,"div",5),e.qZA()()(),e.TgZ(10,"div",6)(11,"div",7)(12,"button",8),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return n.submit()}),e._UZ(16,"submit-button",10),e.qZA()()()()),2&c&&(e.xp6(2),e.Oqu(e.lcZ(3,9,null!=n.data&&n.data.leaveData?"edit_leave":"assign_leave")),e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("ngIf",!(null!=n.data&&n.data.disableUser)),e.xp6(1),e.Q6J("ngIf",!(null!=n.data&&n.data.leaveData)),e.xp6(1),e.Q6J("ngIf",!(null!=n.selectedLeaveType&&n.selectedLeaveType.isPermission)),e.xp6(4),e.Oqu(e.lcZ(14,11,"cancel")),e.xp6(2),e.Q6J("disabled",n.form.invalid||n.loading||0==n.selectedUsers.length&&!(null!=n.data&&n.data.disableUser)),e.xp6(1),e.Q6J("text",null!=n.data&&n.data.leaveData?"edit_leave":"assign_leave")("loading",n.loading))},dependencies:[p.ez,p.O5,i.w,T.i,A.ot,A.lW,d.Is,d.ZT,d.xY,d.H8,g.UX,g._Y,g.Fj,g.wV,g.JJ,g.JL,g.qQ,g.sg,g.u,y.w,Z.aw,Z.X$,L.A0,L.w9,O.V],styles:[".overflow-visible[_ngcontent-%COMP%]{overflow:visible}"]})}}return u})()},55254:(I,_,a)=>{a.d(_,{e:()=>d});var e=a(20553),p=a(65879),h=a(69862);let d=(()=>{class v{updateLeaveType(i){return this.http.post(`${e.N.apiUrl}api/Leave/UpdateLeaveType`,i)}constructor(i){this.http=i}addLeaves(i){return this.http.post(`${e.N.apiUrl}api/Leave/AddLeaveType`,i)}addBalance(i){return this.http.post(`${e.N.apiUrl}api/Leave/AddLeaveBalance`,i)}updateBalance(i){return this.http.put(`${e.N.apiUrl}api/Leave/UpdateLeaveBalance`,i)}addHoliday(i){return this.http.post(`${e.N.apiUrl}api/Space/AddHoliDay`,i)}editHoliday(i){return this.http.post(`${e.N.apiUrl}api/Space/UpdateHoliDay`,i)}static{this.\u0275fac=function(T){return new(T||v)(p.LFG(h.eN))}}static{this.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},10558:(I,_,a)=>{a.r(_),a.d(_,{LeavesSettingsComponent:()=>N});var e=a(65879),p=a(96814),h=a(1428),d=a(89515),v=a(55254),g=a(17700),i=a(93053),T=a(53851),A=a(79934),y=a(74104),Z=a(52597),L=a(57105),b=a(65668);function O(t,m){if(1&t&&(e.TgZ(0,"tr",7)(1,"td",3),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"translate"),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"translate"),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&t){const l=m.$implicit;e.xp6(2),e.Oqu(l.name),e.xp6(2),e.Oqu(l.isPaid?e.lcZ(5,4,"yes"):e.lcZ(6,6,"no")),e.xp6(4),e.Oqu(l.needApprove?e.lcZ(9,8,"yes"):e.lcZ(10,10,"no")),e.xp6(4),e.Oqu(l.requestLimit)}}function C(t,m){if(1&t&&(e.TgZ(0,"tbody"),e.YNc(1,O,13,12,"tr",6),e.qZA()),2&t){const l=e.oxw();e.xp6(1),e.Q6J("ngForOf",l.leaveTypes)("ngForTrackBy",l.trackBy)}}function x(t,m){1&t&&e._UZ(0,"not-found",8)}function D(t,m){1&t&&e._UZ(0,"loading")}const E=function(t){return{"h-100":t}};let u=(()=>{class t{constructor(){this.service=(0,e.f3M)(Z.N),this.leaveTypes=[],this.loading=!0}ngOnInit(){this.source$=this.service.list$.subscribe(l=>{this.leaveTypes=l.data,this.loading=!1})}trackBy(l,r){return r.id}ngOnDestroy(){this.source$.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=e.Xpm({type:t,selectors:[["leaves-list"]],standalone:!0,features:[e.jDz],decls:20,vars:18,consts:[[1,"leaves","h-100"],[1,"table","w-100","relative",3,"ngClass"],[1,"bg-gray","border-bottom"],[1,"text-left"],[4,"ngIf"],["class","a-center",4,"ngIf"],["class","border-bottom pointer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","pointer"],[1,"a-center"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"th"),e.qZA()(),e.YNc(17,C,2,2,"tbody",4),e.YNc(18,x,1,0,"not-found",5),e.YNc(19,D,1,0,"loading",4),e.qZA()()),2&r&&(e.xp6(1),e.Q6J("ngClass",e.VKq(16,E,0==o.leaveTypes.length||o.loading)),e.xp6(4),e.Oqu(e.lcZ(6,8,"type")),e.xp6(3),e.Oqu(e.lcZ(9,10,"paid")),e.xp6(3),e.Oqu(e.lcZ(12,12,"required_approval")),e.xp6(3),e.Oqu(e.lcZ(15,14,"days_limit_per_request")),e.xp6(3),e.Q6J("ngIf",o.leaveTypes.length>0&&!o.loading),e.xp6(1),e.Q6J("ngIf",0==o.leaveTypes.length&&!o.loading),e.xp6(1),e.Q6J("ngIf",o.loading))},dependencies:[p.ez,p.mk,p.sg,p.O5,L.w,b.N,d.aw,d.X$]})}}return t})();var U=a(9619);function s(t,m){if(1&t&&(e.TgZ(0,"tr",7)(1,"td",3),e._uU(2),e.qZA(),e.TgZ(3,"td",3),e._uU(4),e.qZA(),e.TgZ(5,"td",3),e._uU(6),e.ALo(7,"arabicDate"),e.qZA()()),2&t){const l=m.$implicit;e.xp6(2),e.Oqu(l.nameEn),e.xp6(2),e.Oqu(l.nameAr),e.xp6(2),e.Oqu(e.lcZ(7,3,l.date))}}function c(t,m){if(1&t&&(e.TgZ(0,"tbody"),e.YNc(1,s,8,5,"tr",6),e.qZA()),2&t){const l=e.oxw();e.xp6(1),e.Q6J("ngForOf",l.holidays)("ngForTrackBy",l.trackBy)}}function n(t,m){1&t&&e._UZ(0,"not-found",8)}function f(t,m){1&t&&e._UZ(0,"loading")}const P=function(t){return{"h-100":t}};let q=(()=>{class t{constructor(){this.leaveRequestsSer=(0,e.f3M)(Z.N),this.holidays=[],this.loading=!0}ngOnInit(){this.source$=this.leaveRequestsSer.holidays$.subscribe(l=>{this.holidays=l.data,this.loading=!1})}trackBy(l,r){return r.id}ngOnDestroy(){this.source$.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=e.Xpm({type:t,selectors:[["holidays-list"]],standalone:!0,features:[e.jDz],decls:16,vars:15,consts:[[1,"leaves","h-100"],[1,"table","w-100","relative",3,"ngClass"],[1,"bg-gray","border-bottom"],[1,"text-left"],[4,"ngIf"],["class","a-center",4,"ngIf"],["class","border-bottom pointer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","pointer"],[1,"a-center"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th",3),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",3),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.YNc(13,c,2,2,"tbody",4),e.YNc(14,n,1,0,"not-found",5),e.YNc(15,f,1,0,"loading",4),e.qZA()()),2&r&&(e.xp6(1),e.Q6J("ngClass",e.VKq(13,P,0==o.holidays.length||o.loading)),e.xp6(4),e.Oqu(e.lcZ(6,7,"english_name")),e.xp6(3),e.Oqu(e.lcZ(9,9,"arabic_name")),e.xp6(3),e.Oqu(e.lcZ(12,11,"date")),e.xp6(2),e.Q6J("ngIf",o.holidays.length>0&&!o.loading),e.xp6(1),e.Q6J("ngIf",0==o.holidays.length&&!o.loading),e.xp6(1),e.Q6J("ngIf",o.loading))},dependencies:[p.ez,p.mk,p.sg,p.O5,b.N,L.w,d.aw,d.X$,U.P]})}}return t})(),N=(()=>{class t{constructor(){this.service=(0,e.f3M)(v.e),this.dialog=(0,e.f3M)(g.uw)}addLeave(){this.dialog.open(i.S,{panelClass:"large-dialog"})}assignLeave(){this.dialog.open(T.C,{panelClass:"medium-dialog"})}addHoliday(){this.dialog.open(A.C,{panelClass:"large-dialog"})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=e.Xpm({type:t,selectors:[["leaves-settings"]],standalone:!0,features:[e.jDz],decls:34,vars:15,consts:[[1,"p-2","h-100"],[1,"actions","mb-2"],[1,"flex-grid","gap-y-4"],[1,"col-sm-4"],[1,"card","border","border-primary","pointer","rounded","p-3","flex","aic","jcc","gap-x-1",3,"click"],[1,"img"],["src","assets/images/leave/add-leave.svg","alt","add leave icon",1,"convert-image-color"],[1,"primary","convert-color"],["src","assets/images/leave/assign-leave.svg","alt","assign leave icon",1,"convert-image-color"],[1,"col-sm-4",3,"click"],[1,"card","border","border-primary","pointer","rounded","p-3","flex","aic","jcc","gap-x-1"],["src","assets/images/leave/add-holiday.svg","alt","add holiday icon",1,"convert-image-color"],["mat-stretch-tabs","false","mat-align-tabs","start","animationDuration","0s",1,"leaves-group"],[3,"label"],[1,"py-2","h-100"]],template:function(r,o){1&r&&(e.TgZ(0,"layout")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e.NdJ("click",function(){return o.addLeave()}),e.TgZ(6,"div",5),e._UZ(7,"img",6),e.qZA(),e.TgZ(8,"p",7),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",3)(12,"div",4),e.NdJ("click",function(){return o.assignLeave()}),e.TgZ(13,"div",5),e._UZ(14,"img",8),e.qZA(),e.TgZ(15,"p",7),e._uU(16),e.ALo(17,"translate"),e.qZA()()(),e.TgZ(18,"div",9),e.NdJ("click",function(){return o.addHoliday()}),e.TgZ(19,"div",10)(20,"div",5),e._UZ(21,"img",11),e.qZA(),e.TgZ(22,"p",7),e._uU(23),e.ALo(24,"translate"),e.qZA()()()()(),e.TgZ(25,"mat-tab-group",12)(26,"mat-tab",13),e.ALo(27,"translate"),e.TgZ(28,"div",14),e._UZ(29,"leaves-list"),e.qZA()(),e.TgZ(30,"mat-tab",13),e.ALo(31,"translate"),e.TgZ(32,"div",14),e._UZ(33,"holidays-list"),e.qZA()()()()()),2&r&&(e.xp6(9),e.Oqu(e.lcZ(10,5,"add_leave")),e.xp6(7),e.Oqu(e.lcZ(17,7,"assign_leave")),e.xp6(7),e.Oqu(e.lcZ(24,9,"add_holiday")),e.xp6(3),e.Q6J("label",e.lcZ(27,11,"leaves")),e.xp6(4),e.Q6J("label",e.lcZ(31,13,"holidays")))},dependencies:[p.ez,h.$,d.aw,d.X$,y.Nh,y.uX,y.SP,u,q]})}}return t})()}}]);