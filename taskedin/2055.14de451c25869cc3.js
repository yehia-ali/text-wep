"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[2055],{38140:(Q,v,l)=>{l.d(v,{Y:()=>J});var i=l(65879),d=l(96814),Z=l(89515),T=l(824),q=l(52081),C=l(56223),x=l(76472),b=l(3131);function L(m,f){if(1&m&&(i.TgZ(0,"p",10),i._uU(1),i.ALo(2,"arabicNumbers"),i.ALo(3,"translate"),i.qZA()),2&m){const _=i.oxw();i.xp6(1),i.Oqu(null!=_.meta&&_.meta.pageSize?i.lcZ(2,1,null==_.meta?null:_.meta.pageSize):i.lcZ(3,3,"unlimited"))}}function N(m,f){if(1&m){const _=i.EpF();i.TgZ(0,"input",11),i.NdJ("ngModelChange",function(g){i.CHM(_);const y=i.oxw();return i.KtG(y.limit=g)})("ngModelChange",function(){i.CHM(_);const g=i.oxw();return i.KtG(g.changeLimit())}),i.qZA()}if(2&m){const _=i.oxw();i.Q6J("ngModel",_.limit)}}function A(m,f){1&m&&(i.TgZ(0,"p",12),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&m&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"record")))}function M(m,f){if(1&m){const _=i.EpF();i.TgZ(0,"pagination-controls",13),i.NdJ("pageChange",function(g){i.CHM(_);const y=i.oxw();return i.KtG(y.pageChanged(g))}),i.ALo(1,"translate"),i.ALo(2,"translate"),i.qZA()}2&m&&i.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",i.lcZ(1,4,"previous"))("nextLabel",i.lcZ(2,6,"next"))}const O=[[["","filters",""]],[["","content",""]]],u=function(m,f){return{height:m,"max-width":f}},p=["[filters]","[content]"];let J=(()=>{class m{constructor(){this.pageChange=new i.vpe,this.limitChanged=new i.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,i.f3M)(b.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(_){this.pageChange.emit(_)}static{this.\u0275fac=function(h){return new(h||m)}}static{this.\u0275cmp=i.Xpm({type:m,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[i.jDz],ngContentSelectors:p,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(h,g){1&h&&(i.F$t(O),i.TgZ(0,"div",0)(1,"div",1),i.Hsn(2),i.qZA(),i.TgZ(3,"div",2),i.Hsn(4,1),i.qZA(),i.TgZ(5,"div",3)(6,"div",4)(7,"p"),i._uU(8),i.ALo(9,"translate"),i.qZA(),i.YNc(10,L,4,5,"p",5),i.YNc(11,N,1,1,"input",6),i.YNc(12,A,3,3,"p",7),i.qZA(),i.YNc(13,M,3,8,"pagination-controls",8),i.TgZ(14,"p"),i._uU(15),i.ALo(16,"translate"),i.TgZ(17,"span",9),i._uU(18),i.ALo(19,"arabicNumbers"),i.ALo(20,"translate"),i.qZA()()()()),2&h&&(i.Q6J("ngStyle",i.WLB(17,u,g.hasTitle?"calc(100vh - 14.5rem)":g.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",g.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),i.xp6(8),i.hij("",i.lcZ(9,9,"pagination_per_page")," "),i.xp6(2),i.Q6J("ngIf",!g.admin),i.xp6(1),i.Q6J("ngIf",g.admin),i.xp6(1),i.Q6J("ngIf",null==g.meta?null:g.meta.pageSize),i.xp6(1),i.Q6J("ngIf",(null==g.meta?null:g.meta.totalItems)>15),i.xp6(2),i.hij("",i.lcZ(16,11,"pagination_total_records")," "),i.xp6(3),i.AsE("",i.lcZ(19,13,null==g.meta?null:g.meta.totalItems)," ",i.lcZ(20,15,"record"),""))},dependencies:[d.ez,d.O5,d.PC,Z.aw,Z.X$,T.h,q.m,C.u5,C.Fj,C.wV,C.JJ,C.qQ,C.On,x.JX,x.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return m})()},3131:(Q,v,l)=>{l.d(v,{P:()=>Z});var i=l(65619),d=l(65879);let Z=(()=>{class T{constructor(){this.withSubMenu=new i.X(!0)}static{this.\u0275fac=function(x){return new(x||T)}}static{this.\u0275prov=d.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})()},32055:(Q,v,l)=>{l.r(v),l.d(v,{TemplatesComponent:()=>Ce});var i=l(96814),d=l(89515),Z=l(38140),T=l(76472),q=l(57105),C=l(65668),x=l(41614),b=l(6311),L=l(9619),N=l(52081),A=l(83318),M=l(64190),O=l(39326),u=l(17700),p=l(56223),J=l(1350),m=l(58964),f=l(54807),_=l(60420),h=l(32296),g=l(82458),y=l(824),S=l(31919),P=l(18091),e=l(65879),U=l(99758),k=l(68330),I=l(49388);function Y(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"span",43)(1,"i",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().item;return e.KtG(n.editStage=!0)}),e.qZA(),e.TgZ(2,"i",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().item,s=e.oxw();return e.KtG(s.deleteStage(n))}),e.qZA()()}}function E(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",46)(1,"i",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().item;return e.KtG(n.editStage=!1)}),e.qZA()()}}const F=function(){return{standalone:!0}};function D(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",38)(1,"span",39)(2,"input",40),e.NdJ("keypress",function(n){const r=e.CHM(t).item;return e.KtG("Enter"==n.key?r.editStage=!1:"")})("ngModelChange",function(n){const r=e.CHM(t).item;return e.KtG(r.name=n)}),e.qZA()(),e.YNc(3,Y,3,0,"span",41),e.YNc(4,E,2,0,"div",42),e.qZA()}if(2&a){const t=c.item;e.xp6(2),e.Gre("input ",t.editStage?"":"border-0"," border-0"),e.Q6J("readonly",!t.editStage)("ngModel",t.name)("ngModelOptions",e.DdM(8,F)),e.xp6(1),e.Q6J("ngIf",!t.editStage),e.xp6(1),e.Q6J("ngIf",t.editStage)}}function K(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.addStage=!0)}),e._UZ(1,"i",51),e.TgZ(2,"span",52),e._uU(3),e.ALo(4,"translate"),e.qZA()()}2&a&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"add_stage")))}function G(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",46)(1,"i",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.saveStage())}),e.qZA(),e.TgZ(2,"input",53),e.NdJ("keypress",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onAddStagePress(n))})("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.stageTitle=n)}),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.stageTitle)("ngModelOptions",e.DdM(2,F))}}function H(a,c){if(1&a&&(e.TgZ(0,"div",48),e.YNc(1,K,5,3,"div",49),e.YNc(2,G,3,3,"div",42),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.addStage),e.xp6(1),e.Q6J("ngIf",t.addStage)}}function W(a,c){if(1&a&&(e.TgZ(0,"div",54),e._UZ(1,"priority",55),e.TgZ(2,"span",56),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&a){const t=c.item;e.xp6(1),e.Q6J("priority",t.value),e.xp6(2),e.Oqu(e.lcZ(4,2,t.name))}}function B(a,c){if(1&a&&(e.TgZ(0,"div",54)(1,"span",56),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&a){const t=c.item;e.xp6(2),e.Oqu(e.lcZ(3,1,t.name))}}function j(a,c){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5)(2,"div",57)(3,"div",58),e._uU(4),e.qZA(),e.TgZ(5,"div",59),e.NdJ("click",function(){const n=e.CHM(t),s=n.$implicit,r=n.index,w=e.oxw();return e.KtG(w.removeTodo(s,r))}),e._UZ(6,"i",60),e.qZA()()(),e.BQk()}if(2&a){const t=c.$implicit;e.xp6(4),e.Oqu(t.todoText)}}const z=function(a){return{"mb-1":a}};let $=(()=>{class a{deleteStage(t){this.stages=this.stages.filter(o=>o.id!==t.id||o.name!==t.name)}constructor(t,o,n,s,r,w,ve){this.data=t,this.fb=o,this.alert=n,this.dialog=s,this.elm=r,this.service=w,this.translate=ve,this.selectedStage=null,this.submitted=!1,this.loading=!1,this.todo="",this.todos=[],this.categories=[],this.priorities=[{value:2,name:"high"},{value:1,name:"medium"},{value:0,name:"low"}],this.types=[{name:this.translate.instant("classic"),value:1},{name:this.translate.instant("meeting"),value:4},{name:this.translate.instant("location"),value:5},{name:this.translate.instant("kpi"),value:6},{name:this.translate.instant("competence"),value:7},{name:this.translate.instant("signature"),value:8}],this.props=[],this.stages=[],this.config={editable:!0,spellcheck:!0,height:"100px",minHeight:"5rem",defaultParagraphSeparator:"p",defaultFontName:"Arial",customClasses:[{name:"Quote",class:"quoteClass"},{name:"Title Heading",class:"titleHead",tag:"h1"}]},this.form=this.fb.group({title:["",p.kI.required],taskGroupType:[1,p.kI.required],description:["",p.kI.required],priority:[null,p.kI.required],taskTemplateCategoryId:[null,p.kI.required],definitionOfDone:[""]})}ngOnInit(){this.service.categories.subscribe(t=>this.categories=t),this.data.template&&(this.form.patchValue(this.data.template),this.todos=this.data.template.taskTemplateTodoList,this.props=this.data.template.templateTaskDynamicProperties,this.stages=this.data.template.stages,this.stages.length>0&&(this.selectedStage=this.stages[0].id||null))}submit(){if(this.submitted=!0,this.loading=!0,this.form.valid){let t,o,n;t="create"==this.data.formType?this.todos.map(r=>({todoText:r.todoText})):this.todos,o="create"==this.data.formType?this.props.map(r=>({...r})):this.props,n="create"==this.data.formType?this.stages.map(r=>({...r,editStage:!1,id:String(r.id||0)})):this.stages;const s={...this.form.value,taskTemplateTodoList:t,templateTaskDynamicProperties:o,stages:n,..."edit"==this.data.formType&&{id:this.data.template.id}};"create"==this.data.formType?this.service.addTemplate(s).subscribe(r=>{r.success?(this.dialog.closeAll(),this.successMessage(),this.service.getCategories().subscribe(),this.service.getTemplates().subscribe()):this.loading=!1}):this.service.updateTodo(s).subscribe(r=>{r.success?(this.dialog.closeAll(),this.service.getTemplates().subscribe(),this.alert.showAlert("template_updated")):this.loading=!1})}}deleteTodo(t){this.service.deleteTodo(t).subscribe(o=>{o.success&&this.alert.showAlert("todo_deleted")})}get f(){return this.form.controls}addTodo(){this.todo.trim()&&(this.todos.push({todoText:this.todo,id:1}),"edit"==this.data.formType&&this.service.createTodo({todoText:this.todo,taskTemplateId:this.data.template.id}).subscribe(t=>{t.success&&this.alert.showAlert("todo_created")}),this.todo="",setTimeout(()=>{this.elm.nativeElement.querySelector(".mat-dialog-content").scrollTop=this.elm.nativeElement.querySelector(".mat-dialog-content").scrollHeight},0))}removeTodo(t,o){this.todos=this.todos.filter((n,s)=>s!==o),"edit"==this.data.formType&&this.deleteTodo(t.id)}getProps(t){this.props=t,setTimeout(()=>{this.elm.nativeElement.querySelector(".mat-mdc-dialog-content").scrollTop=this.elm.nativeElement.querySelector(".mat-mdc-dialog-content").scrollHeight},0)}successMessage(){this.alert.showAlert("template_created")}onAddStagePress(t){"Enter"===t.key&&this.saveStage()}saveStage(){this.stages=[...this.stages,{name:this.stageTitle||"stage "+this.stages.length+1,order:this.stages.length+1}],this.stageTitle=null}static{this.\u0275fac=function(o){return new(o||a)(e.Y36(u.WI),e.Y36(p.qu),e.Y36(U.c),e.Y36(u.uw),e.Y36(e.SBq),e.Y36(k.$),e.Y36(d.sK))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["template-form"]],standalone:!0,features:[e.jDz],decls:54,vars:55,consts:[[1,"create-task"],["mat-dialog-title","",1,"black"],["mat-dialog-content","","magicScroll","","dir","auto",1,"pb-2"],[3,"formGroup"],[1,"flex-grid","gap-y-1"],[1,"col-lg-6"],["key","title",3,"control","maxLength"],["type","text","formControlName","title","maxlength","100",1,"input"],[3,"control"],["key","task_type",3,"control"],["bindLabel","name","bindValue","value","appendTo","body","formControlName","taskGroupType",3,"items","clearSearchOnAdd","clearOnBackspace"],["key","stage",3,"optional"],["bindLabel","name","bindValue","id","appendTo","body",3,"items","clearSearchOnAdd","clearOnBackspace","closeOnSelect","ngModelOptions","ngModel","ngModelChange"],["ng-option-tmp",""],["ng-footer-tmp",""],["key","priority",3,"control"],["formControlName","priority","bindLabel","name","bindValue","value","appendTo","body",3,"items"],["ng-option-tmp","","ng-label-tmp",""],["key","category",3,"control"],["formControlName","taskTemplateCategoryId","bindLabel","name","bindValue","id","appendTo","body",3,"items"],[1,"col-md-12"],["key","description",3,"optional","control"],[3,"formGroup","formControlName"],[1,"col-md-12","mt-75"],["key","definitionOfDone",3,"optional","control"],[1,"col-lg-12","mb-1"],[3,"propsState","props","label","todoAdded"],[1,"col-lg-12"],["key","todo_list",3,"optional"],[1,"flex-grid","gap-y-2",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"input-container","relative","rounded"],["type","text","maxlength","100",1,"input",3,"ngModel","ngModelOptions","keyup.enter","ngModelChange"],["type","button",1,"clickable-btn","add-todo","flex-center","bg-primary","fs-20","white",3,"click"],["mat-dialog-actions","","align","end",1,"buttons"],["mat-raised-button","","mat-dialog-close","",1,"px-4","mr-2","border-black"],["mat-raised-button","","color","primary",1,"px-4","fs-15",3,"disabled","click"],[3,"text","loading"],[1,"flex","aic","jcsb"],[1,"py-50","flex","aic"],["required","required","type","text",3,"readonly","ngModel","ngModelOptions","keypress","ngModelChange"],["class","py-50 text-right",4,"ngIf"],["class","flex aic relative",4,"ngIf"],[1,"py-50","text-right"],[1,"fs-18","warning","mr-1","bx","bx-edit",3,"click"],[1,"fs-18","danger","mr-1","bx","bx-trash",3,"click"],[1,"flex","aic","relative"],[1,"bx","bx-plus","primary","fs-18","px-1","absolute","pointer",2,"inset-inline-end","0",3,"click"],[1,""],["class","flex aic pointer",3,"click",4,"ngIf"],[1,"flex","aic","pointer",3,"click"],[1,"bx","bx-plus","primary","fs-18"],[1,"fw-500"],["required","required","type","text",1,"input",3,"ngModel","ngModelOptions","keypress","ngModelChange"],[1,"flex","aic"],[3,"priority"],[1,"ml-1","fs-15"],[1,"todo","p-1","bg-gray","flex","jcsb","rounded"],[1,"text"],[1,"remove-todo","danger","pointer",3,"click"],[1,"bx","bx-x"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2)(6,"form",3)(7,"div",4)(8,"div",5),e._UZ(9,"input-label",6)(10,"input",7)(11,"input-error",8),e.qZA(),e.TgZ(12,"div",5),e._UZ(13,"input-label",9)(14,"ng-select",10)(15,"input-error",8),e.qZA(),e.TgZ(16,"div",5),e._UZ(17,"input-label",11),e.TgZ(18,"ng-select",12),e.NdJ("ngModelChange",function(r){return n.selectedStage=r}),e.YNc(19,D,5,9,"ng-template",13),e.YNc(20,H,3,2,"ng-template",14),e.qZA(),e._UZ(21,"input-error",8),e.qZA(),e.TgZ(22,"div",5),e._UZ(23,"input-label",15),e.TgZ(24,"ng-select",16),e.YNc(25,W,5,4,"ng-template",17),e.qZA(),e._UZ(26,"input-error",8),e.qZA(),e.TgZ(27,"div",5),e._UZ(28,"input-label",18),e.TgZ(29,"ng-select",19),e.YNc(30,B,4,3,"ng-template",17),e.qZA(),e._UZ(31,"input-error",8),e.qZA(),e.TgZ(32,"div",20),e._UZ(33,"input-label",21)(34,"text-editor",22),e.qZA(),e.TgZ(35,"div",23),e._UZ(36,"input-label",24)(37,"text-editor",22),e.qZA(),e.TgZ(38,"div",25)(39,"create-task-todo",26),e.NdJ("todoAdded",function(r){return n.getProps(r)}),e.qZA()(),e.TgZ(40,"div",27),e._UZ(41,"input-label",28),e.TgZ(42,"div",29),e.YNc(43,j,7,1,"ng-container",30),e.qZA(),e.TgZ(44,"div",31)(45,"input",32),e.NdJ("keyup.enter",function(){return n.addTodo()})("ngModelChange",function(r){return n.todo=r}),e.qZA(),e.TgZ(46,"button",33),e.NdJ("click",function(){return n.addTodo()}),e._uU(47,"+ "),e.qZA()()()()()(),e.TgZ(48,"div",34)(49,"button",35),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"button",36),e.NdJ("click",function(){return n.submit()}),e._UZ(53,"submit-button",37),e.qZA()()()),2&o&&(e.xp6(2),e.AsE("",e.lcZ(3,45,n.data.formType)," ",e.lcZ(4,47,"template"),""),e.xp6(4),e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("control",n.f.title)("maxLength",100),e.xp6(2),e.Q6J("control",n.f.title),e.xp6(2),e.Q6J("control",n.f.taskGroupType),e.xp6(1),e.Q6J("items",n.types)("clearSearchOnAdd",!0)("clearOnBackspace",!0),e.xp6(1),e.Q6J("control",n.f.taskGroupType),e.xp6(2),e.Q6J("optional",!0),e.xp6(1),e.Q6J("items",n.stages)("clearSearchOnAdd",!0)("clearOnBackspace",!0)("closeOnSelect",!1)("ngModelOptions",e.DdM(51,F))("ngModel",n.selectedStage),e.xp6(3),e.Q6J("control",n.f.projectId),e.xp6(2),e.Q6J("control",n.f.priority),e.xp6(1),e.Q6J("items",n.priorities),e.xp6(2),e.Q6J("control",n.f.priority),e.xp6(2),e.Q6J("control",n.f.taskTemplateCategoryId),e.xp6(1),e.Q6J("items",n.categories),e.xp6(2),e.Q6J("control",n.f.taskTemplateCategoryId),e.xp6(2),e.Q6J("optional",!0)("control",n.f.description),e.xp6(1),e.Q6J("formGroup",n.form)("formControlName","description"),e.xp6(2),e.Q6J("optional",!0)("control",n.f.definitionOfDone),e.xp6(1),e.Q6J("formGroup",n.form)("formControlName","definitionOfDone"),e.xp6(2),e.Q6J("propsState",!0)("props",n.props)("label","questions"),e.xp6(2),e.Q6J("optional",!0),e.xp6(1),e.Q6J("ngClass",e.VKq(52,z,n.todos.length>0)),e.xp6(1),e.Q6J("ngForOf",n.todos),e.xp6(2),e.Q6J("ngModel",n.todo)("ngModelOptions",e.DdM(54,F)),e.xp6(5),e.Oqu(e.lcZ(51,49,"cancel")),e.xp6(2),e.Q6J("disabled",n.form.invalid||n.loading),e.xp6(1),e.Q6J("text",n.data.formType)("loading",n.loading))},dependencies:[i.ez,i.mk,i.sg,i.O5,u.Is,u.ZT,u.uh,u.xY,u.H8,I.Lv,d.aw,d.X$,p.UX,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.nD,p.sg,p.u,J.i,m.w,f.A0,f.w9,f.ir,f.mR,f.WP,_.UM,p.u5,p.On,h.ot,h.lW,g.w,O.t,y.h,S.d,P.J],styles:[".border-black{border:1px solid #1f1f1f;min-width:14rem!important}.submit{width:13rem!important}.input-container{overflow:hidden}.input-container input{padding-inline-end:6.5rem}.input-container .add-todo{position:absolute;top:0;inset-inline-end:0;height:100%;width:5rem}.remove-todo{position:relative;top:4px}.ng-option-selected .input,.ng-option-selected .bx{color:#f0f0f0!important;border-color:#f0f0f0!important}\n"],encapsulation:2})}}return a})();function X(a,c){1&a&&(e.TgZ(0,"h2",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"edit_category")))}function R(a,c){1&a&&(e.TgZ(0,"h2",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"add_category")))}let V=(()=>{class a{constructor(t,o,n,s,r){this.data=t,this.fb=o,this.templatesService=n,this.alert=s,this.dialog=r,this.submitted=!1,this.loading=!1,this.form=this.fb.group({name:["",p.kI.required],arName:["",p.kI.required]})}ngOnInit(){"edit"==this.data.formType&&this.form.patchValue(this.data.category)}submit(){if(this.submitted=!0,this.loading=!0,this.form.valid)if("create"==this.data.formType)this.templatesService.addCategory(this.form.value).subscribe(t=>{t.success?(this.alert.showAlert("category_created"),this.templatesService.getCategories().subscribe(()=>this.templatesService.loading.next(!1)),this.dialog.closeAll()):this.loading=!1});else{const t={...this.form.value,id:this.data.category.id};this.templatesService.updateCategory(t).subscribe(o=>{o.success?(this.alert.showAlert("category_updated"),this.templatesService.getCategories().subscribe(()=>this.templatesService.loading.next(!1)),this.dialog.closeAll()):this.loading=!1})}}get f(){return this.form.controls}static{this.\u0275fac=function(o){return new(o||a)(e.Y36(u.WI),e.Y36(p.qu),e.Y36(k.$),e.Y36(U.c),e.Y36(u.uw))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["category-form"]],standalone:!0,features:[e.jDz],decls:19,vars:13,consts:[["dir","auto",1,"category-form"],["mat-dialog-title","","class","black title",4,"ngIf"],["mat-dialog-content","",3,"formGroup"],[1,"name"],["key","name",3,"control"],["type","text","formControlName","name",1,"input"],[3,"control"],[1,"arName","mt-1"],["key","arName",3,"control"],["type","text","formControlName","arName",1,"input"],["mat-dialog-actions",""],[1,"flex","gap-x-1","w-100"],["mat-dialog-close","",1,"w-100","flex-auto","dark-color","clickable-btn","rounded","cancel-btn"],["mat-raised-button","","color","primary",1,"w-100","flex-auto","rounded","bg-primary","white",3,"disabled","click"],[3,"text","loading"],["mat-dialog-title","",1,"black","title"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e.YNc(1,X,3,3,"h2",1),e.YNc(2,R,3,3,"h2",1),e.TgZ(3,"form",2)(4,"div",3),e._UZ(5,"input-label",4)(6,"input",5)(7,"input-error",6),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"input-label",8)(10,"input",9)(11,"input-error",6),e.qZA()(),e.TgZ(12,"div",10)(13,"div",11)(14,"button",12),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",13),e.NdJ("click",function(){return n.submit()}),e._UZ(18,"submit-button",14),e.qZA()()()()),2&o&&(e.xp6(1),e.Q6J("ngIf","edit"==n.data.formType),e.xp6(1),e.Q6J("ngIf","edit"!=n.data.formType),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("control",n.f.name),e.xp6(2),e.Q6J("control",n.f.name),e.xp6(2),e.Q6J("control",n.f.arName),e.xp6(2),e.Q6J("control",n.f.arName),e.xp6(4),e.Oqu(e.lcZ(16,11,"cancel")),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(1),e.Q6J("text","edit"==n.data.formType?"edit":"add")("loading",n.loading))},dependencies:[i.ez,i.O5,u.Is,u.ZT,u.uh,u.xY,u.H8,I.Lv,J.i,m.w,p.UX,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,g.w,h.ot,h.lW,d.aw,d.X$]})}}return a})();var ee=l(24971);function te(a,c){1&a&&e._uU(0),2&a&&e.hij(" ",c.item.name," ")}function ne(a,c){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"slice"),e.qZA()),2&a){const t=e.oxw().items;e.xp6(1),e.hij("",e.Dn7(2,1,t[0].name,0,10),"...")}}function ie(a,c){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw().items;e.xp6(1),e.Oqu(t[0].name)}}function ae(a,c){if(1&a&&(e.TgZ(0,"div",11)(1,"span",12),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&a){const t=e.oxw().items;e.xp6(2),e.AsE("",t.length-1," ",e.lcZ(3,2,"more"),"...")}}function oe(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",5)(1,"span",6)(2,"span",7),e.YNc(3,ne,3,5,"span",8),e.YNc(4,ie,2,1,"span",8),e.qZA()(),e.TgZ(5,"span",9),e.NdJ("click",function(){const n=e.CHM(t);return e.KtG((0,n.clear)(n.items[0]))}),e._uU(6,"\xd7"),e.qZA()(),e.YNc(7,ae,4,4,"div",10)}if(2&a){const t=c.items;e.xp6(3),e.Q6J("ngIf",t[0].name.length>=10),e.xp6(1),e.Q6J("ngIf",t[0].name.length<10),e.xp6(3),e.Q6J("ngIf",t.length>1)}}let se=(()=>{class a{constructor(){this.categories=[],this.selectedCategories=[],this.emitChange=new e.vpe}ngOnInit(){}onChange(){this.emitChange.emit(this.selectedCategories)}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["category-filter"]],inputs:{categories:"categories",selectedCategories:"selectedCategories"},outputs:{emitChange:"emitChange"},standalone:!0,features:[e.jDz],decls:7,vars:7,consts:[[1,"category"],[1,"fs-13"],["bindLabel","name","bindValue","id","appendTo","body",1,"w-22r",3,"items","ngModel","multiple","closeOnSelect","ngModelChange"],["ng-option-tmp",""],["ng-multi-label-tmp",""],[1,"ng-value","flex","aic"],[1,"ng-value-label"],[1,"flex","aic","fs-11"],[4,"ngIf"],["aria-hidden","true",1,"ng-value-icon","right",3,"click"],["class","ng-value rounded-2",4,"ngIf"],[1,"ng-value","rounded-2"],[1,"ng-value-label","fs-11"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"label",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ng-select",2),e.NdJ("ngModelChange",function(r){return n.selectedCategories=r})("ngModelChange",function(){return n.onChange()}),e.YNc(5,te,1,1,"ng-template",3),e.YNc(6,oe,8,3,"ng-template",4),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,5,"category")),e.xp6(2),e.Q6J("items",n.categories)("ngModel",n.selectedCategories)("multiple",!0)("closeOnSelect",!1))},dependencies:[i.ez,i.O5,i.OU,f.A0,f.w9,f.ir,f.zB,p.u5,p.JJ,p.On,d.aw,d.X$]})}}return a})(),le=(()=>{class a{constructor(t){this.service=t,this.counter=0,this.emitChange=new e.vpe,this.manageCategory=new e.vpe,this.newTemplate=new e.vpe}ngOnInit(){}filter(t,o){clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.service.page.next(1),o?.next(t),this.emitChange.emit(t)},500)}static{this.\u0275fac=function(o){return new(o||a)(e.Y36(k.$))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["templates-filter"]],inputs:{counter:"counter"},outputs:{emitChange:"emitChange",manageCategory:"manageCategory",newTemplate:"newTemplate"},standalone:!0,features:[e.jDz],decls:13,vars:11,consts:[[1,"filters","flex","aic","jcsb","gap-x-4"],[1,"flex-auto","flex","aic","flex-wrap","gap-x-1","gap-y-1"],[3,"key","valueChanged"],[3,"selectedCategories","categories","emitChange"],[1,"flex","aic"],[1,"mr-1"],["mat-raised-button","","color","primary",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"search",2),e.NdJ("valueChanged",function(r){return n.filter(r,n.service.search)}),e.qZA(),e.TgZ(3,"category-filter",3),e.NdJ("emitChange",function(r){return n.filter(r,n.service.category)}),e.ALo(4,"async"),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"button",6),e.NdJ("click",function(){return n.newTemplate.emit()}),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"button",6),e.NdJ("click",function(){return n.manageCategory.emit()}),e._uU(11),e.ALo(12,"translate"),e.qZA()()()),2&o&&(e.xp6(2),e.Q6J("key",n.service.search.value),e.xp6(1),e.Q6J("selectedCategories",n.service.category.value)("categories",e.lcZ(4,5,n.service.categories)),e.xp6(5),e.Oqu(e.lcZ(9,7,"new_templates")),e.xp6(3),e.Oqu(e.lcZ(12,9,"manage_category")))},dependencies:[i.ez,i.Ov,ee.g,se,h.ot,h.lW,d.aw,d.X$]})}}return a})();function re(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"tr",20)(1,"td")(2,"div",21),e._UZ(3,"priority",22),e.TgZ(4,"div",23),e._uU(5),e.qZA()()(),e.TgZ(6,"td",24),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"arabicDate"),e.qZA(),e.TgZ(12,"td",18),e._uU(13),e.qZA(),e.TgZ(14,"td")(15,"div",25),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.selectedTemplate=s)}),e._UZ(16,"i",26),e.qZA()()()}if(2&a){const t=c.$implicit;e.oxw(2);const o=e.MAs(18);e.xp6(3),e.Q6J("priority",t.priority),e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(e.lcZ(8,6,t.creatorName||"taskedin")),e.xp6(3),e.Oqu(e.lcZ(11,8,t.creationDate)),e.xp6(3),e.Oqu(t.taskTemplateCategoryName),e.xp6(3),e.Q6J("matMenuTriggerFor",o)}}const ce=function(a,c,t){return{itemsPerPage:a,currentPage:c,totalItems:t}};function pe(a,c){if(1&a&&(e.TgZ(0,"table",15)(1,"thead",16)(2,"tr")(3,"th",17),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",18),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"th"),e.qZA()(),e.TgZ(16,"tbody"),e.YNc(17,re,17,10,"tr",19),e.ALo(18,"paginate"),e.qZA()()),2&a){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,6,"template_name")),e.xp6(3),e.Oqu(e.lcZ(8,8,"creator")),e.xp6(3),e.Oqu(e.lcZ(11,10,"creation_date")),e.xp6(3),e.Oqu(e.lcZ(14,12,"category")),e.xp6(4),e.Q6J("ngForOf",e.xi3(18,14,t.templates,e.kEZ(17,ce,t.meta.pageSize,t.meta.currentPage,t.meta.totalItems)))("ngForTrackBy",t.trackBy)}}function me(a,c){1&a&&e._UZ(0,"not-found")}function ge(a,c){1&a&&e._UZ(0,"loading")}function de(a,c){if(1&a&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}function ue(a,c){if(1&a&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.arName)}}function _e(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",29),e.YNc(2,de,2,1,"p",30),e.YNc(3,ue,2,1,"p",30),e.TgZ(4,"div",31),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.selectedCategory=s)}),e._UZ(5,"i",32),e.qZA(),e.TgZ(6,"mat-menu",12,33)(8,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.categoryForm(!0))}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.deleteCategory())}),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",34)(15,"div",35)(16,"div",36),e._UZ(17,"img",37),e.qZA(),e.TgZ(18,"p",38),e._uU(19),e.ALo(20,"arabicNumbers"),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",39)(23,"div",36),e._UZ(24,"img",40),e.qZA(),e.TgZ(25,"p",38),e._uU(26),e.ALo(27,"arabicDate"),e.qZA()()()()}if(2&a){const t=c.$implicit,o=e.MAs(7),n=e.oxw(2);e.xp6(2),e.Q6J("ngIf","ltr"==n.dir),e.xp6(1),e.Q6J("ngIf","rtl"==n.dir),e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(5),e.Oqu(e.lcZ(10,8,"edit")),e.xp6(3),e.Oqu(e.lcZ(13,10,"delete")),e.xp6(7),e.AsE("",e.lcZ(20,12,t.taskTemplateCount)," ",e.lcZ(21,14,"templates"),""),e.xp6(7),e.Oqu(e.lcZ(27,16,t.creationDate))}}function fe(a,c){if(1&a&&(e.ynx(0),e.YNc(1,_e,28,18,"div",27),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.categories)}}function he(a,c){1&a&&e._UZ(0,"not-found")}const Te=function(a){return{"h-100":a}};let Ce=(()=>{class a{constructor(t,o,n,s){this.service=t,this.dialog=o,this.router=n,this.alert=s,this.templates=[],this.categories=[],this.dir=document.dir,this.openSidebar=!1,this.loading=!1}ngOnInit(){this.sub=this.router.events.subscribe(t=>{}),this.service.loading.subscribe(t=>this.loading=t),this.service.meta.subscribe(t=>{this.meta=t}),this.service.templates.subscribe(t=>this.templates=t),this.service.categories.subscribe(t=>this.categories=t),this.getTemplates(),this.getCategories()}getTemplates(){this.service.loading.next(!0),this.service.getTemplates().subscribe(t=>{this.templates=t,this.service.loading.next(!1)})}getCategories(){this.service.getCategories().subscribe(t=>{this.categories=t})}manageCategory(){this.openSidebar=!1,setTimeout(()=>{this.openSidebar=!0},0)}templateForm(t=!1){this.dialog.open($,{panelClass:"create-task-dialog",data:{formType:t?"edit":"create",...t&&{template:this.selectedTemplate}}})}categoryForm(t=!1){this.dialog.open(V,{panelClass:"small-dialog",data:{formType:t?"edit":"create",...t&&{category:this.selectedCategory}}})}deleteTemplate(){this.dialog.open(A.v,{panelClass:"confirmation-dialog",data:{message:"delete_template_message",btn_name:"delete",classes:"w-100 bg-danger",selectedTemplate:this.selectedTemplate}}).afterClosed().subscribe(o=>{o&&this.service.deleteTemplate(this.selectedTemplate.id).subscribe(n=>{n.success&&(this.alert.showAlert("template_deleted"),this.getTemplates(),this.service.getCategories().subscribe())})})}deleteCategory(){this.dialog.open(A.v,{panelClass:"confirmation-dialog",data:{message:"delete_category_message",btn_name:"delete",classes:"w-100 bg-danger",selectedCategory:this.selectedCategory}}).afterClosed().subscribe(o=>{o&&this.service.deleteCategory(this.selectedCategory.id).subscribe(n=>{n.success&&(this.alert.showAlert("category_deleted"),this.getCategories())})})}trackBy(t,o){return o.id}pageChanged(t){this.service.page.next(t),this.getTemplates()}limitChanged(t){this.service.page.next(1),this.service.limit.next(t),this.getTemplates()}ngOnDestroy(){this.sub.unsubscribe()}static{this.\u0275fac=function(o){return new(o||a)(e.Y36(k.$),e.Y36(u.uw),e.Y36(M.F0),e.Y36(U.c))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["templates"]],standalone:!0,features:[e.jDz],decls:25,vars:22,consts:[[3,"meta","admin","limit","pageChange","limitChanged"],["filters",""],[3,"counter","emitChange","manageCategory","newTemplate"],["content",""],["class","table",4,"ngIf"],[4,"ngIf"],[3,"open"],["header","",1,"flex","aic","jcsb","w-100"],[1,"bold"],[1,"add-category","flex-center","bg-primary","white","clickable-btn","rounded",3,"click"],[1,"bx","bx-plus","fs-20"],["content","",1,"p-2",3,"ngClass"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"table"],[1,"bg-gray","border-bottom"],[1,"text-left"],[1,"text-center"],["class","border-bottom",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom"],[1,"flex","aic"],[3,"priority"],[1,"ml-1"],[1,"primary"],[1,"pointer",3,"click"],[1,"bx","bx-dots-vertical-rounded","fs-25","px-1","jcfe",3,"matMenuTriggerFor"],["class","category-card bg-gray mb-2 rounded p-2",4,"ngFor","ngForOf"],[1,"category-card","bg-gray","mb-2","rounded","p-2"],[1,"flex","aic","jcsb","border-bottom","pb-2"],["class","fs-14 bold",4,"ngIf"],[1,"settings","pointer",3,"matMenuTriggerFor","click"],[1,"bx","bx-dots-vertical-rounded","fs-25"],["afterMenu","matMenu"],[1,"category-numbers","flex","aic","jcsb","mt-2"],[1,"count","flex","aic"],[1,"img"],["src","assets/images/icons/templates.svg","alt","templates icon",1,"convert-image-color"],[1,"fs-13","ml-50"],[1,"date","flex","aic"],["src","assets/images/icons/calendar1.svg","alt","calendar icon",1,"convert-image-color"],[1,"fs-14","bold"]],template:function(o,n){1&o&&(e.TgZ(0,"layout-with-filters",0),e.NdJ("pageChange",function(r){return n.pageChanged(r)})("limitChanged",function(r){return n.limitChanged(r)}),e.ynx(1,1),e.TgZ(2,"templates-filter",2),e.NdJ("emitChange",function(){return n.getTemplates()})("manageCategory",function(){return n.manageCategory()})("newTemplate",function(){return n.templateForm()}),e.qZA(),e.BQk(),e.ynx(3,3),e.YNc(4,pe,19,21,"table",4),e.YNc(5,me,1,0,"not-found",5),e.YNc(6,ge,1,0,"loading",5),e.BQk(),e.qZA(),e.TgZ(7,"info-sidebar",6)(8,"div",7)(9,"p",8),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return n.categoryForm()}),e._UZ(13,"i",10),e.qZA()(),e.TgZ(14,"div",11),e.YNc(15,fe,2,1,"ng-container",5),e.YNc(16,he,1,0,"not-found",5),e.qZA()(),e.TgZ(17,"mat-menu",12,13)(19,"button",14),e.NdJ("click",function(){return n.templateForm(!0)}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return n.deleteTemplate()}),e._uU(23),e.ALo(24,"translate"),e.qZA()()),2&o&&(e.Q6J("meta",n.meta)("admin",!0)("limit",n.service.limit.value),e.xp6(2),e.Q6J("counter",null==n.meta?null:n.meta.totalItems),e.xp6(2),e.Q6J("ngIf",n.templates&&n.templates.length>0&&!n.loading),e.xp6(1),e.Q6J("ngIf",n.templates&&0==n.templates.length&&!n.loading),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("open",n.openSidebar),e.xp6(3),e.Oqu(e.lcZ(11,14,"categories")),e.xp6(4),e.Q6J("ngClass",e.VKq(20,Te,0==n.categories.length)),e.xp6(1),e.Q6J("ngIf",n.categories.length>0),e.xp6(1),e.Q6J("ngIf",0==n.categories.length),e.xp6(4),e.Oqu(e.lcZ(21,16,"edit")),e.xp6(3),e.Oqu(e.lcZ(24,18,"delete")))},dependencies:[i.ez,i.mk,i.sg,i.O5,O.t,d.aw,d.X$,Z.Y,T.JX,T._s,q.w,C.N,x.K,b.Tx,b.VK,b.OP,b.p6,L.P,N.m,le],styles:[".table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem!important;font-size:1.4rem!important;text-align:start!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1.5rem 1rem!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-of-type, .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-of-type{padding-inline-start:2.5rem!important}.add-category[_ngcontent-%COMP%]{min-width:auto;padding:.6rem!important}"]})}}return a})()}}]);