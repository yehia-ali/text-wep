"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[5803,1428,6526],{1428:(v,u,o)=>{o.d(u,{$:()=>f});var t=o(65879),p=o(96814),e=o(3131);const l=function(a){return{"max-width":a}},d=["*"];let f=(()=>{class a{constructor(){this.scroll=!1,this.service=(0,t.f3M)(e.P)}static{this.\u0275fac=function(c){return new(c||a)}}static{this.\u0275cmp=t.Xpm({type:a,selectors:[["layout"]],inputs:{scroll:"scroll"},standalone:!0,features:[t.jDz],ngContentSelectors:d,decls:2,vars:6,consts:[[3,"ngStyle"]],template:function(c,m){1&c&&(t.F$t(),t.TgZ(0,"div",0),t.Hsn(1),t.qZA()),2&c&&(t.Gre("",m.scroll?"scroll":""," layout rounded bg-white border"),t.Q6J("ngStyle",t.VKq(4,l,m.service.withSubMenu.value?"100vw":"calc(100vw - 92px)")))},dependencies:[p.ez,p.PC],styles:[".layout[_ngcontent-%COMP%]{overflow:hidden;height:calc(100vh - 11rem);box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.scroll[_ngcontent-%COMP%]{overflow-y:auto!important}"]})}}return a})()},3131:(v,u,o)=>{o.d(u,{P:()=>e});var t=o(65619),p=o(65879);let e=(()=>{class l{constructor(){this.withSubMenu=new t.X(!0)}static{this.\u0275fac=function(a){return new(a||l)}}static{this.\u0275prov=p.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()},65803:(v,u,o)=>{o.r(u),o.d(u,{EmailConfigurationComponent:()=>x});var t=o(65879),p=o(96814),e=o(56223),l=o(1428),d=o(1350),f=o(58964),a=o(89515),C=o(824),g=o(82458),c=o(35282),m=o(20553),y=o(69862);let b=(()=>{class r{constructor(i){this.http=i}GetConfig(){return this.http.get(`${m.N.coreBase}/api/EmailBox/GetEmailConfig`)}MailConfig(i){return this.http.post(`${m.N.coreBase}/api/EmailBox/AddMailConfigration`,i)}deleteConfig(){return this.http.get(`${m.N.coreBase}/api/EmailBox/DeleteConfigration`)}static{this.\u0275fac=function(s){return new(s||r)(t.LFG(y.eN))}}static{this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Z=o(99758),M=o(17700),P=o(83318),E=o(63934);function J(r,Q){if(1&r){const i=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.deleteConfiguration())}),t._UZ(1,"submit-button",23),t.qZA()}if(2&r){const i=t.oxw();t.xp6(1),t.Q6J("loading",i.loading)}}const T=function(r){return{jcfe:r}};let x=(()=>{class r{constructor(i){this.fb=i,this.userSer=(0,t.f3M)(E.K),this.loading=!1,this.type="password",this.service=(0,t.f3M)(b),this.alert=(0,t.f3M)(Z.c),this.dialog=(0,t.f3M)(M.uw),this.hasConfig=!1,this.form=this.fb.group({imapPort:["",e.kI.required],imap:["",e.kI.required],stmpPort:["",e.kI.required],stmpServer:["",e.kI.required],email:["",e.kI.required],password:[""]})}ngOnInit(){this.service.GetConfig().subscribe(i=>{this.hasConfig=!!i.data.stmpPort,this.form.patchValue({...i.data,password:""})})}submit(){this.loading=!0,this.form.valid&&this.service.MailConfig(this.form.value).subscribe(i=>{i.success&&(this.alert.showAlert("email_config_updated"),this.userSer.getMyProfile().subscribe(s=>{this.hasConfig=s.data.isMailConfigured})),this.loading=!1})}deleteConfiguration(){this.dialog.open(P.v,{panelClass:"confirmation-dialog",data:{btn_name:"confirm",classes:"bg-danger white",message:"delete_email_config"}}).afterClosed().subscribe(s=>{s&&this.service.deleteConfig().subscribe(n=>{n.success&&(this.alert.showAlert("email_config_deleted"),this.userSer.getMyProfile().subscribe(h=>{this.hasConfig=h.data.isMailConfigured}),this.form.reset())})})}get f(){return this.form.controls}static{this.\u0275fac=function(s){return new(s||r)(t.Y36(e.qu))}}static{this.\u0275cmp=t.Xpm({type:r,selectors:[["email-leaves-settings"]],standalone:!0,features:[t.jDz],decls:33,vars:20,consts:[["magicScroll","",1,"email-configuration","p-5","h-100"],[3,"formGroup"],[1,"flex-grid","gap-y-1"],[1,"col-xl-6"],["key","imap",3,"control"],["type","text","formControlName","imap",1,"input"],[3,"control"],["key","imap_port",3,"control"],["type","number","formControlName","imapPort",1,"input"],["key","stmp",3,"control"],["type","text","formControlName","stmpServer",1,"input"],["key","stmp_port",3,"control"],["type","number","formControlName","stmpPort",1,"input"],["key","email",3,"control"],["type","email","formControlName","email",1,"input"],["key","password",3,"control"],[3,"getType"],["formControlName","password",1,"input",3,"type"],[1,"flex","aic","jcsb","mt-2",3,"ngClass"],["class","bg-danger white clickable-btn rounded py-1 submit",3,"click",4,"ngIf"],[1,"bg-primary","white","clickable-btn","rounded","py-1","submit",3,"disabled","click"],["text","save",3,"loading"],[1,"bg-danger","white","clickable-btn","rounded","py-1","submit",3,"click"],["text","delete",3,"loading"]],template:function(s,n){1&s&&(t.TgZ(0,"layout")(1,"div",0)(2,"form",1)(3,"div",2)(4,"div",3),t._UZ(5,"input-label",4)(6,"input",5)(7,"input-error",6),t.qZA(),t.TgZ(8,"div",3),t._UZ(9,"input-label",7)(10,"input",8)(11,"input-error",6),t.qZA(),t.TgZ(12,"div",3),t._UZ(13,"input-label",9)(14,"input",10)(15,"input-error",6),t.qZA(),t.TgZ(16,"div",3),t._UZ(17,"input-label",11)(18,"input",12)(19,"input-error",6),t.qZA(),t.TgZ(20,"div",3),t._UZ(21,"input-label",13)(22,"input",14)(23,"input-error",6),t.qZA(),t.TgZ(24,"div",3),t._UZ(25,"input-label",15),t.TgZ(26,"input-password",16),t.NdJ("getType",function(w){return n.type=w}),t._UZ(27,"input",17),t.qZA(),t._UZ(28,"input-error",6),t.qZA()(),t.TgZ(29,"div",18),t.YNc(30,J,2,1,"button",19),t.TgZ(31,"button",20),t.NdJ("click",function(){return n.submit()}),t._UZ(32,"submit-button",21),t.qZA()()()()()),2&s&&(t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(3),t.Q6J("control",n.f.imap),t.xp6(2),t.Q6J("control",n.f.imap),t.xp6(2),t.Q6J("control",n.f.imapPort),t.xp6(2),t.Q6J("control",n.f.imapPort),t.xp6(2),t.Q6J("control",n.f.stmpServer),t.xp6(2),t.Q6J("control",n.f.stmpServer),t.xp6(2),t.Q6J("control",n.f.stmpPort),t.xp6(2),t.Q6J("control",n.f.stmpPort),t.xp6(2),t.Q6J("control",n.f.email),t.xp6(2),t.Q6J("control",n.f.email),t.xp6(2),t.Q6J("control",n.f.password),t.xp6(2),t.Q6J("type",n.type),t.xp6(1),t.Q6J("control",n.f.password),t.xp6(1),t.Q6J("ngClass",t.VKq(18,T,!n.hasConfig)),t.xp6(1),t.Q6J("ngIf",n.hasConfig),t.xp6(1),t.Q6J("disabled",n.form.invalid||n.loading),t.xp6(1),t.Q6J("loading",n.loading))},dependencies:[p.ez,p.mk,p.O5,l.$,e.UX,e._Y,e.Fj,e.wV,e.JJ,e.JL,e.sg,e.u,d.i,f.w,a.aw,C.h,g.w,c.P],styles:[".submit[_ngcontent-%COMP%]{width:15rem!important}"]})}}return r})()}}]);