"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[3944],{38140:(B,O,n)=>{n.d(O,{Y:()=>y});var e=n(65879),_=n(96814),v=n(89515),M=n(824),T=n(52081),p=n(56223),C=n(76472),A=n(3131);function x(r,h){if(1&r&&(e.TgZ(0,"p",10),e._uU(1),e.ALo(2,"arabicNumbers"),e.ALo(3,"translate"),e.qZA()),2&r){const s=e.oxw();e.xp6(1),e.Oqu(null!=s.meta&&s.meta.pageSize?e.lcZ(2,1,null==s.meta?null:s.meta.pageSize):e.lcZ(3,3,"unlimited"))}}function E(r,h){if(1&r){const s=e.EpF();e.TgZ(0,"input",11),e.NdJ("ngModelChange",function(i){e.CHM(s);const u=e.oxw();return e.KtG(u.limit=i)})("ngModelChange",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.changeLimit())}),e.qZA()}if(2&r){const s=e.oxw();e.Q6J("ngModel",s.limit)}}function D(r,h){1&r&&(e.TgZ(0,"p",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"record")))}function b(r,h){if(1&r){const s=e.EpF();e.TgZ(0,"pagination-controls",13),e.NdJ("pageChange",function(i){e.CHM(s);const u=e.oxw();return e.KtG(u.pageChanged(i))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.qZA()}2&r&&e.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",e.lcZ(1,4,"previous"))("nextLabel",e.lcZ(2,6,"next"))}const P=[[["","filters",""]],[["","content",""]]],L=function(r,h){return{height:r,"max-width":h}},U=["[filters]","[content]"];let y=(()=>{class r{constructor(){this.pageChange=new e.vpe,this.limitChanged=new e.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,e.f3M)(A.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(s){this.pageChange.emit(s)}static{this.\u0275fac=function(c){return new(c||r)}}static{this.\u0275cmp=e.Xpm({type:r,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[e.jDz],ngContentSelectors:U,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(c,i){1&c&&(e.F$t(P),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA(),e.TgZ(3,"div",2),e.Hsn(4,1),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"p"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,x,4,5,"p",5),e.YNc(11,E,1,1,"input",6),e.YNc(12,D,3,3,"p",7),e.qZA(),e.YNc(13,b,3,8,"pagination-controls",8),e.TgZ(14,"p"),e._uU(15),e.ALo(16,"translate"),e.TgZ(17,"span",9),e._uU(18),e.ALo(19,"arabicNumbers"),e.ALo(20,"translate"),e.qZA()()()()),2&c&&(e.Q6J("ngStyle",e.WLB(17,L,i.hasTitle?"calc(100vh - 14.5rem)":i.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",i.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),e.xp6(8),e.hij("",e.lcZ(9,9,"pagination_per_page")," "),e.xp6(2),e.Q6J("ngIf",!i.admin),e.xp6(1),e.Q6J("ngIf",i.admin),e.xp6(1),e.Q6J("ngIf",null==i.meta?null:i.meta.pageSize),e.xp6(1),e.Q6J("ngIf",(null==i.meta?null:i.meta.totalItems)>15),e.xp6(2),e.hij("",e.lcZ(16,11,"pagination_total_records")," "),e.xp6(3),e.AsE("",e.lcZ(19,13,null==i.meta?null:i.meta.totalItems)," ",e.lcZ(20,15,"record"),""))},dependencies:[_.ez,_.O5,_.PC,v.aw,v.X$,M.h,T.m,p.u5,p.Fj,p.wV,p.JJ,p.qQ,p.On,C.JX,C.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return r})()},93944:(B,O,n)=>{n.r(O),n.d(O,{OvertimeDashboardComponent:()=>G});var e=n(65879),_=n(96814),v=n(83620),M=n(94664),T=n(37398),p=n(17700),C=n(89515),A=n(76472),x=n(64190),E=n(90173),D=n(65668),b=n(57105),P=n(99758),L=n(9619),U=n(38140),y=n(50387),r=n(54807),h=n(71566),s=n(56223),c=n(32296),i=n(38034),u=n(64170),Z=n(23680),I=n(73445),R=n(52341);function W(a,l){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a){const t=l.item;e.xp6(1),e.Oqu(e.lcZ(2,1,t.name))}}function K(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",17)(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ng-select",26),e.NdJ("ngModelChange",function(o){e.CHM(t);const f=e.oxw();return e.KtG(f.selectedUser=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.userChanged())}),e.ALo(5,"async"),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"team_members")),e.xp6(2),e.Q6J("items",e.lcZ(5,7,t.teamMembers$))("ngModel",t.selectedUser)("multiple",!1)("closeOnSelect",!0)}}function J(a,l){1&a&&(e.ynx(0),e.TgZ(1,"span",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&a&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"pending")))}function S(a,l){1&a&&(e.ynx(0),e.TgZ(1,"span",30),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&a&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"approved")))}function Q(a,l){1&a&&(e.ynx(0),e.TgZ(1,"span",31),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&a&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"rejected")))}function N(a,l){1&a&&(e.ynx(0),e.TgZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&a&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"canceled")))}function F(a,l){if(1&a&&(e.TgZ(0,"tr",28)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"slice"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"convertToTime"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"convertToTime"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"arabicDate"),e.qZA(),e.TgZ(15,"td"),e.YNc(16,J,4,3,"ng-container",24),e.YNc(17,S,4,3,"ng-container",24),e.YNc(18,Q,4,3,"ng-container",24),e.YNc(19,N,4,3,"ng-container",24),e.qZA()()),2&a){const t=l.$implicit,g=l.index;e.MGl("routerLink","details/",t.id,""),e.xp6(2),e.Oqu(g+1),e.xp6(2),e.Oqu(e.Dn7(5,10,t.title,0,30)),e.xp6(3),e.Oqu(e.lcZ(8,14,t.overTimeHoursRequsted)),e.xp6(3),e.Oqu(t.overTimeHoursApproved?e.lcZ(11,16,t.overTimeHoursApproved):"-"),e.xp6(3),e.Oqu(e.lcZ(14,18,t.date)),e.xp6(3),e.Q6J("ngIf",0==t.overTimeStatus),e.xp6(1),e.Q6J("ngIf",1==t.overTimeStatus),e.xp6(1),e.Q6J("ngIf",2==t.overTimeStatus),e.xp6(1),e.Q6J("ngIf",3==t.overTimeStatus)}}const H=function(a,l,t){return{itemsPerPage:a,currentPage:l,totalItems:t}};function w(a,l){if(1&a&&(e.TgZ(0,"tbody"),e.YNc(1,F,20,20,"tr",27),e.ALo(2,"paginate"),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,2,t.requests,e.kEZ(5,H,t.meta.pageSize,t.meta.currentPage,t.meta.totalItems)))("ngForTrackBy",t.trackBy)}}function j(a,l){1&a&&e._UZ(0,"not-found",33)}function Y(a,l){1&a&&e._UZ(0,"loading")}const z=function(a){return{"h-100":a}};let q,k=document.dir;q="rtl"===k?"ar-EG":"en-GB";let G=(()=>{class a{constructor(){this.pageInfoSer=(0,e.f3M)(R.Z),this.service=(0,e.f3M)(E.$),this.teamMember=(0,e.f3M)(h.v),this.dialog=(0,e.f3M)(p.uw),this.alert=(0,e.f3M)(P.c),this.requests=[],this.loading=!0,this.selectedUser=null,this.selectedStatus=null,this.teamMembers$=this.teamMember.getTeamMembers(),this.from="",this.to="",this.status=[{value:0,name:"pending"},{value:1,name:"approved"},{value:2,name:"rejected"},{value:3,name:"canceled"}]}ngOnInit(){this.pageInfoSer.pageInfoEnum.next("Overtime"),this.service.from.subscribe(t=>this.from=t),this.service.to.subscribe(t=>this.to=t),this.service.loading.subscribe(t=>this.loading=t),this.service.meta.subscribe(t=>this.meta=t),this.getMyRequests()}dateChanged(){this.service.from.next(this.from),this.service.to.next(this.to||new Date),this.userChanged()}trackBy(t,g){return g.id}getMyRequests(){this.service.hasChanged.pipe((0,v.b)(400),(0,M.w)(()=>(this.service.loading.next(!0),this.service.getUserOvertimeRequests().pipe((0,T.U)(t=>{this.totalHours=t.totalApprovedHours,this.requests=t.requests,this.service.loading.next(!1)}))))).subscribe()}gitUserRequests(){this.service.hasChanged.pipe((0,v.b)(400),(0,M.w)(()=>(this.service.loading.next(!0),this.service.GetUserRequests().pipe((0,T.U)(t=>{this.totalHours=t.totalApprovedHours,this.requests=t.requests,this.service.loading.next(!1)}))))).subscribe()}statusChanged(){this.service.setStatus(this.selectedStatus),this.userChanged()}userChanged(){this.selectedUser?(this.service.userId=this.selectedUser,this.gitUserRequests()):this.getMyRequests()}ngOnDestroy(){this.service.loading.next(!0),this.pageInfoSer.pageInfoEnum.next("")}static{this.\u0275fac=function(g){return new(g||a)}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["overtime-dashboard"]],standalone:!0,features:[e._Bn([{provide:Z.Ad,useValue:q},{provide:Z._A,useClass:I.t7,deps:[Z.Ad,I.o8]},{provide:Z.sG,useValue:I.$o}]),e.jDz],decls:63,vars:52,consts:[[1,"total-hours","flex","aic","jcsb","p-2","rounded","mb-2"],[1,""],[1,"img"],["src","assets/images/overtime/overtime-hours.svg","alt","",1,"convert-image-color"],[3,"meta","hasCard","pageChange"],["filters",""],[1,"flex","aife"],[1,"date-picker","flex","aic","jcfe"],["appearance","fill",1,"example-form-field",3,"click"],[1,"fs-15"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matSuffix","",3,"for"],["rangePicker",""],["mat-button","","matDateRangePickerCancel",""],["mat-raised-button","","color","primary","matDateRangePickerApply","",3,"click"],[1,"px-1"],["bindLabel","name","bindValue","value","appendTo","body",1,"w-22r",3,"items","ngModel","multiple","closeOnSelect","ngModelChange"],["ng-option-tmp","","ng-label-tmp",""],["class","px-1",4,"ngIf"],["content",""],[1,"table","w-100","relative",3,"ngClass"],[1,"bg-gray","border-bottom"],[4,"ngIf"],["class","a-center",4,"ngIf"],["bindLabel","name","bindValue","id","appendTo","body",1,"w-22r",3,"items","ngModel","multiple","closeOnSelect","ngModelChange"],["class","border-bottom pointer",3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","pointer",3,"routerLink"],[1,"rounded","py-25","px-1","fs-14","bg-pending"],[1,"rounded","py-25","px-1","fs-14","bg-approved"],[1,"rounded","py-25","px-1","fs-14","bg-rejected"],[1,"rounded","py-25","px-1","fs-14","bg-canceled"],[1,"a-center"]],template:function(g,o){if(1&g){const f=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"p"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"h3"),e._uU(6),e.ALo(7,"convertToTime"),e.qZA()(),e.TgZ(8,"div",2),e._UZ(9,"img",3),e.qZA()(),e.TgZ(10,"layout-with-filters",4),e.NdJ("pageChange",function(m){return o.service.page.next(m),o.service.hasChanged.next(!0)}),e.ynx(11,5),e.TgZ(12,"div",6)(13,"div",7)(14,"mat-form-field",8),e.NdJ("click",function(){e.CHM(f);const m=e.MAs(23);return e.KtG(m.open())}),e.TgZ(15,"mat-label",9),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"mat-date-range-input",10)(19,"input",11),e.NdJ("ngModelChange",function(m){return o.from=m}),e.qZA(),e.TgZ(20,"input",12),e.NdJ("ngModelChange",function(m){return o.to=m}),e.qZA()(),e._UZ(21,"mat-datepicker-toggle",13),e.TgZ(22,"mat-date-range-picker",null,14)(24,"mat-date-range-picker-actions")(25,"button",15),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"button",16),e.NdJ("click",function(){return o.dateChanged()}),e._uU(29),e.ALo(30,"translate"),e.qZA()()()()(),e.TgZ(31,"div",17)(32,"label"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"ng-select",18),e.NdJ("ngModelChange",function(m){return o.selectedStatus=m})("ngModelChange",function(){return o.statusChanged()}),e.YNc(36,W,3,3,"ng-template",19),e.qZA()(),e.YNc(37,K,6,9,"div",20),e.ALo(38,"async"),e.qZA(),e.BQk(),e.ynx(39,21),e.TgZ(40,"table",22)(41,"thead",23)(42,"tr")(43,"th"),e._uU(44,"#"),e.qZA(),e.TgZ(45,"th"),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.TgZ(48,"th"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"th"),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"th"),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"th"),e._uU(58),e.ALo(59,"translate"),e.qZA()()(),e.YNc(60,w,3,9,"tbody",24),e.YNc(61,j,1,0,"not-found",25),e.YNc(62,Y,1,0,"loading",24),e.qZA(),e.BQk(),e.qZA()}if(2&g){const f=e.MAs(23);let d;e.xp6(3),e.Oqu(e.lcZ(4,26,"total_approved_hours")),e.xp6(3),e.Oqu(o.loading?"--:--":e.lcZ(7,28,o.totalHours)),e.xp6(4),e.Q6J("meta",o.meta)("hasCard",!0),e.xp6(6),e.Oqu(e.lcZ(17,30,"date_range")),e.xp6(2),e.Q6J("rangePicker",f),e.xp6(1),e.Q6J("ngModel",o.from),e.xp6(1),e.Q6J("ngModel",o.to),e.xp6(1),e.Q6J("for",f),e.xp6(5),e.Oqu(e.lcZ(27,32,"cancel")),e.xp6(3),e.hij(" ",e.lcZ(30,34,"apply")," "),e.xp6(4),e.Oqu(e.lcZ(34,36,"status")),e.xp6(2),e.Q6J("items",o.status)("ngModel",o.selectedStatus)("multiple",!1)("closeOnSelect",!0),e.xp6(2),e.Q6J("ngIf",0!==(null==(d=e.lcZ(38,38,o.teamMembers$))?null:d.length)),e.xp6(3),e.Q6J("ngClass",e.VKq(50,z,0==(null==o.requests?null:o.requests.length)||o.loading)),e.xp6(6),e.Oqu(e.lcZ(47,40,"title")),e.xp6(3),e.Oqu(e.lcZ(50,42,"requested_hours")),e.xp6(3),e.Oqu(e.lcZ(53,44,"approved_hours")),e.xp6(3),e.Oqu(e.lcZ(56,46,"date")),e.xp6(3),e.Oqu(e.lcZ(59,48,"status")),e.xp6(2),e.Q6J("ngIf",(null==o.requests?null:o.requests.length)>0&&!o.loading),e.xp6(1),e.Q6J("ngIf",0==(null==o.requests?null:o.requests.length)&&!o.loading),e.xp6(1),e.Q6J("ngIf",o.loading)}},dependencies:[_.ez,_.mk,_.sg,_.O5,_.Ov,_.OU,U.Y,D.N,A.JX,A._s,b.w,x.rH,C.aw,C.X$,L.P,y.u,r.A0,r.w9,r.ir,r.mR,s.u5,s.Fj,s.JJ,s.On,c.ot,c.lW,i.FA,i.nW,i.wx,i.zY,i.By,i._g,i.M5,i.dp,i.DK,u.lN,u.KE,u.hX,u.R9],styles:["[_nghost-%COMP%]     .layout-with-filters{max-width:100%!important}[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:transparent;border-radius:.5rem;width:100%;color:#707070;border:1px solid #e7e7e7}[_nghost-%COMP%]     .mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input, [_nghost-%COMP%]     .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{border:0!important}.total-hours[_ngcontent-%COMP%]{background:linear-gradient(93.27deg,#7B55D3 0%,rgba(123,85,211,.9) 56.67%,rgba(123,85,211,.8) 76.35%,rgba(123,85,211,.85) 100%);color:#fff}.leaves[_ngcontent-%COMP%]{overflow:auto}.bg-pending[_ngcontent-%COMP%]{color:#606060;background-color:#ececed}.bg-approved[_ngcontent-%COMP%]{color:#29cc99;background-color:#29cc9940}.bg-rejected[_ngcontent-%COMP%]{color:#d32f2f;background-color:#d32f2f40}"]})}}return a})()}}]);