"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[6168],{38140:(U,f,a)=>{a.d(f,{Y:()=>y});var e=a(65879),g=a(96814),x=a(89515),A=a(824),Z=a(52081),d=a(56223),C=a(76472),b=a(3131);function T(o,p){if(1&o&&(e.TgZ(0,"p",10),e._uU(1),e.ALo(2,"arabicNumbers"),e.ALo(3,"translate"),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Oqu(null!=r.meta&&r.meta.pageSize?e.lcZ(2,1,null==r.meta?null:r.meta.pageSize):e.lcZ(3,3,"unlimited"))}}function L(o,p){if(1&o){const r=e.EpF();e.TgZ(0,"input",11),e.NdJ("ngModelChange",function(l){e.CHM(r);const h=e.oxw();return e.KtG(h.limit=l)})("ngModelChange",function(){e.CHM(r);const l=e.oxw();return e.KtG(l.changeLimit())}),e.qZA()}if(2&o){const r=e.oxw();e.Q6J("ngModel",r.limit)}}function M(o,p){1&o&&(e.TgZ(0,"p",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"record")))}function O(o,p){if(1&o){const r=e.EpF();e.TgZ(0,"pagination-controls",13),e.NdJ("pageChange",function(l){e.CHM(r);const h=e.oxw();return e.KtG(h.pageChanged(l))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.qZA()}2&o&&e.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",e.lcZ(1,4,"previous"))("nextLabel",e.lcZ(2,6,"next"))}const u=[[["","filters",""]],[["","content",""]]],m=function(o,p){return{height:o,"max-width":p}},E=["[filters]","[content]"];let y=(()=>{class o{constructor(){this.pageChange=new e.vpe,this.limitChanged=new e.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,e.f3M)(b.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(r){this.pageChange.emit(r)}static{this.\u0275fac=function(_){return new(_||o)}}static{this.\u0275cmp=e.Xpm({type:o,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[e.jDz],ngContentSelectors:E,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(_,l){1&_&&(e.F$t(u),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA(),e.TgZ(3,"div",2),e.Hsn(4,1),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"p"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,T,4,5,"p",5),e.YNc(11,L,1,1,"input",6),e.YNc(12,M,3,3,"p",7),e.qZA(),e.YNc(13,O,3,8,"pagination-controls",8),e.TgZ(14,"p"),e._uU(15),e.ALo(16,"translate"),e.TgZ(17,"span",9),e._uU(18),e.ALo(19,"arabicNumbers"),e.ALo(20,"translate"),e.qZA()()()()),2&_&&(e.Q6J("ngStyle",e.WLB(17,m,l.hasTitle?"calc(100vh - 14.5rem)":l.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",l.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),e.xp6(8),e.hij("",e.lcZ(9,9,"pagination_per_page")," "),e.xp6(2),e.Q6J("ngIf",!l.admin),e.xp6(1),e.Q6J("ngIf",l.admin),e.xp6(1),e.Q6J("ngIf",null==l.meta?null:l.meta.pageSize),e.xp6(1),e.Q6J("ngIf",(null==l.meta?null:l.meta.totalItems)>15),e.xp6(2),e.hij("",e.lcZ(16,11,"pagination_total_records")," "),e.xp6(3),e.AsE("",e.lcZ(19,13,null==l.meta?null:l.meta.totalItems)," ",e.lcZ(20,15,"record"),""))},dependencies:[g.ez,g.O5,g.PC,x.aw,x.X$,A.h,Z.m,d.u5,d.Fj,d.wV,d.JJ,d.qQ,d.On,C.JX,C.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return o})()},96168:(U,f,a)=>{a.r(f),a.d(f,{LeaveDashboardComponent:()=>H});var e=a(65879),g=a(96814),x=a(38140),A=a(65668),Z=a(76472),d=a(57105),C=a(64190),b=a(89515),T=a(17700),L=a(99758),M=a(65619),O=a(83620),u=a(94664),m=a(37398),E=a(83449),y=a(9619),o=a(86421),p=a(16676),_=a(48474);const l=["dialogTemplate"];function h(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"i",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openDialog())}),e.qZA(),e.TgZ(3,"div",24)(4,"div",25)(5,"div",26),e._UZ(6,"img",27),e.qZA(),e.TgZ(7,"div",28)(8,"h4",29),e._uU(9),e.qZA(),e.TgZ(10,"p",30),e._uU(11),e.ALo(12,"translate"),e.qZA()()()()()()}if(2&n){const t=s.$implicit;e.xp6(5),e.Udp("background-color",t.background),e.xp6(1),e.MGl("src","assets/images/leave/",t.icon,"",e.LSH),e.xp6(3),e.Oqu(t.value),e.xp6(2),e.Oqu(e.lcZ(12,5,t.title))}}function q(n,s){1&n&&(e.ynx(0),e.TgZ(1,"span",34),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"pending")))}function I(n,s){1&n&&(e.ynx(0),e.TgZ(1,"span",35),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"approved")))}function B(n,s){1&n&&(e.ynx(0),e.TgZ(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"rejected")))}function W(n,s){1&n&&(e.ynx(0),e.TgZ(1,"span",37),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"canceled")))}function w(n,s){if(1&n&&(e.TgZ(0,"tr",32)(1,"td",33),e._uU(2),e.qZA(),e.TgZ(3,"td",33),e._uU(4),e.qZA(),e.TgZ(5,"td",33),e._uU(6),e.ALo(7,"arabicDate"),e.qZA(),e.TgZ(8,"td",33),e._uU(9),e.ALo(10,"arabicDate"),e.qZA(),e.TgZ(11,"td",33),e.YNc(12,q,4,3,"ng-container",18),e.YNc(13,I,4,3,"ng-container",18),e.YNc(14,B,4,3,"ng-container",18),e.YNc(15,W,4,3,"ng-container",18),e.qZA()()),2&n){const t=s.$implicit;e.MGl("routerLink","details/",t.id,""),e.xp6(2),e.Oqu(t.leaves_type),e.xp6(2),e.Oqu(t.leave_days),e.xp6(2),e.Oqu(e.lcZ(7,9,t.start_date)),e.xp6(3),e.Oqu(e.lcZ(10,11,t.end_date)),e.xp6(3),e.Q6J("ngIf",0==t.leaveStatus),e.xp6(1),e.Q6J("ngIf",1==t.leaveStatus),e.xp6(1),e.Q6J("ngIf",2==t.leaveStatus),e.xp6(1),e.Q6J("ngIf",3==t.leaveStatus)}}const J=function(n,s,t){return{itemsPerPage:n,currentPage:s,totalItems:t}};function K(n,s){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,w,16,13,"tr",31),e.ALo(2,"paginate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,2,t.requests,e.kEZ(5,J,t.meta.pageSize,t.meta.currentPage,t.meta.totalItems)))("ngForTrackBy",t.trackBy)}}function Q(n,s){1&n&&e._UZ(0,"not-found",38)}function R(n,s){1&n&&e._UZ(0,"loading")}function Y(n,s){1&n&&(e.TgZ(0,"div",45),e._UZ(1,"loading"),e.qZA())}function N(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td",48),e._uU(2),e.qZA(),e.TgZ(3,"td",49),e._uU(4),e.qZA(),e.TgZ(5,"td",50),e._uU(6),e.qZA(),e.TgZ(7,"td",51),e._uU(8),e.qZA()()),2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.accruals),e.xp6(2),e.Oqu(t.accruals-t.balance),e.xp6(2),e.Oqu(t.balance)}}function F(n,s){1&n&&e._UZ(0,"loading")}const P=function(n){return{"h-100":n}};function j(n,s){if(1&n&&(e.TgZ(0,"table",46)(1,"thead",47)(2,"tr")(3,"th",48),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",49),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",50),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",51),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,N,9,4,"tr",52),e.qZA(),e.YNc(17,F,1,0,"loading",18),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(15,P,0==t.userBalances.length||t.loading)),e.xp6(4),e.Oqu(e.lcZ(5,7,"leave_type")),e.xp6(3),e.Oqu(e.lcZ(8,9,"total")),e.xp6(3),e.Oqu(e.lcZ(11,11,"used")),e.xp6(3),e.Oqu(e.lcZ(14,13,"balance")),e.xp6(3),e.Q6J("ngForOf",t.userBalances),e.xp6(1),e.Q6J("ngIf",t.loading)}}function S(n,s){1&n&&e._UZ(0,"not-found",38)}function k(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",39)(1,"div",40)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"i",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dialog.closeAll())}),e.qZA()(),e.ynx(6),e.YNc(7,Y,2,0,"div",42),e.YNc(8,j,18,17,"table",43),e.TgZ(9,"div",44),e.YNc(10,S,1,0,"not-found",19),e.qZA(),e.BQk(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,4,"leaves_balance")),e.xp6(4),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",t.userBalances.length>0&&!t.loading),e.xp6(2),e.Q6J("ngIf",0==t.userBalances.length&&!t.loading)}}let H=(()=>{class n{constructor(t){this.dialog=t,this.service=(0,e.f3M)(E.y),this.alert=(0,e.f3M)(L.c),this.requests=[],this.userBalances=[],this.statistics=[],this.loading=!0,this.selectedYearSubject=new M.X(p().format("YYYY"))}ngOnInit(){this.service.loading.subscribe(t=>this.loading=t),this.service.meta.subscribe(t=>this.meta=t),this.service.year.next(this.selectedYearSubject.value),this.service.hasChanged.pipe((0,O.b)(400),(0,u.w)(()=>(this.service.loading.next(!0),this.service.getUserBalances().pipe((0,m.U)(t=>{this.userBalances=t.data}))))).subscribe(),this.service.hasChanged.pipe((0,O.b)(400),(0,u.w)(()=>(this.service.loading.next(!0),this.service.getUserRequests().pipe((0,m.U)(t=>{this.requests=t,this.service.loading.next(!1)}))))).subscribe(),this.service.hasChanged.pipe((0,u.w)(()=>(this.service.loading.next(!0),this.service.getBalancesByYear().pipe((0,m.U)(t=>{this.balances=t.data,this.statistics=[{title:"paid_leaves",value:t.data.paidBalance,icon:"paid-leave-primary.svg",background:"rgba(123, 85, 211, 0.08)"},{title:"used_leaves-balance",value:t.data.usedPaid,icon:"paid-leave-red.svg",background:"rgba(211, 47, 47, 0.15)"},{title:"leaves_balance-balance_desc",value:t.data.unPaidBalance,icon:"unpaid-leave-primary.svg",background:"rgba(123, 85, 211, 0.08)"},{title:"leaves_balance-balance",value:t.data.usedUnPaid,icon:"unpaid-leave-red.svg",background:"rgba(211, 47, 47, 0.15)"}],this.service.loading.next(!1)}))))).subscribe()}trackBy(t,c){return c.id}ngOnDestroy(){this.service.loading.next(!0)}openDialog(){this.dialog.open(this.dialogTemplate,{width:"450px"})}leaveRequest(){this.dialog.open(_.e,{width:"550px"}).afterClosed().subscribe(()=>{this.service.year.next(this.selectedYearSubject.value),this.service.hasChanged.next(!0)})}static{this.\u0275fac=function(c){return new(c||n)(e.Y36(T.uw))}}static{this.\u0275cmp=e.Xpm({type:n,selectors:[["leave-dashboard"]],viewQuery:function(c,i){if(1&c&&e.Gf(l,5),2&c){let v;e.iGM(v=e.CRH())&&(i.dialogTemplate=v.first)}},standalone:!0,features:[e.jDz],decls:42,vars:36,consts:[[1,"row","justify-content-between"],[1,"col-md-6","d-flex","align-items-center","gap-x-2"],[1,"fs-18","black","bold"],[1,"flex","aic","gap-x-1"],[3,"classes","showLabel","selectedDate","onChange"],[1,"col-md-2","d-flex","align-items-center","gap-x-1","justify-content-end"],[1,"btn","rounded","bg-primary","white","py-1","px-2","fs-12",3,"click"],[1,"flex-grid-center","my-1","gap-y-2"],["class","col-md-3",4,"ngFor","ngForOf"],[3,"meta","hasCard","pageChange"],["filters",""],[1,"pt-50","pl-1"],["content",""],[1,"table","w-100","relative",3,"ngClass"],[1,"bg-gray","border-bottom"],[1,"text-left",2,"width","32.5%"],[1,"text-left",2,"width","10%"],[1,"text-left",2,"width","12.5%"],[4,"ngIf"],["class","a-center",4,"ngIf"],["dialogTemplate",""],[1,"col-md-3"],[1,"card","bg-white","relative","leave-card","rounded","py-1"],[1,"bx","bx-info-circle","leave-info","pointer","fs-18",3,"click"],[1,"card-body","flex-grid-center","mx-0"],[1,"col-sm-12","icon","d-flex","align-items-center","gap-x-1"],[1,"image-container"],["alt","",3,"src"],[1,"d-flex","flex-column"],[1,"bold","fs-40","black","line-height-35"],[1,"fs-16"],["class","border-bottom pointer",3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","pointer",3,"routerLink"],[1,"text-left"],[1,"rounded","py-25","px-1","fs-14","bg-pending"],[1,"rounded","py-25","px-1","fs-14","bg-approved"],[1,"rounded","py-25","px-1","fs-14","bg-rejected"],[1,"rounded","py-25","px-1","fs-14","bg-canceled"],[1,"a-center"],[1,"dir"],[1,"flex","w-100","jcsb"],[1,"bx","bx-x","fs-25","danger","pointer","p-1",3,"click"],["class","aic flex jcc py-2 h-50v",4,"ngIf"],["class","table w-100 relative mb-2",3,"ngClass",4,"ngIf"],[1,"h-40v"],[1,"aic","flex","jcc","py-2","h-50v"],[1,"table","w-100","relative","mb-2",3,"ngClass"],[1,""],[1,"px-2","simibold","text-left"],[1,"px-2","simibold","primary"],[1,"px-2","simibold","warning"],[1,"px-2","simibold","success"],[4,"ngFor","ngForOf"]],template:function(c,i){1&c&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3)(6,"year-filter",4),e.NdJ("onChange",function(D){return i.service.year.next(D),i.service.hasChanged.next(!0)}),e.qZA()()(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return i.leaveRequest()}),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",7),e.YNc(12,h,13,7,"div",8),e.qZA(),e.TgZ(13,"layout-with-filters",9),e.NdJ("pageChange",function(D){return i.service.page.next(D),i.service.hasChanged.next(!0)}),e.ynx(14,10),e.TgZ(15,"h2",11),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.BQk(),e.ynx(18,12),e.TgZ(19,"table",13)(20,"thead",14)(21,"tr")(22,"th",15),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th",16),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"th",17),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"th",17),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"th",15),e._uU(35),e.ALo(36,"translate"),e.qZA()()(),e.YNc(37,K,3,9,"tbody",18),e.YNc(38,Q,1,0,"not-found",19),e.YNc(39,R,1,0,"loading",18),e.qZA(),e.BQk(),e.qZA(),e.YNc(40,k,11,6,"ng-template",null,20,e.W1O)),2&c&&(e.xp6(3),e.Oqu(e.lcZ(4,18,"leaves")),e.xp6(3),e.Q6J("classes","w-12r")("showLabel",!1)("selectedDate",i.selectedYearSubject),e.xp6(3),e.hij(" ",e.lcZ(10,20,"leave_request")," "),e.xp6(3),e.Q6J("ngForOf",i.statistics),e.xp6(1),e.Q6J("meta",i.meta)("hasCard",!0),e.xp6(3),e.Oqu(e.lcZ(17,22,"leave_dashboard")),e.xp6(3),e.Q6J("ngClass",e.VKq(34,P,0==i.requests.length||i.loading)),e.xp6(4),e.Oqu(e.lcZ(24,24,"leaves_type")),e.xp6(3),e.Oqu(e.lcZ(27,26,"leave_days")),e.xp6(3),e.Oqu(e.lcZ(30,28,"start_date")),e.xp6(3),e.Oqu(e.lcZ(33,30,"end_date")),e.xp6(3),e.Oqu(e.lcZ(36,32,"leave_status")),e.xp6(2),e.Q6J("ngIf",i.requests.length>0&&!i.loading),e.xp6(1),e.Q6J("ngIf",0==i.requests.length&&!i.loading),e.xp6(1),e.Q6J("ngIf",i.loading))},dependencies:[g.ez,g.mk,g.sg,g.O5,x.Y,A.N,Z.JX,Z._s,d.w,C.rH,b.aw,b.X$,y.P,T.Is,o.b],styles:[".leaves[_ngcontent-%COMP%]{overflow:auto}.bg-pending[_ngcontent-%COMP%]{color:#606060;background-color:#ececed}.bg-approved[_ngcontent-%COMP%]{color:#29cc99;background-color:#29cc9940}.bg-rejected[_ngcontent-%COMP%]{color:#d32f2f;background-color:#d32f2f40}.leave-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000000a}.leave-info[_ngcontent-%COMP%]{position:absolute;inset-inline-end:10px;top:10px}.line-height-35[_ngcontent-%COMP%]{line-height:35px}.image-container[_ngcontent-%COMP%]{padding:12px;border-radius:50%;height:64px;width:64px}.h-40v[_ngcontent-%COMP%]{height:40vh}"]})}}return n})()}}]);