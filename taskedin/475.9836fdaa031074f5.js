"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[475],{38140:(w,x,s)=>{s.d(x,{Y:()=>u});var t=s(65879),e=s(96814),d=s(89515),T=s(824),L=s(52081),m=s(56223),b=s(76472),v=s(3131);function _(c,Z){if(1&c&&(t.TgZ(0,"p",10),t._uU(1),t.ALo(2,"arabicNumbers"),t.ALo(3,"translate"),t.qZA()),2&c){const r=t.oxw();t.xp6(1),t.Oqu(null!=r.meta&&r.meta.pageSize?t.lcZ(2,1,null==r.meta?null:r.meta.pageSize):t.lcZ(3,3,"unlimited"))}}function A(c,Z){if(1&c){const r=t.EpF();t.TgZ(0,"input",11),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw();return t.KtG(g.limit=l)})("ngModelChange",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.changeLimit())}),t.qZA()}if(2&c){const r=t.oxw();t.Q6J("ngModel",r.limit)}}function U(c,Z){1&c&&(t.TgZ(0,"p",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"record")))}function I(c,Z){if(1&c){const r=t.EpF();t.TgZ(0,"pagination-controls",13),t.NdJ("pageChange",function(l){t.CHM(r);const g=t.oxw();return t.KtG(g.pageChanged(l))}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.qZA()}2&c&&t.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",t.lcZ(1,4,"previous"))("nextLabel",t.lcZ(2,6,"next"))}const P=[[["","filters",""]],[["","content",""]]],J=function(c,Z){return{height:c,"max-width":Z}},D=["[filters]","[content]"];let u=(()=>{class c{constructor(){this.pageChange=new t.vpe,this.limitChanged=new t.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,t.f3M)(v.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(r){this.pageChange.emit(r)}static{this.\u0275fac=function(f){return new(f||c)}}static{this.\u0275cmp=t.Xpm({type:c,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[t.jDz],ngContentSelectors:D,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(f,l){1&f&&(t.F$t(P),t.TgZ(0,"div",0)(1,"div",1),t.Hsn(2),t.qZA(),t.TgZ(3,"div",2),t.Hsn(4,1),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,_,4,5,"p",5),t.YNc(11,A,1,1,"input",6),t.YNc(12,U,3,3,"p",7),t.qZA(),t.YNc(13,I,3,8,"pagination-controls",8),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.TgZ(17,"span",9),t._uU(18),t.ALo(19,"arabicNumbers"),t.ALo(20,"translate"),t.qZA()()()()),2&f&&(t.Q6J("ngStyle",t.WLB(17,J,l.hasTitle?"calc(100vh - 14.5rem)":l.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",l.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),t.xp6(8),t.hij("",t.lcZ(9,9,"pagination_per_page")," "),t.xp6(2),t.Q6J("ngIf",!l.admin),t.xp6(1),t.Q6J("ngIf",l.admin),t.xp6(1),t.Q6J("ngIf",null==l.meta?null:l.meta.pageSize),t.xp6(1),t.Q6J("ngIf",(null==l.meta?null:l.meta.totalItems)>15),t.xp6(2),t.hij("",t.lcZ(16,11,"pagination_total_records")," "),t.xp6(3),t.AsE("",t.lcZ(19,13,null==l.meta?null:l.meta.totalItems)," ",t.lcZ(20,15,"record"),""))},dependencies:[e.ez,e.O5,e.PC,d.aw,d.X$,T.h,L.m,m.u5,m.Fj,m.wV,m.JJ,m.qQ,m.On,b.JX,b.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return c})()},46188:(w,x,s)=>{s.d(x,{O:()=>L});var t=s(65879),e=s(32296),d=s(17700),T=s(89515);let L=(()=>{class m{constructor(){this.dialogRef=(0,t.f3M)(d.so),this.data=(0,t.f3M)(d.WI),this.translate=(0,t.f3M)(T.sK),this.message=""}ngOnInit(){this.message=this.data.message}close(){this.dialogRef.close()}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=t.Xpm({type:m,selectors:[["success-file-upload-dialog"]],standalone:!0,features:[t.jDz],decls:9,vars:6,consts:[[1,"d-flex","justify-content-between","flex-column","align-items-center","gap-4","dir","py-2"],[1,"d-flex","justify-content-between","flex-column","align-items-center","dir","py-2"],["src","assets/images/success.svg","alt","Upload",1,"mb-2"],[1,"fs-18","bold","black"],["mat-raised-button","","color","primary",1,"mb-2",3,"click"]],template:function(_,A){1&_&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"span",3),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"button",4),t.NdJ("click",function(){return A.close()}),t._uU(7),t.ALo(8,"translate"),t.qZA()()),2&_&&(t.xp6(4),t.Oqu(t.lcZ(5,2,A.message)),t.xp6(3),t.hij(" ",t.lcZ(8,4,"close")," "))},dependencies:[e.ot,e.lW,T.aw,T.X$]})}}return m})()},49939:(w,x,s)=>{s.d(x,{z:()=>Z});var t=s(65879),e=s(96814),d=s(16676),L=s(65619),m=s(23680),b=s(73445),v=s(56223),_=s(38034),A=s(89515),U=s(2032),I=s(64170);function P(r,f){1&r&&(t.TgZ(0,"label",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"date")))}const J=function(r){return{"w-15r":r}};let u,D=document.dir;u="rtl"===D?"ar-EG":"en-GB";const c={parse:{dateInput:"MMMM/YYYY"},display:{dateInput:"MMMM/YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"MMMM YYYY",monthYearA11yLabel:"MMMM YYYY"}};let Z=(()=>{class r{constructor(){this.displayLabel=!0,this.onChange=new t.vpe,this.date=new v.NI(d()),this.now=new Date}ngOnChanges(l){l.selectedDate&&this.date.setValue(d(l.selectedDate.currentValue))}ngOnInit(){this.selectedDate&&(this.selectedDate instanceof L.X?this.selectedDate.subscribe(l=>{l&&this.date.setValue(d(l))}):this.date.setValue(d(this.selectedDate)))}setMonthAndYear(l,g){const h=this.date.value;h.month(l.month()),h.year(l.year()),this.date.setValue(h);const C=new Date(h._d).getFullYear(),E=(new Date(h._d).getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});let O=new Date(h._d.getFullYear(),h._d.getMonth()+1,0).getDate();this.start_date_key?.next(`${C}-${E}-01`),this.end_date_key?.next(`${C}-${E}-${O}`),this.onChange.emit(h._d),g.close()}static{this.\u0275fac=function(g){return new(g||r)}}static{this.\u0275cmp=t.Xpm({type:r,selectors:[["month-filter"]],inputs:{start_date_key:"start_date_key",displayLabel:"displayLabel",end_date_key:"end_date_key",selectedDate:"selectedDate",max:"max",min:"min"},outputs:{onChange:"onChange"},standalone:!0,features:[t._Bn([{provide:m.Ad,useValue:u},{provide:m._A,useClass:b.t7,deps:[m.Ad,b.o8]},{provide:m.sG,useValue:c}]),t.TTD,t.jDz],decls:7,vars:9,consts:[[1,"start-date",3,"ngClass"],["class","fs-13",4,"ngIf"],[1,"flex","aic","relative",3,"click"],[1,"input",3,"formControl","matDatepicker","min","max"],["matSuffix","",1,"picker-icon",3,"for"],["startView","multi-year","panelClass","example-month-picker",3,"monthSelected"],["picker",""],[1,"fs-13"]],template:function(g,h){if(1&g){const C=t.EpF();t.TgZ(0,"div",0),t.YNc(1,P,3,3,"label",1),t.TgZ(2,"div",2),t.NdJ("click",function(){t.CHM(C);const O=t.MAs(6);return t.KtG(O.open())}),t._UZ(3,"input",3)(4,"mat-datepicker-toggle",4),t.TgZ(5,"mat-datepicker",5,6),t.NdJ("monthSelected",function(O){t.CHM(C);const F=t.MAs(6);return t.KtG(h.setMonthAndYear(O,F))}),t.qZA()()()}if(2&g){const C=t.MAs(6);t.Q6J("ngClass",t.VKq(7,J,h.displayLabel)),t.xp6(1),t.Q6J("ngIf",h.displayLabel),t.xp6(2),t.Q6J("formControl",h.date)("matDatepicker",C)("min",h.min)("max",h.max),t.xp6(1),t.Q6J("for",C)}},dependencies:[e.ez,e.mk,e.O5,_.FA,_.Mq,_.hl,_.nW,A.aw,A.X$,U.c,I.R9,v.UX,v.Fj,v.JJ,v.oH],styles:[".picker-icon[_ngcontent-%COMP%]{position:absolute;inset-inline-end:0}.clear[_ngcontent-%COMP%]{position:absolute;inset-inline-end:4rem;top:50%;transform:translateY(-50%);line-height:0}.example-month-picker[_ngcontent-%COMP%]   .mat-calendar-period-button[_ngcontent-%COMP%]{pointer-events:none}.example-month-picker[_ngcontent-%COMP%]   .mat-calendar-arrow[_ngcontent-%COMP%]{display:none}"]})}}return r})()},70475:(w,x,s)=>{s.r(x),s.d(x,{PenaltiesComponent:()=>R});var t=s(96814),e=s(65879),d=s(89515),T=s(76472),L=s(38140),m=s(65668),b=s(57105),v=s(45843),_=s(69862),A=s(83620),U=s(94664),I=s(37398),P=s(20553),J=s(34673);let D=(()=>{class n extends J.q{constructor(){super(),this.http=(0,e.f3M)(_.eN),this.penalties$=this.hasChanged.pipe((0,A.b)(400),(0,U.w)(()=>this.getPenalties().pipe((0,I.U)(i=>(this.loading.next(!1),i)))))}getPenalties(){const i=new URL(`${P.N.apiUrl}api/Penalty/GetPenalitySpaceList`);return this.params(i),this.http.get(`${i}`).pipe((0,I.U)(o=>(this.setMeta(o),o.data.items)))}getEmployeeLastDeduction(i,o){const a=new URL(`${P.N.apiUrl}api/Penalty/GetEmployeeLastDeduction`);return a.searchParams.append("employeeId",i),a.searchParams.append("TypeId",o),this.params(a),this.http.get(`${a}`).pipe((0,I.U)(p=>p))}assignPenalty(i){return this.http.post(`${P.N.apiUrl}api/Penalty/ApplyPenalty`,i)}deletePenalty(i){return this.http.delete(`${P.N.apiUrl}api/Penalty/DeletePenality?id=${i}`,{})}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var u=s(56223),c=s(24971),Z=s(18620),r=s(86760),f=s(54807),l=s(32296),g=s(17700),h=s(58964),C=s(1350),E=s(49939),O=s(10480),F=s(46188),Q=s(69323),N=s(99758),Y=function(n){return n[n.first_time=1]="first_time",n[n.second_time=2]="second_time",n[n.third_time=3]="third_time",n[n.fourth_time=4]="fourth_time",n[n.fifth_time=5]="fifth_time",n[n.sixth_time=6]="sixth_time",n[n.seventh_time=7]="seventh_time",n[n.eighth_time=8]="eighth_time",n[n.ninth_time=9]="ninth_time",n[n.tenth_time=10]="tenth_time",n[n.eleventh_time=11]="eleventh_time",n[n.twelfth_time=12]="twelfth_time",n[n.thirteenth_time=13]="thirteenth_time",n[n.fourteenth_time=14]="fourteenth_time",n[n.fifteenth_time=15]="fifteenth_time",n[n.sixteenth_time=16]="sixteenth_time",n[n.seventeenth_time=17]="seventeenth_time",n[n.eighteenth_time=18]="eighteenth_time",n[n.nineteenth_time=19]="nineteenth_time",n[n.twentieth_time=20]="twentieth_time",n[n.twenty_first_time=21]="twenty_first_time",n[n.twenty_second_time=22]="twenty_second_time",n[n.twenty_third_time=23]="twenty_third_time",n[n.twenty_fourth_time=24]="twenty_fourth_time",n[n.twenty_fifth_time=25]="twenty_fifth_time",n[n.twenty_sixth_time=26]="twenty_sixth_time",n[n.twenty_seventh_time=27]="twenty_seventh_time",n}(Y||{}),W=s(19300),S=s(49388);function K(n,M){1&n&&(e.TgZ(0,"p",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"assign_penalty")," "))}let B=(()=>{class n{constructor(){this.dialogRef=(0,e.f3M)(g.so),this.dialog=(0,e.f3M)(g.uw),this.hrService=(0,e.f3M)(Q.j),this.service=(0,e.f3M)(D),this.data=(0,e.f3M)(g.WI),this.translate=(0,e.f3M)(d.sK),this.fb=(0,e.f3M)(u.qu),this.alert=(0,e.f3M)(N.c),this.currentLang="",this.penaltyTypesList=[],this.minDate=new Date,this.userId=localStorage.getItem("id"),this.repetition=(0,W.q)(Y),this.currentLang=this.translate.currentLang}ngOnInit(){this.initForm(),this.getAllPenaltyTypes()}initForm(){this.form=this.fb.group({penaltyTypeId:[null,u.kI.required],PenalityDate:[new Date,u.kI.required],description:[""]})}get f(){return this.form.controls}getUser(i){this.selectedUser=i[0],this.userId=this.selectedUser.id}selectMonth(i){this.f.PenalityDate.setValue(i.toISOString())}getAllPenaltyTypes(){this.hrService.getAllPenaltiesType().subscribe(i=>{this.penaltyTypesList=i.data})}getLastDeduction(i,o){this.service.getEmployeeLastDeduction(i,o).subscribe(a=>{a?this.deductionsInfo=a.data:this.alert.showAlert(this.translate.instant("no_deductions_found"),"bg-danger")})}submit(){if(this.form.valid){const i={employeeId:this.userId,...this.form.value};this.service.assignPenalty(i).subscribe(o=>{o.success?(this.dialogRef.close(i),this.service.loading.next(!1),this.dialog.open(F.O,{width:"400px",data:{message:"penalty_assigned_successfully"}}).afterClosed().subscribe(()=>{this.service.loading.next(!1),this.service.hasChanged.next(!0)})):this.alert.showAlert(o.message,"bg-danger")})}}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.Xpm({type:n,selectors:[["assign-penalty"]],standalone:!0,features:[e.jDz],decls:43,vars:43,consts:[[1,"late-form","p-2",3,"dir"],["class","mb-3 fs-18 simibold black",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-lg-6"],[1,"form-group","mb-3"],["key","employee",3,"control","showIcon","icon"],[1,"select-user"],[1,"user"],["text","choose_empoyee",3,"classes","multi","getSelectedUsers"],[3,"control"],[1,"col-lg-12"],["key","penalty",3,"control","showIcon","icon"],["formControlName","penaltyTypeId",1,"late-select",3,"items","clearable","bindLabel","bindValue","placeholder","change"],["key","repetition",3,"control","showIcon","icon"],["key","deduction_days_number",3,"showIcon","icon"],["key","implementation_month",3,"control","showIcon","icon"],[3,"min","displayLabel","onChange"],["key","description",3,"control","showIcon","icon"],["formControlName","description","rows","5",1,"input"],[1,"text-right"],["type","submit","mat-button","",1,"bg-primary","white","py-1","px-2","border-primary","rounded","pointer",3,"click"],["type","button","mat-button","",1,"bg-white","primary","py-1","px-2","border-primary","rounded","pointer","ml-1",3,"click"],[1,"mb-3","fs-18","simibold","black"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0),e.YNc(1,K,3,3,"p",1),e.TgZ(2,"form",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"input-label",6),e.TgZ(7,"div",7)(8,"div",8)(9,"select-user",9),e.NdJ("getSelectedUsers",function(y){return a.getUser(y)}),e.qZA()()(),e._UZ(10,"input-error",10),e.qZA()(),e.TgZ(11,"div",11)(12,"div",5),e._UZ(13,"input-label",12),e.TgZ(14,"ng-select",13),e.NdJ("change",function(){return a.getLastDeduction(a.userId,a.f.penaltyTypeId.value)}),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input-error",10),e.qZA()(),e.TgZ(17,"div",4)(18,"div",5),e._UZ(19,"input-label",14),e.TgZ(20,"p"),e._uU(21),e.qZA()()(),e.TgZ(22,"div",4)(23,"div",5),e._UZ(24,"input-label",15),e.TgZ(25,"p"),e._uU(26),e.qZA()()(),e.TgZ(27,"div",4)(28,"div",5),e._UZ(29,"input-label",16),e.TgZ(30,"month-filter",17),e.NdJ("onChange",function(y){return a.selectMonth(y)}),e.qZA(),e._UZ(31,"input-error",10),e.qZA()(),e.TgZ(32,"div",11)(33,"div",5),e._UZ(34,"input-label",18)(35,"textarea",19),e.qZA()()(),e.TgZ(36,"div",20)(37,"button",21),e.NdJ("click",function(){return a.submit()}),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"button",22),e.NdJ("click",function(){return a.dialogRef.close()}),e._uU(41),e.ALo(42,"translate"),e.qZA()()()()),2&o&&(e.Q6J("dir","ar"===a.currentLang?"rtl":"ltr"),e.xp6(1),e.Q6J("ngIf",a.data.assign),e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(4),e.Q6J("control",a.f.employeeControl)("showIcon",!0)("icon","assets/images/icons/users.svg"),e.xp6(3),e.Q6J("classes","w-100")("multi",!1),e.xp6(1),e.Q6J("control",a.f.employeeControl),e.xp6(3),e.Q6J("control",a.f.penaltyTypeId)("showIcon",!0)("icon","assets/images/icons/text-block.svg"),e.xp6(1),e.Q6J("items",a.penaltyTypesList)("clearable",!1)("bindLabel","ar"===a.currentLang?"nameAr":"name")("bindValue","id")("placeholder",e.lcZ(15,37,"choose_a_penalty")),e.xp6(2),e.Q6J("control",a.f.penaltyTypeId),e.xp6(3),e.Q6J("control",a.f.Repetition)("showIcon",!0)("icon","assets/images/icons/number.svg"),e.xp6(2),e.Oqu(a.repetition[null==a.deductionsInfo?null:a.deductionsInfo.level]?a.repetition[null==a.deductionsInfo?null:a.deductionsInfo.level].name:(null==a.deductionsInfo?null:a.deductionsInfo.level)||0),e.xp6(3),e.Q6J("showIcon",!0)("icon","assets/images/icons/number.svg"),e.xp6(2),e.AsE("",(null==a.deductionsInfo?null:a.deductionsInfo.deductionAmount)||0," ",(null==a.deductionsInfo?null:a.deductionsInfo.deductionAmount)>1?"days":"day",""),e.xp6(3),e.Q6J("control",a.f.PenaltyDate)("showIcon",!0)("icon","assets/images/icons/calendar-icon.svg"),e.xp6(1),e.Q6J("min",a.minDate)("displayLabel",!1),e.xp6(1),e.Q6J("control",a.f.PenaltyDate),e.xp6(3),e.Q6J("control",a.f.description)("showIcon",!0)("icon","assets/images/icons/list.svg"),e.xp6(4),e.hij(" ",e.lcZ(39,39,"add")," "),e.xp6(3),e.hij(" ",e.lcZ(42,41,"cancel")," "))},dependencies:[t.ez,t.O5,l.ot,l.lW,S.Lv,d.aw,d.X$,h.w,f.A0,f.w9,C.i,u.UX,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,E.z,O.V]})}}return n})();var j=s(83318);function $(n,M){if(1&n&&(e.TgZ(0,"span",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const i=e.oxw().$implicit;e.xp6(1),e.AsE(" (",i.dayValue.toFixed(2)," ",e.lcZ(2,2,"egp"),") ")}}function V(n,M){if(1&n){const i=e.EpF();e.TgZ(0,"i",28),e.NdJ("click",function(){e.CHM(i);const a=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.deletePenalty(a.id))}),e.qZA()}}function z(n,M){if(1&n&&(e.TgZ(0,"tr",20)(1,"td",21)(2,"div",22),e._UZ(3,"user-image",23),e.TgZ(4,"div",16)(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"p",24),e._uU(8),e.qZA()()()(),e.TgZ(9,"td",16),e._uU(10),e.qZA(),e.TgZ(11,"td",16),e._uU(12),e.qZA(),e.TgZ(13,"td",16),e._uU(14),e.YNc(15,$,3,4,"span",25),e.qZA(),e.TgZ(16,"td",16),e._uU(17),e.ALo(18,"date"),e.qZA(),e.TgZ(19,"td"),e.YNc(20,V,1,0,"i",26),e.qZA()()),2&n){const i=M.$implicit,o=e.oxw(2);e.xp6(3),e.Q6J("img",i.employee.imageUrl),e.xp6(3),e.Oqu(i.employee.name),e.xp6(2),e.Oqu(i.employee.jobTitle),e.xp6(2),e.Oqu("ar"===o.currentLang?i.penaltyType.nameAr:i.penaltyType.name),e.xp6(2),e.Oqu(o.repetition[i.level-1].name),e.xp6(2),e.AsE(" ",i.deductionAmount," ",i.deductionAmount>1?"days":"day"," "),e.xp6(1),e.Q6J("ngIf",i.dayValue),e.xp6(2),e.hij(" ",e.xi3(18,10,i.penaltyDate,"yyyy/MM")," "),e.xp6(3),e.Q6J("ngIf",!i.isDeleted)}}const k=function(n,M,i){return{itemsPerPage:n,currentPage:M,totalItems:i}};function q(n,M){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,z,21,13,"tr",19),e.ALo(2,"paginate"),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,2,i.penalties,e.kEZ(5,k,i.meta.pageSize,i.meta.currentPage,i.meta.totalItems)))("ngForTrackBy",i.trackBy)}}function X(n,M){1&n&&e._UZ(0,"not-found",29)}function G(n,M){1&n&&e._UZ(0,"loading")}const H=function(n){return{"h-100":n}};let R=(()=>{class n{constructor(){this.alert=(0,e.f3M)(N.c),this.service=(0,e.f3M)(D),this.hrService=(0,e.f3M)(Q.j),this.translate=(0,e.f3M)(d.sK),this.dialog=(0,e.f3M)(g.uw),this.penaltyTypes=[],this.penalties=[],this.loading=!1,this.currentLang="",this.repetition=(0,W.q)(Y),this.currentLang=this.translate.currentLang,this.service.penalties$.subscribe(i=>{this.service.meta.subscribe(o=>this.meta=o),this.service.loading.subscribe(o=>this.loading=o),this.penalties=i})}ngOnInit(){this.getAllPenaltyTypes()}getAllPenaltyTypes(){this.hrService.getAllPenaltiesType().subscribe(i=>{this.penaltyTypes=i.data})}trackBy(i,o){return o.id}dateChanged(i){this.service.month.next(i),this.service.hasChanged.next(!0)}assignPenalty(){this.dialog.open(B,{width:"590px",data:{assign:!0,penalty:null}})}deletePenalty(i){this.dialog.open(j.v,{panelClass:"confirmation-dialog",data:{message:"delete_penalty",btn_name:"confirm",classes:"bg-danger white",id:i}}).afterClosed().subscribe(a=>{a&&(this.service.loading.next(!0),this.service.deletePenalty(i).subscribe(p=>{p.success?(this.service.loading.next(!1),this.alert.showAlert("penalty_deleted"),this.service.hasChanged.next(!0)):(this.service.hasChanged.next(!0),this.service.loading.next(!1))}))})}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.Xpm({type:n,selectors:[["penalties"]],standalone:!0,features:[e.jDz],decls:40,vars:45,consts:[[3,"meta","pageChange"],["filters",""],[1,"row","align-items-center","p-1"],[1,"col-lg-5","px-1"],["bindValue","id",3,"items","bindLabel","placeholder","clearSearchOnAdd","change"],[1,"col-lg-4","d-flex","gap-x-1","px-0"],[3,"hideLabel","width","classes","placeholder","key","valueChanged"],[3,"tree","labelTitle","classes","valueChanged"],["key","date",3,"hideLabel","clearable","selectedValue","valueChanged"],[1,"col-lg-3","d-flex","justify-content-end"],["mat-button","","color","primary","mat-raised-button","",3,"click"],["content",""],[1,"table-container","border-0","rounded","shadow-xs","overflow-auto"],["id","penalties",1,"table","table-bordered","table-hover",3,"ngClass"],[1,"bg-gray","border-bottom"],[1,"text-left","pl-5"],[1,"text-left"],[4,"ngIf"],["class","a-center",4,"ngIf"],["class","border-bottom pointer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","pointer"],[1,"pl-5"],[1,"flex","aic","gap-x-1"],[3,"img"],[1,"muted"],["class","ml-1",4,"ngIf"],["class","bx bx-trash danger fs-30",3,"click",4,"ngIf"],[1,"ml-1"],[1,"bx","bx-trash","danger","fs-30",3,"click"],[1,"a-center"]],template:function(o,a){1&o&&(e.TgZ(0,"layout-with-filters",0),e.NdJ("pageChange",function(y){return a.service.page.next(y),a.service.hasChanged.next(!0)}),e.ynx(1,1),e.TgZ(2,"div",2)(3,"div",3)(4,"ng-select",4),e.NdJ("change",function(y){return a.service.loading.next(!0),a.service.penaltyTypeId.next(y),a.service.hasChanged.next(!0)}),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",5)(7,"search",6),e.NdJ("valueChanged",function(y){return a.service.loading.next(!0),a.service.search.next(y),a.service.hasChanged.next(!0)}),e.qZA(),e.TgZ(8,"app-levels-filter",7),e.NdJ("valueChanged",function(y){return a.service.loading.next(!0),a.service.levels.next(y),a.service.hasChanged.next(!0)}),e.qZA(),e.TgZ(9,"date-filter",8),e.NdJ("valueChanged",function(y){return a.dateChanged(y)}),e.qZA()(),e.TgZ(10,"div",9)(11,"button",10),e.NdJ("click",function(){return a.assignPenalty()}),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.BQk(),e.ynx(14,11),e.TgZ(15,"div",12)(16,"table",13)(17,"thead",14)(18,"tr")(19,"th",15),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th",16),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th",16),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"th",16),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"th",16),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"th"),e._uU(35),e.ALo(36,"translate"),e.qZA()()(),e.YNc(37,q,3,9,"tbody",17),e.YNc(38,X,1,0,"not-found",18),e.YNc(39,G,1,0,"loading",17),e.qZA()(),e.BQk(),e.qZA()),2&o&&(e.Q6J("meta",a.meta),e.xp6(4),e.Q6J("items",a.penaltyTypes)("bindLabel","ar"===a.currentLang?"nameAr":"name")("placeholder",e.lcZ(5,27,"choose_a_penalty"))("clearSearchOnAdd",!0),e.xp6(3),e.Q6J("hideLabel",!0)("width","w-20r")("classes","py-1  pr-1 fs-10")("placeholder","employee_name_or_code")("key",a.service.search.value),e.xp6(1),e.Q6J("tree",!0)("labelTitle","level_filter")("classes","w-15r py-1"),e.xp6(1),e.Q6J("hideLabel",!0)("clearable",!1)("selectedValue",a.service.month.value),e.xp6(3),e.hij(" ",e.lcZ(13,29,"assign_penalty")," "),e.xp6(4),e.Q6J("ngClass",e.VKq(43,H,0==a.penalties.length||a.loading)),e.xp6(4),e.Oqu(e.lcZ(21,31,"employee")),e.xp6(3),e.Oqu(e.lcZ(24,33,"penalty")),e.xp6(3),e.Oqu(e.lcZ(27,35,"reptation")),e.xp6(3),e.Oqu(e.lcZ(30,37,"penalty_value")),e.xp6(3),e.Oqu(e.lcZ(33,39,"penalty_date")),e.xp6(3),e.Oqu(e.lcZ(36,41,"action")),e.xp6(2),e.Q6J("ngIf",a.penalties.length>0&&!a.loading),e.xp6(1),e.Q6J("ngIf",0==a.penalties.length&&!a.loading),e.xp6(1),e.Q6J("ngIf",a.loading))},dependencies:[t.ez,t.mk,t.sg,t.O5,t.uU,l.ot,l.lW,c.g,Z.s,r.g,f.A0,f.w9,d.aw,d.X$,T.JX,T._s,L.Y,v.l,m.N,b.w,u.u5,u.UX]})}}return n})()}}]);