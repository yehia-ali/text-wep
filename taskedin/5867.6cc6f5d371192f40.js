"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[5867],{95867:(Q,A,o)=>{o.d(A,{P:()=>Jt});var t=o(65879),r=o(96814),b=o(52081),d=o(11383),v=o(86760),l=o(56223),C=o(65668),m=o(76472),y=o(57105),g=o(24971),f=o(89515),_=o(70052);function s(n,a){if(1&n&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.value," ")}}function x(n,a){1&n&&(t.TgZ(0,"div",10),t._UZ(1,"div",11),t.qZA())}const T=function(n,a){return{pointer:n,"border-primary shadowBranch_created_success":a}};function O(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){const p=t.CHM(e).$implicit,h=t.oxw(2);return t.KtG(p.filter>0&&h.filter(p.filter))}),t.TgZ(1,"div",4),t.YNc(2,s,2,1,"p",5),t.YNc(3,x,2,0,"ng-template",null,6,t.W1O),t._UZ(5,"img",7),t.qZA(),t.TgZ(6,"p",8),t._uU(7),t.ALo(8,"translate"),t.qZA()()}if(2&n){const e=a.$implicit,i=t.MAs(4),c=t.oxw(2);t.Q6J("ngClass",t.WLB(8,T,e.filter>0,e.filter==c.service.filterValue.value)),t.xp6(2),t.Q6J("ngIf",null!=e.value)("ngIfElse",i),t.xp6(3),t.MGl("src","assets/images/attendance/",e.name,".svg",t.LSH)("alt","",e.name," icon"),t.xp6(2),t.Oqu(t.lcZ(8,6,e.name))}}function u(n,a){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,O,9,11,"div",2),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.cards)}}let J=(()=>{class n{constructor(){this.service=(0,t.f3M)(_.s),this.cards=[]}ngOnInit(){this.service.getDashboard().subscribe(),this.service.dashboard.subscribe(e=>{this.cards=[{name:"present",value:e.present,filter:2},{name:"late",value:e.late,filter:6},{name:"absent",value:e.absent,filter:1},{name:"leaves",value:e.leaves,filter:7},{name:"holiday",value:e.holidays,filter:8},{name:"weekend_leave",value:e.weekEnds,filter:9},{name:"forget_checkout",value:e.forgetCheckOut,filter:5},{name:"total_hours",value:parseInt(e.totalHours)||0,filter:-1}]})}filter(e){this.service.filterValue.next(e==this.service.filterValue.value?null:e),this.service.page.next(1),this.service.hasChanged.next(!0)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=t.Xpm({type:n,selectors:[["team-dashboard"]],standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[["class","user-attendance-dashboard flex aic jcsb gap-x-1 bg-white py-1",4,"ngIf"],[1,"user-attendance-dashboard","flex","aic","jcsb","gap-x-1","bg-white","py-1"],["class","py-1 card rounded shadow flex-14 flex-column-center bg-white",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"py-1","card","rounded","shadow","flex-14","flex-column-center","bg-white",3,"ngClass","click"],[1,"img","flex","aic","jcsb","w-100","px-50","mb-50"],["class","fs-25 bold",4,"ngIf","ngIfElse"],["loadingSpinner",""],["width","40",3,"src","alt"],[1,"fs-14","bold","text-left","w-100"],[1,"fs-25","bold"],[1,"spinner-container","d-flex","align-items-center"],["role","status",1,"spinner-border","text-primary"]],template:function(i,c){1&i&&(t.YNc(0,u,2,1,"div",0),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,c.service.dashboard))},dependencies:[r.ez,r.mk,r.sg,r.O5,r.Ov,f.aw,f.X$],styles:[".flex-14[_ngcontent-%COMP%]{flex:1 1 14.28%;max-width:14.28%}.card[_ngcontent-%COMP%]{padding:.5rem}.shadow[_ngcontent-%COMP%]{box-shadow:0 1px 6px -1px #0000001a,0 2px 4px -1px #0000000f}"]})}}return n})();var w=o(94664),D=o(37398),k=o(70940),Z=o(23680),U=o(73445),L=o(32296),N=o(32801),M=o(9619);function Y(n,a){1&n&&(t.TgZ(0,"span",16),t._uU(1,"(Refreshing...)"),t.qZA())}function E(n,a){1&n&&(t.TgZ(0,"div",17),t._UZ(1,"div",18),t.qZA())}function $(n,a){if(1&n&&(t.TgZ(0,"div",26),t._UZ(1,"app-img-title",27),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("title",e.managerUserName)("imgSrc",e.managerImageUrl)("userId",e.managerUserId)}}function B(n,a){1&n&&(t.TgZ(0,"span",30),t._uU(1,"-"),t.qZA())}const q=function(n){return{danger:n}};function F(n,a){if(1&n&&(t.TgZ(0,"p",34),t._uU(1),t.ALo(2,"arabicTime"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngClass",t.VKq(4,q,e.checkIn.isLate)),t.xp6(1),t.Oqu(e.checkIn.time?t.lcZ(2,2,e.checkIn.time):"-")}}function j(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"-"),t.qZA())}function R(n,a){if(1&n&&(t.TgZ(0,"p",34),t._uU(1),t.ALo(2,"arabicTime"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngClass",t.VKq(4,q,e.checkOut.isLate)),t.xp6(1),t.Oqu(e.checkOut.time?t.lcZ(2,2,e.checkOut.time):"-")}}function V(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"-"),t.qZA())}function H(n,a){if(1&n&&(t.TgZ(0,"p",34),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngClass",t.VKq(2,q,!e.totalHours.isEqual)),t.xp6(1),t.Oqu(e.totalHours.time||"-")}}function K(n,a){1&n&&(t.TgZ(0,"p",33),t._uU(1,"-"),t.qZA())}function G(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"td"),t.YNc(2,F,3,6,"p",31),t.YNc(3,j,2,0,"p",15),t.qZA(),t.TgZ(4,"td"),t.YNc(5,R,3,6,"p",31),t.YNc(6,V,2,0,"p",15),t.qZA(),t.TgZ(7,"td"),t.YNc(8,H,2,4,"p",31),t.YNc(9,K,2,0,"p",32),t.qZA(),t.TgZ(10,"td")(11,"p",33),t._uU(12,"-"),t.qZA()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",!!e.checkIn),t.xp6(1),t.Q6J("ngIf",!e.checkIn),t.xp6(2),t.Q6J("ngIf",e.checkOut),t.xp6(1),t.Q6J("ngIf",!e.checkOut),t.xp6(2),t.Q6J("ngIf",!!e.totalHours),t.xp6(1),t.Q6J("ngIf",!e.totalHours)}}const I=function(n){return{warning:n}};function S(n,a){if(1&n&&(t.TgZ(0,"p",34),t._uU(1),t.ALo(2,"arabicTime"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngClass",t.VKq(4,I,e.checkIn.isLate)),t.xp6(1),t.Oqu(e.checkIn.time?t.lcZ(2,2,e.checkIn.time):"-")}}function W(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"-"),t.qZA())}function z(n,a){if(1&n&&(t.TgZ(0,"p",34),t._uU(1),t.ALo(2,"arabicTime"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngClass",t.VKq(4,I,e.checkOut.isLate)),t.xp6(1),t.Oqu(e.checkOut.time?t.lcZ(2,2,e.checkOut.time):"-")}}function X(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"-"),t.qZA())}function tt(n,a){if(1&n&&(t.TgZ(0,"p",34),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngClass",t.VKq(2,I,!e.totalHours.isEqual)),t.xp6(1),t.Oqu(e.totalHours.time||"-")}}function et(n,a){1&n&&(t.TgZ(0,"p",33),t._uU(1,"-"),t.qZA())}function nt(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"td"),t.YNc(2,S,3,6,"p",31),t.YNc(3,W,2,0,"p",15),t.qZA(),t.TgZ(4,"td"),t.YNc(5,z,3,6,"p",31),t.YNc(6,X,2,0,"p",15),t.qZA(),t.TgZ(7,"td"),t.YNc(8,tt,2,4,"p",31),t.YNc(9,et,2,0,"p",32),t.qZA(),t.TgZ(10,"td")(11,"span",35),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",!!e.checkIn),t.xp6(1),t.Q6J("ngIf",!e.checkIn),t.xp6(2),t.Q6J("ngIf",e.checkOut),t.xp6(1),t.Q6J("ngIf",!e.checkOut),t.xp6(2),t.Q6J("ngIf",!!e.totalHours),t.xp6(1),t.Q6J("ngIf",!e.totalHours),t.xp6(3),t.hij(" ",t.lcZ(13,7,e.reason),"")}}function at(n,a){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.ALo(2,"arabicTime"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.checkIn.time?t.lcZ(2,1,e.checkIn.time):"-")}}function it(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"-"),t.qZA())}function ct(n,a){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.ALo(2,"arabicTime"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.checkOut.time?t.lcZ(2,1,e.checkOut.time):"-")}}function ot(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"-"),t.qZA())}function _t(n,a){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.totalHours.time||"-")}}function rt(n,a){1&n&&(t.TgZ(0,"p",33),t._uU(1,"-"),t.qZA())}function st(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"td"),t.YNc(2,at,3,3,"p",32),t.YNc(3,it,2,0,"p",15),t.qZA(),t.TgZ(4,"td"),t.YNc(5,ct,3,3,"p",32),t.YNc(6,ot,2,0,"p",15),t.qZA(),t.TgZ(7,"td"),t.YNc(8,_t,2,1,"p",32),t.YNc(9,rt,2,0,"p",32),t.qZA(),t.TgZ(10,"td",36)(11,"div",37)(12,"p"),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",!!e.checkIn),t.xp6(1),t.Q6J("ngIf",!e.checkIn),t.xp6(2),t.Q6J("ngIf",e.checkOut),t.xp6(1),t.Q6J("ngIf",!e.checkOut),t.xp6(2),t.Q6J("ngIf",!!e.totalHours),t.xp6(1),t.Q6J("ngIf",!e.totalHours),t.xp6(4),t.Oqu(t.lcZ(14,7,"weekend_leave"))}}function lt(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"td",36),t._uU(2,"-"),t.qZA(),t.TgZ(3,"td",36),t._uU(4,"-"),t.qZA(),t.TgZ(5,"td",36),t._uU(6,"-"),t.qZA(),t.TgZ(7,"td",36)(8,"div",38)(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(10),t.Oqu(t.lcZ(11,1,e.reason))}}function pt(n,a){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.ALo(2,"arabicTime"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.checkIn.time?t.lcZ(2,1,e.checkIn.time):"-")}}function gt(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"-"),t.qZA())}function dt(n,a){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.ALo(2,"arabicTime"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.checkOut.time?t.lcZ(2,1,e.checkOut.time):"-")}}function mt(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"-"),t.qZA())}function ut(n,a){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.totalHours.time||"-")}}function ht(n,a){1&n&&(t.TgZ(0,"p",33),t._uU(1,"-"),t.qZA())}function ft(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"td"),t.YNc(2,pt,3,3,"p",32),t.YNc(3,gt,2,0,"p",15),t.qZA(),t.TgZ(4,"td"),t.YNc(5,dt,3,3,"p",32),t.YNc(6,mt,2,0,"p",15),t.qZA(),t.TgZ(7,"td"),t.YNc(8,ut,2,1,"p",32),t.YNc(9,ht,2,0,"p",32),t.qZA(),t.TgZ(10,"td",36)(11,"div",38)(12,"p"),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",!!e.checkIn),t.xp6(1),t.Q6J("ngIf",!e.checkIn),t.xp6(2),t.Q6J("ngIf",e.checkOut),t.xp6(1),t.Q6J("ngIf",!e.checkOut),t.xp6(2),t.Q6J("ngIf",!!e.totalHours),t.xp6(1),t.Q6J("ngIf",!e.totalHours),t.xp6(4),t.Oqu(t.lcZ(14,7,e.reason))}}function xt(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"td",36),t._uU(2,"-"),t.qZA(),t.TgZ(3,"td",36),t._uU(4,"-"),t.qZA(),t.TgZ(5,"td",36),t._uU(6,"-"),t.qZA(),t.TgZ(7,"td",36)(8,"div",39)(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(10),t.Oqu(t.lcZ(11,1,e.reason))}}function Tt(n,a){1&n&&(t.ynx(0),t.TgZ(1,"td",36),t._uU(2,"-"),t.qZA(),t.TgZ(3,"td",36),t._uU(4,"-"),t.qZA(),t.TgZ(5,"td",36),t._uU(6,"-"),t.qZA(),t.TgZ(7,"td",36)(8,"div",37)(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.BQk()),2&n&&(t.xp6(10),t.Oqu(t.lcZ(11,1,"weekend_leave")))}function Zt(n,a){1&n&&(t.ynx(0),t.TgZ(1,"td",36),t._uU(2,"-"),t.qZA(),t.TgZ(3,"td",36),t._uU(4,"-"),t.qZA(),t.TgZ(5,"td",36),t._uU(6,"-"),t.qZA(),t.TgZ(7,"td",36)(8,"div",40),t._UZ(9,"img",41),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"translate"),t.qZA()()(),t.BQk()),2&n&&(t.xp6(11),t.Oqu(t.lcZ(12,1,"absent")))}function At(n,a){if(1&n&&(t.TgZ(0,"tr",25)(1,"td")(2,"div",26),t._UZ(3,"app-img-title",27),t.qZA()(),t.TgZ(4,"td",23),t._uU(5),t.qZA(),t.TgZ(6,"td",23),t._uU(7),t.qZA(),t.TgZ(8,"td",23),t._uU(9),t.ALo(10,"arabicDate"),t.qZA(),t.TgZ(11,"td",23),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.YNc(14,$,2,3,"div",28),t.YNc(15,B,2,0,"span",29),t.qZA(),t.YNc(16,G,13,6,"ng-container",15),t.YNc(17,nt,14,9,"ng-container",15),t.YNc(18,st,15,9,"ng-container",15),t.YNc(19,lt,12,3,"ng-container",15),t.YNc(20,ft,15,9,"ng-container",15),t.YNc(21,xt,12,3,"ng-container",15),t.YNc(22,Tt,12,3,"ng-container",15),t.YNc(23,Zt,13,3,"ng-container",15),t.qZA()),2&n){const e=a.$implicit;t.xp6(3),t.Q6J("title",e.userName)("imgSrc",e.imageUrl)("userId",e.userId),t.xp6(2),t.Oqu(e.employeeCode||"-"),t.xp6(2),t.Oqu(e.jobTitle||"-"),t.xp6(2),t.Oqu(t.lcZ(10,17,e.joiningDate)),t.xp6(3),t.hij(" ",e.department||"-"," "),t.xp6(2),t.Q6J("ngIf",e.managerUserName),t.xp6(1),t.Q6J("ngIf",!e.managerUserName),t.xp6(1),t.Q6J("ngIf",4!=e.stauts&&3!=e.stauts&&1!=e.stauts&&2!=e.stauts),t.xp6(1),t.Q6J("ngIf",e.checkIn&&2==e.stauts),t.xp6(1),t.Q6J("ngIf",e.checkIn&&3==e.stauts),t.xp6(1),t.Q6J("ngIf",1==e.stauts&&!e.checkIn),t.xp6(1),t.Q6J("ngIf",1==e.stauts&&e.checkIn),t.xp6(1),t.Q6J("ngIf",2==e.stauts&&!e.checkIn),t.xp6(1),t.Q6J("ngIf",3==e.stauts&&!e.checkIn),t.xp6(1),t.Q6J("ngIf",4==e.stauts)}}const bt=function(n,a,e){return{itemsPerPage:n,currentPage:a,totalItems:e}};function vt(n,a){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,At,24,19,"tr",24),t.ALo(2,"paginate"),t.qZA()),2&n){const e=t.oxw(2).ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,2,e,t.kEZ(5,bt,i.limit,i.page,i.totalItems)))("ngForTrackBy",i.trackBy)}}const Ct=function(n){return{"h-100":n}};function yt(n,a){if(1&n&&(t.TgZ(0,"table",21)(1,"thead",22)(2,"tr")(3,"th",23),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",23),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",23),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",23),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",23),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",23),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th",23),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th",23),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th"),t._uU(31),t.ALo(32,"translate"),t.qZA()()(),t.YNc(33,vt,3,9,"tbody",15),t.qZA()),2&n){const e=t.oxw().ngIf,i=t.oxw();t.Q6J("ngClass",t.VKq(32,Ct,0==e.length||i.loading)),t.xp6(4),t.Oqu(t.lcZ(5,12,"employee")),t.xp6(3),t.Oqu(t.lcZ(8,14,"employee_code")),t.xp6(3),t.Oqu(t.lcZ(11,16,"job_title")),t.xp6(3),t.Oqu(t.lcZ(14,18,"joining_date")),t.xp6(3),t.Oqu(t.lcZ(17,20,"department")),t.xp6(3),t.Oqu(t.lcZ(20,22,"manager")),t.xp6(3),t.Oqu(t.lcZ(23,24,"check-in")),t.xp6(3),t.Oqu(t.lcZ(26,26,"check-out")),t.xp6(3),t.Oqu(t.lcZ(29,28,"total_hours")),t.xp6(3),t.Oqu(t.lcZ(32,30,"notes")),t.xp6(2),t.Q6J("ngIf",e.length>0&&!i.loading)}}function Ut(n,a){1&n&&t._UZ(0,"not-found")}function qt(n,a){if(1&n&&(t.ynx(0,19),t.YNc(1,yt,34,34,"table",20),t.YNc(2,Ut,1,0,"not-found",15),t.BQk()),2&n){const e=a.ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngIf",e.length>0&&!i.loading),t.xp6(1),t.Q6J("ngIf",0==e.length&&!i.loading)}}function It(n,a){1&n&&t._UZ(0,"loading")}function Pt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",43)(1,"div",44)(2,"p",45),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"input",46),t.NdJ("ngModelChange",function(c){t.CHM(e);const p=t.oxw(2);return t.KtG(p.limit=c)})("ngModelChange",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.changeLimit())}),t.qZA(),t.TgZ(6,"p",47),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"pagination-controls",48),t.NdJ("pageChange",function(c){t.CHM(e);const p=t.oxw(2);return t.KtG(p.pageChanged(c))}),t.ALo(10,"translate"),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"p",49),t._uU(13),t.ALo(14,"translate"),t.TgZ(15,"span",50),t._uU(16),t.ALo(17,"arabicNumbers"),t.ALo(18,"translate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,10,"pagination_per_page")),t.xp6(2),t.Q6J("ngModel",e.limit),t.xp6(2),t.Oqu(t.lcZ(8,12,"record")),t.xp6(2),t.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",t.lcZ(10,14,"previous"))("nextLabel",t.lcZ(11,16,"next")),t.xp6(4),t.hij("",t.lcZ(14,18,"pagination_total_records")," "),t.xp6(3),t.AsE("",t.lcZ(17,20,e.totalItems)," ",t.lcZ(18,22,"record"),"")}}function Ot(n,a){if(1&n&&(t.ynx(0,19),t.YNc(1,Pt,19,24,"div",42),t.BQk()),2&n){const e=a.ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngIf",e.length>0&&!i.loading)}}const Lt=function(n){return{"bx-spin":n}};let P,Qt=document.dir;P="rtl"===Qt?"ar-EG":"en-GB";let Jt=(()=>{class n{constructor(e){this.elm=e,this.service=(0,t.f3M)(_.s),this.datePipe=(0,t.f3M)(r.uU),this.endDate=new Date,this.loading=!0,this.loadingExport=!1,this.isDataCached=!0,this.attendance$=this.service.hasChanged.pipe((0,w.w)(()=>this.service.getUsersAttendanceByManagerCache().pipe((0,D.U)(i=>(this.loading=!1,this.totalItems=i.cachedData.totalItems,this.cacheTime=this.datePipe.transform(i.cacheTime,"yyyy-MM-ddTHH:mm:ss","UTC"),this.isDataCached=!this.service.refresh,this.page=i.cachedData.currentPage,this.service.refresh=!1,i.cachedData.items)),(0,k.d)(1)))),this.totalItems=0,this.limit=15,this.page=1}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.service.limit.next(this.limit),this.pageChanged(1)},500)}dateChanged(e){this.loading=!0,this.service.startDateFrom.next(e),this.service.getDashboard().subscribe()}ngOnInit(){this.service.startDateFrom.subscribe(e=>this.startDate=e),this.service.page.next(this.page)}pageChanged(e){this.service.page.next(e)}trackBy(e,i){return i.id}refreshBtn(){this.loading=!0,this.service.forceRefresh()}exportToExcel(){this.loadingExport=!0,this.service.getUsersAttendanceByManagerExcel().subscribe({next:e=>{this.loadingExport=!1;const i=window.URL.createObjectURL(e.blob),c=document.createElement("a");c.href=i,c.download=e.filename,c.click(),window.URL.revokeObjectURL(i)},error:e=>{console.error("Error downloading Excel file:",e)}})}static{this.\u0275fac=function(i){return new(i||n)(t.Y36(t.SBq))}}static{this.\u0275cmp=t.Xpm({type:n,selectors:[["team-attendance-page"]],standalone:!0,features:[t._Bn([{provide:Z.Ad,useValue:P},{provide:Z._A,useClass:U.t7,deps:[Z.Ad,U.o8]},{provide:Z.sG,useValue:U.$o}]),t.jDz],decls:30,vars:30,consts:[[1,"attendance","h-100","relative"],[1,"filters","row","justify-content-between","align-items-end","mb-2"],[1,"col-lg-3"],[1,"d-flex","align-items-center","gap-5"],[3,"key","placeholder","valueChanged"],["key","date",3,"clearable","selectedValue","valueChanged"],[1,"col-lg-4"],[1,"d-flex","align-items-center","gap-2"],[1,"bx","bx-refresh","primary","fs-18","pointer",3,"ngClass","title","click"],["class","text-muted fs-12",4,"ngIf"],[1,"col-lg-1","text-right"],["mat-button","","color","primary","mat-raised-button","",3,"disabled","click"],["class","spinner-container d-flex align-items-center",4,"ngIf"],[1,"mb-1"],["content","",4,"ngIf"],[4,"ngIf"],[1,"text-muted","fs-12"],[1,"spinner-container","d-flex","align-items-center"],["role","status",1,"spinner-border","text-primary"],["content",""],["class","table w-100 relative","id","attendance",3,"ngClass",4,"ngIf"],["id","attendance",1,"table","w-100","relative",3,"ngClass"],[1,"bg-gray","border-bottom"],[1,"text-left"],["class","border-bottom pointer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom","pointer"],[1,"flex","aic","jcfs"],[3,"title","imgSrc","userId"],["class","flex aic jcfs",4,"ngIf"],["class","",4,"ngIf"],[1,""],["class","fs-13",3,"ngClass",4,"ngIf"],["class","fs-13",4,"ngIf"],[1,"fs-13"],[1,"fs-13",3,"ngClass"],[1,"warning"],[1,"py-0"],[1,"flex-center","gap-x-1","bg-light-blue","w-100","py-75","rounded"],[1,"flex-center","gap-x-1","bg-light-primary","white","w-100","py-75","rounded"],[1,"flex-center","gap-x-1","bg-light-warning","w-100","py-75","rounded"],[1,"flex-center","gap-x-1","bg-light-danger","w-100","py-75","rounded","px-1"],["src","assets/images/attendance/close.svg","alt","close icon"],["class","fixed-pagination pagination-content flex aic jcsb py-1 bg-white border-top border-bottom px-2 mt-2",4,"ngIf"],[1,"fixed-pagination","pagination-content","flex","aic","jcsb","py-1","bg-white","border-top","border-bottom","px-2","mt-2"],[1,"flex","aic","gap-x-1"],[1,"fs-12","simibold","mb-0"],["type","number","min","1","aria-label","Items per page",1,"input","ml-75","limit","text-center","py-50","px-0",2,"width","50px",3,"ngModel","ngModelChange"],[1,"ml-50","primary","fs-12","mb-0"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"],[1,"fs-12","simibold","pr-3","mb-0"],[1,"primary"]],template:function(i,c){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"search",4),t.NdJ("valueChanged",function(h){return c.service.search.next(h),c.service.page.next(1)}),t.qZA(),t.TgZ(5,"date-filter",5),t.NdJ("valueChanged",function(h){return c.dateChanged(h)}),t.qZA()()(),t.TgZ(6,"div",6)(7,"p",7)(8,"span"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"span"),t._uU(12),t.ALo(13,"arabicDate"),t.ALo(14,"arabicTime"),t.qZA(),t.TgZ(15,"i",8),t.NdJ("click",function(){return c.refreshBtn()}),t.qZA(),t.YNc(16,Y,2,0,"span",9),t.qZA()(),t.TgZ(17,"div",10)(18,"button",11),t.NdJ("click",function(){return c.exportToExcel()}),t.TgZ(19,"div",7),t.YNc(20,E,2,0,"div",12),t._uU(21),t.ALo(22,"translate"),t.qZA()()()(),t.TgZ(23,"div",13),t._UZ(24,"team-dashboard"),t.qZA(),t.YNc(25,qt,3,2,"ng-container",14),t.ALo(26,"async"),t.YNc(27,It,1,0,"loading",15),t.YNc(28,Ot,2,1,"ng-container",14),t.ALo(29,"async"),t.qZA()),2&i&&(t.xp6(4),t.Q6J("key",c.service.search.value)("placeholder","employee_name_or_code"),t.xp6(1),t.Q6J("clearable",!1)("selectedValue",c.service.startDateFrom.value),t.xp6(4),t.hij(" ",t.lcZ(10,16,"last_update")," : "),t.xp6(3),t.AsE("",t.lcZ(13,18,c.cacheTime)," - ",t.lcZ(14,20,c.cacheTime),""),t.xp6(3),t.Q6J("ngClass",t.VKq(28,Lt,c.loading&&!c.isDataCached))("title",c.isDataCached?"Refresh data":"Data is being refreshed"),t.xp6(1),t.Q6J("ngIf",!c.isDataCached&&c.loading),t.xp6(2),t.Q6J("disabled",c.loadingExport),t.xp6(2),t.Q6J("ngIf",c.loadingExport),t.xp6(1),t.hij(" ",t.lcZ(22,22,"export")," "),t.xp6(4),t.Q6J("ngIf",t.lcZ(26,24,c.attendance$)),t.xp6(2),t.Q6J("ngIf",c.loading),t.xp6(1),t.Q6J("ngIf",t.lcZ(29,26,c.attendance$)))},dependencies:[L.ot,L.lW,r.ez,r.mk,r.sg,r.O5,r.Ov,b.m,d.E,v.g,l.u5,l.Fj,l.wV,l.JJ,l.qQ,l.On,C.N,m.JX,m._s,m.LS,y.w,g.g,J,f.aw,f.X$,N.G,M.P],styles:[".sticky[_ngcontent-%COMP%]{position:sticky;top:-5px;z-index:20}thead[_ngcontent-%COMP%]{top:-20px!important}.pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}.fixed-pagination[_ngcontent-%COMP%]{position:fixed;bottom:25px;width:82vw;padding:1rem;inset-inline-start:16vw}"]})}}return n})()},70052:(Q,A,o)=>{o.d(A,{s:()=>y});var t=o(65619),r=o(37398),b=o(70940),d=o(20553),v=o(34673),l=o(65879),C=o(69862),m=o(96814);let y=(()=>{class g extends v.q{constructor(_,s){super(),this.http=_,this.datePipe=s,this.dashboard=new t.X({}),this.startDateFrom=new t.X(new Date),this.filterValue=new t.X(null),this.refresh=!1,this._cachedAttendanceData$=null,this.startDateFrom.subscribe(()=>{this.invalidateCache()}),this.filterValue.subscribe(()=>{this.invalidateCache()}),this.search.subscribe(()=>{this.invalidateCache()}),this.page.subscribe(()=>{this.invalidateCache()}),this.limit.subscribe(()=>{this.invalidateCache()})}getUserAttendance(){let _=new URL(`${d.N.apiUrl}api/Attendance/GetUsersAttendanceByManager?Day=${this.datePipe.transform(this.startDateFrom.value,"yyyy-MM-dd")||""}`);return"number"==typeof this.filterValue.value&&_.searchParams.append("Filter",String(this.filterValue.value)),this.params(_),this.http.get(`${_}`).pipe((0,r.U)(s=>(this.setMeta(s),s.data.items)))}getDashboard(){let _=new URL(`${d.N.apiUrl}api/Attendance/AttentanceManagerDashbord?startDate=${this.datePipe.transform(this.startDateFrom.value,"yyyy-MM-dd")||""}&endDate=${this.datePipe.transform(this.startDateFrom.value,"yyyy-MM-dd")||""}`);return this.http.get(`${_}`).pipe((0,r.U)(s=>(this.dashboard.next(s.data),s.data)))}getUsersAttendanceByManagerCache(){if(this.refresh||!this._cachedAttendanceData$){let _=new URL(`${d.N.apiUrl}api/Attendance/GetUsersAttendanceByManagercache?Day=${this.datePipe.transform(this.startDateFrom.value,"yyyy-MM-dd")||""}`);"number"==typeof this.filterValue.value&&_.searchParams.append("Filter",String(this.filterValue.value)),_.searchParams.append("Recache",this.refresh?"true":"false"),this.params(_),this._cachedAttendanceData$=this.http.get(`${_}`).pipe((0,r.U)(s=>s.data),(0,b.d)(1)),this.refresh=!1}return this._cachedAttendanceData$}forceRefresh(){this.refresh=!0,this._cachedAttendanceData$=null,this.hasChanged.next(!0)}clearRefreshFlag(){this.refresh=!1}isDataCached(){return!this.refresh}getCachedData(){this.refresh=!1,this.hasChanged.next(!0)}invalidateCache(){this._cachedAttendanceData$=null,this.hasChanged.next(!0)}getUsersAttendanceByManagerExcel(){let _=new URL(`${d.N.apiUrl}api/Attendance/GetUsersAttendanceByManagerExcel?Day=${this.datePipe.transform(this.startDateFrom.value,"yyyy-MM-dd")||""}`);return"number"==typeof this.filterValue.value&&_.searchParams.append("Filter",String(this.filterValue.value)),this.params(_),this.http.get(`${_}`,{responseType:"blob",observe:"response"}).pipe((0,r.U)(s=>{const x=s.headers.get("content-disposition");let T="Attendance_Report.xlsx";if(x){const u=x.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);u&&u[1]&&(T=u[1].replace(/['"]/g,""))}return{blob:new Blob([s.body],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),filename:T}}))}static{this.\u0275fac=function(s){return new(s||g)(l.LFG(C.eN),l.LFG(m.uU))}}static{this.\u0275prov=l.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()}}]);