"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[2169],{38140:(E,y,a)=>{a.d(y,{Y:()=>T});var t=a(65879),p=a(96814),f=a(89515),P=a(824),Z=a(52081),h=a(56223),C=a(76472),v=a(3131);function M(i,c){if(1&i&&(t.TgZ(0,"p",10),t._uU(1),t.ALo(2,"arabicNumbers"),t.ALo(3,"translate"),t.qZA()),2&i){const o=t.oxw();t.xp6(1),t.Oqu(null!=o.meta&&o.meta.pageSize?t.lcZ(2,1,null==o.meta?null:o.meta.pageSize):t.lcZ(3,3,"unlimited"))}}function _(i,c){if(1&i){const o=t.EpF();t.TgZ(0,"input",11),t.NdJ("ngModelChange",function(s){t.CHM(o);const m=t.oxw();return t.KtG(m.limit=s)})("ngModelChange",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.changeLimit())}),t.qZA()}if(2&i){const o=t.oxw();t.Q6J("ngModel",o.limit)}}function L(i,c){1&i&&(t.TgZ(0,"p",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"record")))}function O(i,c){if(1&i){const o=t.EpF();t.TgZ(0,"pagination-controls",13),t.NdJ("pageChange",function(s){t.CHM(o);const m=t.oxw();return t.KtG(m.pageChanged(s))}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.qZA()}2&i&&t.Q6J("maxSize",7)("directionLinks",!0)("previousLabel",t.lcZ(1,4,"previous"))("nextLabel",t.lcZ(2,6,"next"))}const x=[[["","filters",""]],[["","content",""]]],D=function(i,c){return{height:i,"max-width":c}},U=["[filters]","[content]"];let T=(()=>{class i{constructor(){this.pageChange=new t.vpe,this.limitChanged=new t.vpe,this.hasTitle=!1,this.admin=!1,this.limit=15,this.hasCard=!1,this.extraHeight=0,this.service=(0,t.f3M)(v.P)}changeLimit(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.limit<1&&(this.limit=15),this.limitChanged.emit(this.limit)},500)}pageChanged(o){this.pageChange.emit(o)}static{this.\u0275fac=function(g){return new(g||i)}}static{this.\u0275cmp=t.Xpm({type:i,selectors:[["layout-with-filters"]],inputs:{meta:"meta",hasTitle:"hasTitle",admin:"admin",limit:"limit",hasCard:"hasCard",extraHeight:"extraHeight"},outputs:{pageChange:"pageChange",limitChanged:"limitChanged"},standalone:!0,features:[t.jDz],ngContentSelectors:U,decls:21,vars:20,consts:[[1,"layout-with-filters","w-100","rounded","bg-white","border",3,"ngStyle"],[1,"filters","border-bottom","px-1","pb-1","pt-25"],["magicScroll","",1,"content","relative"],[1,"pagination-content","flex","aic","jcsr","py-1","bg-white","border-top"],[1,"flex","aic"],["class","ml-75 primary",4,"ngIf"],["type","number","class","input ml-75 limit text-center","min","1",3,"ngModel","ngModelChange",4,"ngIf"],["class","ml-50 primary",4,"ngIf"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange",4,"ngIf"],[1,"primary"],[1,"ml-75","primary"],["type","number","min","1",1,"input","ml-75","limit","text-center",3,"ngModel","ngModelChange"],[1,"ml-50","primary"],[3,"maxSize","directionLinks","previousLabel","nextLabel","pageChange"]],template:function(g,s){1&g&&(t.F$t(x),t.TgZ(0,"div",0)(1,"div",1),t.Hsn(2),t.qZA(),t.TgZ(3,"div",2),t.Hsn(4,1),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,M,4,5,"p",5),t.YNc(11,_,1,1,"input",6),t.YNc(12,L,3,3,"p",7),t.qZA(),t.YNc(13,O,3,8,"pagination-controls",8),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.TgZ(17,"span",9),t._uU(18),t.ALo(19,"arabicNumbers"),t.ALo(20,"translate"),t.qZA()()()()),2&g&&(t.Q6J("ngStyle",t.WLB(17,D,s.hasTitle?"calc(100vh - 14.5rem)":s.hasCard?"calc(100vh - 27.7rem)":"calc(100vh - 11rem)",s.service.withSubMenu.value?"calc(100vw - 277px)":"calc(100vw - 92px)")),t.xp6(8),t.hij("",t.lcZ(9,9,"pagination_per_page")," "),t.xp6(2),t.Q6J("ngIf",!s.admin),t.xp6(1),t.Q6J("ngIf",s.admin),t.xp6(1),t.Q6J("ngIf",null==s.meta?null:s.meta.pageSize),t.xp6(1),t.Q6J("ngIf",(null==s.meta?null:s.meta.totalItems)>15),t.xp6(2),t.hij("",t.lcZ(16,11,"pagination_total_records")," "),t.xp6(3),t.AsE("",t.lcZ(19,13,null==s.meta?null:s.meta.totalItems)," ",t.lcZ(20,15,"record"),""))},dependencies:[p.ez,p.O5,p.PC,f.aw,f.X$,P.h,Z.m,h.u5,h.Fj,h.wV,h.JJ,h.qQ,h.On,C.JX,C.LS],styles:[".layout-with-filters[_ngcontent-%COMP%]{overflow:hidden;box-shadow:0 1px 38px #0000001a,0 2px 4px -1px #0000000f}.layout-with-filters[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{z-index:999}.layout-with-filters[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 137px)}.layout-with-filters[_ngcontent-%COMP%]   .pagination-content[_ngcontent-%COMP%]{height:58px}.limit[_ngcontent-%COMP%]{width:5rem;padding:1.1rem .5rem}"]})}}return i})()},72169:(E,y,a)=>{a.r(y),a.d(y,{PayslipHistoryComponent:()=>b});var t=a(65879),p=a(96814),f=a(38140),P=a(65668),Z=a(76472),h=a(57105),C=a(24971),v=a(89515),M=a(17700),_=a(19300),L=a(84076),O=a(21498),x=a(20553),D=a(83620),U=a(94664),T=a(37398),i=a(34673),c=a(69862);let o=(()=>{class n extends i.q{constructor(e){super(),this.http=e,this.list$=this.hasChanged.pipe((0,D.b)(400),(0,U.w)(()=>this.getTeamPayslipHistory().pipe((0,T.U)(l=>l))))}getTeamPayslipHistory(){this.loading.next(!0);const e=new URL(`${x.N.apiUrl}api/Contract/GetPaySlipsForAdmin`);return e.searchParams.append("From","2024-01-01T15:00:00"),e.searchParams.append("To","2024-11-01T15:00:00"),e.searchParams.append("paySlipStatus","3"),e.searchParams.append("EmployeeName",this.search.value),this.params(e),this.http.get(`${e}`).pipe((0,T.U)(l=>(this.setMeta(l),this.loading.next(!1),l.data.items)))}GetAdminPaySlips(e){return this.http.get(`${x.N.apiUrl}api/Contract/GetPaySlipsForAdmin`,{params:e})}static{this.\u0275fac=function(l){return new(l||n)(t.LFG(c.eN))}}static{this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var g=a(9619),s=a(36114),m=a(32801);function I(n,u){if(1&n&&(t.TgZ(0,"tr",14)(1,"td",9)(2,"div",15),t._UZ(3,"app-img-title",16),t.qZA()(),t.TgZ(4,"td")(5,"div",17)(6,"p"),t._uU(7),t.ALo(8,"arabicDate"),t.qZA()()(),t.TgZ(9,"td")(10,"p"),t._uU(11),t.qZA()(),t.TgZ(12,"td")(13,"p"),t._uU(14),t.qZA()(),t.TgZ(15,"td")(16,"p"),t._uU(17),t.qZA()(),t.TgZ(18,"td")(19,"p"),t._uU(20),t.qZA()(),t.TgZ(21,"td")(22,"p"),t._uU(23),t.qZA()(),t.TgZ(24,"td")(25,"p"),t._uU(26),t.qZA()()()),2&n){const e=u.$implicit;t.xp6(3),t.Q6J("imgSrc",null==e?null:e.employeePic)("title",null==e?null:e.employeeName)("subTitle",null==e?null:e.employeeNJobTitle)("userId",null==e?null:e.employeeId),t.xp6(4),t.Oqu(t.xi3(8,11,null==e?null:e.date,"short")),t.xp6(4),t.Oqu(null==e?null:e.basic),t.xp6(3),t.Oqu(null==e?null:e.totalAllowance),t.xp6(3),t.Oqu((null==e?null:e.earnedKpiBonus)||"-"),t.xp6(3),t.Oqu(null==e?null:e.totalDeductions),t.xp6(3),t.Oqu(null==e?null:e.gross),t.xp6(3),t.Oqu(null==e?null:e.totalNet)}}const J=function(n,u,e){return{itemsPerPage:n,currentPage:u,totalItems:e}};function S(n,u){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,I,27,14,"tr",13),t.ALo(2,"paginate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e.list,t.kEZ(4,J,e.meta.pageSize,e.meta.currentPage,e.meta.totalItems)))}}function F(n,u){1&n&&t._UZ(0,"not-found",18)}function w(n,u){1&n&&t._UZ(0,"loading")}const N=function(n){return{"h-100":n}};let b=(()=>{class n{changePage(e){this.page=e,this.getPayslips()}search(e){this.searchValue=e,this.getPayslips()}constructor(e){this.datePipe=e,this.limit=15,this.page=1,this.service=(0,t.f3M)(o),this.dialog=(0,t.f3M)(M.uw),this.list=[],this.status=(0,_.q)(L.V),this.types=(0,_.q)(O.A);const l=new Date,r=new Date(l.getFullYear(),l.getMonth()-1,1),A=new Date(r.getFullYear(),r.getMonth()+1,0);this.startDate=this.datePipe.transform(r,"yyyy-MM-01"),this.endDate=this.datePipe.transform(A,"yyyy-MM-dd")}ngOnInit(){console.log("this.startDate",this.startDate),console.log("this.EndDate",this.endDate),this.getPayslips()}getPayslips(){this.loading=!0;let e=(new c.LE).set("from",this.startDate).set("to",this.endDate).set("paySlipStatus","3").set("Page",this.page).set("limit",this.limit);this.searchValue&&(e=e.set("EmployeeName",this.searchValue||"")),this.service.GetAdminPaySlips(e).subscribe({next:l=>{this.list=l.data.items,this.meta=l.data,this.loading=!1},error:l=>{console.error("Error retrieving payslips:",l)}})}dateChange(e){this.startDate=this.datePipe.transform(e.startDate,"yyyy-MM-01"),this.endDate=this.datePipe.transform(e.endDate,"yyyy-MM-dd"),this.getPayslips()}static{this.\u0275fac=function(l){return new(l||n)(t.Y36(p.uU))}}static{this.\u0275cmp=t.Xpm({type:n,selectors:[["payslip-history"]],standalone:!0,features:[t._Bn([p.uU]),t.jDz],decls:40,vars:36,consts:[[3,"meta","pageChange"],["filters",""],[1,"flex-grid"],[1,"col-md-3"],[3,"width","newSearch","key","valueChanged"],[3,"startDate","endDate","valueChanged"],["content",""],[1,"table","w-100","relative",3,"ngClass"],[1,"bg-gray","border-bottom"],[1,"text-left"],[4,"ngIf"],["class","a-center",4,"ngIf"],[1,"py-5"],["class","border-bottom",4,"ngFor","ngForOf"],[1,"border-bottom"],[1,"flex","aic","gap-x-1"],[3,"imgSrc","title","subTitle","userId"],[1,"info"],[1,"a-center"]],template:function(l,r){1&l&&(t.TgZ(0,"layout-with-filters",0),t.NdJ("pageChange",function(d){return r.changePage(d)}),t.ynx(1,1),t.TgZ(2,"div",2)(3,"div",3)(4,"search",4),t.NdJ("valueChanged",function(d){return r.search(d)}),t.qZA()(),t.TgZ(5,"div",3)(6,"app-date-range",5),t.NdJ("valueChanged",function(d){return r.dateChange(d)}),t.qZA()()(),t.BQk(),t.ynx(7,6),t.TgZ(8,"table",7)(9,"thead",8)(10,"tr")(11,"th",9),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"th"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"th"),t.qZA()(),t.YNc(36,S,3,8,"tbody",10),t.YNc(37,F,1,0,"not-found",11),t.TgZ(38,"div",12),t.YNc(39,w,1,0,"loading",10),t.qZA()(),t.BQk(),t.qZA()),2&l&&(t.Q6J("meta",r.meta),t.xp6(4),t.Q6J("width","w-100")("newSearch",!0)("key",r.service.search.value),t.xp6(2),t.Q6J("startDate",r.startDate)("endDate",r.endDate),t.xp6(2),t.Q6J("ngClass",t.VKq(34,N,0==r.list.length)),t.xp6(4),t.Oqu(t.lcZ(13,18,"employee")),t.xp6(3),t.Oqu(t.lcZ(16,20,"date")),t.xp6(3),t.Oqu(t.lcZ(19,22,"basic_salary")),t.xp6(3),t.Oqu(t.lcZ(22,24,"total_allowance")),t.xp6(3),t.hij("",t.lcZ(25,26,"target_kpi_bonus")," "),t.xp6(3),t.hij("",t.lcZ(28,28,"total_deductions")," "),t.xp6(3),t.Oqu(t.lcZ(31,30,"gross_salary")),t.xp6(3),t.Oqu(t.lcZ(34,32,"net_salary")),t.xp6(3),t.Q6J("ngIf",r.list.length>0&&!r.loading),t.xp6(1),t.Q6J("ngIf",0==r.list.length&&!r.loading),t.xp6(2),t.Q6J("ngIf",r.loading))},dependencies:[p.ez,p.mk,p.sg,p.O5,f.Y,P.N,Z.JX,Z._s,h.w,C.g,v.aw,v.X$,g.P,s.S,m.G]})}}return n})()}}]);