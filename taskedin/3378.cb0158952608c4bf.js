"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[3378],{84796:(M,l,i)=>{i.r(l),i.d(l,{SpaceConfigurationComponent:()=>T});var e=i(65879),r=i(96814),h=i(1428),u=i(82599),g=i(89515),d=i(56223),f=i(1350),_=i(16290),p=i(75986),m=i(32296),k=i(82458),C=i(17857),v=i(99758),y=i(25058);function x(c,Z){if(1&c){const t=e.EpF();e.TgZ(0,"div",25)(1,"mat-checkbox",26),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.weekendChanged(n))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-checkbox",27),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.weekendChanged(n))}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"mat-checkbox",28),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.weekendChanged(n))}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"mat-checkbox",29),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.weekendChanged(n))}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"mat-checkbox",30),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.weekendChanged(n))}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"mat-checkbox",31),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.weekendChanged(n))}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"mat-checkbox",32),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.weekendChanged(n))}),e._uU(20),e.ALo(21,"translate"),e.qZA()()}if(2&c){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.weekends.includes("sunday")),e.xp6(1),e.Oqu(e.lcZ(3,14,"sunday")),e.xp6(2),e.Q6J("checked",t.weekends.includes("monday")),e.xp6(1),e.Oqu(e.lcZ(6,16,"monday")),e.xp6(2),e.Q6J("checked",t.weekends.includes("tuesday")),e.xp6(1),e.Oqu(e.lcZ(9,18,"tuesday")),e.xp6(2),e.Q6J("checked",t.weekends.includes("wednesday")),e.xp6(1),e.Oqu(e.lcZ(12,20,"wednesday")),e.xp6(2),e.Q6J("checked",t.weekends.includes("thursday")),e.xp6(1),e.Oqu(e.lcZ(15,22,"thursday")),e.xp6(2),e.Q6J("checked",t.weekends.includes("friday")),e.xp6(1),e.Oqu(e.lcZ(18,24,"friday")),e.xp6(2),e.Q6J("checked",t.weekends.includes("saturday")),e.xp6(1),e.Oqu(e.lcZ(21,26,"saturday"))}}let T=(()=>{class c{constructor(){this.spaceSer=(0,e.f3M)(C.s),this.from="",this.to="",this.workingHours=1,this.leaveSystem=!1,this.loading=!1,this.weekends=[],this.dataLoaded=!1,this.isUpdate=!1,this.alert=(0,e.f3M)(v.c),this.utcOffset=(new Date).getTimezoneOffset()}ngOnInit(){this.spaceSer.spaceConfiguration$.subscribe(t=>{if(t.workingHours){this.dataLoaded=!0,this.workingHours=+t.workingHours.split(":")[0];let o=new Date(t.checkInTime),n=new Date(t.checkOutTime);o.setHours(o.getHours()-this.utcOffset/60),n.setHours(n.getHours()-this.utcOffset/60),this.from=(0,r.p6)(o,"HH:mm","en-US"),this.to=(0,r.p6)(n,"HH:mm","en-US"),this.weekends=t.weekEnds?.toLowerCase()?.split(",")||[],this.leaveSystem=t.leaveSystem,this.isUpdate="00:00"!=t.workingHours}})}weekendChanged(t){let o=t.source.value;const n=this.weekends.indexOf(o);-1!==n?this.weekends.splice(n,1):this.weekends.push(o)}submit(){this.loading=!0;let t=(0,r.p6)(`2001-01-01 ${this.from}`,"yyyy-MM-ddTHH:mm:ssZ","en-US"),o=(0,r.p6)(`2001-01-01 ${this.to}`,"yyyy-MM-ddTHH:mm:ssZ","en-US"),n={weekEnds:this.weekends.map(a=>(0,y.f)(a)),checkInTime:t,checkOutTime:o,workingHoursTime:`${this.workingHours<10?"0":""}${this.workingHours}:00`,leaveSystem:this.leaveSystem,update:!0,fromDay:this.spaceSer.spaceConfiguration$.value.fromDay,toDay:this.spaceSer.spaceConfiguration$.value.toDay,crossMonth:this.spaceSer.spaceConfiguration$.value.crossMonth};this.isUpdate||(n.leaveTypeNameEn="Annual",n.leaveTypeNameAr="\u0633\u0646\u0648\u064a",n.update=!1),this.spaceSer.updateSpaceConfiguration(n).subscribe(a=>{a.success&&(this.loading=!1,this.alert.showAlert("space_configuration_updated"))})}add(){this.workingHours++}minus(){this.workingHours>1&&this.workingHours--}static{this.\u0275fac=function(o){return new(o||c)}}static{this.\u0275cmp=e.Xpm({type:c,selectors:[["space-leaves-settings"]],standalone:!0,features:[e.jDz],decls:41,vars:20,consts:[[1,"space-configuration","p-2"],[1,"top-section"],["labelPosition","before","color","primary",3,"ngModel","ngModelChange"],[1,"flex","gap-x-1"],["src","assets/images/icons/eye.svg","alt","eye icon"],[1,"mr-2"],[1,"content","border","p-2","rounded","mt-2"],[1,"flex-grid","gap-y-2","mt-1"],[1,"col-lg-4"],["key","check-in_time"],["readonly","",1,"input",3,"ngxTimepicker","ngModel","ngModelChange"],[3,"minutesGap"],["timeFrom",""],["key","check-out_time"],["timeTo",""],["key","working_hours"],[1,"flex","aic","gap-x-1"],[1,"number-card","border","rounded","minus",3,"click"],[1,"number","border","rounded"],[1,"number-card","border","rounded","add",3,"click"],[1,"weekend","mt-2"],["class","flex gap-x-2 gap-y-2",4,"ngIf"],[1,"flex","aic","jcfe","mt-3"],["mat-raised-button","","color","primary",1,"px-5",3,"disabled","click"],["text","update",3,"loading"],[1,"flex","gap-x-2","gap-y-2"],["value","sunday","color","primary",3,"checked","change"],["value","monday","color","primary",3,"checked","change"],["value","tuesday","color","primary",3,"checked","change"],["value","wednesday","color","primary",3,"checked","change"],["value","thursday","color","primary",3,"checked","change"],["value","friday","color","primary",3,"checked","change"],["value","saturday","color","primary",3,"checked","change"]],template:function(o,n){if(1&o&&(e.TgZ(0,"layout")(1,"div",0)(2,"div",1)(3,"mat-slide-toggle",2),e.NdJ("ngModelChange",function(s){return n.leaveSystem=s}),e.TgZ(4,"div",3),e._UZ(5,"img",4),e.TgZ(6,"p",5),e._uU(7),e.ALo(8,"translate"),e.qZA()()()(),e.TgZ(9,"div",6)(10,"h5"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",7)(14,"div",8),e._UZ(15,"input-label",9),e.TgZ(16,"input",10),e.NdJ("ngModelChange",function(s){return n.from=s}),e.qZA(),e._UZ(17,"ngx-material-timepicker",11,12),e.qZA(),e.TgZ(19,"div",8),e._UZ(20,"input-label",13),e.TgZ(21,"input",10),e.NdJ("ngModelChange",function(s){return n.to=s}),e.qZA(),e._UZ(22,"ngx-material-timepicker",11,14),e.qZA(),e.TgZ(24,"div",8),e._UZ(25,"input-label",15),e.TgZ(26,"div",16)(27,"div",17),e.NdJ("click",function(){return n.minus()}),e._uU(28,"-"),e.qZA(),e.TgZ(29,"div",18),e._uU(30),e.qZA(),e.TgZ(31,"div",19),e.NdJ("click",function(){return n.add()}),e._uU(32,"+"),e.qZA()()()(),e.TgZ(33,"div",20)(34,"h5"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.YNc(37,x,22,28,"div",21),e.qZA(),e.TgZ(38,"div",22)(39,"button",23),e.NdJ("click",function(){return n.submit()}),e._UZ(40,"submit-button",24),e.qZA()()()()()),2&o){const a=e.MAs(18),s=e.MAs(23);e.xp6(3),e.Q6J("ngModel",n.leaveSystem),e.xp6(4),e.Oqu(e.lcZ(8,14,"view_leave_dashboard")),e.xp6(4),e.Oqu(e.lcZ(12,16,"space_attendance_configuration")),e.xp6(5),e.Q6J("ngxTimepicker",a)("ngModel",n.from),e.xp6(1),e.Q6J("minutesGap",5),e.xp6(4),e.Q6J("ngxTimepicker",s)("ngModel",n.to),e.xp6(1),e.Q6J("minutesGap",5),e.xp6(8),e.Oqu(n.workingHours),e.xp6(5),e.Oqu(e.lcZ(36,18,"weekend_days")),e.xp6(2),e.Q6J("ngIf",n.dataLoaded),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(1),e.Q6J("loading",n.loading)}},dependencies:[r.ez,r.O5,h.$,u.rP,u.Rr,g.aw,g.X$,d.u5,d.Fj,d.JJ,d.On,f.i,_.rK,_.ro,_.I2,p.p9,p.oG,m.ot,m.lW,k.w],styles:[".number-card[_ngcontent-%COMP%]{padding:.8rem 2rem;cursor:pointer;-webkit-user-select:none;user-select:none}.number-card[_ngcontent-%COMP%]:active{background:rgba(128,128,128,.1)}.number[_ngcontent-%COMP%]{padding:.8rem 3.5rem;margin-top:.2rem}"]})}}return c})()}}]);