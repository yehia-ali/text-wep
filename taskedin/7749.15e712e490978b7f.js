"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[7749],{27749:(j,g,c)=>{c.r(g),c.d(g,{AllSpacesComponent:()=>$});var t=c(65879),i=c(96814),f=c(55006),Z=c(38140),r=c(11486),C=c(83318),T=c(59466),m=c(89515),u=c(76472),b=c(9619),S=c(22557),d=c(92596),v=c(57105),O=c(65668),E=c(3131),M=c(99758),x=c(82599),P=c(33857),U=c(18512),h=c(75986),A=c(32296),L=c(6156),q=c(82740),D=c(92965),w=c(17700);function I(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"div",8)(1,"button",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeMultiSpacesStatus(!0))}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeMultiSpacesStatus(!1))}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"activate")+" "+e.selectedSpaces.length),t.xp6(3),t.Oqu(t.lcZ(6,4,"deactivate")+" "+e.selectedSpaces.length)}}function K(s,_){if(1&s&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.Oqu("rtl"==a.dir?e.countryArName:e.countryEnName)}}function y(s,_){1&s&&(t.TgZ(0,"p"),t._uU(1,"-"),t.qZA())}function N(s,_){1&s&&(t.TgZ(0,"div",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"paid")))}function J(s,_){1&s&&(t.TgZ(0,"div",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"unpaid")))}function B(s,_){1&s&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"active")))}function R(s,_){1&s&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"inactive")))}const k=function(s){return{"bx-rotate-180":s}};function H(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"tr",22)(1,"td",13)(2,"p",23)(3,"span",14)(4,"mat-checkbox",24),t.NdJ("change",function(){const o=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.selectSpace(o.spaceId))}),t.qZA()(),t._uU(5),t.qZA()(),t.TgZ(6,"td",16)(7,"p",25)(8,"i",26),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.showLogs(o.spaceId))}),t.qZA(),t.TgZ(9,"span"),t._uU(10),t.qZA()()(),t.TgZ(11,"td")(12,"div",20)(13,"p"),t._uU(14),t.ALo(15,"arabicDate"),t.qZA()()(),t.TgZ(16,"td",16)(17,"p"),t._uU(18),t.ALo(19,"arabicDate"),t.qZA()(),t.TgZ(20,"td",16)(21,"p"),t._uU(22),t.qZA()(),t.TgZ(23,"td",16)(24,"a",27),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.createLog(o,"whatsapp"))}),t.ALo(25,"slice"),t.qZA(),t.TgZ(26,"a",28),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.createLog(o,"call"))}),t.ALo(27,"slice"),t.qZA(),t.TgZ(28,"span",29),t._uU(29),t.qZA()(),t.TgZ(30,"td",13)(31,"a",30),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.createLog(o,"email"))}),t._UZ(32,"i",31),t._uU(33),t.qZA()(),t.TgZ(34,"td",13),t.YNc(35,K,2,1,"p",7),t.YNc(36,y,2,0,"p",7),t.qZA(),t.TgZ(37,"td",13)(38,"p"),t._uU(39),t.ALo(40,"translate"),t.qZA()(),t.TgZ(41,"td")(42,"div",20),t.YNc(43,N,3,3,"div",32),t.YNc(44,J,3,3,"div",33),t.qZA()(),t.TgZ(45,"td")(46,"p"),t._uU(47),t.ALo(48,"arabicDate"),t.qZA()(),t.TgZ(49,"td")(50,"p"),t._uU(51),t.ALo(52,"translate"),t.qZA()(),t.TgZ(53,"td")(54,"p"),t._uU(55),t.qZA()(),t.TgZ(56,"td")(57,"p"),t._uU(58),t.qZA()(),t.TgZ(59,"td")(60,"mat-slide-toggle",34),t.NdJ("change",function(n){const l=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.toggleSpace(n,l.spaceId,l))}),t.qZA(),t.TgZ(61,"p",35),t.YNc(62,B,3,3,"span",7),t.YNc(63,R,3,3,"span",7),t.qZA()(),t.TgZ(64,"td")(65,"i",36),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.goToSpace(o))}),t.ALo(66,"translate"),t.qZA()(),t.TgZ(67,"td",37),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.spaceConfiguration(o))}),t.ALo(68,"translate"),t._UZ(69,"i",38),t.qZA()()}if(2&s){const e=_.$implicit,a=t.oxw(2);t.xp6(4),t.Q6J("checked",a.selectedSpaces.includes(e.spaceId)),t.xp6(1),t.hij(" ",e.spaceId,""),t.xp6(5),t.Oqu(e.spaceName),t.xp6(4),t.Oqu(e.creationDate?t.lcZ(15,26,e.creationDate):"-"),t.xp6(4),t.Oqu(e.lastTaskDate?t.lcZ(19,28,e.creationDate):"-"),t.xp6(4),t.Oqu(e.ownerName),t.xp6(2),t.Q6J("href","https://wa.me/+"+t.xi3(25,30,e.ownerPhoneNumber,2),t.LSH),t.xp6(2),t.Q6J("href","tel:+"+t.xi3(27,33,e.ownerPhoneNumber,2),t.LSH),t.xp6(3),t.Oqu(e.ownerPhoneNumber),t.xp6(2),t.Q6J("href","mailto:"+e.ownerEmail,t.LSH),t.xp6(2),t.hij(" ",e.ownerEmail||"-"," "),t.xp6(2),t.Q6J("ngIf",e.countryEnName),t.xp6(1),t.Q6J("ngIf",!e.countryEnName),t.xp6(3),t.Oqu(t.lcZ(40,36,e.paymentPackageName)||"-"),t.xp6(4),t.Q6J("ngIf",1==e.paymentSubscriptionStatus),t.xp6(1),t.Q6J("ngIf",0==e.paymentSubscriptionStatus),t.xp6(3),t.Oqu(e.paymentSubscribtionEndDate?t.lcZ(48,38,e.paymentSubscribtionEndDate):"-"),t.xp6(4),t.Oqu(e.paymentSubscribtionTotalPrice?e.paymentSubscribtionTotalPrice+" "+t.lcZ(52,40,"EGP"):"-"),t.xp6(4),t.Oqu(e.paymentSubscribtionTotalNumberOfUsers),t.xp6(3),t.Oqu(e.numberOfActiveUser),t.xp6(2),t.Q6J("checked",e.isActive),t.xp6(2),t.Q6J("ngIf",e.isActive),t.xp6(1),t.Q6J("ngIf",!e.isActive),t.xp6(2),t.Q6J("matTooltip",t.lcZ(66,42,"go_to_space"))("ngClass",t.VKq(46,k,"rtl"==a.dir)),t.xp6(2),t.Q6J("matTooltip",t.lcZ(68,44,"space_configuration"))}}const W=function(s,_,e){return{itemsPerPage:s,currentPage:_,totalItems:e}};function G(s,_){if(1&s){const e=t.EpF();t.TgZ(0,"table",11)(1,"thead",12)(2,"tr")(3,"th",13)(4,"span",14)(5,"mat-checkbox",15),t.NdJ("change",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleSelectAll(n.checked))}),t.qZA()(),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th",16)(9,"div",17)(10,"p",18),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"sorting",19),t.NdJ("down",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(3,0))})("up",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(3,1))}),t.qZA()()(),t.TgZ(14,"th",13),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th",16),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th",16)(21,"div",17)(22,"p",18),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"sorting",19),t.NdJ("down",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(4,0))})("up",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(4,1))}),t.qZA()()(),t.TgZ(26,"th",16),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th",13),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"th",13),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th",13),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th",13),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th",13)(42,"div",20)(43,"p",18),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"sorting",19),t.NdJ("down",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(2,1))})("up",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(2,0))}),t.qZA()()(),t.TgZ(47,"th",13)(48,"div",17)(49,"p",18),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"sorting",19),t.NdJ("down",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(5,1))})("up",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(5,0))}),t.qZA()()(),t.TgZ(53,"th")(54,"div",20)(55,"p",18),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"sorting",19),t.NdJ("down",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(1,1))})("up",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(1,0))}),t.qZA()()(),t.TgZ(59,"th")(60,"div",20)(61,"p",18),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"sorting",19),t.NdJ("down",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(1,1))})("up",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort(1,0))}),t.qZA()()(),t.TgZ(65,"th"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t._UZ(68,"th")(69,"th"),t.qZA()(),t.TgZ(70,"tbody"),t.YNc(71,H,70,48,"tr",21),t.ALo(72,"paginate"),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(6),t.hij(" ",t.lcZ(7,17,"id")," "),t.xp6(5),t.Oqu(t.lcZ(12,19,"name")),t.xp6(4),t.Oqu(t.lcZ(16,21,"creation_date")),t.xp6(3),t.Oqu(t.lcZ(19,23,"last_activity")),t.xp6(5),t.Oqu(t.lcZ(24,25,"owner_name")),t.xp6(4),t.Oqu(t.lcZ(28,27,"owner_phone_number")),t.xp6(3),t.Oqu(t.lcZ(31,29,"owner_email")),t.xp6(3),t.Oqu(t.lcZ(34,31,"country")),t.xp6(3),t.Oqu(t.lcZ(37,33,"package_name")),t.xp6(3),t.Oqu(t.lcZ(40,35,"status")),t.xp6(5),t.Oqu(t.lcZ(45,37,"end_date")),t.xp6(6),t.Oqu(t.lcZ(51,39,"total_price")),t.xp6(6),t.Oqu(t.lcZ(57,41,"package_users")),t.xp6(6),t.Oqu(t.lcZ(63,43,"active_users")),t.xp6(4),t.Oqu(t.lcZ(67,45,"is_active")),t.xp6(5),t.Q6J("ngForOf",t.xi3(72,47,e.spaces,t.kEZ(50,W,e.meta.pageSize,e.meta.currentPage,e.meta.totalItems)))("ngForTrackBy",e.trackBy)}}function Q(s,_){1&s&&t._UZ(0,"not-found")}function Y(s,_){1&s&&t._UZ(0,"loading")}let $=(()=>{class s{constructor(e,a,n){this.service=e,this.dialog=a,this.elm=n,this.selectedSpaces=[],this.spaces=[],this.loading=!1,this.dir=document.dir,this.layout=(0,t.f3M)(E.P),this.alert=(0,t.f3M)(M.c)}ngOnInit(){this.layout.withSubMenu.next(!1),this.service.spaces.subscribe(e=>this.spaces=e),this.service.loading.subscribe(e=>this.loading=e),this.service.meta.subscribe(e=>this.meta=e),0==this.spaces.length&&this.service.search.next("")}getSpaces(){this.service.getAllSpaces().subscribe()}toggleSpace(e,a,n){this.dialog.open(C.v,{panelClass:"small-dialog",data:{btn_name:"confirm",classes:"bg-primary white",message:n.isActive?"deactivate_space":"activate_space"}}).afterClosed().subscribe(l=>{l&&this.service.activeOrDeactiveSpace({id:a,isActivated:!n.isActive}).subscribe(F=>{F.success&&(this.alert.showAlert("space_status_changed"),this.service.getAllSpaces().subscribe())})})}createLog(e,a=""){this.dialog.open(L.f,{panelClass:"small-dialog",width:"600px",data:{btn_name:"confirm",type:a,space:e}}).afterClosed().subscribe(o=>{o&&this.alert.showAlert("space_status_changed")})}showLogs(e){this.dialog.open(q.H,{panelClass:"small-dialog",width:"800px",data:{btn_name:"confirm",space:e}}).afterClosed().subscribe(n=>{n&&this.alert.showAlert("space_status_changed")})}goToSpace(e){localStorage.setItem("space-id",JSON.stringify(e.spaceId)),localStorage.setItem("space-name",e.spaceName),localStorage.setItem("base-url",e.baseUrl),window.location.href="/tasks/all-tasks"}spaceConfiguration(e){this.dialog.open(P.U,{panelClass:"configure-space-dialog",data:{space:e}})}search(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.service.currentPage.next(1),this.service.search.next(e),this.getSpaces()},500)}sort(e,a){this.service.currentPage.next(1),this.service.sort.next(e),this.service.sortDirection.next(a),this.getSpaces()}changePage(e){this.service.currentPage.next(e),this.getSpaces()}limitChanged(e){this.service.currentPage.next(1),this.service.limit.next(e),this.getSpaces()}exportToExcel(){let e=this.elm.nativeElement.querySelector("#spaces-table");const a=r.P6.table_to_sheet(e),n=r.P6.book_new();r.P6.book_append_sheet(n,a,"Sheet1"),r.NC(n,"spaces.xlsx")}trackBy(e,a){return a.spaceId}changeMultiSpacesStatus(e){this.service.activeOrDeactiveMultiSpace({id:this.selectedSpaces,isActivated:e}).subscribe(n=>{this.alert.showAlert("success"),this.selectedSpaces=[],this.getSpaces()})}selectSpace(e){const a=this.selectedSpaces.indexOf(e);-1===a?this.selectedSpaces.push(e):this.selectedSpaces.splice(a,1),this.isAllSelected()}toggleSelectAll(e){this.selectedSpaces=e?this.spaces.map(a=>a.spaceId):[],console.log(this.selectedSpaces)}isAllSelected(){return this.selectedSpaces.length===this.spaces.length}static{this.\u0275fac=function(a){return new(a||s)(t.Y36(D.s),t.Y36(w.uw),t.Y36(t.SBq))}}static{this.\u0275cmp=t.Xpm({type:s,selectors:[["all-spaces"]],standalone:!0,features:[t.jDz],decls:10,vars:8,consts:[[1,"p-2"],[3,"admin","limit","meta","limitChanged","pageChange"],["filters",""],[3,"service","emitChange","export"],["class","mt-1",4,"ngIf"],["content",""],["class","table","id","spaces-table",4,"ngIf"],[4,"ngIf"],[1,"mt-1"],["mat-raised-button","","color","primary",1,"mr-50",3,"click"],["mat-raised-button","","color","primary",3,"click"],["id","spaces-table",1,"table"],[1,"bg-gray","border-bottom"],[1,"text-center"],[1,"me-1"],["color","primary",3,"change"],[1,"text-left"],[1,"flex","aic"],[1,"mr-50"],[3,"down","up"],[1,"flex-center"],["class","border-bottom",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom"],[1,"fs-13"],["color","primary",3,"checked","change"],[1,"bold","primary","flex","aic"],[1,"bx","bx-file","blue","fs-18","pointer","mr-1",3,"click"],["target","_blank",1,"mr-50","bx","bxl-whatsapp","fs-18","success",3,"href","click"],[1,"mr-50","bx","bx-phone","fs-18","blue",3,"href","click"],[1,"bold"],[1,"bold",3,"href","click"],[1,"mr-50","bx","bx-envelope","fs-18","blue"],["class","chip bg-primary white flex-center rounded-5",4,"ngIf"],["class","chip bg-danger white flex-center rounded-5",4,"ngIf"],["color","primary",1,"example-margin",3,"checked","change"],[1,"print"],[1,"bx","bx-right-arrow-circle","fs-25","pointer","primary",3,"matTooltip","ngClass","click"],[3,"matTooltip","click"],[1,"bx","bxs-edit","fs-23","primary","pointer"],[1,"chip","bg-primary","white","flex-center","rounded-5"],[1,"chip","bg-danger","white","flex-center","rounded-5"]],template:function(a,n){1&a&&(t._UZ(0,"user-navbar"),t.TgZ(1,"div",0)(2,"layout-with-filters",1),t.NdJ("limitChanged",function(l){return n.limitChanged(l)})("pageChange",function(l){return n.changePage(l)}),t.ynx(3,2),t.TgZ(4,"spaces",3),t.NdJ("emitChange",function(){return n.getSpaces()})("export",function(){return n.exportToExcel()}),t.qZA(),t.YNc(5,I,7,6,"div",4),t.BQk(),t.ynx(6,5),t.YNc(7,G,73,54,"table",6),t.YNc(8,Q,1,0,"not-found",7),t.YNc(9,Y,1,0,"loading",7),t.BQk(),t.qZA()()),2&a&&(t.xp6(2),t.Q6J("admin",!0)("limit",n.service.limitValue)("meta",n.meta),t.xp6(2),t.Q6J("service",n.service),t.xp6(1),t.Q6J("ngIf",n.selectedSpaces.length>0),t.xp6(2),t.Q6J("ngIf",n.spaces&&n.spaces.length>0&&!n.loading),t.xp6(1),t.Q6J("ngIf",n.spaces&&0==n.spaces.length&&!n.loading),t.xp6(1),t.Q6J("ngIf",n.loading))},dependencies:[A.ot,A.lW,h.p9,h.oG,i.ez,i.mk,i.sg,i.O5,i.OU,f.o,Z.Y,T.i,m.aw,m.X$,u.JX,u._s,b.P,S.Hi,d.AV,d.gM,v.w,O.N,x.rP,x.Rr,U.v],styles:[".table[_ngcontent-%COMP%]{min-width:260rem}th[_ngcontent-%COMP%]{min-width:max-content!important;width:max-content!important}mat-chip[_ngcontent-%COMP%]{width:9.5rem;min-width:max-content}"]})}}return s})()}}]);