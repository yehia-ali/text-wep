"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[4224],{14224:(Qt,m,c)=>{c.r(m),c.d(m,{KanbanBoardComponent:()=>Ot});var T=c(10480),Z=c(57105),b=c(1428),p=c(34423),_=c(96814),u=c(89515),C=c(69862),v=c(9619),D=c(32801),h=c(64190),A=c(47719),k=c(55006),I=c(39326),f=c(92596),L=c(24971),P=c(22931),B=c(65668),K=c(36114),U=c(58697),w=c(73847),x=c(82599),M=c(85447),t=c(65879),E=c(86346),y=c(99758),J=c(17700),O=c(17476);const Q=["projectsFilter"],N=["priorityFilter"],j=["statusFilter"],F=["dateFilter"],q=["searchFilter"],S=["userFilter"];function R(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"i",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.getMoreTasks())}),t.ALo(1,"translate"),t.qZA()}2&i&&t.Q6J("matTooltip",t.lcZ(1,1,"load_more"))}function Y(i,s){1&i&&(t.TgZ(0,"div",40),t._UZ(1,"loading"),t.qZA())}function V(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",8)(1,"select-user",41,20),t.NdJ("getSelectedUsers",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.changeAssignee(n))}),t.qZA()()}2&i&&(t.xp6(1),t.Q6J("multi",!0)("newFilter",!0))}function $(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",21)(1,"p",42),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p")(5,"mat-slide-toggle",43),t.NdJ("change",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.changeView(n))}),t.ALo(6,"translate"),t.qZA()()()}2&i&&(t.xp6(2),t.hij("",t.lcZ(3,2,"admin_view")," "),t.xp6(3),t.Q6J("matTooltip",t.lcZ(6,4,"admin_view")))}function G(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",21)(1,"p",44),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p")(5,"mat-slide-toggle",43),t.NdJ("change",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.changeView(n,!0))}),t.ALo(6,"translate"),t.qZA()()()}2&i&&(t.xp6(2),t.hij("",t.lcZ(3,2,"stages")," "),t.xp6(3),t.Q6J("matTooltip",t.lcZ(6,4,"stages")))}function H(i,s){1&i&&(t.TgZ(0,"p",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"overdue")," "))}function W(i,s){1&i&&(t.TgZ(0,"p",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"repeated")," "))}function z(i,s){1&i&&(t.TgZ(0,"p",62),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"project")," "))}function X(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.creatorProfilePicture)("matTooltip",t.lcZ(1,2,"creator")+": "+e.creatorName)}}function tt(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.assigneeProfilePicture)("matTooltip",t.lcZ(1,2,"assignee")+": "+e.assigneeName)}}function et(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",45),t.NdJ("cdkDragReleased",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onItemSelected(o))})("click",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDetails(o))}),t.TgZ(2,"div")(3,"div",46)(4,"p",47),t._uU(5),t.qZA(),t._UZ(6,"priority",48),t.qZA(),t.TgZ(7,"div",49)(8,"div",50),t.YNc(9,H,3,3,"p",51),t.YNc(10,W,3,3,"p",52),t.YNc(11,z,3,3,"p",53),t.qZA(),t.TgZ(12,"p",54)(13,"span",55),t._uU(14),t.ALo(15,"arabicDate"),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"span",56),t._uU(18),t.ALo(19,"arabicDate"),t.qZA()()(),t.TgZ(20,"div",57),t.YNc(21,X,2,4,"app-img-title",58),t.YNc(22,tt,2,4,"app-img-title",58),t.TgZ(23,"p",59),t._uU(24),t.qZA()()()(),t.BQk()}if(2&i){const e=s.$implicit,a=t.oxw();t.xp6(5),t.Oqu(e.title),t.xp6(1),t.Q6J("priority",e.priority),t.xp6(3),t.Q6J("ngIf",e.isOverDue),t.xp6(1),t.Q6J("ngIf",e.isRepeated),t.xp6(1),t.Q6J("ngIf",e.isSubTasks),t.xp6(3),t.hij(" ",t.xi3(15,10,e.startDate,"month"),""),t.xp6(4),t.hij(" ",t.xi3(19,13,e.endDate,"month"),""),t.xp6(3),t.Q6J("ngIf",!a.adminView),t.xp6(1),t.Q6J("ngIf",a.adminView),t.xp6(2),t.hij(" ","T-"+e.taskId," ")}}function it(i,s){1&i&&(t.TgZ(0,"div",64),t._UZ(1,"not-found"),t.qZA())}function nt(i,s){1&i&&(t.TgZ(0,"p",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"overdue")," "))}function at(i,s){1&i&&(t.TgZ(0,"p",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"repeated")," "))}function ot(i,s){1&i&&(t.TgZ(0,"p",62),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"project")," "))}function rt(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.creatorProfilePicture)("matTooltip",t.lcZ(1,2,"creator")+": "+e.creatorName)}}function st(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.assigneeProfilePicture)("matTooltip",t.lcZ(1,2,"assignee")+": "+e.assigneeName)}}function ct(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",65),t.NdJ("cdkDragReleased",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onItemSelected(o))})("click",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDetails(o))}),t.TgZ(2,"div")(3,"div",46)(4,"p",47),t._uU(5),t.qZA(),t._UZ(6,"priority",48),t.qZA(),t.TgZ(7,"div",49)(8,"div",50),t.YNc(9,nt,3,3,"p",51),t.YNc(10,at,3,3,"p",52),t.YNc(11,ot,3,3,"p",53),t.qZA(),t.TgZ(12,"p",54)(13,"span",55),t._uU(14),t.ALo(15,"arabicDate"),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"span",56),t._uU(18),t.ALo(19,"arabicDate"),t.qZA()()(),t.TgZ(20,"div",57),t.YNc(21,rt,2,4,"app-img-title",58),t.YNc(22,st,2,4,"app-img-title",58),t.TgZ(23,"p",59),t._uU(24),t.qZA()()()(),t.BQk()}if(2&i){const e=s.$implicit,a=t.oxw();t.xp6(5),t.Oqu(e.title),t.xp6(1),t.Q6J("priority",e.priority),t.xp6(3),t.Q6J("ngIf",e.isOverDue),t.xp6(1),t.Q6J("ngIf",e.isRepeated),t.xp6(1),t.Q6J("ngIf",e.isSubTasks),t.xp6(3),t.hij(" ",t.xi3(15,10,e.startDate,"month"),""),t.xp6(4),t.hij(" ",t.xi3(19,13,e.endDate,"month"),""),t.xp6(3),t.Q6J("ngIf",!a.adminView),t.xp6(1),t.Q6J("ngIf",a.adminView),t.xp6(2),t.hij(" ","T-"+e.taskId," ")}}function pt(i,s){1&i&&(t.TgZ(0,"div",64),t._UZ(1,"not-found"),t.qZA())}function _t(i,s){1&i&&(t.TgZ(0,"p",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"overdue")," "))}function lt(i,s){1&i&&(t.TgZ(0,"p",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"repeated")," "))}function dt(i,s){1&i&&(t.TgZ(0,"p",62),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"project")," "))}function gt(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.creatorProfilePicture)("matTooltip",t.lcZ(1,2,"creator")+": "+e.creatorName)}}function mt(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.assigneeProfilePicture)("matTooltip",t.lcZ(1,2,"assignee")+": "+e.assigneeName)}}function ut(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",66),t.NdJ("cdkDragReleased",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onItemSelected(o))})("click",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDetails(o))}),t.TgZ(2,"div")(3,"div",46)(4,"p",47),t._uU(5),t.qZA(),t._UZ(6,"priority",48),t.qZA(),t.TgZ(7,"div",49)(8,"div",50),t.YNc(9,_t,3,3,"p",51),t.YNc(10,lt,3,3,"p",52),t.YNc(11,dt,3,3,"p",53),t.qZA(),t.TgZ(12,"p",54)(13,"span",55),t._uU(14),t.ALo(15,"arabicDate"),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"span",56),t._uU(18),t.ALo(19,"arabicDate"),t.qZA()()(),t.TgZ(20,"div",57),t.YNc(21,gt,2,4,"app-img-title",58),t.YNc(22,mt,2,4,"app-img-title",58),t.TgZ(23,"p",59),t._uU(24),t.qZA()()()(),t.BQk()}if(2&i){const e=s.$implicit,a=t.oxw();t.xp6(5),t.Oqu(e.title),t.xp6(1),t.Q6J("priority",e.priority),t.xp6(3),t.Q6J("ngIf",e.isOverDue),t.xp6(1),t.Q6J("ngIf",e.isRepeated),t.xp6(1),t.Q6J("ngIf",e.isSubTasks),t.xp6(3),t.hij(" ",t.xi3(15,10,e.startDate,"month"),""),t.xp6(4),t.hij(" ",t.xi3(19,13,e.endDate,"month"),""),t.xp6(3),t.Q6J("ngIf",!a.adminView),t.xp6(1),t.Q6J("ngIf",a.adminView),t.xp6(2),t.hij(" ","T-"+e.taskId," ")}}function ht(i,s){1&i&&(t.TgZ(0,"div",64),t._UZ(1,"not-found"),t.qZA())}function ft(i,s){1&i&&(t.TgZ(0,"p",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"overdue")," "))}function xt(i,s){1&i&&(t.TgZ(0,"p",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"repeated")," "))}function Tt(i,s){1&i&&(t.TgZ(0,"p",62),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"project")," "))}function Zt(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.creatorProfilePicture)("matTooltip",t.lcZ(1,2,"creator")+": "+e.creatorName)}}function bt(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.assigneeProfilePicture)("matTooltip",t.lcZ(1,2,"assignee")+": "+e.assigneeName)}}function Ct(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",67),t.NdJ("cdkDragReleased",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onItemSelected(o))})("click",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDetails(o))}),t.TgZ(2,"div")(3,"div",46)(4,"p",47),t._uU(5),t.qZA(),t._UZ(6,"priority",48),t.qZA(),t.TgZ(7,"div",49)(8,"div",50),t.YNc(9,ft,3,3,"p",51),t.YNc(10,xt,3,3,"p",52),t.YNc(11,Tt,3,3,"p",53),t.qZA(),t.TgZ(12,"p",54)(13,"span",55),t._uU(14),t.ALo(15,"arabicDate"),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"span",56),t._uU(18),t.ALo(19,"arabicDate"),t.qZA()()(),t.TgZ(20,"div",57),t.YNc(21,Zt,2,4,"app-img-title",58),t.YNc(22,bt,2,4,"app-img-title",58),t.TgZ(23,"p",59),t._uU(24),t.qZA()()()(),t.BQk()}if(2&i){const e=s.$implicit,a=t.oxw();t.xp6(5),t.Oqu(e.title),t.xp6(1),t.Q6J("priority",e.priority),t.xp6(3),t.Q6J("ngIf",e.isOverDue),t.xp6(1),t.Q6J("ngIf",e.isRepeated),t.xp6(1),t.Q6J("ngIf",e.isSubTasks),t.xp6(3),t.hij(" ",t.xi3(15,10,e.startDate,"month"),""),t.xp6(4),t.hij(" ",t.xi3(19,13,e.endDate,"month"),""),t.xp6(3),t.Q6J("ngIf",!a.adminView),t.xp6(1),t.Q6J("ngIf",a.adminView),t.xp6(2),t.hij(" ","T-"+e.taskId," ")}}function vt(i,s){1&i&&(t.TgZ(0,"div",64),t._UZ(1,"not-found"),t.qZA())}function Dt(i,s){1&i&&(t.TgZ(0,"p",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"overdue")," "))}function At(i,s){1&i&&(t.TgZ(0,"p",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"repeated")," "))}function kt(i,s){1&i&&(t.TgZ(0,"p",62),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"project")," "))}function It(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.creatorProfilePicture)("matTooltip",t.lcZ(1,2,"creator")+": "+e.creatorName)}}function Lt(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.assigneeProfilePicture)("matTooltip",t.lcZ(1,2,"assignee")+": "+e.assigneeName)}}function Pt(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",68),t.NdJ("cdkDragReleased",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onItemSelected(o))})("click",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDetails(o))}),t.TgZ(2,"div")(3,"div",46)(4,"p",47),t._uU(5),t.qZA(),t._UZ(6,"priority",48),t.qZA(),t.TgZ(7,"div",49)(8,"div",50),t.YNc(9,Dt,3,3,"p",51),t.YNc(10,At,3,3,"p",52),t.YNc(11,kt,3,3,"p",53),t.qZA(),t.TgZ(12,"p",54)(13,"span",55),t._uU(14),t.ALo(15,"arabicDate"),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"span",56),t._uU(18),t.ALo(19,"arabicDate"),t.qZA()()(),t.TgZ(20,"div",57),t.YNc(21,It,2,4,"app-img-title",58),t.YNc(22,Lt,2,4,"app-img-title",58),t.TgZ(23,"p",59),t._uU(24),t.qZA()()()(),t.BQk()}if(2&i){const e=s.$implicit,a=t.oxw();t.xp6(5),t.Oqu(e.title),t.xp6(1),t.Q6J("priority",e.priority),t.xp6(3),t.Q6J("ngIf",e.isOverDue),t.xp6(1),t.Q6J("ngIf",e.isRepeated),t.xp6(1),t.Q6J("ngIf",e.isSubTasks),t.xp6(3),t.hij(" ",t.xi3(15,10,e.startDate,"month"),""),t.xp6(4),t.hij(" ",t.xi3(19,13,e.endDate,"month"),""),t.xp6(3),t.Q6J("ngIf",!a.adminView),t.xp6(1),t.Q6J("ngIf",a.adminView),t.xp6(2),t.hij(" ","T-"+e.taskId," ")}}function Bt(i,s){1&i&&(t.TgZ(0,"div",64),t._UZ(1,"not-found"),t.qZA())}function Kt(i,s){1&i&&(t.TgZ(0,"p",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"overdue")," "))}function Ut(i,s){1&i&&(t.TgZ(0,"p",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"repeated")," "))}function wt(i,s){1&i&&(t.TgZ(0,"p",62),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"project")," "))}function Mt(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.creatorProfilePicture)("matTooltip",t.lcZ(1,2,"creator")+": "+e.creatorName)}}function Et(i,s){if(1&i&&(t._UZ(0,"app-img-title",63),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.Q6J("imgSrc",e.assigneeProfilePicture)("matTooltip",t.lcZ(1,2,"assignee")+": "+e.assigneeName)}}function yt(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",68),t.NdJ("cdkDragReleased",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onItemSelected(o))})("click",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDetails(o))}),t.TgZ(2,"div")(3,"div",46)(4,"p",47),t._uU(5),t.qZA(),t._UZ(6,"priority",48),t.qZA(),t.TgZ(7,"div",49)(8,"div",50),t.YNc(9,Kt,3,3,"p",51),t.YNc(10,Ut,3,3,"p",52),t.YNc(11,wt,3,3,"p",53),t.qZA(),t.TgZ(12,"p",54)(13,"span",55),t._uU(14),t.ALo(15,"arabicDate"),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"span",56),t._uU(18),t.ALo(19,"arabicDate"),t.qZA()()(),t.TgZ(20,"div",57),t.YNc(21,Mt,2,4,"app-img-title",58),t.YNc(22,Et,2,4,"app-img-title",58),t.TgZ(23,"p",59),t._uU(24),t.qZA()()()(),t.BQk()}if(2&i){const e=s.$implicit,a=t.oxw();t.xp6(5),t.Oqu(e.title),t.xp6(1),t.Q6J("priority",e.priority),t.xp6(3),t.Q6J("ngIf",e.isOverDue),t.xp6(1),t.Q6J("ngIf",e.isRepeated),t.xp6(1),t.Q6J("ngIf",e.isSubTasks),t.xp6(3),t.hij(" ",t.xi3(15,10,e.startDate,"month"),""),t.xp6(4),t.hij(" ",t.xi3(19,13,e.endDate,"month"),""),t.xp6(3),t.Q6J("ngIf",!a.adminView),t.xp6(1),t.Q6J("ngIf",a.adminView),t.xp6(2),t.hij(" ","T-"+e.taskId," ")}}function Jt(i,s){1&i&&(t.TgZ(0,"div",64),t._UZ(1,"not-found"),t.qZA())}const l=function(i){return[i]},d=function(){return[]};let Ot=(()=>{class i{constructor(e,a,n,o,r,g){this.service=e,this.alert=a,this.dialog=n,this.datePipe=o,this.role=r,this.router=g,this.adminView=!1,this.selectedItem=null,this.page=1,this.limit=30,this.userId=localStorage.getItem("id"),this.todo=[],this.completed=[],this.inProgress=[],this.overdue=[],this.draft=[],this.cancelled=[],this.waitingForApprove=[],this.rejected=[],this.isAtBottom=!1,this.moreTasksStatus=!0,this.taskStatus=[],this.projects=[],this.assignees=[],this.creators=[]}ngOnInit(){this.getTasks();const e=document.querySelectorAll(".example-list");e&&e.forEach(a=>{a.addEventListener("scroll",this.onElementScroll.bind(this))})}onElementScroll(e){const a=e.target,n=Math.round(a.scrollTop),o=Math.round(a.clientHeight);Math.round(a.scrollHeight)-n==o&&this.getMoreTasks()}getMoreTasks(){this.moreTasksStatus&&(this.page+=1,this.getTasks())}getTasks(){this.loading=!0;let e=(new C.LE).set("page",this.page).set("limit",this.limit).set("userId",this.userId);this.searchValue&&(e=e.set("search",this.searchValue)),this.startDateFrom&&(e=e.set("startDateFrom",this.startDateFrom)),this.startDateTo&&(e=e.set("startDateTo",this.startDateTo)),this.endDateFrom&&(e=e.set("endDateFrom",this.endDateFrom)),this.endDateTo&&(e=e.set("endDateTo",this.endDateTo)),this.priority&&(e=e.set("priorities",this.priority)),this.taskStatus&&this.taskStatus.length>0&&this.taskStatus.forEach(a=>{e=e.append("states",a)}),this.projects&&this.projects.length>0&&this.projects.forEach(a=>{e=e.append("projectIds",a)}),this.creators&&this.creators.length>0&&this.creators.forEach(a=>{e=e.append("creators",a.id)}),this.assignees&&this.assignees.length>0&&this.assignees.forEach(a=>{e=e.append("assignees",a.id)}),this.adminView?this.service.getAllTasks(e).subscribe(a=>{this.loading=!1,this.categorizeTasks(a.data.items),this.totalItems=a.data.totalItems,this.moreTasksStatus=!(this.page>=this.totalItems/this.limit)}):this.service.getUserTasks(e).subscribe(a=>{this.loading=!1,this.categorizeTasks(a.data.items),this.totalItems=a.data.totalItems,this.moreTasksStatus=!(this.page>=this.totalItems/this.limit)})}categorizeTasks(e){e.forEach(a=>{switch(a.taskStateId){case 1:this.todo.push(a);break;case 2:this.completed.push(a);break;case 3:this.inProgress.push(a);break;case 4:this.overdue.push(a);break;case 5:this.draft.push(a);break;case 6:this.cancelled.push(a);break;case 7:this.waitingForApprove.push(a);break;case 8:this.rejected.push(a);break;default:console.warn(`Unknown task status ID: ${a.taskStatusId}`)}})}onItemSelected(e){this.selectedItem=e}openDetails(e){this.router.navigate([],{queryParams:{id:e.taskId},queryParamsHandling:"merge"}),this.dialog.open(M.TaskDetailsComponent,{data:{task:e.taskId||e},panelClass:"task-details-dialog"}).afterClosed().subscribe(n=>{})}drop(e){if(this.adminView)this.alert.showAlert("not_allow_move_items","bg-warning");else if(e.previousContainer===e.container)(0,p.bA)(e.container.data,e.previousIndex,e.currentIndex);else if(1==this.selectedItem.taskStateId){let a={id:this.selectedItem.taskId,percentage:0,actualTime:null};this.service.updateEstimate({estimatedTime:this.selectedItem.expectedTime,id:this.selectedItem.taskId}).subscribe(()=>{this.service.updateTaskProgress(a).subscribe(n=>{n.success&&(this.alert.showAlert("success"),(0,p.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),e.container.data[e.currentIndex].taskStateId=3)})})}else if(2!=this.selectedItem.taskStateId||this.selectedItem.rate){if(3==this.selectedItem.taskStateId){let a=!1;this.service.getProps(this.selectedItem.taskId).subscribe(n=>{a=!(n.data.length>0)||n.data.every(o=>1==o.isAnswered),a?this.dialog.open(A.L,{panelClass:"small-dialog",data:{task:this.selectedItem}}).afterClosed().subscribe(r=>{r.success&&(this.alert.showAlert("success"),(0,p.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.alert.showAlert("success"),e.container.data[e.currentIndex].taskStateId=2)}):this.alert.showAlert("answer_questions_first","bg-danger")})}}else this.service.updateTaskProgress({id:this.selectedItem.taskId,percentage:0,actualTime:null}).subscribe(n=>{n.success&&(this.alert.showAlert("success"),(0,p.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),e.container.data[e.currentIndex].taskStateId=3,this.alert.showAlert("success"))})}trackByIndex(e,a){return e}search(e){this.searchValue=e,this.resetLists()}resetLists(){this.page=1,this.todo=[],this.completed=[],this.inProgress=[],this.overdue=[],this.draft=[],this.cancelled=[],this.waitingForApprove=[],this.rejected=[],this.getTasks()}changeEndDate(e){this.endDateFrom=this.datePipe.transform(e.startDate,"yyyy-MM-dd"),this.endDateTo=this.datePipe.transform(e.endDate,"yyyy-MM-dd"),this.resetLists()}changeStartDate(e){this.startDateFrom=this.datePipe.transform(e.startDate,"yyyy-MM-dd"),this.startDateTo=this.datePipe.transform(e.endDate,"yyyy-MM-dd"),this.resetLists()}changeTaskStatus(e){this.taskStatus=e,this.resetLists()}changeAssignee(e){this.assignees=e,this.resetLists()}changeCreator(e){this.creators=e,this.resetLists()}changeProject(e){this.projects=e,this.resetLists()}changePriority(e){this.priority=e,this.resetLists()}resetFilters(){this.priority=null,this.projects=[],this.creators=[],this.assignees=[],this.taskStatus=[],this.searchValue=null,this.startDateFrom=null,this.startDateTo=null,this.endDateFrom=null,this.endDateTo=null,this.cleanFilters=!0,this.projectsComponent.selectedValue=[],this.PriorityComponent.selectedValue=[],this.TaskStatusComponent.selectedValue=[],this.SelectUserComponent.selectedUsers=[],this.DateRangeComponent.startDate=null,this.DateRangeComponent.endDate=null,this.SearchComponent.key="",this.resetLists()}changeView(e,a=!1){e.checked&&a?this.router.navigate(["/board/template"]):(this.adminView=e.checked,this.resetLists())}static{this.\u0275fac=function(a){return new(a||i)(t.Y36(E.h),t.Y36(y.c),t.Y36(J.uw),t.Y36(_.uU),t.Y36(O.f),t.Y36(h.F0))}}static{this.\u0275cmp=t.Xpm({type:i,selectors:[["kanban-board"]],viewQuery:function(a,n){if(1&a&&(t.Gf(Q,5),t.Gf(N,5),t.Gf(j,5),t.Gf(F,5),t.Gf(q,5),t.Gf(S,5)),2&a){let o;t.iGM(o=t.CRH())&&(n.projectsComponent=o.first),t.iGM(o=t.CRH())&&(n.PriorityComponent=o.first),t.iGM(o=t.CRH())&&(n.TaskStatusComponent=o.first),t.iGM(o=t.CRH())&&(n.DateRangeComponent=o.first),t.iGM(o=t.CRH())&&(n.SearchComponent=o.first),t.iGM(o=t.CRH())&&(n.SelectUserComponent=o.first)}},standalone:!0,features:[t.jDz],decls:90,vars:92,consts:[["class","bx bx-refresh more-tasks flex aic jcc fixed white bg-primary fs-20 pointer shadow","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[1,"p-2","relative"],["class","py-5 overlay-loading",4,"ngIf"],[1,"flex","w-100","m-auto","mb-2","aic","jcsb","px-1","pt-1"],[1,"flex","w-100","m-auto","aic"],[1,"w-20r","pr-2"],[3,"width","newSearch","classes","hideLabel","valueChanged"],["searchFilter",""],[1,"pr-2"],[3,"newFilter","classes","valueChanged"],["projectsFilter",""],[3,"newFilter","multi","classes","valueChanged"],["priorityFilter",""],[3,"newFilter","width","valueChanged"],["statusFilter",""],[1,"filter-calendar","pr-2"],[3,"newFilter","label","startDate","endDate","valueChanged"],["dateFilter",""],["class","pr-2",4,"ngIf"],["text","creator",3,"multi","newFilter","getSelectedUsers"],["userFilter",""],[1,"flex","aic","gap-x-1"],["class","flex aic gap-x-1",4,"ngIf"],[1,"bx","bx-reset","pointer","fs-18","rounded-circle","clear-filters","flex","aic","jcc","white","bg-primary","border","border-primary",3,"matTooltip","click"],["id","kanban-layout",1,"kanban-layout","relative"],[1,"w-100"],[1,"flex-grid","m-auto","w-100","acs"],[1,"example-container","kanban-card","col-lg-2","px-1"],[1,"h-100"],[1,"mb-50","py-1","px-1","rounded","bg-gray","simibold","title-kanban-list","fs-13"],["cdkDropList","",1,"example-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["todoList","cdkDropList"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","py-5",4,"ngIf"],["inprogressList","cdkDropList"],["completedList","cdkDropList"],["waitingList","cdkDropList"],["draftList","cdkDropList"],["cancelledList","cdkDropList"],["matTooltipPosition","above",1,"bx","bx-refresh","more-tasks","flex","aic","jcc","fixed","white","bg-primary","fs-20","pointer","shadow",3,"matTooltip","click"],[1,"py-5","overlay-loading"],["text","assignee",3,"multi","newFilter","getSelectedUsers"],[1,"mb-0","fs-11","simibold","text-right",2,"width","80px"],["color","primary",3,"matTooltip","change"],[1,"mb-0","fs-11","simibold","text-right",2,"width","50px"],["cdkDrag","",1,"example-box","bg-white","p-1","mb-50","pointer","new-list",3,"cdkDragReleased","click"],[1,"flex","jcsb"],[1,"fs-12","simibold","mb-50"],[1,"mb-50",3,"priority"],[1,"flex","aic","mb-1","jcsb"],[1,"cards","flex"],["class","bg-light-danger px-50 py-50 fs-10 simibold rounded mr-50",4,"ngIf"],["class","bg-light-success px-50 py-50 fs-10 simibold rounded mr-50",4,"ngIf"],["class","bg-light-blue px-50 py-50 fs-10 simibold rounded mr-50",4,"ngIf"],[1,"fs-10","text-right"],[1,"success"],[1,"danger"],[1,"flex","jcsb","aie","mt-50"],["matTooltipPosition","below",3,"imgSrc","matTooltip",4,"ngIf"],[1,"mb-0","light","fs-11","text-right","simibold"],[1,"bg-light-danger","px-50","py-50","fs-10","simibold","rounded","mr-50"],[1,"bg-light-success","px-50","py-50","fs-10","simibold","rounded","mr-50"],[1,"bg-light-blue","px-50","py-50","fs-10","simibold","rounded","mr-50"],["matTooltipPosition","below",3,"imgSrc","matTooltip"],[1,"py-5"],["cdkDrag","",1,"example-box","bg-white","p-1","mb-50","pointer","inprogress-list","pointer",3,"cdkDragReleased","click"],["cdkDrag","",1,"example-box","bg-white","p-1","mb-50","pointer","done-list",3,"cdkDragReleased","click"],["cdkDrag","",1,"example-box","bg-white","p-1","mb-50","pointer","waiting-list",3,"cdkDragReleased","click"],["cdkDrag","",1,"example-box","bg-white","p-1","mb-50","pointer",3,"cdkDragReleased","click"]],template:function(a,n){if(1&a&&(t._UZ(0,"user-navbar"),t.YNc(1,R,2,3,"i",0),t.TgZ(2,"div",1),t.YNc(3,Y,2,0,"div",2),t.TgZ(4,"layout")(5,"div",3)(6,"div",4)(7,"div",5)(8,"search",6,7),t.NdJ("valueChanged",function(r){return n.search(r)}),t.qZA()(),t.TgZ(10,"div",8)(11,"projects",9,10),t.NdJ("valueChanged",function(r){return n.changeProject(r)}),t.qZA()(),t.TgZ(13,"div",8)(14,"priority-filter",11,12),t.NdJ("valueChanged",function(r){return n.changePriority(r)}),t.qZA()(),t.TgZ(16,"div",8)(17,"task-status",13,14),t.NdJ("valueChanged",function(r){return n.changeTaskStatus(r)}),t.qZA()(),t.TgZ(19,"div",15)(20,"app-date-range",16,17),t.NdJ("valueChanged",function(r){return n.changeStartDate(r)}),t.qZA()(),t.YNc(22,V,3,2,"div",18),t.TgZ(23,"div",8)(24,"select-user",19,20),t.NdJ("getSelectedUsers",function(r){return n.changeCreator(r)}),t.qZA()()(),t.TgZ(26,"div",21),t.YNc(27,$,7,6,"div",22),t.ALo(28,"async"),t.YNc(29,G,7,6,"div",22),t.ALo(30,"async"),t.TgZ(31,"i",23),t.NdJ("click",function(){return n.resetFilters()}),t.ALo(32,"translate"),t.qZA()()(),t.TgZ(33,"div",24)(34,"div",25)(35,"div",26)(36,"div",27)(37,"div",28)(38,"h5",29),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"div",30,31),t.NdJ("cdkDropListDropped",function(r){return n.drop(r)}),t.YNc(43,et,25,16,"ng-container",32),t.YNc(44,it,2,0,"div",33),t.qZA()()(),t.TgZ(45,"div",27)(46,"div",28)(47,"h5",29),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"div",30,34),t.NdJ("cdkDropListDropped",function(r){return n.drop(r)}),t.YNc(52,ct,25,16,"ng-container",32),t.YNc(53,pt,2,0,"div",33),t.qZA()()(),t.TgZ(54,"div",27)(55,"div",28)(56,"h5",29),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"div",30,35),t.NdJ("cdkDropListDropped",function(r){return n.drop(r)}),t.YNc(61,ut,25,16,"ng-container",32),t.YNc(62,ht,2,0,"div",33),t.qZA()()(),t.TgZ(63,"div",27)(64,"div",28)(65,"h5",29),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"div",30,36),t.NdJ("cdkDropListDropped",function(r){return n.drop(r)}),t.YNc(70,Ct,25,16,"ng-container",32),t.YNc(71,vt,2,0,"div",33),t.qZA()()(),t.TgZ(72,"div",27)(73,"div",28)(74,"h5",29),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"div",30,37),t.NdJ("cdkDropListDropped",function(r){return n.drop(r)}),t.YNc(79,Pt,25,16,"ng-container",32),t.YNc(80,Bt,2,0,"div",33),t.qZA()()(),t.TgZ(81,"div",27)(82,"div",28)(83,"h5",29),t._uU(84),t.ALo(85,"translate"),t.qZA(),t.TgZ(86,"div",30,38),t.NdJ("cdkDropListDropped",function(r){return n.drop(r)}),t.YNc(88,yt,25,16,"ng-container",32),t.YNc(89,Jt,2,0,"div",33),t.qZA()()()()()()()()),2&a){const o=t.MAs(51),r=t.MAs(60);t.xp6(1),t.Q6J("ngIf",n.moreTasksStatus),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(5),t.Q6J("width","w-100")("newSearch",!0)("classes","py-75 pr-1 fs-10")("hideLabel",!0),t.xp6(3),t.Q6J("newFilter",!0)("classes","w-100"),t.xp6(3),t.Q6J("newFilter",!0)("multi",!1)("classes","w-100"),t.xp6(3),t.Q6J("newFilter",!0)("width","w-100"),t.xp6(3),t.Q6J("newFilter",!0)("label","start_date")("startDate",n.startDateFrom)("endDate",n.startDateTo),t.xp6(2),t.Q6J("ngIf",n.adminView),t.xp6(2),t.Q6J("multi",!0)("newFilter",!0),t.xp6(3),t.Q6J("ngIf",t.lcZ(28,65,n.role.canAccessAdmin)),t.xp6(2),t.Q6J("ngIf",t.lcZ(30,67,n.role.canAccessAdmin)),t.xp6(2),t.Q6J("matTooltip",t.lcZ(32,69,"reset_filter")),t.xp6(8),t.AsE(" ",t.lcZ(40,71,"new")," (",n.todo.length,") "),t.xp6(2),t.Q6J("cdkDropListData",n.todo)("cdkDropListConnectedTo",t.VKq(83,l,o)),t.xp6(2),t.Q6J("ngForOf",n.todo)("ngForTrackBy",n.trackByIndex),t.xp6(1),t.Q6J("ngIf",0==n.todo.length&&!n.loading),t.xp6(4),t.AsE(" ",t.lcZ(49,73,"in_progress")," (",n.inProgress.length,") "),t.xp6(2),t.Q6J("cdkDropListData",n.inProgress)("cdkDropListConnectedTo",t.VKq(85,l,r)),t.xp6(2),t.Q6J("ngForOf",n.inProgress)("ngForTrackBy",n.trackByIndex),t.xp6(1),t.Q6J("ngIf",0==n.inProgress.length&&!n.loading),t.xp6(4),t.AsE(" ",t.lcZ(58,75,"completed")," (",n.completed.length,") "),t.xp6(2),t.Q6J("cdkDropListData",n.completed)("cdkDropListConnectedTo",t.VKq(87,l,o)),t.xp6(2),t.Q6J("ngForOf",n.completed)("ngForTrackBy",n.trackByIndex),t.xp6(1),t.Q6J("ngIf",0==n.completed.length&&!n.loading),t.xp6(4),t.AsE(" ",t.lcZ(67,77,"waiting")," (",n.waitingForApprove.length,") "),t.xp6(2),t.Q6J("cdkDropListData",n.waitingForApprove)("cdkDropListConnectedTo",t.DdM(89,d)),t.xp6(2),t.Q6J("ngForOf",n.waitingForApprove)("ngForTrackBy",n.trackByIndex),t.xp6(1),t.Q6J("ngIf",0==n.waitingForApprove.length&&!n.loading),t.xp6(4),t.AsE(" ",t.lcZ(76,79,"drafts")," (",n.draft.length,") "),t.xp6(2),t.Q6J("cdkDropListData",n.draft)("cdkDropListConnectedTo",t.DdM(90,d)),t.xp6(2),t.Q6J("ngForOf",n.draft)("ngForTrackBy",n.trackByIndex),t.xp6(1),t.Q6J("ngIf",0==n.draft.length&&!n.loading),t.xp6(4),t.AsE(" ",t.lcZ(85,81,"cancelled")," (",n.cancelled.length,") "),t.xp6(2),t.Q6J("cdkDropListData",n.cancelled)("cdkDropListConnectedTo",t.DdM(91,d)),t.xp6(2),t.Q6J("ngForOf",n.cancelled)("ngForTrackBy",n.trackByIndex),t.xp6(1),t.Q6J("ngIf",0==n.cancelled.length&&!n.loading)}},dependencies:[x.rP,x.Rr,h.Bz,Z.w,f.AV,f.gM,I.t,k.o,b.$,p.Wj,p.Zt,_.ez,_.sg,_.O5,_.Ov,u.aw,u.X$,v.P,D.G,L.g,P.X,B.N,K.S,U.h,w.v,T.V],styles:[".kanban-layout[_ngcontent-%COMP%]{height:calc(100vh - 18rem);overflow:auto;max-width:calc(100vw - 8.5rem)}.bg-gray[_ngcontent-%COMP%]{background-color:#a2a2a21a!important}.bg-gray[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#a2a2a21a}[_nghost-%COMP%]     .cdk-drop-list{height:calc(100vh - 23rem);overflow-y:auto;border-radius:.5rem;padding:.75rem;background-color:#a2a2a21a;border:1px dashed rgba(162,162,162,.1)}[_nghost-%COMP%]     .cdk-drop-list::-webkit-scrollbar-thumb{background:rgba(204,204,204,.5);border-radius:10px}[_nghost-%COMP%]     .cdk-drop-list *::-webkit-scrollbar-thumb:hover{background:#7c5ccb}[_nghost-%COMP%]     .cdk-drop-list-dragging{border-color:#7b58ca;background-color:#7c5ccb1a;box-shadow:0 5px 5px -3px #7b58ca33,0 8px 10px 1px #7b58ca24,0 3px 14px 2px #7b58ca1f}[_nghost-%COMP%]     .cdk-drop-list-receiving, [_nghost-%COMP%]     .cdk-drop-list-dragging{border-color:#7b58ca}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #7b58ca33,0 8px 10px 1px #7b58ca24,0 3px 14px 2px #7b58ca1f}.example-box[_ngcontent-%COMP%]{border:1px solid rgba(126,126,126,.3);border-radius:.35rem;border-inline-start:5px solid rgba(126,126,126,.3)}.new-list[_ngcontent-%COMP%]{border-inline-start-color:#7b58ca!important}.inprogress-list[_ngcontent-%COMP%]{border-inline-start-color:#f69e42!important}.over-list[_ngcontent-%COMP%]{border-inline-start-color:#ea5455!important}.done-list[_ngcontent-%COMP%]{border-inline-start-color:#29cc99!important}.waiting-list[_ngcontent-%COMP%]{border-inline-start-color:#3f51b5!important}.aie[_ngcontent-%COMP%]{align-items:end}.more-tasks[_ngcontent-%COMP%]{position:fixed;height:45px;width:45px;z-index:10;border-radius:50%;bottom:15px;transition:ease-in .3s}.more-tasks[_ngcontent-%COMP%]:hover{transform:rotate(180deg);color:#7b58ca!important;background-color:#fff!important}.overlay-loading[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#fff3;z-index:2222}.clear-filters[_ngcontent-%COMP%]{height:30px;width:30px;transition:ease-in .3s;border-radius:50%}.clear-filters[_ngcontent-%COMP%]:hover{transform:rotate(-200deg);background-color:#f7f7f7!important;color:#7b58ca!important}"]})}}return i})()}}]);