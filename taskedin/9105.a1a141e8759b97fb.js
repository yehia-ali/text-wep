"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[9105],{9105:(I,p,i)=>{i.r(p),i.d(p,{AssigneesReportComponent:()=>J});var l=i(96814),a=i(11486),x=i(38140),Z=i(15e3),c=i(89515),v=i(59466),T=i(57105),A=i(65668),u=i(76472),C=i(32801),t=i(65879),m=i(83620),d=i(94664),h=i(37398),_=i(20553),b=i(34673),R=i(69862);let U=(()=>{class o extends b.q{constructor(e){super(),this.http=e,this.reports$=this.hasChanged.pipe((0,m.b)(400),(0,d.w)(()=>this.getAssigneesTable().pipe((0,h.U)(s=>s)))),this.search.pipe((0,m.b)(700),(0,d.w)(()=>this.getAssigneesTable()))}getAssigneesTable(){this.loading.next(!0);const e=new URL(`${_.N.apiUrl}api/Tasks/GetTaskAssigneeReport`);return this.params(e),this.http.get(`${e}`).pipe((0,h.U)(s=>{this.loading.next(!1);let n=s.data.items;return this.setMeta(s),n}))}static{this.\u0275fac=function(s){return new(s||o)(t.LFG(R.eN))}}static{this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function y(o,r){if(1&o&&(t.TgZ(0,"tr",17)(1,"td",8),t._uU(2),t.qZA(),t.TgZ(3,"td",10)(4,"div",18),t._UZ(5,"app-img-title",19),t.qZA()(),t.TgZ(6,"td",10),t._uU(7),t.qZA(),t.TgZ(8,"td",10),t._uU(9),t.qZA(),t.TgZ(10,"td",11)(11,"div",8),t._uU(12),t.qZA()(),t.TgZ(13,"td",15)(14,"div",8),t._uU(15),t.qZA()(),t.TgZ(16,"td")(17,"div",8),t._uU(18),t.qZA()()()),2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(3),t.Q6J("imgSrc",e.imageUrl)("title",e.name)("subTitle",e.jobTitle)("userId",e.id),t.xp6(2),t.Oqu(e.jobTitle),t.xp6(2),t.Oqu(e.departmentName),t.xp6(3),t.Oqu(e.totalCount),t.xp6(3),t.Oqu(e.overDueCount),t.xp6(3),t.Oqu(e.endedCount)}}const O=function(o,r,e){return{itemsPerPage:o,currentPage:r,totalItems:e}};function q(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"table",6)(1,"thead",7)(2,"tr")(3,"th",8),t._uU(4,"#"),t.qZA(),t.TgZ(5,"th",9),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th",10),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",10),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",11)(15,"div",12)(16,"p",13),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"sorting",14),t.NdJ("up",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort("1","0"))})("down",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort("1","1"))}),t.qZA()()(),t.TgZ(20,"th",15)(21,"div",12)(22,"p",13),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"sorting",14),t.NdJ("up",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort("2","0"))})("down",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort("2","1"))}),t.qZA()()(),t.TgZ(26,"th")(27,"div",12)(28,"p",13),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"sorting",14),t.NdJ("up",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort("3","0"))})("down",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sort("3","1"))}),t.qZA()()()()(),t.TgZ(32,"tbody"),t.YNc(33,y,19,10,"tr",16),t.ALo(34,"paginate"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,8,"user")),t.xp6(3),t.Oqu(t.lcZ(10,10,"job_title")),t.xp6(3),t.Oqu(t.lcZ(13,12,"department")),t.xp6(5),t.Oqu(t.lcZ(18,14,"total_tasks")),t.xp6(6),t.Oqu(t.lcZ(24,16,"overdue")),t.xp6(6),t.Oqu(t.lcZ(30,18,"ended_count")),t.xp6(4),t.Q6J("ngForOf",t.xi3(34,20,e.reports,t.kEZ(23,O,e.meta.pageSize,e.meta.currentPage,e.meta.totalItems)))("ngForTrackBy",e.trackBy)}}function w(o,r){1&o&&t._UZ(0,"not-found")}function N(o,r){1&o&&t._UZ(0,"loading")}let J=(()=>{class o{constructor(e,s){this.service=e,this.elm=s,this.loading=!1}ngOnInit(){this.source$=this.service.reports$.subscribe(e=>this.reports=e),this.service.loading.subscribe(e=>this.loading=e),this.service.meta.subscribe(e=>this.meta=e)}sort(e,s){this.service.page.next(1),this.service.orderKey.next(e),this.service.orderDirection.next(s),this.getReports()}getReports(){this.service.hasChanged.next(!0)}changePage(e){this.service.page.next(e),this.getReports()}limitChanged(e){this.service.page.next(1),this.service.limit.next(e),this.getReports()}exportToExcel(){let e=this.elm.nativeElement.querySelector("#assignees-table");const s=a.P6.table_to_sheet(e),n=a.P6.book_new();a.P6.book_append_sheet(n,s,"Sheet1"),a.NC(n,"assignees.xlsx")}trackBy(e,s){return s.id}ngOnDestroy(){this.source$.unsubscribe()}static{this.\u0275fac=function(s){return new(s||o)(t.Y36(U),t.Y36(t.SBq))}}static{this.\u0275cmp=t.Xpm({type:o,selectors:[["assignees-report"]],standalone:!0,features:[t.jDz],decls:7,vars:7,consts:[[3,"meta","admin","limit","pageChange","limitChanged"],["filters",""],[3,"service","export"],["content",""],["class","table","id","assignees-table",4,"ngIf"],[4,"ngIf"],["id","assignees-table",1,"table"],[1,"bg-gray","border-bottom"],[1,"text-center"],[1,"text-left","w-auto"],[1,"text-left"],[1,"bg-light-success-1"],[1,"flex-center"],[1,"mr-50"],[3,"up","down"],[1,"bg-light-danger-1"],["class","border-bottom",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-bottom"],[1,"flex","aic","gap-x-1"],[3,"imgSrc","title","subTitle","userId"]],template:function(s,n){1&s&&(t.TgZ(0,"layout-with-filters",0),t.NdJ("pageChange",function(g){return n.changePage(g)})("limitChanged",function(g){return n.limitChanged(g)}),t.ynx(1,1),t.TgZ(2,"reports-filter",2),t.NdJ("export",function(){return n.exportToExcel()}),t.qZA(),t.BQk(),t.ynx(3,3),t.YNc(4,q,35,27,"table",4),t.YNc(5,w,1,0,"not-found",5),t.YNc(6,N,1,0,"loading",5),t.BQk(),t.qZA()),2&s&&(t.Q6J("meta",n.meta)("admin",!0)("limit",n.service.limit.value),t.xp6(2),t.Q6J("service",n.service),t.xp6(2),t.Q6J("ngIf",n.reports&&n.reports.length>0&&!n.loading),t.xp6(1),t.Q6J("ngIf",n.reports&&0==n.reports.length&&!n.loading),t.xp6(1),t.Q6J("ngIf",n.loading))},dependencies:[l.ez,l.sg,l.O5,x.Y,Z.I,c.aw,c.X$,v.i,T.w,A.N,u.JX,u._s,C.G],styles:["table[_ngcontent-%COMP%]{min-width:130rem!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:1.4rem!important;border:1px solid #e7e7e7!important}"]})}}return o})()}}]);