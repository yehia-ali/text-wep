"use strict";(self.webpackChunktaskedin=self.webpackChunktaskedin||[]).push([[3340],{33857:(U,M,l)=>{l.d(M,{U:()=>I});var h=l(96814),i=l(56223),_=l(17700),b=l(89515),C=l(54807),x=l(52081),y=l(9619),w=l(32296),o=l(82458),n=l(65879),T=l(81854),a=l(48626),r=l(92965),D=l(99758),A=l(49388);function k(d,p){1&d&&(n._uU(0),n.ALo(1,"translate")),2&d&&n.hij(" ",n.lcZ(1,1,p.item.name)," ")}function O(d,p){if(1&d&&(n.TgZ(0,"span",19),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&d){const m=p.item;n.xp6(1),n.Oqu(n.lcZ(2,1,m.name))}}let I=(()=>{class d{constructor(m,g,f,P,V,W,N,z){this.data=m,this.packagesSer=g,this.translate=f,this.fb=P,this.service=V,this.spaceSer=W,this.dialog=N,this.alert=z,this.space=this.data.space,this.loading=!1,this.total=0,this.price=0,this.numberOfEmployees=this.space.paymentSubscribtionTotalNumberOfUsers,this.form=this.fb.group({package:[this.space.paymentPackageId,i.kI.required]})}ngOnInit(){this.packagesSer.getPackages().subscribe(m=>this.packages=m)}add(){this.numberOfEmployees++,this.total=this.numberOfEmployees*this.price}minus(){this.numberOfEmployees>this.space.numberOfActiveUser&&(this.numberOfEmployees--,this.total=this.numberOfEmployees*this.price)}submit(){let m=this.form.value.package!=this.space.paymentPackageId;this.loading=!0;const g={...m&&{paymentPackageId:this.form.value.package},numberOfEmployees:m?this.numberOfEmployees:this.numberOfEmployees-this.space.paymentSubscribtionTotalNumberOfUsers};m?this.service.updateSpacePackage(g,this.space.spaceId).subscribe(f=>{this.afterUpdate(f)}):this.service.updateNumberOfUsers(g,this.space.spaceId).subscribe(f=>{this.afterUpdate(f)})}afterUpdate(m){m.success?(this.alert.showAlert("space_updated"),this.dialog.closeAll(),this.spaceSer.getAllSpaces().subscribe()):this.loading=!1}static{this.\u0275fac=function(g){return new(g||d)(n.Y36(_.WI),n.Y36(T.U),n.Y36(b.sK),n.Y36(i.qu),n.Y36(a.X),n.Y36(r.s),n.Y36(_.uw),n.Y36(D.c))}}static{this.\u0275cmp=n.Xpm({type:d,selectors:[["configure-space"]],standalone:!0,features:[n.jDz],decls:64,vars:50,consts:[["dir","auto",1,"space-configuration"],["mat-dialog-title",""],["mat-dialog-content","",3,"formGroup"],[1,"flex-grid","gap-y-2"],[1,"col-lg-6"],[1,"mb-1","muted"],[1,"fs-25","lighter"],["formControlName","package","bindLabel","name","bindValue","id","appendTo","body",1,"w-19r",3,"items","multiple","closeOnSelect","clearable"],["ng-option-tmp",""],["ng-label-tmp",""],[1,"lighter"],[1,"w-19r","border","rounded","flex","aic","jcsb"],[1,"minus","border-right","p-1","pointer",3,"click"],[1,"number","px-5"],[1,"add","border-left","p-1","pointer",3,"click"],["mat-dialog-actions","",1,"flex","aic","jcfe","gap-x-1"],["mat-raised-button","","color","primary",1,"px-4","fs-15",3,"disabled","click"],["text","save",3,"loading"],["mat-raised-button","","mat-dialog-close","",1,"px-4","border"],[1,"fs-14"]],template:function(g,f){1&g&&(n.TgZ(0,"div",0)(1,"h2",1),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"form",2)(5,"div",3)(6,"div",4)(7,"p",5),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.TgZ(10,"p",6),n._uU(11),n.qZA()(),n.TgZ(12,"div",4)(13,"p",5),n._uU(14),n.ALo(15,"translate"),n.qZA(),n.TgZ(16,"ng-select",7),n.YNc(17,k,2,3,"ng-template",8),n.YNc(18,O,3,3,"ng-template",9),n.qZA()(),n.TgZ(19,"div",4)(20,"p",5),n._uU(21),n.ALo(22,"translate"),n.qZA(),n.TgZ(23,"p",10),n._uU(24),n.ALo(25,"arabicNumbers"),n.ALo(26,"translate"),n.qZA()(),n.TgZ(27,"div",4)(28,"p",5),n._uU(29),n.ALo(30,"translate"),n.qZA(),n.TgZ(31,"p",10),n._uU(32),n.ALo(33,"arabicDate"),n.qZA()(),n.TgZ(34,"div",4)(35,"p",5),n._uU(36),n.ALo(37,"translate"),n.qZA(),n.TgZ(38,"div",11)(39,"div",12),n.NdJ("click",function(){return f.minus()}),n._uU(40," - "),n.qZA(),n.TgZ(41,"div",13),n._uU(42),n.ALo(43,"arabicNumbers"),n.qZA(),n.TgZ(44,"div",14),n.NdJ("click",function(){return f.add()}),n._uU(45,"+"),n.qZA()()(),n.TgZ(46,"div",4)(47,"p",5),n._uU(48),n.ALo(49,"translate"),n.qZA(),n.TgZ(50,"p",10)(51,"span"),n._uU(52),n.ALo(53,"arabicNumbers"),n.qZA(),n._uU(54," / "),n.TgZ(55,"span"),n._uU(56),n.ALo(57,"arabicNumbers"),n.qZA()()()()(),n.TgZ(58,"div",15)(59,"button",16),n.NdJ("click",function(){return f.submit()}),n._UZ(60,"submit-button",17),n.qZA(),n.TgZ(61,"button",18),n._uU(62),n.ALo(63,"translate"),n.qZA()()()),2&g&&(n.xp6(2),n.Oqu(n.lcZ(3,22,"edit_space")),n.xp6(2),n.Q6J("formGroup",f.form),n.xp6(4),n.hij("",n.lcZ(9,24,"space_name"),":"),n.xp6(3),n.Oqu(f.space.spaceName),n.xp6(3),n.hij("",n.lcZ(15,26,"package"),":"),n.xp6(2),n.Q6J("items",f.packages)("multiple",!1)("closeOnSelect",!0)("clearable",!1),n.xp6(5),n.hij("",n.lcZ(22,28,"cost"),":"),n.xp6(3),n.AsE("",n.lcZ(25,30,f.space.paymentSubscribtionTotalPrice)," ",n.lcZ(26,32,"EGP"),""),n.xp6(5),n.hij("",n.lcZ(30,34,"expiry_date"),":"),n.xp6(3),n.Oqu(f.space.paymentSubscribtionEndDate?n.lcZ(33,36,f.space.paymentSubscribtionEndDate):"--"),n.xp6(4),n.hij("",n.lcZ(37,38,"number_of_users"),":"),n.xp6(6),n.Oqu(n.lcZ(43,40,f.numberOfEmployees)),n.xp6(6),n.hij("",n.lcZ(49,42,"usage"),":"),n.xp6(4),n.Oqu(n.lcZ(53,44,f.space.numberOfActiveUser)),n.xp6(4),n.Oqu(n.lcZ(57,46,f.space.paymentSubscribtionTotalNumberOfUsers)),n.xp6(3),n.Q6J("disabled",f.loading),n.xp6(1),n.Q6J("loading",f.loading),n.xp6(2),n.Oqu(n.lcZ(63,48,"cancel")))},dependencies:[h.ez,b.aw,b.X$,i.UX,i._Y,i.JJ,i.JL,i.sg,i.u,C.A0,C.w9,C.ir,C.mR,_.Is,_.ZT,_.uh,_.xY,_.H8,A.Lv,x.m,y.P,w.ot,w.lW,o.w]})}}return d})()},3131:(U,M,l)=>{l.d(M,{P:()=>_});var h=l(65619),i=l(65879);let _=(()=>{class b{constructor(){this.withSubMenu=new h.X(!0)}static{this.\u0275fac=function(y){return new(y||b)}}static{this.\u0275prov=i.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})()},81854:(U,M,l)=>{l.d(M,{U:()=>x});var h=l(20553),i=l(65619),_=l(37398),b=l(65879),C=l(69862);let x=(()=>{class y{constructor(o){this.http=o,this.meta=new i.X({}),this.currentPage=new i.X({}),this.packages$=new i.X([])}getPackages(){return this.http.get(`${h.N.coreBase}/api/PaymentPacakage/Get`).pipe((0,_.U)(o=>{let n={pageSize:o.data.pageSize,totalItems:o.data.totalItems,totalPages:o.data.totalPages,totalUnSeen:o.data.totalUnSeen,currentPage:o.data.currentPage};return this.meta.next(n),this.currentPage.next(n.currentPage),this.packages$.next(o.data.items),o.data.items}))}createPackage(o){return this.http.post(`${h.N.apiUrl}api/PaymentPacakage/Create`,o)}updatePackage(o){return this.http.put(`${h.N.apiUrl}api/PaymentPacakage/Update`,o)}deletePackage(o){return this.http.put(`${h.N.apiUrl}api/PaymentPacakage/Delete`,o)}static{this.\u0275fac=function(n){return new(n||y)(b.LFG(C.eN))}}static{this.\u0275prov=b.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}}return y})()},48626:(U,M,l)=>{l.d(M,{X:()=>b});var h=l(69862),i=l(20553),_=l(65879);let b=(()=>{class C{constructor(y){this.http=y}updateNumberOfUsers(y,w=null){return this.http.put(`${i.N.apiUrl}api/PaymentOrder/UpdateUserPaymentPackage`,y,{headers:(new h.WM).set("space-id",w+"")})}updateSpacePackage(y,w=localStorage.getItem("space-id")||null){return this.http.put(`${i.N.apiUrl}api/PaymentOrder/ChangePaymentPackage`,y,{headers:(new h.WM).set("space-id",w+"")})}static{this.\u0275fac=function(w){return new(w||C)(_.LFG(h.eN))}}static{this.\u0275prov=_.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},92965:(U,M,l)=>{l.d(M,{s:()=>o});var h=l(65619),i=l(78645),_=l(83620),b=l(94664),C=l(37398),x=l(20553),y=l(65879),w=l(69862);let o=(()=>{class n{constructor(a){this.http=a,this.meta=new h.X({}),this.spaces=new h.X([]),this.currentPage=new h.X(1),this.currentPageValue=1,this.search=new i.x,this.searchValue="",this.loading=new h.X(!0),this.creationDateFrom=new h.X(""),this.creationDateFromValue="",this.expiredDateFrom=new h.X(""),this.expiredDateFromValue="",this.creationDateTo=new h.X(""),this.creationDateToValue="",this.expiredDateTo=new h.X(""),this.expiredDateToValue="",this.userCountFrom=new h.X(""),this.userCountFromValue="",this.userCountTo=new h.X(""),this.userCountToValue="",this.costFrom=new h.X(""),this.costFromValue="",this.costTo=new h.X(""),this.costToValue="",this.paymentStatus=new h.X(null),this.paymentStatusValue=null,this.packages=new h.X([]),this.packagesValue=[],this.countries=new h.X(null),this.countriesValue=[],this.limit=new h.X(15),this.limitValue=15,this.sort=new h.X(null),this.sortValue=null,this.sortDirection=new h.X(null),this.sortDirectionValue=null,this.search.subscribe(r=>this.searchValue=r),this.limit.subscribe(r=>this.limitValue=r),this.creationDateFrom.subscribe(r=>this.creationDateFromValue=r),this.currentPage.subscribe(r=>this.currentPageValue=r),this.creationDateTo.subscribe(r=>this.creationDateToValue=r),this.expiredDateFrom.subscribe(r=>this.expiredDateFromValue=r),this.expiredDateTo.subscribe(r=>this.expiredDateToValue=r),this.userCountTo.subscribe(r=>this.userCountToValue=r),this.userCountFrom.subscribe(r=>this.userCountFromValue=r),this.costTo.subscribe(r=>this.costToValue=r),this.paymentStatus.subscribe(r=>this.paymentStatusValue=r),this.costFrom.subscribe(r=>this.costFromValue=r),this.packages.subscribe(r=>this.packagesValue=r),this.countries.subscribe(r=>this.countriesValue=r),this.sort.subscribe(r=>this.sortValue=r),this.sortDirection.subscribe(r=>this.sortDirectionValue=r),this.search.pipe((0,_.b)(700),(0,b.w)(()=>this.getAllSpaces())).subscribe()}getAllSpaces(){this.loading.next(!0);let a=new URL(`${x.N.apiUrl}api/TenantSpace/getSpaces`);return a.searchParams.append("page",this.currentPageValue),this.creationDateFromValue&&a.searchParams.append("CreationDateFrom",this.creationDateFromValue),a.searchParams.append("limit",JSON.stringify(this.limitValue)),this.creationDateToValue&&a.searchParams.append("CreationDateTo",this.creationDateToValue),this.expiredDateFromValue&&a.searchParams.append("ExpiredDateFrom",this.expiredDateFromValue),this.expiredDateToValue&&a.searchParams.append("ExpiredDateTo",this.expiredDateToValue),this.userCountToValue&&a.searchParams.append("UserCountTo",this.userCountToValue),this.userCountFromValue&&a.searchParams.append("UserCountFrom",this.userCountFromValue),this.costFromValue&&a.searchParams.append("CostFrom",this.costFromValue),this.costToValue&&a.searchParams.append("CostTo",this.costToValue),(this.countriesValue?.id||0==this.countriesValue?.id)&&a.searchParams.append("CountryID",this.countriesValue.id),this.packagesValue.length>0&&this.packagesValue.map(r=>{a.searchParams.append("packageId",r.id)}),(0==this.paymentStatusValue||1==this.paymentStatusValue)&&a.searchParams.append("PaymentStatus",this.paymentStatusValue),this.sortValue&&(a.searchParams.append("orderKey",this.sortValue),a.searchParams.append("orderDirection",this.sortDirectionValue)),this.searchValue&&a.searchParams.append("search",this.searchValue),this.http.get(`${a}`).pipe((0,C.U)(r=>{let D=r.data.items;this.loading.next(!1);let A={pageSize:r.data.pageSize,totalItems:r.data.totalItems,totalPages:r.data.totalPages,totalUnSeen:r.data.totalUnSeen,currentPage:r.data.currentPage};return this.meta.next(A),this.currentPage.next(A.currentPage),this.spaces.next(D),D}))}getAllSpacesLight(a){return this.loading.next(!0),this.http.get(`${x.N.apiUrl}api/Space/Spaces`,{params:a})}activeOrDeactiveSpace(a){return this.http.put(`${x.N.apiUrl}api/TenantSpace/MainDeactivateOrActivateSpace`,a)}activeOrDeactiveMultiSpace(a){return this.http.put(`${x.N.apiUrl}api/TenantSpace/MainDeactivateOrActivateMultiSpace`,a)}createLog(a){return this.http.post(`${x.N.apiUrl}api/PersonalInformation/AddClientLog`,a)}getLogs(a){return this.http.get(`${x.N.apiUrl}api/PersonalInformation/GetClientLog?spaceId=${a}`)}deleteLog(a){return this.http.get(`${x.N.apiUrl}api/PersonalInformation/DeleteClientLog?id=${a}`)}static{this.\u0275fac=function(r){return new(r||n)(y.LFG(w.eN))}}static{this.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})()},82740:(U,M,l)=>{l.d(M,{H:()=>O});var h=l(96814),i=l(17700),_=l(89515),b=l(32296),C=l(65668),x=l(9619),y=l(57105),w=l(20553),o=l(65879),n=l(92965),T=l(99758);function a(I,d){1&I&&(o.TgZ(0,"div",5),o._UZ(1,"loading"),o.qZA())}function r(I,d){if(1&I&&o._UZ(0,"a",15),2&I){const p=o.oxw().$implicit,m=o.oxw(2);o.s9C("href",m.url+"employeeFiles/"+p.filePath,o.LSH)}}function D(I,d){if(1&I){const p=o.EpF();o.TgZ(0,"tr",12)(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.ALo(5,"arabicDate"),o.qZA(),o.TgZ(6,"td"),o._uU(7),o.qZA(),o.TgZ(8,"td")(9,"a",13),o.NdJ("click",function(){const f=o.CHM(p).$implicit,P=o.oxw(2);return o.KtG(P.deleteLog(f.id))}),o.qZA(),o.YNc(10,r,1,1,"a",14),o.qZA()()}if(2&I){const p=d.$implicit;o.xp6(2),o.Oqu(p.type),o.xp6(2),o.Oqu(o.lcZ(5,4,p.date)),o.xp6(3),o.Oqu(p.describtion),o.xp6(3),o.Q6J("ngIf","No File"!=p.filePath)}}function A(I,d){if(1&I&&(o.TgZ(0,"div",6)(1,"table",7)(2,"thead")(3,"tr",8)(4,"th",9),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.TgZ(7,"th",9),o._uU(8),o.ALo(9,"translate"),o.qZA(),o.TgZ(10,"th",9),o._uU(11),o.ALo(12,"translate"),o.qZA(),o.TgZ(13,"th",9),o._uU(14),o.ALo(15,"translate"),o.qZA(),o._UZ(16,"th"),o.qZA()(),o.TgZ(17,"tbody",10),o.YNc(18,D,11,6,"tr",11),o.qZA()()()),2&I){const p=o.oxw();o.xp6(5),o.Oqu(o.lcZ(6,5,"type")),o.xp6(3),o.Oqu(o.lcZ(9,7,"date")),o.xp6(3),o.Oqu(o.lcZ(12,9,"description")),o.xp6(3),o.Oqu(o.lcZ(15,11,"file")),o.xp6(4),o.Q6J("ngForOf",p.logs)}}function k(I,d){1&I&&(o.TgZ(0,"div",16),o._UZ(1,"not-found"),o.qZA())}let O=(()=>{class I{constructor(p,m,g,f){this.data=p,this.dialogRef=m,this.service=g,this.alert=f,this.url=w.N.imageUrl}ngOnInit(){this.getLogs()}getLogs(){this.loading=!0,this.service.getLogs(this.data.space).subscribe(p=>{console.log(p),this.logs=p.data,this.loading=!1})}close(){this.dialogRef.close()}deleteLog(p){this.service.deleteLog(p).subscribe(m=>{m.success&&(this.alert.showAlert("success"),this.getLogs())})}static{this.\u0275fac=function(m){return new(m||I)(o.Y36(i.WI),o.Y36(i.so),o.Y36(n.s),o.Y36(T.c))}}static{this.\u0275cmp=o.Xpm({type:I,selectors:[["client-logs-get"]],standalone:!0,features:[o.jDz],decls:5,vars:3,consts:[[1,"min-50","dir"],[1,"px-50"],["class","aic flex jcc py-5 h-50v",4,"ngIf"],["class","table-container",4,"ngIf"],["class","py-5 text-center",4,"ngIf"],[1,"aic","flex","jcc","py-5","h-50v"],[1,"table-container"],[1,"w-100","rounded"],[1,"border-bottom","fs-12","simibold"],[1,"text-left","py-1"],[1,"table-body"],["class","border-bottom fs-12",4,"ngFor","ngForOf"],[1,"border-bottom","fs-12"],[1,"danger","bx","fs-18","bx-trash","pointer",3,"click"],["target","_blank","class","primary bx fs-18 bx-file pointer",3,"href",4,"ngIf"],["target","_blank",1,"primary","bx","fs-18","bx-file","pointer",3,"href"],[1,"py-5","text-center"]],template:function(m,g){1&m&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,a,2,0,"div",2),o.YNc(3,A,19,13,"div",3),o.YNc(4,k,2,0,"div",4),o.qZA()()),2&m&&(o.xp6(2),o.Q6J("ngIf",g.loading),o.xp6(1),o.Q6J("ngIf",g.logs.length>0&&!g.loading),o.xp6(1),o.Q6J("ngIf",0==g.logs.length&&!g.loading))},dependencies:[h.ez,h.sg,h.O5,_.aw,_.X$,b.ot,C.N,x.P,y.w],styles:[".min-50[_ngcontent-%COMP%]{min-height:300px;max-height:600px;overflow-y:auto}.table-container[_ngcontent-%COMP%]{overflow:hidden}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-spacing:0}th[_ngcontent-%COMP%]{border:none;position:sticky;top:0;z-index:1}tbody[_ngcontent-%COMP%]{padding-bottom:5px}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-block:10px;padding-inline:15px;border:none;font-size:12px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-inline:15px;border:none}tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-container[_ngcontent-%COMP%]{overflow:auto}"]})}}return I})()},6156:(U,M,l)=>{l.d(M,{f:()=>k});var h=l(96814),i=l(56223),_=l(17700),b=l(89515),C=l(32296),x=l(73445),y=l(23680),w=l(38034),o=l(2032),n=l(39243),T=l(64170),a=l(54807),r=l(65879),D=l(99758),A=l(92965);let k=(()=>{class O{constructor(d,p,m,g,f,P){this.fb=d,this.datePipe=p,this.data=m,this.dialogRef=g,this.alert=f,this.service=P,this.currentDate=new Date,this.typelist=[{name:"whatsapp"},{name:"call"},{name:"meeting"},{name:"email"},{name:"other"}],this.form=this.fb.group({describtion:["",i.kI.required],type:["",i.kI.required],date:[""]}),console.log(this.data),this.form.patchValue({type:this.data.type}),this.form.patchValue({date:this.currentDate})}onFileSelected(d){d.target.files.length>0&&(this.selectedFile=d.target.files[0],console.log(this.selectedFile))}onSubmit(){if(this.form.valid){const d=new FormData;d.append("spaceId",this.data.space.id),d.append("describtion",this.form.get("describtion")?.value),d.append("type",this.form.get("type")?.value),d.append("date",this.datePipe.transform(this.form.get("date")?.value,"yyyy-MM-dd")||""),this.selectedFile&&d.append("filePath",this.selectedFile),this.service.createLog(d).subscribe(p=>{p.success&&(this.alert.showAlert("success"),this.dialogRef.close())})}else console.log("Form is invalid")}static{this.\u0275fac=function(p){return new(p||O)(r.Y36(i.qu),r.Y36(h.uU),r.Y36(_.WI),r.Y36(_.so),r.Y36(D.c),r.Y36(A.s))}}static{this.\u0275cmp=r.Xpm({type:O,selectors:[["client-logs"]],standalone:!0,features:[r._Bn([{provide:y.Ad,useValue:"en-GB"},{provide:y._A,useClass:x.t7},{provide:y.sG,useValue:n.x},h.uU]),r.jDz],decls:39,vars:20,consts:[[3,"formGroup"],[1,"p-2","dir"],[1,"flex-grid"],[1,"col-lg-12","mb-2","date-pikker"],[1,"date"],["for","date",1,"fs-11","simibold","mb-75"],[1,"mr-50","bx","bx-text"],["matInput","","formControlName","date",3,"matDatepicker"],["matIconSuffix","",3,"for"],["end",""],[1,"col-lg-12","mb-1"],["formControlName","type","bindLabel","name","bindValue","name",3,"items","clearSearchOnAdd","clearOnBackspace","multiple","closeOnSelect"],[1,"col-lg-12"],["type","file",3,"change"],[1,"col-lg-12","mb-2"],[1,"description"],["for","description",1,"fs-11","simibold","mb-75"],[1,"mr-50","bx","bx-phone"],["id","description","rows","4","formControlName","describtion","maxlength","200",1,"input"],[1,"text-right"],["type","submit","mat-button","",1,"bg-primary","white","py-1","px-2","border-0","rounded","pointer",3,"click"]],template:function(p,m){if(1&p&&(r.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),r._UZ(6,"i",6),r.TgZ(7,"span"),r._uU(8),r.ALo(9,"translate"),r.qZA()(),r.TgZ(10,"mat-form-field"),r._UZ(11,"input",7),r.TgZ(12,"mat-hint"),r._uU(13,"MM/DD/YYYY"),r.qZA(),r._UZ(14,"mat-datepicker-toggle",8)(15,"mat-datepicker",null,9),r.qZA()()(),r.TgZ(17,"div",10)(18,"label",5),r._UZ(19,"i",6),r.TgZ(20,"span"),r._uU(21),r.ALo(22,"translate"),r.qZA()(),r._UZ(23,"ng-select",11),r.qZA(),r.TgZ(24,"div",12)(25,"div")(26,"input",13),r.NdJ("change",function(f){return m.onFileSelected(f)}),r.qZA()()(),r.TgZ(27,"div",14)(28,"div",15)(29,"label",16),r._UZ(30,"i",17),r.TgZ(31,"span"),r._uU(32),r.ALo(33,"translate"),r.qZA()(),r._UZ(34,"textarea",18),r.qZA()()(),r.TgZ(35,"div",19)(36,"button",20),r.NdJ("click",function(){return m.onSubmit()}),r._uU(37),r.ALo(38,"translate"),r.qZA()()()()),2&p){const g=r.MAs(16);r.Q6J("formGroup",m.form),r.xp6(8),r.Oqu(r.lcZ(9,12,"date")),r.xp6(3),r.Q6J("matDatepicker",g),r.xp6(3),r.Q6J("for",g),r.xp6(7),r.Oqu(r.lcZ(22,14,"type")),r.xp6(2),r.Q6J("items",m.typelist)("clearSearchOnAdd",!0)("clearOnBackspace",!0)("multiple",!1)("closeOnSelect",!0),r.xp6(9),r.Oqu(r.lcZ(33,16,"description")),r.xp6(5),r.Oqu(r.lcZ(38,18,"confirm"))}},dependencies:[h.ez,a.A0,a.w9,b.aw,b.X$,i.u5,i._Y,i.Fj,i.JJ,i.JL,i.nD,i.UX,i.sg,i.u,C.ot,C.lW,T.lN,T.KE,T.bx,T.R9,o.c,o.Nt,w.FA,w.Mq,w.hl,w.nW,y.XK],styles:[".date-pikker[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.date-pikker[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{width:100%!important;height:41.2px!important;border-radius:.5rem!important;background:transparent!important;border:1px solid #e7e7e7!important;display:flex;align-items:center}"]})}}return O})()},39243:(U,M,l)=>{l.d(M,{x:()=>A,z:()=>k});var h=l(75411),i=l(89515),_=l(56223),b=l(54807),C=l(2032),x=l(64170),y=l(38034),w=l(23680),o=l(17700),n=l(1649),T=l(73445),a=l(65879),r=l(69323),D=l(99758);const A={parse:{dateInput:"YYYY/MM/DD"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"DD/MM/YYYY",monthYearA11yLabel:"MMMM YYYY"}};let k=(()=>{class O{constructor(d,p,m,g,f,P){this.fb=d,this.data=p,this.dialog=m,this.service=g,this.alert=f,this.dialogRef=P,this.ganders=[],this.form=this.fb.group({profileId:["",_.kI.required],fileTypeId:["",_.kI.required],name:["",_.kI.required],fileNum:["",_.kI.required],description:["",_.kI.required],issuingDate:["",_.kI.required],expireDate:["",_.kI.required],file:[""]})}ngOnInit(){this.getSpaceUsers(),this.defultSelectedUser(),this.getFilesType(),this.selectedFile=this.data.id}defultSelectedUser(){if(localStorage.getItem("selectedUser")){let d=localStorage.getItem("selectedUser"),p=JSON.parse(d);this.selectedUser=p.id,this.form.patchValue({profileId:this.selectedUser}),this.searchValue=this.selectedUser,this.getSpaceUsers()}}getFilesType(){this.service.getFilesType().subscribe(d=>{this.filesType=d.data})}getSpaceUsers(){this.service.getUsers({limit:30,search:this.searchValue}).subscribe(p=>{this.allusers=p.data.items,this.totalItems=p.data.totalItems})}usersSearch(d){this.searchValue=d.term,this.getSpaceUsers()}uploadImages(d){this.attachments=d}onSubmit(){if(this.form.valid){const d=new FormData;d.append("profileId",this.form.get("profileId")?.value),d.append("fileTypeId",this.form.get("fileTypeId")?.value),d.append("name",this.form.get("name")?.value),d.append("description",this.form.get("description")?.value),d.append("fileNum",this.form.get("fileNum")?.value);const p=this.formatDate(this.form.get("issuingDate")?.value),m=this.formatDate(this.form.get("expireDate")?.value);if(d.append("issuingDate",p),d.append("expireDate",m),this.attachments&&this.attachments.length>0)for(let g=0;g<this.attachments.length;g++)d.append("file",this.attachments[g],this.attachments[g].name);this.service.createFile(d).subscribe(g=>{g.success?(this.dialogRef.close(!0),this.alert.showAlert("file_created")):this.alert.showAlert(g.error)})}}formatDate(d){const p=new Date(d);let m=""+(p.getMonth()+1),g=""+p.getDate();const f=p.getFullYear();return m.length<2&&(m="0"+m),g.length<2&&(g="0"+g),[f,m,g].join("-")}close(){this.dialog.closeAll()}static{this.\u0275fac=function(p){return new(p||O)(a.Y36(_.qu),a.Y36(o.WI),a.Y36(o.uw),a.Y36(r.j),a.Y36(D.c),a.Y36(o.so))}}static{this.\u0275cmp=a.Xpm({type:O,selectors:[["create-file"]],standalone:!0,features:[a._Bn([{provide:w.Ad,useValue:"en-GB"},{provide:w._A,useClass:T.t7},{provide:w.sG,useValue:A}]),a.jDz],decls:76,vars:30,consts:[[1,"p-2","dir"],[3,"formGroup"],[1,"flex-grid"],[1,"col-lg-4","mb-2"],[1,"employee"],["for","employee",1,"fs-11","simibold","mb-75"],[1,"mr-50","bx","bx-user"],["formControlName","profileId","bindLabel","name","bindValue","id","appendTo","body",3,"items","multiple","closeOnSelect","search"],[1,"file_type"],["for","file_type",1,"fs-11","simibold","mb-75"],[1,"mr-50","bx","bx-list-ul"],["formControlName","fileTypeId","bindLabel","nameAr","bindValue","id",3,"items"],[1,"file_name"],["for","file_name",1,"fs-11","simibold","mb-75"],[1,"mr-50","bx","bx-file"],["id","file_name","type","text","formControlName","name",1,"input"],[1,"file_number"],["for","file_number",1,"fs-11","simibold","mb-75"],[1,"mr-50","bx","bx-text"],["id","file_number","type","text","formControlName","fileNum",1,"input"],[1,"release_date"],["for","release_date",1,"fs-11","simibold","mb-75"],[1,"mr-50","bx","bx-calendar"],["matInput","","formControlName","issuingDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"expire_date"],["for","expire_date",1,"fs-11","simibold","mb-75"],["matInput","","formControlName","expireDate",3,"matDatepicker"],["picker2",""],[1,"col-lg-12","mb-2"],[1,"description"],["for","description",1,"fs-11","simibold","mb-75"],["id","description","formControlName","description",1,"input"],[3,"getAttachments"],[1,"text-right"],["type","submit",1,"btn","rounded","bg-primary","white","py-75","px-2","fs-14",3,"click"]],template:function(p,m){if(1&p&&(a.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),a._UZ(6,"i",6),a.TgZ(7,"span"),a._uU(8),a.ALo(9,"translate"),a.qZA()(),a.TgZ(10,"ng-select",7),a.NdJ("search",function(f){return m.usersSearch(f)}),a.qZA()()(),a.TgZ(11,"div",3)(12,"div",8)(13,"label",9),a._UZ(14,"i",10),a.TgZ(15,"span"),a._uU(16),a.ALo(17,"translate"),a.qZA()(),a._UZ(18,"ng-select",11),a.qZA()(),a.TgZ(19,"div",3)(20,"div",12)(21,"label",13),a._UZ(22,"i",14),a.TgZ(23,"span"),a._uU(24),a.ALo(25,"translate"),a.qZA()(),a._UZ(26,"input",15),a.qZA()(),a.TgZ(27,"div",3)(28,"div",16)(29,"label",17),a._UZ(30,"i",18),a.TgZ(31,"span"),a._uU(32),a.ALo(33,"translate"),a.qZA()(),a._UZ(34,"input",19),a.qZA()(),a.TgZ(35,"div",3)(36,"div",20)(37,"label",21),a._UZ(38,"i",22),a.TgZ(39,"span"),a._uU(40),a.ALo(41,"translate"),a.qZA()(),a.TgZ(42,"mat-form-field"),a._UZ(43,"input",23),a.TgZ(44,"mat-hint"),a._uU(45,"MM/DD/YYYY"),a.qZA(),a._UZ(46,"mat-datepicker-toggle",24)(47,"mat-datepicker",null,25),a.qZA()()(),a.TgZ(49,"div",3)(50,"div",26)(51,"label",27),a._UZ(52,"i",22),a.TgZ(53,"span"),a._uU(54),a.ALo(55,"translate"),a.qZA()(),a.TgZ(56,"mat-form-field"),a._UZ(57,"input",28),a.TgZ(58,"mat-hint"),a._uU(59,"MM/DD/YYYY"),a.qZA(),a._UZ(60,"mat-datepicker-toggle",24)(61,"mat-datepicker",null,29),a.qZA()()(),a.TgZ(63,"div",30)(64,"div",31)(65,"label",32),a._UZ(66,"i",18),a.TgZ(67,"span"),a._uU(68),a.ALo(69,"translate"),a.qZA()(),a._UZ(70,"textarea",33),a.qZA()(),a.TgZ(71,"div",30)(72,"get-attachments",34),a.NdJ("getAttachments",function(f){return m.uploadImages(f)}),a.qZA()()(),a.TgZ(73,"div",35)(74,"button",36),a.NdJ("click",function(){return m.onSubmit()}),a._uU(75," \u062d\u0641\u0638 "),a.qZA()()()()),2&p){const g=a.MAs(48),f=a.MAs(62);a.xp6(1),a.Q6J("formGroup",m.form),a.xp6(7),a.Oqu(a.lcZ(9,16,"employee")),a.xp6(2),a.Q6J("items",m.allusers)("multiple",!1)("closeOnSelect",!0),a.xp6(6),a.Oqu(a.lcZ(17,18,"file_type")),a.xp6(2),a.Q6J("items",m.filesType),a.xp6(6),a.Oqu(a.lcZ(25,20,"file_name")),a.xp6(8),a.Oqu(a.lcZ(33,22,"file_number")),a.xp6(8),a.Oqu(a.lcZ(41,24,"release_date")),a.xp6(3),a.Q6J("matDatepicker",g),a.xp6(3),a.Q6J("for",g),a.xp6(8),a.Oqu(a.lcZ(55,26,"expire_date")),a.xp6(3),a.Q6J("matDatepicker",f),a.xp6(3),a.Q6J("for",f),a.xp6(8),a.Oqu(a.lcZ(69,28,"description"))}},dependencies:[x.lN,x.KE,x.bx,x.R9,C.c,C.Nt,y.FA,y.Mq,y.hl,y.nW,w.XK,h.u,i.aw,i.X$,b.A0,b.w9,_.u5,_._Y,_.Fj,_.JJ,_.JL,n.x,_.UX,_.sg,_.u],styles:["[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     mat-form-field.mat-form-field-invalid .mdc-text-field{border:1px solid #EA5455}[_nghost-%COMP%]     mat-form-field .mdc-text-field{background:transparent!important;border:1px solid #e7e7e7;border-radius:4px;height:41px}[_nghost-%COMP%]     mat-form-field .mdc-text-field .mat-mdc-icon-button{top:-9px}"]})}}return O})()},22557:(U,M,l)=>{l.d(M,{Hi:()=>yi}),l(42495);var i=l(65879),_=l(96814),b=l(23680),a=(l(4300),l(78645),l(63019),l(48180),l(59773),l(27921),l(94664),l(36028));l(49388),l(56223),l(64170);const B=new i.OlP("mat-chips-default-options");let yi=(()=>{class s{static{this.\u0275fac=function(c){return new(c||s)}}static{this.\u0275mod=i.oAB({type:s})}static{this.\u0275inj=i.cJS({providers:[b.rD,{provide:B,useValue:{separatorKeyCodes:[a.K5]}}],imports:[b.BQ,_.ez,b.si,b.BQ]})}}return s})()}}]);