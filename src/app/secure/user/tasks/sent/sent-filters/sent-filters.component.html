<div class="filters flex aic jcsb gap-x-4">
  <div class="flex-wrap aic gap-x-1 gap-y-1 py-50">
    <search [hideLabel]="true" (valueChanged)="service.search.next($event); filter()" [key]="service.search.value" [width]="'w-16r'"/>
    <task-status [placeholder]="'status'" [hideLabel]="true" (valueChanged)="service.taskStatus.next($event); filter()" [width]="'w-11r'" [selectedValue]="service.taskStatus.value"/>
    <task-type [hideLabel]="true" (valueChanged)="service.taskType.next($event); filter()" [selectedValue]="service.taskType.value" />
    <priority-filter  [placeholder]="'priority'" [hideLabel]="true" (valueChanged)="service.priority.next($event); filter()" *ngIf="visibleFilters.priority" [selectedValue]="service.priority.value"/>
    <is-rated [hideLabel]="true" (valueChanged)="service.rated.next($event); filter()" *ngIf="visibleFilters.rate" [selectedValue]="service.rated.value"/>
    <is-overdue [hideLabel]="true" (valueChanged)="service.isOverdue.next($event); filter()" *ngIf="visibleFilters.overdue" [selectedValue]="service.isOverdue.value"/>
    <projects [placeholder]="'project'" [hideLabel]="true" (valueChanged)="service.project.next($event); filter()" *ngIf="visibleFilters.project" [selectedValue]="service.project.value"/>
    <date-filter  [hideLabel]="true" (valueChanged)="service.dateFrom.next($event); service.dateTo.next(''); filter()" *ngIf="visibleFilters.date" [selectedValue]="service.dateFrom.value" key="start_date"/>
    <date-filter [hideLabel]="true" (valueChanged)="service.dateTo.next($event); filter()" *ngIf="visibleFilters.date" [minDate]="service.dateFrom.value" [selectedValue]="service.dateTo.value" key="end_date"/>
    <select-user (getSelectedUsers)="service.assignees.next($event); filter()" [selectedUsers]="service.assignees.value" text="assignees"/>
  </div>

  <div class="end flex aic gap-x-1">
    <button mat-raised-button class="bg-success export"  (click)="exportToExcel()">{{'export' | translate}}</button>
      <span class="create-task-sp">
        <p-splitButton
          [model]="emloyeesItems"
          [label]="'create_task' | translate"
          (onClick)="createTask()"
        />
      </span>
    <input
      type="file"
      hidden
      id="fileInput"
      (change)="onFileSelect($event)"
      accept=".xlsx, .xls"
      class="form-control"
      required
    />
    <task-vote-sort (sortChanged)="service.orderKey.next($event); filter()" [selectedValue]="service.orderKey.value"></task-vote-sort>
    <div (click)="$event.stopImmediatePropagation(); showFilters = true" class="img relative pointer">
      <img alt="" class="convert-image-color" src="assets/images/icons/filters.svg">
      <div (click)="$event.stopImmediatePropagation()" *ngIf="showFilters" class="filters-menu bg-white p-1 rounded"
           magicScroll="">
        <div *ngFor="let filter of filtersArray" class="menu-item">
          <mat-checkbox
            (change)="unCheck(filter)"
            [checked]="visibleFilters[filter]"
            [indeterminate]="false"
            [labelPosition]="'after'"
            color="primary">
            {{filter | translate}}
          </mat-checkbox>
        </div>
      </div>
    </div>
  </div>
</div>
