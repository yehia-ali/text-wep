<layout-with-filters [meta]="meta" (pageChange)="changePage($event)" (limitChanged)="limitChanged($event)" [admin]="true" [limit]="service.limit.value">
  <ng-container filters>
    <users-attendance-filter (export)="exportToExcel()"/>
  </ng-container>
  <ng-container content>
    <table *ngIf="reports && reports.length > 0 && !loading" class="table" id="attendance">
      <thead class="bg-gray border-bottom">
      <tr>
        <th>#</th>
        <th>{{'employee_id' | translate}}</th>
        <th class="text-left pl-4">{{'user' | translate}}</th>
        <th class="text-left">{{'department' | translate}}</th>
        <th>{{'manager' | translate}}</th>
        <th class="text-left">{{'date_time' | translate}}</th>
        <th>{{'location' | translate}}</th>
        <th>{{'mac_address' | translate}}</th>
        <!-- <th></th> -->
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let report of reports | paginate: {itemsPerPage: meta?.pageSize, currentPage: meta?.currentPage, totalItems: meta?.totalItems}; trackBy: trackBy" class="border-bottom">
        <td>{{report.id}}</td>
        <td>{{report.employeeId}}</td>
        <td>
          <div class="flex aic text-left pl-3">
            <user-image [img]="report.employeePhoto" [id]="report.employeeId"></user-image>
            <div class="end ml-1">
              <p class="line-height">{{report.employeeName}}</p>
              <p class="muted fs-13">{{report.employeeJobTitle}}</p>
            </div>
          </div>
        </td>
        <td class="text-left">{{report.employeeDepartmentName}}</td>
        <td>{{report.employeeManagerName || '-'}}</td>
        <td>
          <div class="flex aic gap-x-1" style="width: 22rem">
            <div class="img">
              <img src="assets/images/icons/Checkin.svg" alt="checkin icon" *ngIf="report.status == 1">
              <img src="assets/images/icons/Checkout.svg" alt="checkout icon" *ngIf="report.status == 2">
            </div>
            <p>{{report.creationDate | arabicDate:'withTime'}}</p>
          </div>
        </td>
        <td class="text-left">
          <div class="primary pointer" (click)="getLocation(report)">
            <p>{{report.address || '-'}}</p>
          </div>
        </td>
        <td>
          <div class="flex-center">
            {{report.macAddress ? report.macAddress : '-'}}
          </div>
        </td>
      </tr>
      </tbody>
    </table>
    <not-found *ngIf="reports && reports.length == 0 && !loading"></not-found>
    <loading *ngIf="loading"></loading>
  </ng-container>
</layout-with-filters>

<ng-template #dialogTemplate>

  <div class="dir">
    <div class="flex w-100 jcsb">
      <h4>{{'add_reward' | translate}}</h4>
      <i class="bx bx-x fs-25 danger pointer p-1" (click)="closeDialog()"></i>
    </div>
    <mat-dialog-content>
        <div class="flex-grid gap-y-2">
          <div class="col-lg-12">
            <div class="name">
              <input-label key="amount" />
              <input class="input" [owlDateTime]="dt1" [owlDateTimeTrigger]="dt1" placeholder="Select Date" [(ngModel)]="selectedAttendance.creationDate" (dateTimeChange)="onDateChange($event)">
              <owl-date-time #dt1></owl-date-time>
            </div>
          </div>
        </div>
    </mat-dialog-content>
    <mat-dialog-actions>
      <div class="text-right w-100">
        <a (click)="updateAttendance()" style="display: inline-block;" class="btn rounded bg-primary white py-75 px-1 fs-14 ">
          {{'save' | translate}}
        </a>
      </div>
    </mat-dialog-actions>
  </div>
</ng-template>
