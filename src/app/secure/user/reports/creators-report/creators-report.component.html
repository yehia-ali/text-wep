<layout-with-filters [meta]="meta" (pageChange)="changePage($event)" [admin]="true" (limitChanged)="limitChanged($event)" [limit]="service.limit.value">
    <ng-container filters>
        <reports-filter (export)="exportToExcel()" [service]="service"/>
    </ng-container>
    <ng-container content>
        <table *ngIf="reports && reports.length > 0 && !loading" class="table" id="creators">
            <thead class="bg-gray border-bottom">
            <tr>
                <th>#</th>
                <th class="text-left w-auto">{{'user' | translate}}</th>
                <th class="text-left">{{'job_title' | translate}}</th>
                <th class="text-left">{{'department' | translate}}</th>
                <th class="bg-light-success-1">
                    <div class="flex-center">
                        <p class="mr-50">{{'total_tasks' | translate}}</p>
                        <sorting (up)="sort('1', $event)" (down)="sort('1', $event)"></sorting>
                    </div>
                </th>
                <th>
                    <div class="flex-center">
                        <p class="mr-50">{{'repeated' | translate}}</p>
                        <sorting (up)="sort('2', $event)" (down)="sort('2', $event)"></sorting>
                    </div>
                </th>
                <th>%</th>
                <th>
                    <div class="flex-center">
                        <p class="mr-50">{{'t_new' | translate}}</p>
                        <sorting (up)="sort('4', $event)" (down)="sort('4', $event)"></sorting>
                    </div>
                </th>
                <th class="bg-light-primary-1">
                    <div class="flex-center">
                        <p class="mr-50">{{'new_repeated' | translate}}</p>
                        <sorting (up)="sort('3', $event)" (down)="sort('3', $event)"></sorting>
                    </div>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr
                    *ngFor="let item of reports | paginate: {itemsPerPage: meta.pageSize, currentPage: meta.currentPage, totalItems: meta.totalItems}; trackBy: trackBy"
                    class="border-bottom">
                <td>{{item.id}}</td>
                <td class="text-left">
                    <div class="flex aic gap-x-1">
                      <app-img-title [imgSrc]="item.imageUrl" [title]="item.name" [subTitle]="item.jobTitle"  [userId]="item.id"/>
                    </div>
                </td>
                <td class="text-left">{{item.jobTitle}}</td>
                <td class="text-left">{{item.departmentName}}</td>
                <td class="bg-light-success-1">
                    <div>{{item.totalCount}}</div>
                </td>
                <td>
                    <div>{{item.repeatedCount}}</div>
                </td>
                <td>
                    <div>{{item.repeatedPercentage.toFixed()}}%</div>
                </td>
                <td>
                    <div>{{item.unRepeatedCount}}</div>
                </td>
                <td class="bg-light-primary-1" style="width: 19rem">
                    <div>{{item.parentRepeatedCount}}</div>
                </td>
            </tr>
            </tbody>
        </table>
        <not-found *ngIf="reports && reports.length == 0 && !loading"></not-found>
        <loading *ngIf="loading"></loading>
    </ng-container>
</layout-with-filters>
