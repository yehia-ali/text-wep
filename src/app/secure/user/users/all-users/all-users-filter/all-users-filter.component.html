<div class="filters flex aic jcsb gap-x-4">
  <div class="flex-wrap aic gap-x-1 gap-y-1">
    <search (valueChanged)="service.search.next($event); filter()" [key]="service.search.value"/>
    <departments (valueChanged)="service.department.next($event); filter()" *ngIf="visibleFilters.departments" [selectedDepartment]="service.department.value"/>
    <assignee-state (valueChanged)="service.assigneeState.next($event); filter()" *ngIf="visibleFilters.assignee_state" [selectedValue]="service.assigneeState.value"/>
    <!-- <user-role (valueChanged)="service.role.next($event); filter()" *ngIf="visibleFilters.role" [selectedValue]="service.role.value"/> -->
    <date-filter (valueChanged)="service.dateFrom.next($event); service.dateTo.next(''); filter()" *ngIf="visibleFilters.date" [selectedValue]="service.dateFrom.value" key="start_date"/>
    <date-filter (valueChanged)="service.dateTo.next($event); filter()" *ngIf="visibleFilters.date" [minDate]="service.dateFrom.value" [selectedValue]="service.dateTo.value"
                 key="end_date"/>
    <select-user class="no-label" *ngIf="visibleFilters.managers" (getSelectedUsers)="service.managers.next($event); filter()" text="managers" [selectedUsers]="service.managers.value"/>
  </div>
  <div class="end flex aic gap-x-2 pt-75">

    <button mat-raised-button [ngClass]="{'bg-primary white': service.selectedUsersToAddRoleValue.length > 0}" (click)="setRoles()" [disabled]="service.selectedUsersToAddRoleValue.length == 0">
      {{'set_roles' | translate}} ({{service.selectedUsersToAddRoleValue.length}})
    </button>

    <button mat-raised-button class="bg-success export" (click)="export.emit()">{{'export' | translate}}</button>

    <div (click)="$event.stopImmediatePropagation(); showFilters = true" class="img relative pointer">
      <img alt="" class="convert-image-color" src="assets/images/icons/filters.svg">
      <div (click)="$event.stopImmediatePropagation()" *ngIf="showFilters" class="filters-menu bg-white p-1 rounded"
           magicScroll="">
        <div *ngFor="let filter of filtersArray" class="menu-item">
          <mat-checkbox
            (change)="unCheck(filter)"
            [checked]="visibleFilters[filter]"
            [indeterminate]="false"
            [labelPosition]="'after'"
            color="primary">
            {{filter | translate}}
          </mat-checkbox>
        </div>
      </div>
    </div>
  </div>
</div>
